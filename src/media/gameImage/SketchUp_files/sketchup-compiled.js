'use strict';var k,goog=goog||{},l=this;function n(a){return void 0!==a}function aa(){}
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function p(a){return"array"==ba(a)}function ca(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function da(a){return"number"==typeof a}function ea(a){return"function"==ba(a)}function fa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a[ia]||(a[ia]=++ja)}var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;
function ka(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:ma;return r.apply(null,arguments)}
function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};function t(a,b){a=a.split(".");var c=l;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c[d]?c=c[d]:c=c[d]={}}
function u(a,b){function c(){}c.prototype=b.prototype;a.N=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ve=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}}t("warehouse.BackendClass",{ENTITY:"entity",COLLECTION:"collection",USER:"user",MATERIAL:"material",BOTH:"both",WHP_BOTH:"collectionorentity"});
t("warehouse.BinaryType",{SMALL_THUMBNAIL:"st",LARGE_THUMBNAIL:"lt",SMALL_THUMBNAIL_BOT:"bot_st",LARGE_THUMBNAIL_BOT:"bot_lt",SMALL_THUMBNAIL_CUSTOM:"custom_st",CATALOG_BANNER:"cbanner",AVATAR:"avatar",AVATAR_PREVIEW:"avatar_preview",STL:"stl",SWIVEL:"smontage",SWIVEL_BOT:"bot_smontage",SKP_UNKNOWN:"skp_unknown",SKETCHUP_5:"s",SKETCHUP_6:"s6",SKETCHUP_7:"s7",SKETCHUP_8:"s8",SKETCHUP_2013:"s13",SKETCHUP_2014:"s14",SKETCHUP_2015:"s15",SKETCHUP_2016:"s16",SKETCHUP_2017:"s17",SKETCHUP_2018:"s18",SKETCHUP_2019:"s19",
SERVER_GEN_KMZ:"ks",SKETCHUP_GEN_KMZ:"k2",COLLADA:"zip",SKM:"skm",FEATURED_LOGO:"featured_logo",USER_ANALYTICS_CSV:"user_analytics_csv",TEKLA_THUMBNAIL:"thumbnail_3d"});function pa(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function qa(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}}function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}u(ra,Error);
ra.prototype.name="CustomError";function sa(a){var b=a.length-4;return 0<=b&&a.indexOf("DESC",b)==b}function ta(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ua(a){return/^[\s\xa0]*$/.test(a)}function v(a){return ua(null==a?"":String(a))}var va=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function wa(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1}function xa(a){if(!ya.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(za,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Aa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ea,"&#0;"));return a}
var za=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,ya=/[\x00&<>"']/,Fa=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function w(a,b){a=n(void 0)?a.toFixed(void 0):String(a);var c=a.indexOf(".");-1==c&&(c=a.length);return Fa("0",Math.max(0,b-c))+a}
function Ga(a,b){var c=0;a=va(String(a)).split(".");b=va(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;!c&&e<d;e++){var f=a[e]||"",g=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;c=Ha(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Ha(0==f[2].length,0==g[2].length)||Ha(f[2],g[2]);f=f[3];g=g[3]}while(!c)}return c}function Ha(a,b){return a<b?-1:a>b?1:0}
function Ia(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ja(a){var b=q(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})}function Ka(a){isFinite(a)&&(a=String(a));return q(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN}
function La(a,b){b.unshift(a);ra.call(this,ta.apply(null,b));b.shift()}u(La,ra);La.prototype.name="AssertionError";function Ma(a,b){throw new La("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));}function Na(a,b,c){this.f=c;this.c=a;this.g=b;this.b=0;this.a=null}Na.prototype.get=function(){var a;0<this.b?(this.b--,a=this.a,this.a=a.next,a.next=null):a=this.c();return a};function Oa(a,b){a.g(b);a.b<a.f&&(a.b++,b.next=a.a,a.a=b)}
var Qa=new Na(function(){return new Pa},function(a){a.reset()},100);function Ra(){var a=Sa,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function Pa(){this.next=this.b=this.a=null}Pa.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};Pa.prototype.reset=function(){this.next=this.b=this.a=null};
var x=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ta=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ua=Array.prototype.reduce?function(a,b,c,d){d&&(b=r(b,d));return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c,d){var e=c;Ta(a,function(c,g){e=b.call(d,e,c,g,a)});return e},Va=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Wa(a,b){var c;a:{c=a.length;for(var d=q(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){c=e;break a}c=-1}return 0>c?null:q(a)?a.charAt(c):a[c]}
function Xa(a){if(!p(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ya(a,b){b=x(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function Za(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function $a(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ab(a,b,c,d){Array.prototype.splice.apply(a,bb(arguments,1))}
function bb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function cb(a){for(var b={},c=0,d=0;d<a.length;){var e=a[d++],f;f=e;f=fa(f)?"o"+ha(f):(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(b,f)||(b[f]=!0,a[c++]=e)}a.length=c}function db(a,b){return a>b?1:a<b?-1:0}function eb(a,b,c){var d;c=c||db;for(var e=0,f=a.length;e<f;){var g=e+f>>1,h;h=c(b,a[g]);0<h?e=g+1:(f=g,d=!h)}d=d?e:~e;0>d&&ab(a,-(d+1),0,b)}var z;
a:{var fb=l.navigator;if(fb){var gb=fb.userAgent;if(gb){z=gb;break a}}z=""}function A(a){return-1!=z.indexOf(a)}function hb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c}function ib(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function jb(a){var b=0,c;for(c in a)b++;return b}function kb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function lb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function mb(a,b){return!!a&&b in a}
function nb(a){var b={},c;for(c in a)b[c]=a[c];return b}var ob="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ob.length;f++)c=ob[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function qb(){return A("Trident")||A("MSIE")}function rb(){return(A("Chrome")||A("CriOS"))&&!A("Edge")}
function sb(){function a(a){a=Wa(a,d);return c[a]||""}var b=z;if(qb())return tb(b);var b=hb(b),c={};Ta(b,function(a){c[a[0]]=a[1]});var d=na(mb,c);return A("Opera")?a(["Version","Opera"]):A("Edge")?a(["Edge"]):rb()?a(["Chrome","CriOS"]):(b=b[2])&&b[1]||""}
function tb(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];return b}function ub(a){l.setTimeout(function(){throw a;},0)}var vb;
function wb(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!A("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=r(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!qb()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.ib;c.ib=null;a()}};return function(a){d.next={ib:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}}function xb(a,b){yb||zb();Ab||(yb(),Ab=!0);var c=Sa,d=Qa.get();d.set(a,b);c.b?c.b.next=d:c.a=d;c.b=d}var yb;
function zb(){var a=l.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);yb=function(){b.then(Bb)}}else yb=function(){var a=Bb;!ea(l.setImmediate)||l.Window&&l.Window.prototype&&!A("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(vb||(vb=wb()),"undefined"!==typeof vb&&vb(a)):l.setImmediate(a)}}var Ab=!1,Sa=new function(){this.b=this.a=null};function Bb(){for(var a;a=Ra();){try{a.a.call(a.b)}catch(b){ub(b)}Oa(Qa,a)}Ab=!1}
function B(a,b){this.a=Cb;this.i=void 0;this.c=this.b=this.f=null;this.g=this.l=!1;if(a!=aa)try{var c=this;a.call(b,function(a){Db(c,Eb,a)},function(a){try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}Db(c,Fb,a)})}catch(d){Db(this,Fb,d)}}var Cb=0,Eb=2,Fb=3;function Gb(){this.next=this.context=this.b=this.c=this.a=null;this.f=!1}Gb.prototype.reset=function(){this.context=this.b=this.c=this.a=null;this.f=!1};
var Hb=new Na(function(){return new Gb},function(a){a.reset()},100);function Ib(a,b,c){var d=Hb.get();d.c=a;d.b=b;d.context=c;return d}function C(a){if(a instanceof B)return a;var b=new B(aa);Db(b,Eb,a);return b}function D(a){return new B(function(b,c){c(a)})}B.prototype.then=function(a,b,c){return Jb(this,ea(a)?a:null,ea(b)?b:null,c)};pa(B);k=B.prototype;k.thenAlways=function(a,b){a=Ib(a,a,b);a.f=!0;Kb(this,a);return this};k.thenCatch=function(a,b){return Jb(this,null,a,b)};
function Kb(a,b){a.b||a.a!=Eb&&a.a!=Fb||Lb(a);a.c?a.c.next=b:a.b=b;a.c=b}function Jb(a,b,c,d){var e=Ib(null,null,null);e.a=new B(function(a,g){e.c=b?function(c){try{var e=b.call(d,c);a(e)}catch(y){g(y)}}:a;e.b=c?function(b){try{var e=c.call(d,b);a(e)}catch(y){g(y)}}:g});e.a.f=a;Kb(a,e);return e.a}k.Zd=function(a){this.a=Cb;Db(this,Eb,a)};k.$d=function(a){this.a=Cb;Db(this,Fb,a)};
function Db(a,b,c){if(a.a==Cb){a===c&&(b=Fb,c=new TypeError("Promise cannot resolve to itself"));a.a=1;var d;a:{var e=c,f=a.Zd,g=a.$d;if(e instanceof B)Kb(e,Ib(f||aa,g||null,a)),d=!0;else if(qa(e))e.then(f,g,a),d=!0;else{if(fa(e))try{var h=e.then;if(ea(h)){Mb(e,h,f,g,a);d=!0;break a}}catch(m){g.call(a,m);d=!0;break a}d=!1}}d||(a.i=c,a.a=b,a.f=null,Lb(a),b!=Fb||Nb(a,c))}}
function Mb(a,b,c,d,e){function f(a){h||(h=!0,d.call(e,a))}function g(a){h||(h=!0,c.call(e,a))}var h=!1;try{b.call(a,g,f)}catch(m){f(m)}}function Lb(a){a.l||(a.l=!0,xb(a.tc,a))}function Ob(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.c=null);return b}k.tc=function(){for(var a;a=Ob(this);){var b=this.a,c=this.i;if(b==Fb&&a.b&&!a.f){var d;for(d=this;d&&d.g;d=d.f)d.g=!1}if(a.a)a.a.f=null,Pb(a,b,c);else try{a.f?a.c.call(a.context):Pb(a,b,c)}catch(e){Qb.call(null,e)}Oa(Hb,a)}this.l=!1};
function Pb(a,b,c){b==Eb?a.c.call(a.context,c):a.b&&a.b.call(a.context,c)}function Nb(a,b){a.g=!0;xb(function(){a.g&&Qb.call(null,b)})}var Qb=ub;function Rb(){0!=Sb&&(Tb[ha(this)]=this);this.f=this.f;this.O=this.O}var Sb=0,Tb={};Rb.prototype.f=!1;Rb.prototype.ya=function(){if(!this.f&&(this.f=!0,this.A(),0!=Sb)){var a=ha(this);delete Tb[a]}};Rb.prototype.A=function(){if(this.O)for(;this.O.length;)this.O.shift()()};function Ub(a){Ub[" "](a);return a}Ub[" "]=aa;
function Vb(a,b){var c=Wb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)}var Xb=A("Opera"),Yb=qb(),Zb=A("Edge"),$b=A("Gecko")&&!(-1!=z.toLowerCase().indexOf("webkit")&&!A("Edge"))&&!(A("Trident")||A("MSIE"))&&!A("Edge"),ac=-1!=z.toLowerCase().indexOf("webkit")&&!A("Edge");function bc(){var a=l.document;return a?a.documentMode:void 0}var cc;
a:{var dc="",ec=function(){var a=z;if($b)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Zb)return/Edge\/([\d\.]+)/.exec(a);if(Yb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ac)return/WebKit\/(\S+)/.exec(a);if(Xb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();ec&&(dc=ec?ec[1]:"");if(Yb){var fc=bc();if(null!=fc&&fc>parseFloat(dc)){cc=String(fc);break a}}cc=dc}var Wb={};function gc(a){return Vb(a,function(){return 0<=Ga(cc,a)})}var hc,ic=l.document;
hc=ic&&Yb?bc()||("CSS1Compat"==ic.compatMode?parseInt(cc,10):5):void 0;var jc=!Yb||9<=Number(hc),kc=Yb&&!gc("9");function lc(a,b){this.type=a;this.a=this.target=b;this.Ab=!0}lc.prototype.b=function(){this.Ab=!1};
function mc(a,b){lc.call(this,a?a.type:"");this.a=this.target=null;this.clientY=this.clientX=0;this.c=null;if(a){this.type=a.type;var c=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.a=b;if((b=a.relatedTarget)&&$b)try{Ub(b.nodeName)}catch(d){}c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY);this.c=a;a.defaultPrevented&&
this.b()}}u(mc,lc);mc.prototype.b=function(){mc.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var nc="closure_listenable_"+(1E6*Math.random()|0);function oc(a){return!(!a||!a[nc])}var pc=0;function qc(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.ua=!!d;this.Fa=e;this.key=++pc;this.X=this.ta=!1}
function rc(a){a.X=!0;a.listener=null;a.a=null;a.src=null;a.Fa=null}function sc(a){this.src=a;this.a={};this.b=0}function tc(a,b,c,d,e,f){var g=b.toString();(b=a.a[g])||(b=a.a[g]=[],a.b++);var h=uc(b,c,e,f);-1<h?(a=b[h],d||(a.ta=!1)):(a=new qc(c,a.src,g,!!e,f),a.ta=d,b.push(a));return a}function vc(a,b){var c=b.type;c in a.a&&Ya(a.a[c],b)&&(rc(b),a.a[c].length||(delete a.a[c],a.b--))}
sc.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,rc(d[e]);delete this.a[c];this.b--}return b};function wc(a,b,c,d,e){a=a.a[b.toString()];b=-1;a&&(b=uc(a,c,d,e));return-1<b?a[b]:null}function uc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.X&&f.listener==b&&f.ua==!!c&&f.Fa==d)return e}return-1}var xc="closure_lm_"+(1E6*Math.random()|0),yc={},zc=0;
function Ac(a,b,c,d,e){if(p(b)){for(var f=0;f<b.length;f++)Ac(a,b[f],c,d,e);return null}c=Bc(c);return oc(a)?a.Za(b,c,d,e):Cc(a,b,c,!1,d,e)}
function Cc(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,h=Dc(a);h||(a[xc]=h=new sc(a));c=tc(h,b,c,d,e,f);if(c.a)return c;d=Ec();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,g);else if(a.attachEvent)a.attachEvent(Fc(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");zc++;return c}
function Ec(){var a=Gc,b=jc?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Hc(a,b,c,d,e){if(p(b))for(var f=0;f<b.length;f++)Hc(a,b[f],c,d,e);else c=Bc(c),oc(a)?tc(a.b,String(b),c,!0,d,e):Cc(a,b,c,!0,d,e)}function Ic(a,b,c,d,e){if(p(b))for(var f=0;f<b.length;f++)Ic(a,b[f],c,d,e);else c=Bc(c),oc(a)?a.pa(b,c,d,e):a&&(a=Dc(a))&&(b=wc(a,b,c,!!d,e))&&Jc(b)}
function Jc(a){if(!da(a)&&a&&!a.X){var b=a.src;if(oc(b))vc(b.b,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.ua):b.detachEvent&&b.detachEvent(Fc(c),d);zc--;(c=Dc(b))?(vc(c,a),c.b||(c.src=null,b[xc]=null)):rc(a)}}}function Fc(a){return a in yc?yc[a]:yc[a]="on"+a}function Kc(a,b,c,d){var e=!0;if(a=Dc(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.ua==c&&!f.X&&(f=Lc(f,d),e=e&&!1!==f)}return e}
function Lc(a,b){var c=a.listener,d=a.Fa||a.src;a.ta&&Jc(a);return c.call(d,b)}
function Gc(a,b){if(a.X)return!0;if(!jc){if(!b)a:{b=["window","event"];for(var c=l,d;d=b.shift();)if(null!=c[d])c=c[d];else{b=null;break a}b=c}d=b;b=new mc(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(!d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.a;e;e=e.parentNode)d.push(e);e=a.type;for(a=d.length-1;0<=a;a--){b.a=d[a];var f=Kc(d[a],e,!0,b),c=c&&f}for(a=0;a<d.length;a++)b.a=d[a],f=Kc(d[a],e,!1,b),c=c&&f}return c}return Lc(a,
new mc(b,this))}function Dc(a){a=a[xc];return a instanceof sc?a:null}var Mc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Bc(a){if(ea(a))return a;a[Mc]||(a[Mc]=function(b){return a.handleEvent(b)});return a[Mc]}function Nc(){Rb.call(this);this.b=new sc(this);this.Tb=this;this.La=null}u(Nc,Rb);Nc.prototype[nc]=!0;k=Nc.prototype;k.removeEventListener=function(a,b,c,d){Ic(this,a,b,c,d)};
function E(a,b){var c,d=a.La;if(d)for(c=[];d;d=d.La)c.push(d);d=a.Tb;a=b;b=a.type||a;if(q(a))a=new lc(a,d);else if(a instanceof lc)a.target=a.target||d;else{var e=a;a=new lc(b,d);pb(a,e)}var e=!0,f;if(c)for(var g=c.length-1;0<=g;g--)f=a.a=c[g],e=Oc(f,b,!0,a)&&e;f=a.a=d;e=Oc(f,b,!0,a)&&e;e=Oc(f,b,!1,a)&&e;if(c)for(g=0;g<c.length;g++)f=a.a=c[g],e=Oc(f,b,!1,a)&&e}k.A=function(){Nc.N.A.call(this);this.removeAllListeners();this.La=null};k.Za=function(a,b,c,d){return tc(this.b,String(a),b,!1,c,d)};
k.pa=function(a,b,c,d){var e;e=this.b;a=String(a).toString();if(a in e.a){var f=e.a[a];b=uc(f,b,c,d);-1<b?(rc(f[b]),Array.prototype.splice.call(f,b,1),f.length||(delete e.a[a],e.b--),e=!0):e=!1}else e=!1;return e};k.removeAllListeners=function(a){return this.b?this.b.removeAll(a):0};
function Oc(a,b,c,d){b=a.b.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.X&&g.ua==c){var h=g.listener,m=g.Fa||g.src;g.ta&&vc(a.b,g);e=!1!==h.call(m,d)&&e}}return e&&0!=d.Ab}function Pc(a,b,c){if(ea(a))c&&(a=r(a,c));else if(a&&"function"==typeof a.handleEvent)a=r(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)}function Qc(a){Rb.call(this);this.b=a;this.a={}}u(Qc,Rb);var Rc=[];k=Qc.prototype;
k.Za=function(a,b,c,d){p(b)||(b&&(Rc[0]=b.toString()),b=Rc);for(var e=0;e<b.length;e++){var f=Ac(a,b[e],c||this.handleEvent,d||!1,this.b||this);if(!f)break;this.a[f.key]=f}return this};k.pa=function(a,b,c,d,e){if(p(b))for(var f=0;f<b.length;f++)this.pa(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.b||this,c=Bc(c),d=!!d,(b=oc(a)?wc(a.b,String(b),c,d,e):a?(a=Dc(a))?wc(a,b,c,d,e):null:null)&&(Jc(b),delete this.a[b.key]);return this};
k.removeAll=function(){ib(this.a,function(a,b){this.a.hasOwnProperty(b)&&Jc(a)},this);this.a={}};k.A=function(){Qc.N.A.call(this);this.removeAll()};k.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Sc(a){if(a.v&&"function"==typeof a.v)return a.v();if(q(a))return a.split("");if(ca(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return kb(a)}
function Tc(a){if(a.B&&"function"==typeof a.B)return a.B();if(!a.v||"function"!=typeof a.v){if(ca(a)||q(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return lb(a)}}function Uc(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(ca(a)||q(a))Ta(a,b,void 0);else for(var c=Tc(a),d=Sc(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}
function Vc(a,b){this.b={};this.a=[];this.f=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Vc?(c=a.B(),d=a.v()):(c=lb(a),d=kb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}k=Vc.prototype;k.u=function(){return this.c};k.v=function(){Wc(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};k.B=function(){Wc(this);return this.a.concat()};
k.isEmpty=function(){return!this.c};k.clear=function(){this.b={};this.f=this.c=this.a.length=0};function Xc(a,b){return Yc(a.b,b)?(delete a.b[b],a.c--,a.f++,a.a.length>2*a.c&&Wc(a),!0):!1}function Wc(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Yc(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Yc(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}k.get=function(a,b){return Yc(this.b,a)?this.b[a]:b};
k.set=function(a,b){Yc(this.b,a)||(this.c++,this.a.push(a),this.f++);this.b[a]=b};k.forEach=function(a,b){for(var c=this.B(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};k.clone=function(){return new Vc(this)};function Yc(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function Zc(a){this.a=new Vc;if(a){a=Sc(a);for(var b=a.length,c=0;c<b;c++){var d=a[c];this.a.set($c(d),d)}}}function $c(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ha(a):b.substr(0,1)+a}k=Zc.prototype;
k.u=function(){return this.a.u()};k.removeAll=function(a){a=Sc(a);for(var b=a.length,c=0;c<b;c++)Xc(this.a,$c(a[c]))};k.clear=function(){this.a.clear()};k.isEmpty=function(){return this.a.isEmpty()};k.contains=function(a){a=$c(a);return Yc(this.a.b,a)};k.v=function(){return this.a.v()};k.clone=function(){return new Zc(this)};function ad(a,b,c,d,e){this.reset(a,b,c,d,e)}ad.prototype.a=null;var bd=0;ad.prototype.reset=function(a,b,c,d,e){"number"==typeof e||bd++;d||oa();this.b=b;delete this.a};
function cd(a){this.f=a;this.b=this.c=this.a=null}function dd(a,b){this.name=a;this.value=b}dd.prototype.toString=function(){return this.name};var ed=new dd("SEVERE",1E3),fd=new dd("CONFIG",700),gd=new dd("FINE",500);function hd(a){if(a.c)return a.c;if(a.a)return hd(a.a);Ma("Root logger has no level set.");return null}
cd.prototype.log=function(a,b,c){if(a.value>=hd(this).value)for(ea(b)&&(b=b()),a=new ad(a,String(b),this.f),c&&(a.a=c),c="log:"+a.b,l.console&&(l.console.timeStamp?l.console.timeStamp(c):l.console.markTimeline&&l.console.markTimeline(c)),l.msWriteProfilerMark&&l.msWriteProfilerMark(c),c=this;c;)c=c.a};cd.prototype.config=function(a,b){this.log(fd,a,b)};var id={},jd=null;
function kd(a){jd||(jd=new cd(""),id[""]=jd,jd.c=fd);var b;if(!(b=id[a])){b=new cd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=kd(a.substr(0,c));c.b||(c.b={});c.b[d]=b;b.a=c;id[a]=b}return b}function F(a,b){a&&a.log(gd,b,void 0)}var ld=l.JSON.parse,md=l.JSON.stringify;function nd(){}function od(a,b){var c=[];pd(a,b,c);return c.join("")}
function pd(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(p(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),pd(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),qd(d,c),c.push(":"),pd(a,f,c),e=","));c.push("}");return}}switch(typeof b){case "string":qd(b,c);break;case "number":c.push(isFinite(b)&&
!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var rd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},sd=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function qd(a,b){b.push('"',a.replace(sd,function(a){var b=rd[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),rd[a]=b);return b}),'"')}function td(){}td.prototype.a=null;function ud(a){var b;(b=a.a)||(b={},vd(a)&&(b[0]=!0,b[1]=!0),b=a.a=b);return b}var wd;function xd(){}u(xd,td);function yd(a){return(a=vd(a))?new ActiveXObject(a):new XMLHttpRequest}
function vd(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b}wd=new xd;var zd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
function Ad(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e,f=null;0<=d?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c];b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}function Bd(a){Nc.call(this);this.headers=new Vc;this.T=a||null;this.a=!1;this.Z=this.j=null;this.cb=this.L="";this.l=0;this.i="";this.c=this.Ka=this.D=this.aa=!1;this.g=0;this.P=null;this.m=Cd;this.Y=this.V=!1}u(Bd,Nc);var Cd="",Dd=Bd.prototype,Ed=kd("goog.net.XhrIo");Dd.C=Ed;
var Fd=/^https?$/i,Gd=["POST","PUT"];k=Bd.prototype;k.vb=function(){return this.m};k.xb=function(){return this.V};
k.send=function(a,b,c,d){if(this.j)throw Error("[goog.net.XhrIo] Object is active with another request="+this.L+"; newUri="+a);b=b?b.toUpperCase():"GET";this.L=a;this.i="";this.l=0;this.cb=b;this.aa=!1;this.a=!0;this.j=this.T?yd(this.T):yd(wd);this.Z=this.T?ud(this.T):ud(wd);this.j.onreadystatechange=r(this.yb,this);try{F(this.C,Hd(this,"Opening Xhr")),this.Ka=!0,this.j.open(b,String(a),!0),this.Ka=!1}catch(f){F(this.C,Hd(this,"Error opening Xhr: "+f.message));Id(this,f);return}a=c||"";var e=this.headers.clone();
d&&Uc(d,function(a,b){e.set(b,a)});d=Wa(e.B(),Jd);c=l.FormData&&a instanceof l.FormData;!(0<=x(Gd,b))||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");e.forEach(function(a,b){this.j.setRequestHeader(b,a)},this);this.m&&(this.j.responseType=this.m);"withCredentials"in this.j&&this.j.withCredentials!==this.V&&(this.j.withCredentials=this.V);try{Kd(this),0<this.g&&(this.Y=Ld(this.j),F(this.C,Hd(this,"Will abort after "+this.g+"ms if incomplete, xhr2 "+this.Y)),this.Y?(this.j.timeout=
this.g,this.j.ontimeout=r(this.Kb,this)):this.P=Pc(this.Kb,this.g,this)),F(this.C,Hd(this,"Sending request")),this.D=!0,this.j.send(a),this.D=!1}catch(f){F(this.C,Hd(this,"Send error: "+f.message)),Id(this,f)}};function Ld(a){return Yb&&gc(9)&&da(a.timeout)&&n(a.ontimeout)}function Jd(a){return"content-type"==a.toLowerCase()}k.Kb=function(){"undefined"!=typeof goog&&this.j&&(this.i="Timed out after "+this.g+"ms, aborting",this.l=8,F(this.C,Hd(this,this.i)),E(this,"timeout"),this.abort(8))};
function Id(a,b){a.a=!1;a.j&&(a.c=!0,a.j.abort(),a.c=!1);a.i=b;a.l=5;Md(a);Nd(a)}function Md(a){a.aa||(a.aa=!0,E(a,"complete"),E(a,"error"))}k.abort=function(a){this.j&&this.a&&(F(this.C,Hd(this,"Aborting")),this.a=!1,this.c=!0,this.j.abort(),this.c=!1,this.l=a||7,E(this,"complete"),E(this,"abort"),Nd(this))};k.A=function(){this.j&&(this.a&&(this.a=!1,this.c=!0,this.j.abort(),this.c=!1),Nd(this,!0));Bd.N.A.call(this)};k.yb=function(){this.f||(this.Ka||this.D||this.c?Od(this):this.Ed())};k.Ed=function(){Od(this)};
function Od(a){if(a.a&&"undefined"!=typeof goog)if(a.Z[1]&&4==Pd(a)&&2==a.getStatus())F(a.C,Hd(a,"Local request error detected and ignored"));else if(a.D&&4==Pd(a))Pc(a.yb,0,a);else if(E(a,"readystatechange"),4==Pd(a)){F(a.C,Hd(a,"Request complete"));a.a=!1;try{if(Qd(a))E(a,"complete"),E(a,"success");else{a.l=6;var b;try{b=2<Pd(a)?a.j.statusText:""}catch(c){F(a.C,"Can not get status: "+c.message),b=""}a.i=b+" ["+a.getStatus()+"]";Md(a)}}finally{Nd(a)}}}
function Nd(a,b){if(a.j){Kd(a);var c=a.j,d=a.Z[0]?aa:null;a.j=null;a.Z=null;b||E(a,"ready");try{c.onreadystatechange=d}catch(e){(c=a.C)&&c.log(ed,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Kd(a){a.j&&a.Y&&(a.j.ontimeout=null);da(a.P)&&(l.clearTimeout(a.P),a.P=null)}
function Qd(a){var b=a.getStatus(),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=!b)a=String(a.L).match(zd)[1]||null,!a&&l.self&&l.self.location&&(a=l.self.location.protocol,a=a.substr(0,a.length-1)),b=!Fd.test(a?a.toLowerCase():"");c=b}return c}function Pd(a){return a.j?a.j.readyState:0}k.getStatus=function(){try{return 2<Pd(this)?this.j.status:-1}catch(a){return-1}};function Rd(a){if(a.j)return ld(a.j.responseText)}
k.getResponseHeader=function(a){return this.j&&4==Pd(this)?this.j.getResponseHeader(a):void 0};function Hd(a,b){return b+" ["+a.cb+" "+a.L+" "+a.getStatus()+"]"}function Sd(a,b){this.c=[];this.O=b||null;this.a=this.l=!1;this.b=void 0;this.D=this.g=!1;this.f=0;this.i=null;this.L=0}Sd.prototype.m=function(a,b){this.g=!1;this.l=!0;this.b=b;this.a=!a;Td(this)};function Ud(a,b,c){a.c.push([b,c,void 0]);a.l&&Td(a)}
Sd.prototype.then=function(a,b,c){var d,e,f=new B(function(a,b){d=a;e=b});Ud(this,d,function(a){e(a)});return f.then(a,b,c)};pa(Sd);function Vd(a){return Va(a.c,function(a){return ea(a[1])})}
function Td(a){if(a.f&&a.l&&Vd(a)){var b=a.f,c=Wd[b];c&&(l.clearTimeout(c.a),delete Wd[b]);a.f=0}a.i&&(a.i.L--,delete a.i);for(var b=a.b,d=c=!1;a.c.length&&!a.g;){var e=a.c.shift(),f=e[0],g=e[1],e=e[2];if(f=a.a?g:f)try{var h=f.call(e||a.O,b);n(h)&&(a.a=a.a&&(h==b||h instanceof Error),a.b=b=h);if(qa(b)||"function"===typeof l.Promise&&b instanceof l.Promise)d=!0,a.g=!0}catch(m){b=m,a.a=!0,Vd(a)||(c=!0)}}a.b=b;d&&(h=r(a.m,a,!0),d=r(a.m,a,!1),b instanceof Sd?(Ud(b,h,d),b.D=!0):b.then(h,d));c&&(b=new Xd(b),
Wd[b.a]=b,a.f=b.a)}function Xd(a){this.a=l.setTimeout(r(this.c,this),0);this.b=a}Xd.prototype.c=function(){delete Wd[this.a];throw this.b;};var Wd={},Yd=!Yb||9<=Number(hc);function Zd(a,b){this.width=a;this.height=b}k=Zd.prototype;k.clone=function(){return new Zd(this.width,this.height)};k.toString=function(){return"("+this.width+" x "+this.height+")"};k.kc=function(){return this.width*this.height};k.isEmpty=function(){return!this.kc()};
k.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};k.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};k.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
function $d(a,b){ib(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:ae.hasOwnProperty(d)?a.setAttribute(ae[d],b):d.lastIndexOf("aria-",0)&&d.lastIndexOf("data-",0)?a[d]=b:a.setAttribute(d,b)})}var ae={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function be(a,b,c){var d=arguments,e=document,f=String(d[0]),g=d[1];if(!Yd&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',xa(g.name),'"');if(g.type){f.push(' type="',xa(g.type),'"');var h={};pb(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=e.createElement(f);g&&(q(g)?f.className=g:p(g)?f.className=g.join(" "):$d(f,g));2<d.length&&ce(e,f,d);return f}
function ce(a,b,c){function d(c){c&&b.appendChild(q(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!ca(f)||fa(f)&&0<f.nodeType?d(f):Ta(de(f)?$a(f):f,d)}}function de(a){if(a&&"number"==typeof a.length){if(fa(a))return"function"==typeof a.item||"string"==typeof a.item;if(ea(a))return"function"==typeof a.item}return!1}
var ee=A("Safari")&&!(rb()||A("Coast")||A("Opera")||A("Edge")||A("Silk")||A("Android"))&&!(A("iPhone")&&!A("iPod")&&!A("iPad")||A("iPad")||A("iPod")),fe={Sb:["BC","AD"],Rb:["Before Christ","Anno Domini"],Vb:"JFMAMJJASOND".split(""),ac:"JFMAMJJASOND".split(""),Ub:"January February March April May June July August September October November December".split(" "),$b:"January February March April May June July August September October November December".split(" "),Xb:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
cc:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),fc:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ec:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Zb:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dc:"Sun Mon Tue Wed Thu Fri Sat".split(" "),c:"SMTWTFS".split(""),bc:"SMTWTFS".split(""),Yb:["Q1","Q2","Q3","Q4"],Wb:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Pb:["AM","PM"],a:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],f:["h:mm:ss a zzzz",
"h:mm:ss a z","h:mm:ss a","h:mm a"],b:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],eb:6,g:[5,6],fb:5},ge=fe,ge=fe;function he(a,b,c){da(a)?(this.a=ie(a,b||0,c||1),je(this,c||1)):fa(a)?(this.a=ie(a.getFullYear(),a.getMonth(),a.getDate()),je(this,a.getDate())):(this.a=new Date(oa()),a=this.a.getDate(),this.a.setHours(0),this.a.setMinutes(0),this.a.setSeconds(0),this.a.setMilliseconds(0),je(this,a))}
function ie(a,b,c){b=new Date(a,b,c);0<=a&&100>a&&b.setFullYear(b.getFullYear()-1900);return b}k=he.prototype;k.za=ge.eb;k.Aa=ge.fb;k.clone=function(){var a=new he(this.a);a.za=this.za;a.Aa=this.Aa;return a};k.getFullYear=function(){return this.a.getFullYear()};k.getMonth=function(){return this.a.getMonth()};k.getDate=function(){return this.a.getDate()};k.getTime=function(){return this.a.getTime()};k.getDay=function(){return this.a.getDay()};k.getUTCFullYear=function(){return this.a.getUTCFullYear()};
k.getUTCMonth=function(){return this.a.getUTCMonth()};k.getUTCDate=function(){return this.a.getUTCDate()};k.getUTCHours=function(){return this.a.getUTCHours()};k.getUTCMinutes=function(){return this.a.getUTCMinutes()};k.getTimezoneOffset=function(){return this.a.getTimezoneOffset()};function ke(a){if(a=a.getTimezoneOffset()){var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c);a=(0<a?"-":"+")+w(c,2)+":"+w(b,2)}else a="Z";return a}k.set=function(a){this.a=new Date(a.getFullYear(),a.getMonth(),a.getDate())};
k.Ea=function(a,b){return[this.getFullYear(),w(this.getMonth()+1,2),w(this.getDate(),2)].join(a?"-":"")+(b?ke(this):"")};k.toString=function(){return this.Ea()};function je(a,b){a.getDate()!=b&&a.a.setUTCHours(a.a.getUTCHours()+(a.getDate()<b?1:-1))}k.valueOf=function(){return this.a.valueOf()};function le(a,b,c,d,e,f,g){this.a=da(a)?new Date(a,b||0,c||1,d||0,e||0,f||0,g||0):new Date(a&&a.getTime?a.getTime():oa())}u(le,he);k=le.prototype;k.getHours=function(){return this.a.getHours()};
k.getMinutes=function(){return this.a.getMinutes()};k.getSeconds=function(){return this.a.getSeconds()};k.getUTCHours=function(){return this.a.getUTCHours()};k.getUTCMinutes=function(){return this.a.getUTCMinutes()};k.getUTCSeconds=function(){return this.a.getUTCSeconds()};k.getUTCMilliseconds=function(){return this.a.getUTCMilliseconds()};
k.Ea=function(a,b){var c=he.prototype.Ea.call(this,a);return a?c+" "+w(this.getHours(),2)+":"+w(this.getMinutes(),2)+":"+w(this.getSeconds(),2)+(b?ke(this):""):c+"T"+w(this.getHours(),2)+w(this.getMinutes(),2)+w(this.getSeconds(),2)+(b?ke(this):"")};k.toString=function(){return this.Ea()};k.clone=function(){var a=new le(this.a);a.za=this.za;a.Aa=this.Aa;return a};function me(){}
function ne(a){if("number"==typeof a){var b=new me;b.c=a;var c;if(c=a){var d=["Etc/GMT",0>c?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);(c%=60)&&d.push(":",w(c,2));c=d.join("")}else c="Etc/GMT";b.f=c;(c=a)?(d=["UTC",0>c?"+":"-"],c=Math.abs(c),d.push(Math.floor(c/60)%100),(c%=60)&&d.push(":",c),c=d.join("")):c="UTC";a=oe(a);b.g=[c,c];b.a={Pe:a,gb:a};b.b=[];return b}b=new me;b.f=a.id;b.c=-a.std_offset;b.g=a.names;b.a=a.names_ext;b.b=a.transitions;return b}
function oe(a){var b=["GMT"];b.push(0>=a?"+":"-");a=Math.abs(a);b.push(w(Math.floor(a/60)%100,2),":",w(a%60,2));return b.join("")}function pe(a,b){b=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5;for(var c=0;c<a.b.length&&b>=a.b[c];)c+=2;return c?a.b[c-1]:0}
function qe(){this.b=[];this.a=ge;var a="yyyy-MM-dd HH:mm:ss.SSS";for(re&&(a=a.replace(/\u200f/g,""));a;){for(var b=a,c=0;c<se.length;++c){var d=a.match(se[c]);if(d){var e=d[0],a=a.substring(e.length);c||("''"==e?e="'":(e=e.substring(1,"'"==d[1]?e.length-1:e.length),e=e.replace(/\'\'/g,"'")));this.b.push({text:e,type:c});break}}if(b===a)throw Error("Malformed pattern part: "+a);}}var se=[/^\'(?:[^\']|\'\')*(\'|$)/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|V+|w+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvVwzZ]+/];
function te(a){return a.getHours?a.getHours():0}function G(a,b){b=String(b);a=a.a||ge;if(void 0!==a.gc){for(var c=[],d=0;d<b.length;d++){var e=b.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(a.gc+e-48):b.charAt(d))}b=c.join("")}return b}var re=!1;function ue(a){if(!(a.getHours&&a.getSeconds&&a.getMinutes))throw Error("The date to format has no time (probably a goog.date.Date). Use Date or goog.date.DateTime, or use a pattern without time fields.");}
function ve(a,b,c,d,e){var f=b.length;switch(b.charAt(0)){case "G":return c=0<d.getFullYear()?1:0,4<=f?a.a.Rb[c]:a.a.Sb[c];case "y":return c=d.getFullYear(),0>c&&(c=-c),2==f&&(c%=100),G(a,w(c,f));case "M":a:switch(c=d.getMonth(),f){case 5:f=a.a.Vb[c];break a;case 4:f=a.a.Ub[c];break a;case 3:f=a.a.Xb[c];break a;default:f=G(a,w(c+1,f))}return f;case "k":return ue(e),G(a,w(te(e)||24,f));case "S":return G(a,(e.getTime()%1E3/1E3).toFixed(Math.min(3,f)).substr(2)+(3<f?w(0,f-3):""));case "E":return c=d.getDay(),
4<=f?a.a.fc[c]:a.a.Zb[c];case "a":return ue(e),f=te(e),a.a.Pb[12<=f&&24>f?1:0];case "h":return ue(e),G(a,w(te(e)%12||12,f));case "K":return ue(e),G(a,w(te(e)%12,f));case "H":return ue(e),G(a,w(te(e),f));case "c":a:switch(c=d.getDay(),f){case 5:f=a.a.bc[c];break a;case 4:f=a.a.ec[c];break a;case 3:f=a.a.dc[c];break a;default:f=G(a,w(c,1))}return f;case "L":a:switch(c=d.getMonth(),f){case 5:f=a.a.ac[c];break a;case 4:f=a.a.$b[c];break a;case 3:f=a.a.cc[c];break a;default:f=G(a,w(c+1,f))}return f;case "Q":return c=
Math.floor(d.getMonth()/3),4>f?a.a.Yb[c]:a.a.Wb[c];case "d":return G(a,w(d.getDate(),f));case "m":return ue(e),G(a,w(e.getMinutes(),f));case "s":return ue(e),G(a,w(e.getSeconds(),f));case "v":return f=ne(c.getTimezoneOffset()),f.f;case "V":return a=ne(c.getTimezoneOffset()),2>=f?a.f:0<pe(a,c)?n(a.a.Qb)?a.a.Qb:a.a.DST_GENERIC_LOCATION:n(a.a.gb)?a.a.gb:a.a.STD_GENERIC_LOCATION;case "w":return c=a.a.fb,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),b=a.a.eb||0,c=e.valueOf()+864E5*(((n(c)?c:3)-
b+7)%7-((e.getDay()+6)%7-b+7)%7),G(a,w(Math.floor(Math.round((c-(new Date((new Date(c)).getFullYear(),0,1)).valueOf())/864E5)/7)+1,f));case "z":return a=ne(c.getTimezoneOffset()),4>f?a.g[0<pe(a,c)?2:0]:a.g[0<pe(a,c)?3:1];case "Z":return e=ne(c.getTimezoneOffset()),4>f?(f=-(e.c-pe(e,c)),a=[0>f?"-":"+"],f=Math.abs(f),a.push(w(Math.floor(f/60)%100,2),w(f%60,2)),f=a.join("")):f=G(a,oe(e.c-pe(e,c))),f;default:return""}}function H(a,b,c){return{message:a||null,errorId:b||null,success:c||!1}}
t("warehouse.ErrorCode",{RECORD_NOT_FOUND:"RECORD_NOT_FOUND",AUTHORIZE_ANONYMOUS_ACCESS_TO_GETUSER_WITHOUT_PARAMS_NOT_ALLOWED:"AUTHORIZE_ANONYMOUS_ACCESS_TO_GETUSER_WITHOUT_PARAMS_NOT_ALLOWED",ATTRIBUTE_NOT_FOUND:"ATTRIBUTE_NOT_FOUND",ATTRIBUTE_CATEGORY_NOT_FOUND:"ATTRIBUTE_CATEGORY_NOT_FOUND",COMMENT_EXCEEDS_ALLOWED_LENGTH:"COMMENT_EXCEEDS_ALLOWED_LENGTH",COMMENT_REPORT_DESCRIPTION_EXCEEDS_ALLOWED_LENGTH:"COMMENT_REPORT_DESCRIPTION_EXCEEDS_ALLOWED_LENGTH",COMMENT_REPORT_RESOLVE_PERMISSION_DENIED:"COMMENT_REPORT_RESOLVE_PERMISSION_DENIED",
COMMENT_REPORT_RESOLUTION_EXCEEDS_ALLOWED_LENGTH:"COMMENT_REPORT_RESOLUTION_EXCEEDS_ALLOWED_LENGTH",COMMENT_REPORT_DELETE_PERMISSION_DENIED:"COMMENT_REPORT_DELETE_PERMISSION_DENIED",COMMENTING_DISABLED_ON_OBJECT:"COMMENTING_DISABLED_ON_OBJECT",DUPLICATE_REPORT_NOT_ALLOWED:"DUPLICATE_REPORT_NOT_ALLOWED",MISSING_REQUIRED_INPUT_PARAMETER:"MISSING_REQUIRED_INPUT_PARAMETER",OPERATION_NOT_SUPPORTED:"OPERATION_NOT_SUPPORTED",COLLECTION_ALREADY_CONTAINS_ELEMENT:"COLLECTION_ALREADY_CONTAINS_ELEMENT",PAGE_REQUIRES_LOGIN:"PAGE_REQUIRES_LOGIN",
INVALID_PARAMETER_VALUE:"INVALID_PARAMETER_VALUE",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",FILE_UPLOAD_TIMEOUT:"FILE_UPLOAD_TIMEOUT",FILE_UPLOAD_ERROR:"FILE_UPLOAD_ERROR",OBJECT_DOES_NOT_EXIST:"OBJECT_DOES_NOT_EXIST",OBJECT_UNIQUE_FIELD_IS_INCORRECT:"OBJECT_UNIQUE_FIELD_IS_INCORRECT",INTERNET_DISCONNECTED:"INTERNET_DISCONNECTED",NETWORK_ERROR:"NETWORK_ERROR",NETWORK_SERVER_ERROR:"NETWORK_SERVER_ERROR",ENTITY_SAVED_BUT_NOT_PRINTABLE:"ENTITY_SAVED_BUT_NOT_PRINTABLE",THUMBNAIL_NO_CONTAINER:"THUMBNAIL_NO_CONTAINER",
THUMBNAIL_NO_SOURCE:"THUMBNAIL_NO_SOURCE",CSV_INCORRECT_OBJECT_FORMAT:"CSV_INCORRECT_OBJECT_FORMAT",CSV_EMPTY_ARRAY_ERROR:"CSV_EMPTY_ARRAY_ERROR",CSV_TEXT_FORMAT_ERROR:"CSV_TEXT_FORMAT_ERROR"});var we={TITLE:"title",DESCRIPTION:"description"};t("warehouse.TranslatableField",we);
function I(a,b){b=b||{};this.a={};this.b=a;this.Y=b.createTime||"";this.Z=b.modifyTime||"";this.va=b.creator||{};this.Ga=b.modifier||{};this.a.tags=xe(b.tags);this.l=b.binaries||{};this.attributes=b.attributes||{};this.D=new nd;this.O=od(this.D,this.attributes);this.c=b.translations||{}}t("warehouse.DataStoreObject",I);I.prototype.w=function(){return this.a.id};I.prototype.getId=I.prototype.w;I.prototype.fa=function(){return this.Y};I.prototype.getCreateTime=I.prototype.fa;I.prototype.ha=function(){return this.Z};
I.prototype.getModifyTime=I.prototype.ha;I.prototype.Hc=function(){return this.va.displayName||""};I.prototype.getCreatorDisplayName=I.prototype.Hc;I.prototype.Yc=function(){return this.Ga.displayName||""};I.prototype.getModifierDisplayName=I.prototype.Yc;I.prototype.Ic=function(){return this.va.id||""};I.prototype.getCreatorId=I.prototype.Ic;I.prototype.Zc=function(){return this.Ga.id||""};I.prototype.getModifierId=I.prototype.Zc;
function xe(a){if(!a||!p(a))return[];for(var b=[],c=0;c<a.length;c++){var d=a[c];twttr.txt.isValidHashtag("#"+d)&&b.push(d)}cb(b);return b}I.prototype.Ib=function(a){if(!p(a))return!1;this.a.tags=xe(a);return!0};I.prototype.setTags=I.prototype.Ib;I.prototype.kd=function(){return this.a.tags.slice(0)};I.prototype.getTags=I.prototype.kd;
I.prototype.setAttribute=function(a,b,c,d){if(null==a||null==b||null==d||null==c)return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var e={};e.value=c;e.dataType=d;this.attributes[a]=this.attributes[a]||{};this.attributes[a][b]=e;e={};e.subjectId=this.a.id;e.subjectClass=this.o;e.category=a;e.name=b;e.value=c;e.dataType=d;return this.b.setAttribute(e)};I.prototype.setAttribute=I.prototype.setAttribute;
I.prototype.removeAttribute=function(a,b){if(null==a||null==b)return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var c=this.attributes[a];c&&(delete c[b],jb(c)||delete this.attributes[a]);c={};c.subjectId=this.a.id;c.subjectClass=this.o;c.category=a;c.name=b;return this.b.removeAttribute(c)};I.prototype.removeAttribute=I.prototype.removeAttribute;I.prototype.uc=function(){return this.attributes};I.prototype.getAttributes=I.prototype.uc;
I.prototype.R=function(a,b){return(((this.attributes||{})[a]||{})[b]||{}).value};I.prototype.getAttributeValue=I.prototype.R;function ye(a,b,c,d,e){a=a.attributes;null!=a[b]||(a[b]={});null!=a[b][c]||(a[b][c]={});b=a[b][c];b.value=d;b.dataType=e}function ze(a){var b=od(a.D,a.attributes);return a.O!==b}
I.prototype.ma=function(a,b,c){if(!a||!b||!c)return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var d=!1,e;for(e in we)if(we.hasOwnProperty(e)&&we[e]==b){d=!0;break}return d?this.b.ma({subjectId:this.a.id,subjectClass:this.o,language:a,name:b,value:c}).then(function(){this.c[a]||(this.c[a]={});this.c[a][b]=c},void 0,this):D(H(null,"OPERATION_NOT_SUPPORTED"))};I.prototype.setTranslation=I.prototype.ma;
I.prototype.ka=function(a,b){if(!a||!b)return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var c=!1,d;for(d in we)if(we.hasOwnProperty(d)&&we[d]==b){c=!0;break}return c?this.b.ka({subjectId:this.a.id,subjectClass:this.o,language:a,name:b}).then(function(){this.c[a]&&this.c[a][b]&&delete this.c[a][b]},void 0,this):D(H(null,"OPERATION_NOT_SUPPORTED"))};I.prototype.removeTranslation=I.prototype.ka;I.prototype.nd=function(){return this.c};I.prototype.getTranslations=I.prototype.nd;
I.prototype.md=function(a,b){var c="";a&&b&&this.c&&this.c[a]&&this.c[a][b]&&(c=this.c[a][b]);return c};I.prototype.getTranslation=I.prototype.md;I.prototype.Ba=function(){return this.b.Ba({subjectId:this.w(),subjectClass:this.o})};I.prototype.getEventSummary=I.prototype.Ba;I.prototype.xc=function(){return this.l};I.prototype.getBinaries=I.prototype.xc;function Ae(a,b){return a.l[b]?a.l[b]:null}
I.prototype.Ia=function(a,b){a={name:a,subjectId:this.a.id,subjectClass:this.o,binary:b,task:Be,priority:Ce};this.L(a);return this.b.Ia(a)};I.prototype.L=function(){};t("warehouse.Constants.INT","int");t("warehouse.Constants.FLOAT","float");t("warehouse.Constants.STRING","string");t("warehouse.Constants.BOOLEAN","boolean");t("warehouse.Constants.TITLE","title");t("warehouse.Constants.DESCRIPTION","description");t("warehouse.Constants.DSO_EVENTS","dsoEvents");t("warehouse.Constants.DSO_REVIEWS","dsoReviews");
t("warehouse.Constants.TCC_DATE_TIME_FORMAT","yyyy-MM-dd HH:mm:ss.SSS");t("warehouse.Constants.BINARY_UPLOAD_TIMEOUT",6E5);var Be="NEWMODEL";t("warehouse.Constants.NEW_MODEL_TASK",Be);var Ce=50;t("warehouse.Constants.NEW_MODEL_PRIORITY",Ce);t("warehouse.Constants.UPLOAD_MAX_FILE_SIZE",51200);t("warehouse.Constants.BANNER_MAX_FILE_SIZE",5120);t("warehouse.Constants.SMALL_THUMB_UPLOAD_MAX_FILE_SIZE",1024);t("warehouse.Constants.BOTH","BOTH");t("warehouse.Constants.HAS_FEATURED_LOGO","hasFeaturedLogo");
t("warehouse.Constants.SYSTEM_ATTRIBUTE_CATEGORY","3dw");t("warehouse.Constants.SORT_ORDER_ATTRIBUTE","sort_order");t("warehouse.Constants.DSO_COMMENTS","dso_comments");t("warehouse.Constants.COMMENT_LENGTH_LIMIT",2048);t("warehouse.Constants.API_BASE_PATH","/warehouse");t("warehouse.Constants.API_V1_BASE_PATH","/warehouse/v1.0");t("warehouse.Constants.USERANALYTICS","/useranalytics");
t("warehouse.Constants.UserAnalyticsEndpoints",{ge:"/availabledaterange",ue:"/geodata",Ae:"/linechart",Te:"/usagechart",Ce:"/migrateuserevents",Qe:"/tabledata",Re:"/totalmetrics",Se:"/totaluserevents"});t("warehouse.Constants.DSO_COMMENT_REPORTS","dso_comment_reports");t("warehouse.Constants.DSO_COMMENT_REPORTS_DESCRIPTION_MAX_LENGTH",100);t("warehouse.Constants.DSO_COMMENT_REPORTS_RESOLUTION_MAX_LENGTH",200);t("warehouse.Constants.CONTACT_USER_MESSAGE_MAX_LENGTH",2E3);new le(2006,3,24);
function De(a,b,c,d,e){a="/warehouse/getbinary?subjectId="+encodeURIComponent(a)+"&subjectClass="+encodeURIComponent(b)+"&cache="+oa().toString();d&&(a+="&fn="+encodeURIComponent(d));return(e?a+"&recordEvent=true":a+"&recordEvent=false")+("&name="+encodeURIComponent(c))}function Ee(a){a=null==a?"":String(a);if(ua(a))return"";a=xa(a);a=a.replace(/&quot;/g,'"').replace(/&#39;/g,"'");return a.replace(/&amp;/g,"&")}
function Fe(){var a=z||"",b={major:void 0,minor:void 0},c=/SketchUp (Pro|Make)\/\d+\.\d+/i;(c=a.match(c))&&c.length||(c=/SketchUp\/\d+\.\d+/i,c=a.match(c));c&&0<c.length&&(a=c[0],a=a.substring(a.indexOf("/")+1).split("."),b.major=parseInt(a[0],10),b.minor=parseInt(a[1],10));for(var d in b)isNaN(b[d])&&(b[d]=void 0);return b}function Ge(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];ua(d)||(b[c]=d)}return b}
t("warehouse.Util.removeDuplicateHashtags",function(a){for(var b=He(a),c=0;c<b.length;c++){var d="#"+b[c],e=new RegExp(d,"gi"),f=a.search(e),g=f+d.length,d=a.substring(0,f),h=a.substring(g);a=a.substring(f,g);for(f=0;0<=f;){f=h.search(e);if(0>f)break;h=h.substring(0,f)+h.substring(f+1)}a=d+a+h}return a.trim()});function He(a){a=twttr.txt.extractHashtags(a);for(var b=0;b<a.length;b++)a[b]=a[b].toLowerCase();cb(a);return a}t("warehouse.Util.extractUniqueHashtags",He);
t("warehouse.Util.removeHashtagsFromText",function(a){for(var b=He(a),c=0;c<b.length;c++)a=a.replace(new RegExp("#"+b[c],"gi"),""),a=a.replace(/  +/g," ").trim();return a});t("warehouse.Util.findClosestHashtagToCursor",function(a,b){var c=-1;if(b>a.length)return c;for(var d=b-1;0<=d&&" "!==a[d];d--)if("#"===a[d]){if(d===b-1)return-1;if(!d||/\s/.test(a[d-1]))c=d;break}return c});
function J(a,b){I.call(this,a,b);a=b||{};this.a.title=a.title||"";this.a.description=a.description||"";this.a.externalUrl=a.externalUrl||"";this.a.id=a.id||"";this.a.isHidden=a.isHidden||!1;this.a.isPrivate=a.isPrivate||!1;this.a.parentCatalogId=a.parentCatalogId||"";this.a.type=a.type||"";this.a.contentType=a.contentType||"";this.a.allowComments=null!=a.allowComments?a.allowComments:!0;this.T=a.views||0;this.P=a.averageRating||0;this.g=a.reviewCount||0;this.f=a.currentUserRating||null;this.aa=a.commentCount||
0}u(J,I);t("warehouse.CollectionElement",J);J.prototype.setTitle=function(a){this.a.title=a};J.prototype.setTitle=J.prototype.setTitle;J.prototype.getTitle=function(){return this.a.title||""};J.prototype.getTitle=J.prototype.getTitle;J.prototype.Gc=function(){return this.a.contentType};J.prototype.getContentType=J.prototype.Gc;J.prototype.Pd=function(a){this.a.description=a};J.prototype.setDescription=J.prototype.Pd;J.prototype.Sa=function(){return this.a.description||""};
J.prototype.getDescription=J.prototype.Sa;J.prototype.Pc=function(){return this.a.externalUrl||""};J.prototype.getExternalUrl=J.prototype.Pc;J.prototype.Sd=function(a){this.a.externalUrl=a};J.prototype.setExternalUrl=J.prototype.Sd;J.prototype.Ud=function(a){this.a.isHidden=a};J.prototype.setIsHidden=J.prototype.Ud;J.prototype.Rc=function(){return!!this.a.isHidden};J.prototype.getIsHidden=J.prototype.Rc;J.prototype.Wd=function(a){this.a.isPrivate=a};J.prototype.setIsPrivate=J.prototype.Wd;
J.prototype.Sc=function(){return!!this.a.isPrivate};J.prototype.getIsPrivate=J.prototype.Sc;J.prototype.qd=function(){return this.T};J.prototype.getViewCount=J.prototype.qd;J.prototype.Jc=function(){return this.f};J.prototype.getCurrentUserRating=J.prototype.Jc;J.prototype.dd=function(){return this.g};J.prototype.getReviewCount=J.prototype.dd;J.prototype.vc=function(){return this.P};J.prototype.getAverageRating=J.prototype.vc;J.prototype.Qa=function(){return this.aa};J.prototype.getCommentCount=J.prototype.Qa;
J.prototype.bd=function(){return this.a.parentCatalogId||""};J.prototype.getParentCatalogId=J.prototype.bd;J.prototype.pb=function(){return this.a.allowComments};J.prototype.getAllowComments=J.prototype.pb;J.prototype.Jd=function(a){this.a.allowComments=a};J.prototype.setAllowComments=J.prototype.Jd;J.prototype.ba=function(a){return this.b.ba({af:this.a.id,$e:this.o,name:a})};J.prototype.deleteBinary=J.prototype.ba;
J.prototype.Ja=function(a,b){var c={subjectId:this.a.id,subjectClass:this.o,rating:a};b&&(c.description=b);return this.b.Ja(c).then(function(){null===this.f&&this.g++;this.f=a},void 0,this)};J.prototype.setReview=J.prototype.Ja;J.prototype.xa=function(){return this.b.xa({subjectId:this.a.id,subjectClass:this.o}).then(function(){this.f=null;this.g--},void 0,this)};J.prototype.deleteReview=J.prototype.xa;
J.prototype.Da=function(a,b,c){var d={subjectId:this.a.id,subjectClass:this.o};null!=a&&(d.startRow=a);null!=b&&(d.endRow=b);null!=c&&0<c.length&&(d.createUserId=c);return this.b.Da(d)};J.prototype.getReviews=J.prototype.Da;J.prototype.ab=function(a,b){return!0===this.a.allowComments?(v(b)&&(b=null),this.b.ab({subjectId:this.w(),subjectClass:this.o,commentText:a,parentCommentId:b})):D(H(null,"COMMENTING_DISABLED_ON_OBJECT"))};J.prototype.setComment=J.prototype.ab;
J.prototype.Ra=function(a,b,c){return this.pb()?this.b.Ra({subjectId:this.w(),subjectClass:this.o,startRow:a,endRow:b,sortBy:c}):D(H(null,"COMMENTING_DISABLED_ON_OBJECT",!1))};J.prototype.getComments=J.prototype.Ra;J.prototype.jc=function(a){return this.b.la(a,this.a.id,this.o)};J.prototype.addToParentCollection=J.prototype.jc;J.prototype.vd=function(a){a=this.l[a];return null!=a&&(a=a.attributes,null!=a&&(a=a["3dw"],null!=a&&(a=a.isDeleted,null!=a&&a.value)))?!0:!1};
J.prototype.isBinaryFlaggedAsDeleted=J.prototype.vd;J.prototype.Ha=function(){var a=He(this.Sa());this.Ib(a)};J.prototype.parseTagsFromDescription=J.prototype.Ha;function M(a,b){J.call(this,a,b);a=b||{};this.a.isCatalog=a.isCatalog||!1;this.a.containerMap=a.containerMap||{};this.i=a.collectionCount||0;this.m=a.entityCount||0}u(M,J);t("warehouse.Collection",M);M.prototype.o="collection";M.prototype.backendClass=M.prototype.o;M.prototype.na=function(a){this.a.type=a};M.prototype.setType=M.prototype.na;
M.prototype.ia=function(){return this.a.type};M.prototype.getType=M.prototype.ia;M.prototype.ld=function(){return Ae(this,"thumbnail_3d")};M.prototype.getTeklaThumbnail=M.prototype.ld;M.prototype.ic=function(a){return this.b.Ua(a).then(function(){return this.b.la(this.a.id,a,"entity").then(function(b){this.a.containerMap[a]=!0;this.m++;return b},void 0,this)},void 0,this)};M.prototype.addEntity=M.prototype.ic;
M.prototype.Gd=function(a){return this.b.wa(this.a.id,a,"entity").then(r(function(){delete this.a.containerMap[a];this.m--},this))};M.prototype.removeEntity=M.prototype.Gd;M.prototype.Mc=function(){return this.b.search({parentCollectionId:this.a.id,backendClass:"entity"})};M.prototype.getEntities=M.prototype.Mc;
M.prototype.hc=function(a){return this.b.Pa(a).then(function(){return this.b.la(this.a.id,a,"collection").then(function(b){this.a.containerMap[a]=!0;this.i++;return b},void 0,this)},void 0,this)};M.prototype.addCollection=M.prototype.hc;M.prototype.Fd=function(a){return this.b.wa(this.a.id,a,"collection").then(r(function(){delete this.a.containerMap[a];this.i--},this))};M.prototype.removeCollection=M.prototype.Fd;M.prototype.Dc=function(){return this.b.search({parentCollectionId:this.a.id,backendClass:"collection"})};
M.prototype.getCollections=M.prototype.Dc;M.prototype.save=function(a){this.Ha();var b=this.a;ze(this)&&(b=nb(this.a),b.attributes=this.attributes);b=this.b.Cb(b);!0===a&&(b=b.then(function(a){return this.b.Pa(a.id)},void 0,this));return b};M.prototype.save=M.prototype.save;M.prototype.da=function(a,b){this.b.mb(this.a.id).then(a,function(a){b(a)},this)};M.prototype.erase=M.prototype.da;M.prototype.oa=function(a,b){this.b.Lb(this.a.id).then(a,function(a){b(a)},this)};M.prototype.unerase=M.prototype.oa;
M.prototype.wc=function(){return this.R("3dw","bannerUrl")};M.prototype.getBannerUrl=M.prototype.wc;M.prototype.Ld=function(a){if(null!=a)return this.setAttribute("3dw","bannerUrl",a,"string");delete this.attributes["3dw"].bannerUrl;return C(null)};M.prototype.setBannerUrl=M.prototype.Ld;M.prototype.Kd=function(a){return a?(a={name:"cbanner",subjectId:this.a.id,subjectClass:"collection",binary:a},this.b.Ia(a)):this.ba("cbanner")};M.prototype.setBannerBinary=M.prototype.Kd;
M.prototype.Td=function(a){this.a.isCatalog=a;return this};M.prototype.setIsCatalog=M.prototype.Td;M.prototype.Qc=function(){return!!this.a.isCatalog};M.prototype.getIsCatalog=M.prototype.Qc;M.prototype.Ac=function(){return this.i};M.prototype.getCollectionCount=M.prototype.Ac;M.prototype.Nc=function(){return this.m};M.prototype.getEntityCount=M.prototype.Nc;M.prototype.Yd=function(a){ye(this,"3dw","sort_order",a,"string")};M.prototype.setSortOrder=M.prototype.Yd;
M.prototype.fd=function(){return this.R("3dw","sort_order")};M.prototype.getSortOrder=M.prototype.fd;M.prototype.ae=function(a){null!=a||(a="addedToCollectionDate DESC");return this.b.Db(this.w(),a)};M.prototype.updateCollectionThumbnail=M.prototype.ae;t("warehouse.CollectionType",{USER_GENERATED:"USER_GENERATED",CATALOG:"CATALOG"});
function N(a){a=a||{};this.a={};this.a.subjectId=a.subjectId||"";this.a.commentId=a.commentId||"";this.a.commentText=a.commentText||"";this.a.parentCommentId=a.parentCommentId||null;this.a.userId=a.userId||"";this.a.displayName=a.displayName||"";this.a.picture=a.picture||"";this.a.commentCount=a.commentCount||"";this.a.upvoteCount=a.upvoteCount||0;this.a.upvotedByUser=a.upvotedByUser||!1;this.a.reportCount=a.reportCount||0;this.b=a.createTime||"";this.g=a.modifyTime||"";this.va=a.creator||{};this.Ga=
a.modifier||{};this.f=a.isDeleted||!1}N.prototype.getDisplayName=function(){return this.a.displayName};N.prototype.Qa=function(){return this.a.commentCount};N.prototype.fa=function(){return this.b};N.prototype.getCreateTime=N.prototype.fa;N.prototype.ha=function(){return this.g};N.prototype.getModifyTime=N.prototype.ha;N.prototype.c=function(){return this.f};
function Ie(a){a=a||{};this.a={};this.a.reportId=a.reportId||"";this.a.isResolved=a.isResolved||!1;this.a.resolution=a.resolution||"";this.a.commentId=a.commentId||"";this.a.reporterId=a.reporterId||"";this.a.description=a.description||"";this.a.userId=a.userId||"";this.a.isMuted=a.isMuted||!1;this.a.displayName=a.displayName||"";this.a.commentText=a.commentText||"";this.a.createTime=a.createTime||"";this.a.modifyTime=a.modifyTime||"";this.a.subjectId=a.subjectId||"";this.a.subjectTitle=a.subjectTitle||
"";this.a.subjectClass=a.subjectClass||"";this.a.commentDeleted=a.commentDeleted||!1}Ie.prototype.Sa=function(){return this.a.description};Ie.prototype.getDisplayName=function(){return this.a.displayName};Ie.prototype.fa=function(){return this.a.createTime};Ie.prototype.getCreateTime=Ie.prototype.fa;Ie.prototype.ha=function(){return this.a.modifyTime};Ie.prototype.getModifyTime=Ie.prototype.ha;t("warehouse.CommentReportShowType",{ALL:"all",UNRESOLVED:"unresolved",RESOLVED:"resolved"});
function Je(a,b){this.c=this.i=this.g="";this.m=null;this.f=this.a="";this.l=!1;var c;a instanceof Je?(this.l=n(b)?b:a.l,Ke(this,a.g),this.i=a.i,this.c=a.c,Le(this,a.m),O(this,a.a),Me(this,a.b.clone()),this.f=a.f):a&&(c=String(a).match(zd))?(this.l=!!b,Ke(this,c[1]||"",!0),this.i=Ne(c[2]||""),this.c=Ne(c[3]||"",!0),Le(this,c[4]),O(this,c[5]||"",!0),Me(this,c[6]||"",!0),this.f=Ne(c[7]||"")):(this.l=!!b,this.b=new Oe(null,0,this.l))}
Je.prototype.toString=function(){var a=[],b=this.g;b&&a.push(Pe(b,Qe,!0),":");var c=this.c;if(c||"file"==b)a.push("//"),(b=this.i)&&a.push(Pe(b,Qe,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.m,null!=c&&a.push(":",String(c));if(c=this.a)this.c&&"/"!=c.charAt(0)&&a.push("/"),a.push(Pe(c,"/"==c.charAt(0)?Re:Se,!0));(c=this.b.toString())&&a.push("?",c);(c=this.f)&&a.push("#",Pe(c,Te));return a.join("")};
Je.prototype.resolve=function(a){var b=this.clone(),c=!!a.g;c?Ke(b,a.g):c=!!a.i;c?b.i=a.i:c=!!a.c;c?b.c=a.c:c=null!=a.m;var d=a.a;if(c)Le(b,a.m);else if(c=!!a.a){if("/"!=d.charAt(0))if(this.c&&!this.a)d="/"+d;else{var e=b.a.lastIndexOf("/");-1!=e&&(d=b.a.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=!e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||1==f.length&&
""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?O(b,d):c=""!==a.b.toString();c?Me(b,Ne(a.b.toString())):c=!!a.f;c&&(b.f=a.f);return b};Je.prototype.clone=function(){return new Je(this)};function Ke(a,b,c){a.g=c?Ne(b,!0):b;a.g&&(a.g=a.g.replace(/:$/,""))}function Le(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.m=b}else a.m=null}function O(a,b,c){a.a=c?Ne(b,!0):b;return a}
function Me(a,b,c){b instanceof Oe?(a.b=b,Ue(a.b,a.l)):(c||(b=Pe(b,Ve)),a.b=new Oe(b,0,a.l))}function We(a,b){return a instanceof Je?a.clone():new Je(a,b)}function Ne(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Pe(a,b,c){return q(a)?(a=encodeURI(a).replace(b,Xe),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xe(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}
var Qe=/[#\/\?@]/g,Se=/[\#\?:]/g,Re=/[\#\?]/g,Ve=/[\#\?@]/g,Te=/#/g;function Oe(a,b,c){this.b=this.a=null;this.c=a||null;this.f=!!c}function Ye(a){a.a||(a.a=new Vc,a.b=0,a.c&&Ad(a.c,function(b,c){Ze(a,decodeURIComponent(b.replace(/\+/g," ")),c)}))}function $e(a){var b=Tc(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new Oe(null,0,void 0);a=Sc(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];p(f)?af(c,e,f):Ze(c,e,f)}return c}k=Oe.prototype;k.u=function(){Ye(this);return this.b};
function Ze(a,b,c){Ye(a);a.c=null;b=bf(a,b);var d=a.a.get(b);d||a.a.set(b,d=[]);d.push(c);a.b+=1}function cf(a,b){Ye(a);b=bf(a,b);Yc(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Xc(a.a,b))}k.clear=function(){this.a=this.c=null;this.b=0};k.isEmpty=function(){Ye(this);return 0==this.b};function df(a,b){Ye(a);b=bf(a,b);return Yc(a.a.b,b)}k.B=function(){Ye(this);for(var a=this.a.v(),b=this.a.B(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
k.v=function(a){Ye(this);var b=[];if(q(a))df(this,a)&&(b=Za(b,this.a.get(bf(this,a))));else{a=this.a.v();for(var c=0;c<a.length;c++)b=Za(b,a[c])}return b};k.set=function(a,b){Ye(this);this.c=null;a=bf(this,a);df(this,a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b+=1;return this};k.get=function(a,b){a=a?this.v(a):[];return 0<a.length?String(a[0]):b};function af(a,b,c){cf(a,b);0<c.length&&(a.c=null,a.a.set(bf(a,b),$a(c)),a.b+=c.length)}
k.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.B(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.v(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.c=a.join("&")};k.clone=function(){var a=new Oe;a.c=this.c;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};function bf(a,b){b=String(b);a.f&&(b=b.toLowerCase());return b}
function Ue(a,b){b&&!a.f&&(Ye(a),a.c=null,a.a.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(cf(this,b),af(this,e,a))},a));a.f=b}function ef(){this.b=[];this.a=[]}function ff(a){a.b.length||(a.b=a.a,a.b.reverse(),a.a=[]);return a.b.pop()}k=ef.prototype;k.u=function(){return this.b.length+this.a.length};k.isEmpty=function(){return!this.b.length&&!this.a.length};k.clear=function(){this.b=[];this.a=[]};k.contains=function(a){return 0<=x(this.b,a)||0<=x(this.a,a)};
k.v=function(){for(var a=[],b=this.b.length-1;0<=b;--b)a.push(this.b[b]);for(var c=this.a.length,b=0;b<c;++b)a.push(this.a[b]);return a};function gf(a,b){Rb.call(this);this.i=a||0;this.c=b||10;if(this.i>this.c)throw Error(hf);this.a=new ef;this.b=new Zc;this.l=null;this.qa()}u(gf,Rb);var hf="[goog.structs.Pool] Min can not be greater than max";k=gf.prototype;
k.Ca=function(){var a=oa();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.a.u()&&(b=ff(this.a),!this.$a(b));)this.qa();!b&&this.u()<this.c&&(b=this.Na());b&&(this.l=a,this.b.a.set($c(b),b));return b}};function jf(a,b){Xc(a.b.a,$c(b))&&a.Ma(b)}k.Ma=function(a){Xc(this.b.a,$c(a));this.$a(a)&&this.u()<this.c?this.a.a.push(a):kf(a)};k.qa=function(){for(var a=this.a;this.u()<this.i;){var b=this.Na();a.a.push(b)}for(;this.u()>this.c&&0<this.a.u();)kf(ff(a))};k.Na=function(){return{}};
function kf(a){if("function"==typeof a.ya)a.ya();else for(var b in a)a[b]=null}k.$a=function(a){return"function"==typeof a.lc?a.lc():!0};k.contains=function(a){return this.a.contains(a)||this.b.contains(a)};k.u=function(){return this.a.u()+this.b.u()};k.isEmpty=function(){return this.a.isEmpty()&&this.b.isEmpty()};k.A=function(){gf.N.A.call(this);if(0<this.b.u())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var a=this.a;!a.isEmpty();)kf(ff(a));delete this.a};
function lf(a,b){this.a=a;this.b=b}lf.prototype.clone=function(){return new lf(this.a,this.b)};function mf(a){this.a=[];if(a)a:{var b;if(a instanceof mf){if(b=a.B(),a=a.v(),0>=this.u()){for(var c=this.a,d=0;d<b.length;d++)c.push(new lf(b[d],a[d]));break a}}else b=lb(a),a=kb(a);for(d=0;d<b.length;d++)this.insert(b[d],a[d])}}k=mf.prototype;k.insert=function(a,b){var c=this.a;c.push(new lf(a,b));c=c.length-1;a=this.a;for(b=a[c];0<c;){var d=c-1>>1;if(a[d].a>b.a)a[c]=a[d],c=d;else break}a[c]=b};
k.v=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].b);return b};k.B=function(){for(var a=this.a,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].a);return b};k.clone=function(){return new mf(this)};k.u=function(){return this.a.length};k.isEmpty=function(){return!this.a.length};k.clear=function(){Xa(this.a)};function nf(){mf.call(this)}u(nf,mf);function of(a,b){this.g=new nf;gf.call(this,a,b)}u(of,gf);k=of.prototype;
k.Ca=function(a,b){if(!a)return of.N.Ca.call(this);this.g.insert(n(b)?b:100,a);this.Xa()};k.Xa=function(){for(var a=this.g;0<a.u();){var b=this.Ca();if(b){var c,d=a,e=d.a,f=e.length;c=e[0];if(0>=f)c=void 0;else{if(1==f)Xa(e);else{e[0]=e.pop();for(var e=0,d=d.a,f=d.length,g=d[e];e<f>>1;){var h=2*e+1,m=2*e+2,h=m<f&&d[m].a<d[h].a?m:h;if(d[h].a>g.a)break;d[e]=d[h];e=h}d[e]=g}c=c.b}c.apply(this,[b])}else break}};k.Ma=function(a){of.N.Ma.call(this,a);this.Xa()};k.qa=function(){of.N.qa.call(this);this.Xa()};
k.A=function(){of.N.A.call(this);l.clearTimeout(void 0);this.g.clear();this.g=null};function pf(a,b,c,d){this.m=a;this.D=!!d;of.call(this,b,c)}u(pf,of);pf.prototype.Na=function(){var a=new Bd,b=this.m;b&&b.forEach(function(b,d){a.headers.set(d,b)});this.D&&(a.V=!0);return a};pf.prototype.$a=function(a){return!a.f&&!a.j};function qf(a,b,c,d,e,f){Nc.call(this);this.l=n(a)?a:1;this.i=n(e)?Math.max(0,e):0;this.m=!!f;this.c=new pf(b,c,d,f);this.a=new Vc;this.g=new Qc(this)}u(qf,Nc);var rf="ready complete success error abort timeout".split(" ");
k=qf.prototype;k.send=function(a,b,c,d,e,f,g,h,m,y){if(this.a.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new sf(b,r(this.td,this,a),c,d,e,g,n(h)?h:this.l,m,n(y)?y:this.m);this.a.set(a,b);a=r(this.ud,this,a);this.c.Ca(a,f);return b};k.abort=function(a,b){var c=this.a.get(a);if(c){var d=c.S;c.hb=!0;b&&(d&&(this.g.pa(d,rf,c.bb),Hc(d,"ready",function(){jf(this.c,d)},!1,this)),Xc(this.a,a));d&&d.abort()}};
k.ud=function(a,b){var c=this.a.get(a);c&&!c.S?(this.g.Za(b,rf,c.bb),b.g=Math.max(0,this.i),b.m=c.vb(),b.V=c.xb(),c.S=b,E(this,new tf("ready",this,a,b)),uf(this,a,b),c.hb&&b.abort()):jf(this.c,b)};
k.td=function(a,b){var c=b.target;switch(b.type){case "ready":uf(this,a,c);break;case "complete":a:{var d=this.a.get(a);if(7==c.l||Qd(c)||d.ra>d.Wa)if(E(this,new tf("complete",this,a,c)),d&&(d.kb=!0,d.jb)){c=d.jb.call(c,b);break a}c=null}return c;case "success":E(this,new tf("success",this,a,c));break;case "timeout":case "error":d=this.a.get(a);d.ra>d.Wa&&E(this,new tf("error",this,a,c));break;case "abort":E(this,new tf("abort",this,a,c))}return null};
function uf(a,b,c){var d=a.a.get(b);!d||d.kb||d.ra>d.Wa?(d&&(a.g.pa(c,rf,d.bb),Xc(a.a,b)),jf(a.c,c)):(d.ra++,c.send(d.getUrl(),d.Cd,d.getContent(),d.sd))}k.A=function(){qf.N.A.call(this);this.c.ya();this.c=null;this.g.ya();this.g=null;this.a.clear();this.a=null};function tf(a,b,c,d){lc.call(this,a,b);this.id=c;this.S=d}u(tf,lc);
function sf(a,b,c,d,e,f,g,h,m){this.f=a;this.Cd=c||"GET";this.a=d;this.sd=e||null;this.Wa=n(g)?g:1;this.ra=0;this.hb=this.kb=!1;this.bb=b;this.jb=f;this.b=h||Cd;this.c=!!m;this.S=null}sf.prototype.getUrl=function(){return this.f};sf.prototype.getContent=function(){return this.a};sf.prototype.xb=function(){return this.c};sf.prototype.vb=function(){return this.b};
function vf(){var a=new le,a=((new le).getTimezoneOffset()?new le(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()):a)||new le,b=new qe;if(!a)throw Error("The date to format must be non-null.");for(var c=[],d=0;d<b.b.length;++d){var e=b.b[d].text;1==b.b[d].type?c.push(ve(b,e,a,a,a)):c.push(e)}return c.join("")}
function P(a,b){J.call(this,a,b);a=b||{};this.a.superComponents=a.superComponents||[];this.m=a.downloads||0;a.location?this.Gb(a.location):a.latitude&&a.longitude&&a.altitude&&(this.Fb(a.latitude),this.Hb(a.longitude),this.Bb(a.altitude));this.i=a.subComponents||[]}u(P,J);t("warehouse.Entity",P);P.prototype.o="entity";P.prototype.backendClass=P.prototype.o;P.prototype.na=function(a){this.a.type=a};P.prototype.setType=P.prototype.na;P.prototype.ia=function(){return this.a.type};
P.prototype.getType=P.prototype.ia;P.prototype.zd=function(){return!1===this.R("skp","isGeoreferenced")?!1:null!=this.sb()&&null!=this.tb()&&null!=this.qb()};P.prototype.isGeoLocated=P.prototype.zd;P.prototype.Vd=function(a){ye(this,"stl","isPrintable",a,"boolean");!1===a&&(a=this.attributes,null!=a.stl&&null!=a.stl.printError&&(a=a.stl,"printError"in a&&delete a.printError))};P.prototype.setIsPrintable=P.prototype.Vd;P.prototype.Ad=function(){return this.R("stl","isPrintable")||!1};
P.prototype.isPrintable=P.prototype.Ad;P.prototype.Wc=function(){return this.R("stl","printError")||null};P.prototype.getMaterialisePrintError=P.prototype.Wc;P.prototype.gd=function(){return Ae(this,this.R("skp","sourceBinary"))};P.prototype.getSourceBinary=P.prototype.gd;P.prototype.Fb=function(a){this.a.latitude=a};P.prototype.setLatitude=P.prototype.Fb;P.prototype.sb=function(){return this.a.latitude};P.prototype.getLatitude=P.prototype.sb;P.prototype.Hb=function(a){this.a.longitude=a};
P.prototype.setLongitude=P.prototype.Hb;P.prototype.tb=function(){return this.a.longitude};P.prototype.getLongitude=P.prototype.tb;P.prototype.Bb=function(a){this.a.altitude=a};P.prototype.setAltitude=P.prototype.Bb;P.prototype.qb=function(){return this.a.altitude};P.prototype.getAltitude=P.prototype.qb;P.prototype.Gb=function(a){this.a.latitude=a.latitude;this.a.longitude=a.longitude;this.a.altitude=a.altitude};P.prototype.setLocation=P.prototype.Gb;
P.prototype.Uc=function(){return{latitude:this.a.latitude,longitude:this.a.longitude,altitude:this.a.altitude}};P.prototype.getLocation=P.prototype.Uc;P.prototype.cd=function(){return this.attributes.skp&&this.attributes.skp.polygons?parseInt(this.attributes.skp.polygons.value,10):null};P.prototype.getPolygonCount=P.prototype.cd;P.prototype.Vc=function(){return this.attributes.skp&&this.attributes.skp.materials?parseInt(this.attributes.skp.materials.value,10):null};P.prototype.getMaterialCount=P.prototype.Vc;
P.prototype.Fc=function(){return this.i.length};P.prototype.getComponentCount=P.prototype.Fc;P.prototype.Xc=function(a,b,c){var d=this.b,e={fq:"emEntities=="+this.w(),"class":"material",calculateTotal:!0};null!=b&&null!=c&&(e.startRow=b,e.endRow=c);null!=a&&(e.showBinaryMetadata=a);return d.search(e)};P.prototype.getMaterials=P.prototype.Xc;
P.prototype.hd=function(a,b,c){a=this.b;var d=this.i;d.length?(b=b||0,c=c||d.length-1,c-b<d.length-1&&(d=d.slice(b,c)),c=Q(a,"search",{contentType:"3dw",fq:"id=="+d.join(",id=="),showBinaryMetadata:!0,"class":"entity"})):c=C([]);return c};P.prototype.getSubComponents=P.prototype.hd;P.prototype.jd=function(){return this.a.superComponents};P.prototype.getSuperComponentIds=P.prototype.jd;P.prototype.Ta=function(){return this.m};P.prototype.getDownloadCount=P.prototype.Ta;
P.prototype.$c=function(){return this.attributes.smontage&&this.attributes.smontage.frameCount?parseInt(this.attributes.smontage.frameCount.value,10):null};P.prototype.getMontageFrameCount=P.prototype.$c;P.prototype.wd=function(){return this.attributes.skp&&this.attributes.skp.isCertified?this.attributes.skp.isCertified.value:!1};P.prototype.isCertified=P.prototype.wd;P.prototype.xd=function(){return this.attributes.skp&&this.attributes.skp.isClassified?this.attributes.skp.isClassified.value:!1};
P.prototype.isClassified=P.prototype.xd;P.prototype.yd=function(){return this.attributes.skp&&this.attributes.skp.isDynamicComponent?this.attributes.skp.isDynamicComponent.value:!1};P.prototype.isDynamicComponent=P.prototype.yd;P.prototype.save=function(a){this.Ha();var b=this.a;ze(this)&&(b=nb(this.a),b.attributes=this.attributes);b=this.b.Eb(b);!0===a&&(b=b.then(function(a){return this.b.Ua(a.id)},void 0,this));return b};P.prototype.save=P.prototype.save;
P.prototype.da=function(a,b){this.b.nb(this.a.id).then(a,function(a){b(a)},this)};P.prototype.erase=P.prototype.da;P.prototype.oa=function(a,b){this.b.Mb(this.a.id).then(a,function(a){b(a)},this)};P.prototype.unerase=P.prototype.oa;P.prototype.L=function(a){a.attributes=md({"3dw":{isDeleted:{value:!1,dataType:"boolean"}}})};t("warehouse.EntityType",{SKETCHUP_MODEL:"SKETCHUP_MODEL",SKETCHUP_STYLE:"SKETCHUP_STYLE",LAYOUT_DOCUMENT:"LAYOUT_DOCUMENT"});
function S(a,b){J.call(this,a,b);this.i=(b||{}).downloads||0}u(S,J);t("warehouse.Material",S);S.prototype.o="material";S.prototype.backendClass=S.prototype.o;S.prototype.na=function(a){this.a.type=a};S.prototype.setType=S.prototype.na;S.prototype.ia=function(){return this.a.type};S.prototype.getType=S.prototype.ia;S.prototype.Ta=function(){return this.i};S.prototype.getDownloadCount=S.prototype.Ta;
S.prototype.save=function(a){this.Ha();var b=this.a;ze(this)&&(b=nb(this.a),b.attributes=this.attributes);b=this.b.Ob(b);!0===a&&(b=b.then(function(a){return this.b.ub(a.id)},void 0,this));return b};S.prototype.save=S.prototype.save;S.prototype.da=function(){return this.b.ob(this.a.id)};S.prototype.erase=S.prototype.da;S.prototype.oa=function(){return this.b.Nb(this.a.id)};S.prototype.unerase=S.prototype.oa;t("warehouse.SearchShowType",{ALL:"all",PUBLIC:"public",PRIVATE:"private"});
function wf(a){this.a=a||{}}t("warehouse.UserAttributes",wf);wf.Category={DEFAULT:"3dw",te:"flags",we:"info",Oe:"social"};wf.Name={be:"address",ee:"allowContactMe",ie:"bio",je:"catalogId",ke:"city",ne:"country",se:"firstName",ze:"lastName",qe:"emailPrivacy",xe:"language",ye:"languagePrivacy",Ie:"postal",Ue:"web",Je:"profession",me:"company",Ke:"professionTitle"};function xf(a,b){a=((a.a.info||{})[b]||{}).value;return null!=a?a:null}
function yf(a,b,c){a.a.info||(a.a.info={});null!=c?a.a.info[b]={value:c,dataType:"string"}:a.a.info.hasOwnProperty(b)&&delete a.a.info[b]}wf.prototype.yc=function(){var a=xf(this,"bio");return Ee(a||"")};wf.prototype.getBio=wf.prototype.yc;wf.prototype.Md=function(a){a=Ee(a);yf(this,"bio",a)};wf.prototype.setBio=wf.prototype.Md;t("warehouse.UserNotificationPreferences",{le:"commentRepliedTo",re:"featuredContentUpdates",Ee:"ownedItemCommentedOn",Fe:"ownedItemReviewed",Ne:"siteUpdates"});
t("warehouse.UserRoles",{ce:"admin",fe:"analyst",he:"beta_tester",pe:"developer",Be:"manufacturer",De:"moderator",Me:"sales",VENDOR:"vendor"});
function T(a,b){I.call(this,a,b);a=b||{};this.a.id=a.userId||a.id||"";this.a.displayName=a.displayName||"";this.a.language=a.language||"";this.a.emailAddress=a.emailAddress||"";this.a.customWarehouseUrl=a.customWarehouseUrl||"";this.a.roles=a.roles||[];this.a.notifications=a.notifications||[];this.a.personalInfo=a.personalInfo||{};this.a.rolesToAdd=[];this.a.rolesToRemove=[];this.a.notificationPreferencesToAdd=[];this.a.notificationPreferencesToRemove=[];this.a.isMuted=a.isMuted||!1;this.a.canContactUser=
null!=a.canContactUser?a.canContactUser:!0;this.g=a.entityCount||{};this.f=a.collectionCount||{};this.m=a.reviewedEntityCount||0;this.i=a.reviewedCollectionCount||0;this.P=a.commentCount||0;this.a.picture=a.picture||""}u(T,I);t("warehouse.User",T);T.prototype.o="user";T.prototype.backendClass=T.prototype.o;var zf=["rolesToAdd","rolesToRemove","notificationsToAdd","notificationsToRemove"],Af=["personalInfo"],Bf=["roles","notifications"];T.prototype.Va=function(){return new wf(this.attributes)};
T.prototype.getUserAttributes=T.prototype.Va;T.prototype.Qd=function(a){this.a.displayName=Ee(a);return this};T.prototype.setDisplayName=T.prototype.Qd;T.prototype.getDisplayName=function(){return Ee(this.a.displayName)};T.prototype.getDisplayName=T.prototype.getDisplayName;T.prototype.Xd=function(a){yf(this.Va(),"language",a);this.a.language=a;return this};T.prototype.setLanguage=T.prototype.Xd;T.prototype.Tc=function(){var a=xf(this.Va(),"language")||"";return this.a.language||a};
T.prototype.getLanguage=T.prototype.Tc;T.prototype.Rd=function(a){this.a.emailAddress=a;return this};T.prototype.setEmailAddress=T.prototype.Rd;T.prototype.Lc=function(){return this.a.emailAddress};T.prototype.getEmailAddress=T.prototype.Lc;T.prototype.Od=function(a){this.a.customWarehouseUrl=a;return this};T.prototype.setCustomWarehouseUrl=T.prototype.Od;T.prototype.Kc=function(){return this.a.customWarehouseUrl};T.prototype.getCustomWarehouseUrl=T.prototype.Kc;T.prototype.wb=function(){return this.a.roles};
T.prototype.getRoles=T.prototype.wb;T.prototype.ad=function(){return this.a.notifications};T.prototype.getNotificationPreferences=T.prototype.ad;T.prototype.Oc=function(){return this.g};T.prototype.getEntityCounts=T.prototype.Oc;T.prototype.Bc=function(){return this.f};T.prototype.getCollectionCounts=T.prototype.Bc;
T.prototype.save=function(){var a=this.b.Jb(this.a);ze(this)&&(a=a.then(function(){var a={subjectId:this.w(),subjectClass:"user",attributes:md(this.attributes)};return this.b.zb(a).then(function(a){return a.success?C(a):D(a)})},void 0,this));return a};T.prototype.save=T.prototype.save;T.prototype.ma=function(){throw"Cannot set translations on users.";};T.prototype.setTranslation=T.prototype.ma;T.prototype.ka=function(){throw"Cannot set translations on or remove translations from users.";};
T.prototype.removeTranslation=T.prototype.ka;T.prototype.Oa=function(){var a=Ae(this,"avatar");return a?(a=a.contentUrl,null!=a?a:De(this.w(),this.o,"avatar")):this.a.picture||null};T.prototype.getAvatarUrl=T.prototype.Oa;T.prototype.Qa=function(){return this.P};function Cf(a,b){for(var c=null,d=0;d<a.length;d++)if(a[d].trigger===b){c=a[d];break}return c}T.prototype.W=function(a){var b=this.a.roles;if(null!=b)for(var c=0;c<b.length;c++){var d=b[c];if("admin"===d||d===a)return!0}return!1};
T.prototype.hasRole=T.prototype.W;T.prototype.Ya=function(a){return null!=a.creator.id&&a.creator.id===this.a.id?!0:!1};T.prototype.isCommentOwner=T.prototype.Ya;T.prototype.mc=function(){return this.a.canContactUser};T.prototype.canContactUser=T.prototype.mc;
function U(a){a=a||{};this.f=a.baseUrl||"";this.g=a.isLocalHost||!1;n(a.useLocalStorage)&&(this.h=a.useLocalStorage);this.b=a.localStorage||window.localStorage;this.c=a.localUser||Df();this.a=this.c.id;this.h&&(this.a||(this.a=Ef()),V(this,this.a,this.c))}t("warehouse.DataStore",U);U.HTTP_METHOD={ve:"GET",He:"POST",Le:"PUT",Ge:"PATCH",oe:"DELETE"};function Df(){return{id:"SYSTEM",displayName:"SYSTEM",roles:["admin"]}}U.prototype.h=!0;U.prototype.useLocalStorage=U.prototype.h;
U.prototype.Eb=function(a){if(this.h){var b=a.id;b||(b=Ef(),a.id=b);var c=X(this,b);if(c){for(var d in a)c[d]=a[d];V(this,b,c)}else a.localStorageObjectClass="entity",n(a.latitude&&!n(a.longitude))||(a.latitude=a.longitude=null),n(a.altitude)||(a.altitude=null),c=Ff(this),n(c.g.SKETCHUP_MODEL)?c.g.SKETCHUP_MODEL++:c.g.SKETCHUP_MODEL=1,V(this,b,a);return C({success:!0,id:b})}return Q(this,"SetEntity",a)};U.prototype.setEntity=U.prototype.Eb;
U.prototype.Ua=function(a,b,c){return this.h?(b=X(this,a))&&!b.ca?(b.commentCount=Gf(this,a),b.reviewCount=Hf(this,a),b.averageRating=If(this,a),b.currentUserRating=Jf(this,a,this.a),a=new P(this,b),a.localStorageObjectClass="entity",C(a)):D(b&&b.ca?H("CollectionElementType with id "+a+" does not exist","OBJECT_DOES_NOT_EXIST"):H(null,"RECORD_NOT_FOUND")):Q(this,"GetEntity",{id:a,showBinaryAttributes:b||!1,recordEvent:c||!1}).then(function(a){return new P(this,a)},void 0,this)};
U.prototype.getEntity=U.prototype.Ua;U.prototype.nb=function(a){if(this.h){Kf(this,a,"entity");var b=Ff(this);b.g.SKETCHUP_MODEL--;0===b.g.SKETCHUP_MODEL&&delete b.g.SKETCHUP_MODEL;return C({id:a,success:!0})}return Q(this,"DeleteEntity",{id:a})};U.prototype.deleteEntity=U.prototype.nb;U.prototype.Mb=function(a){return this.h?(Lf(this,a,"entity"),C({id:a,success:!0})):Q(this,"UndeleteEntity",{id:a})};U.prototype.undeleteEntity=U.prototype.Mb;
U.prototype.Ob=function(a){if(v(a.id))throw H("Please provide an ID for the material you wish to update.");return Mf(this,"PUT","materials/"+a.id,a)};U.prototype.updateMaterial=U.prototype.Ob;
U.prototype.pc=function(a){if(!v(a.id))throw H("Do not pass an ID when creating a new material.");if(null==a.binary)throw H("You must provide a binary for this material.");var b=this.f+"/warehouse/v1.0/materials",c=Ge(a),d=new qf(0),e=((new Date).getTime()+Math.random()).toString();return new B(function(a,g){Ac(d,"complete",function(b){b=b.S;var c=null;if(b&&Qd(b))c=b.getResponseHeader("WHP-ID"),201===b.getStatus()?a({id:c,duplicate:!1}):204===b.getStatus()?a({id:c,duplicate:!0}):(c=H(Y("Oops, something went wrong while creating your material.")),
g(c));else{try{c=Rd(b)}catch(d){c=Nf(this,b,d)}g(c)}},!1,this);var h=new FormData,m;for(m in c)c.hasOwnProperty(m)&&h.append(m,c[m]);d.send(e,b,"POST",h)},this)};U.prototype.createMaterial=U.prototype.pc;U.prototype.ub=function(a,b,c){return Mf(this,"GET","materials/"+a,{id:a,showBinaryAttributes:b||!1,recordEvent:c||!1}).then(function(a){return new S(this,a)},void 0,this)};U.prototype.getMaterial=U.prototype.ub;U.prototype.ob=function(a){return Mf(this,"DELETE","materials/"+a,{})};
U.prototype.deleteMaterial=U.prototype.ob;U.prototype.Nb=function(a){return Mf(this,"PATCH","materials/"+a,{id:a,isDeleted:!1})};U.prototype.undeleteMaterial=U.prototype.Nb;U.prototype.Cb=function(a){if(this.h){var b=a.id;b||(b=Ef(),a.id=b);var c=X(this,b);if(c){for(var d in a)c[d]=a[d];V(this,b,c)}else a.localStorageObjectClass="collection",c=Ff(this),n(c.f.USER_GENERATED)?c.f.USER_GENERATED++:c.f.USER_GENERATED=1,V(this,b,a);return C({success:!0,id:b})}return Q(this,"SetCollection",a)};
U.prototype.setCollection=U.prototype.Cb;U.prototype.mb=function(a){if(this.h){Kf(this,a,"collection");var b=Ff(this);b.f.USER_GENERATED--;0===b.f.USER_GENERATED&&delete b.f.USER_GENERATED;return C({id:a,success:!0})}return Q(this,"DeleteCollection",{id:a})};U.prototype.deleteCollection=U.prototype.mb;U.prototype.Lb=function(a){return this.h?(Lf(this,a,"collection"),C({id:a,success:!0})):Q(this,"UndeleteCollection",{id:a})};U.prototype.undeleteCollection=U.prototype.Lb;
U.prototype.Pa=function(a,b){return this.h?(b=X(this,a))&&!b.ca?(b.commentCount=Gf(this,a),b.reviewCount=Hf(this,a),b.averageRating=If(this,a),b.currentUserRating=Jf(this,a,this.a),b=new M(this,b),b.localStorageObjectClass="collection",C(b)):D(b&&b.ca?H("CollectionElementType with id "+a+" does not exist","OBJECT_DOES_NOT_EXIST"):H(null,"RECORD_NOT_FOUND")):Q(this,"GetCollection",{id:a,recordEvent:b||!1}).then(function(a){return new M(this,a)},null,this)};U.prototype.getCollection=U.prototype.Pa;
U.prototype.Db=function(a,b){return this.h?null!=a&&null!=b?X(this,a)?C({parentCollectionId:a,success:!0}):D(H(void 0,"OBJECT_DOES_NOT_EXIST",!1)):D(H(void 0,"MISSING_REQUIRED_INPUT_PARAMETER",!1)):Q(this,"SetDefaultCollectionThumbnail",{parentCollectionId:a,sortBy:b})};U.prototype.setDefaultCollectionThumbnail=U.prototype.Db;
U.prototype.la=function(a,b,c){if(this.h){if(c=X(this,a)){var d=c.U||{};c.U=d;if(X(this,b)){if(!0===d[b])return a=H("Collection with id "+a+" already contains item with id "+b,"COLLECTION_ALREADY_CONTAINS_ELEMENT"),D(a);d[b]=!0}Of(this,c);V(this,a,c);return C({parentCollectionId:a,childId:b,success:!0})}a=H(null,"RECORD_NOT_FOUND");return D(a)}d={};d.parentCollectionId=a;d.childId=b;d.childClass=c;return Q(this,"SetCollectionContains",d)};U.prototype.setCollectionContains=U.prototype.la;
U.prototype.wa=function(a,b,c){if(this.h){c=X(this,a);if(!c)return a=H(null,"RECORD_NOT_FOUND"),D(a);var d=c.U||{};c.U=d;if(!0===d[b])return delete d[b],Of(this,c),V(this,a,c),C({success:!0});a=H(null,"RECORD_NOT_FOUND");return D(a)}d={};d.parentCollectionId=a;d.childId=b;d.childClass=c;return Q(this,"DeleteCollectionContains",d)};U.prototype.deleteCollectionContains=U.prototype.wa;
U.prototype.Cc=function(a){if(this.h){var b;if(a=X(this,a))b=new M(this,a),b=Pf(this,b,{});b?b.success=!0:b={success:!1};return b.success?C(b):D(H(null,"RECORD_NOT_FOUND"))}return Q(this,"GetCollectionTree",{id:a})};U.prototype.getCollectionTree=U.prototype.Cc;U.prototype.zc=function(){return this.h?C({result:{lastCommitDate:"2015-03-06 01:37",commitId:"8af26cd662e8ca77ab2e05f8d0ff42e9a8d4d97c",branchName:"master",builddate:"2015-03-10 07:16"},success:!0}):Q(this,"GetBuildInfo",{})};
U.prototype.getBuildInfo=U.prototype.zc;function Ef(){function a(){return Math.floor(65536*Math.random()).toString(16)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}
function V(a,b,c){var d=X(a,b);if(d)for(var e in d)c.hasOwnProperty(e)||(c[e]=d[e]);if("object"===ba(c)){e=X(a,a.a)||a.c;var f=!0;if(a.b[b]){var d=X(a,b),g=c.creator.displayName!==d.creator.displayName;c.creator.id!==d.creator.id&&g||(c.creator=d.creator);null!=c.modifyTime&&c.modifyTime!==d.modifyTime&&(f=!1)}else c.id=b,d={},d.id=e.id,d.displayName=e.displayName,c.creator=d,c.createTime=c.createTime||vf();d={};d.id=e.id;d.displayName=e.displayName;c.modifier=d;f&&(c.modifyTime=vf())}a.b[b]=md(c)}
function X(a,b){a=a.b[b];if(void 0!==a)return ld(a)}function Kf(a,b,c){var d=X(a,b);if(d)if("object"!==typeof d||Array.isArray(d))a.b.removeItem(b);else{d.ca=!0;d.ea=[];for(var e=Qf(a,{testShowAll:!0,containsId:b,containsClass:"collection",backendClass:"collection"}),f=0;f<e.entries.length;f++){var g=e.entries[f].id;a.wa(g,b,c);d.ea.push(g)}a.b[b]=md(d)}}function Lf(a,b,c){var d=X(a,b);if(d){d.ca=!1;if(null!=d.ea){for(var e=0;e<d.ea.length;e++)a.la(d.ea[e],b,c);delete d.ea}a.b[b]=md(d)}}
U.prototype.nc=function(a){this.b.clear();a&&(this.c=Df());V(this,this.c.id,this.c);this.a=this.c.id};U.prototype.clearLocalStorage=U.prototype.nc;function Q(a,b,c,d){return Rf(a,a.f+"/warehouse/"+b,d||"GET",c||{},!0)}function Mf(a,b,c,d){return Rf(a,a.f+"/warehouse/v1.0/"+c,b,d)}
function Rf(a,b,c,d,e){var f=new qf(0),g="";d=Sf(d);return new B(function(a,m){Ac(f,"ready",function(a){a.S.V=!0},!1,this);Ac(f,"complete",function(b){b=b.S;var c=null;if(b&&Qd(b)){try{g=Rd(b)}catch(d){c=Nf(this,b,d),m(c)}a(g);return C(g)}try{c=Rd(b)}catch(d){c=Nf(this,b,d)}m(c)},!1,this);var y=((new Date).getTime()+Math.random()).toString(),K=Tf(d),K=$e(K).toString();if("GET"===c){var L=b+"?"+K,L=L+((v(K)?"":"&")+"cache="+(new le).getTime().toString());if(2048<=L.length)c="POST";else{f.send(y,L,
c);return}}"POST"===c&&e?f.send(y,b,c,K):f.send(y,b,c,JSON.stringify(d),{"Content-Type":"application/json"})},a)}function Nf(a,b,c){if(-1!=c.message.indexOf("Invalid JSON string"))if(200===b.getStatus()&&a.g||0>=b.getStatus())a=H(null,"INTERNET_DISCONNECTED");else{var d;try{d=b.j?b.j.responseText:""}catch(e){F(b.C,"Can not get responseText: "+e.message),d=""}a=H(d)}else a=H("Encountered unknown error.");return a}
function Uf(a,b){return new B(function(a,d){var e=!1;window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP"));e.open("POST","/warehouse/SetBinary",!0);e.timeout=6E5;e.ontimeout=function(){d(H(null,"FILE_UPLOAD_TIMEOUT",!1))};e.onerror=function(){d(H(null,"FILE_UPLOAD_ERROR",!1))};e.onreadystatechange=function(){if(4===e.readyState&&e.responseText)if(200===e.status){var b=ld(e.responseText);a(b)}else d(H(null,"NETWORK_SERVER_ERROR",!1))};try{e.send(b)}catch(f){d(H(null,
"FILE_UPLOAD_ERROR",!1))}},a)}U.prototype.search=function(a){if(this.h){a=Qf(this,a);try{if(a)return C(a)}catch(e){return D(H(e.toString()))}return C(a)}var b={},c;for(c in a){var d=a[c];n(d)&&("backendClass"===c?("both"===d&&(d="collectionorentity"),b["class"]=d):b[c]="class"===c&&"both"===d?"collectionorentity":d)}return Q(this,"Search",b)};U.prototype.search=U.prototype.search;U.prototype.Dd=function(a,b,c,d){return Q(this,"NeoSearch",{Xe:a,offset:b,count:c,bf:d||!1})};U.prototype.neoSearch=U.prototype.Dd;
function Pf(a,b,c){var d={};if(a.h){d.id=b.w();d.title=b.getTitle();d.entityCount=Qf(b.b,{parentCollectionId:b.a.id,backendClass:"entity"}).entries.length;var e={};if(!c[b.w()]){c[b.w()]=b;b=Qf(b.b,{parentCollectionId:b.a.id,backendClass:"collection"}).entries;for(var f=0;f<b.length;f++){var g=new M(a,b[f]);e[g.w()]=Pf(a,g,c)}}d.childCollections=e}return d}function Vf(a,b){return(""+a).toLowerCase()===(""+b).toLowerCase()}
function Wf(a,b){return-1<(""+a).toLowerCase().indexOf((""+b).toLowerCase())}function Xf(a,b){var c=null!=b&&"DESC"===b?-1:1;return function(b,e){return(b[a]<e[a]?-1:b[a]>e[a]?1:0)*c}}U.prototype.Jb=function(a){if(this.h)return Yf(this,a);a=nb(a);Ta(Bf,function(b){delete a[b]});Ta(zf,function(b){if(p(a[b])){var c=a[b];0===c.length?delete a[b]:a[b]=c.join(",")}});Ta(Af,function(b){if(a.hasOwnProperty(b)){var c=a[b];null!=c?a[b]=md(c):delete a[b]}});return Q(this,"SetUser",a)};U.prototype.setUser=U.prototype.Jb;
function Yf(a,b){var c=b.id;c||(c=Ef(),b.id=c);if(b.rolesToAdd&&0<b.rolesToAdd.length){b.roles=b.roles||[];for(var d=0;d<b.rolesToAdd.length;d++){var e=b.roles,f=b.rolesToAdd[d];0<=x(e,f)||e.push(f)}Xa(b.rolesToAdd)}if(b.rolesToRemove&&0<b.rolesToRemove.length){b.roles=b.roles||[];for(d=0;d<b.rolesToRemove.length;d++)Ya(b.roles,b.rolesToRemove[d]);Xa(b.rolesToRemove)}var e=b.notifications,g=b.notificationPreferencesToAdd;if(null!=g){for(d=0;d<g.length;d++){var h=g[d];(f=Cf(e,h.trigger))?(h=Za(f.notify,
h.notify),cb(h),f.notify=h):e.push(h)}Xa(g)}g=b.notificationPreferencesToRemove;if(null!=g){for(d=0;d<g.length;d++)if(h=g[d],f=Cf(e,h.trigger)){for(var h=h.notify,m=f.notify,y=0;y<h.length;y++)Ya(m,h[y]);!m.length&&Ya(e,f)}Xa(g)}b.localStorageObjectClass="user";V(a,c,b);c=new T(a,X(a,c));return C(c)}U.prototype.pd=function(a,b){return Zf(this,"customWarehouseUrl",a,b||!1)};U.prototype.getUserByCustomWarehouseUrl=U.prototype.pd;U.prototype.od=function(a,b){return Zf(this,"id",a||"",b||!1)};
U.prototype.getUser=U.prototype.od;
function $f(a,b,c,d){if(!d)return null;var e=0,f=0,g=X(a,"dsoReviews");if(g)for(var h in g){var m=g[h];n(m[b])&&("entity"==m.subjectClass?e++:f++)}d.reviewedEntityCount=e;d.reviewedCollectionCount=f;e=Qf(a,{createUserId:b,backendClass:"entity"});d.entityCount={};0<e.entries.length&&(d.entityCount.SKETCHUP_MODEL=e.entries.length);e=Qf(a,{createUserId:b,backendClass:"collection"});d.collectionCount={};0<e.entries.length&&(d.collectionCount.USER_GENERATED=e.entries.length);(e=X(a,"dso_comments"))&&(d.commentCount=
ag(a,e,b||""));c||delete d.personalInfo;return new T(a,d)}function Ff(a){return a.h?null!=a.a?bg(a,a.a,void 0):null:null}function bg(a,b,c){if(!a.h)return null;c=c||!1;var d=X(a,b)||null;return $f(a,b,c,d)}function cg(a,b){var c=!1;"both"!==a||"entity"!==b.localStorageObjectClass&&"collection"!==b.localStorageObjectClass||(c=!0);return c}
function Qf(a,b){if(a.h){var c={total:0};c.startRow=parseInt(b.startRow,10)||1;c.entries=[];b.containsId&&b.containsClass&&(b.backendClass="collection");for(var d in a.b)if(a.b.hasOwnProperty(d)){var e=!0,f=X(a,d);if("boolean"!==typeof f&&!0!==f.deleted){b.type&&(e&=Vf(f.type,b.type));b.title&&(e&=Vf(f.title,b.title));b.description&&(e&=Wf(f.description,b.description));if(b.reviewedByUser){var g=b.reviewedByUser,h=X(a,"dsoReviews");h&&(e=(h=h[d])?e&null!=h[g]:!1)}if(b.attribute){var m=b.attribute;
p(m)||(m=ld(m));h=[];for(g=0;g<m.length;g++){var y=m[g],K=y.category,L=y.name,R=y.operator,y=y.value;h[g]=!1;f.attributes=f.attributes||{};K=f.attributes[K];null!=K?(L=K[L],null!=L?(L=L.value,"="==R?L===y&&(h[g]=!0):"<="==R?L<=y&&(h[g]=!0):">="==R?L>=y&&(h[g]=!0):"<>"==R?L!==y&&(h[g]=!0):"LIKE"===R?Wf(L,y)&&(h[g]=!0):"EXISTS"===R&&(h[g]=!0)):"NOT EXISTS"===R&&(h[g]=!0)):"NOT EXISTS"===R&&(h[g]=!0)}for(m=0;m<h.length;m++)e&=h[m]}!b.showAttributes&&null!=f.attributes&&delete f.attributes;if(b.tags){R=
b.tags;y={};for(g=0;g<R.length;g++)for(L=R[g],y[L]=!1,K=f.tags||[],m=0;m<K.length;m++)h=K[m],Vf(L,h)&&(y[L]=!0);for(g=0;g<R.length;g++)e&=y[R[g]]}if(b.q){m=!1;if(f.tags)for(g=0;g<f.tags.length;g++)if(h=f.tags[g],Wf(h,b.q)){m=!0;break}e&=Wf(f.title,b.q)||Wf(f.description,b.q)||f.tags&&m}g="entity";Vf(b.backendClass,"collection")?g="collection":Vf(b.backendClass,"both")&&(g="both");e=cg(g,f)?e&1:e&f.localStorageObjectClass===g;if(b.parentCollectionId)if(f.id===b.parentCollectionId){var h=f.U||{},W;
for(W in h)h.hasOwnProperty(W)&&!0===h[W]&&(e=X(a,W),(m=cg(g,f))||e.localStorageObjectClass===g)&&(m&&(e["class"]=e.localStorageObjectClass),c.total++,c.entries.push(e));continue}else e=!1;b.createUserDisplayName&&f.creator&&f.creator.displayName&&(e&=f.creator.displayName===b.createUserDisplayName);b.createUserId&&f.creator&&f.creator.id&&(e&=f.creator.id===b.createUserId);b.modifyUserDisplayName&&f.modifier&&f.modifier.displayName&&(e&=f.modifier.displayName===b.modifyUserDisplayName);b.containsId&&
b.containsClass&&(h=f.U||{},e&=!0===h[b.containsId]);switch(b.show||"all"){case "public":e=e&&!f.isPrivate&&!f.isHidden;break;case "private":e=e&&f.isPrivate&&!f.isHidden;break;default:e=e&&!f.isHidden}e&&f.isPrivate&&a.a&&(e=e&&f.creator&&f.creator.id==a.a);f.id===b.excludeId&&(e=!1);e&&(c.total++,c.entries.push(f))}}for(var la in c.entries)(d=Hf(a,la))&&(c.entries[la].reviewCount=d),(d=If(a,la))&&(c.entries[la].averageRating=d);if(b.sortBy)if("class ASC,title ASC"===b.sortBy){la=[];d=[];if(c&&null!=
c.entries&&p(c.entries)&&0<c.entries.length)for(f=0;f<c.entries.length;f++)W=c.entries[f],"collection"===W["class"]?la.push(W):"entity"===W["class"]&&d.push(W);f=[];if(0<la.length)for(la.sort(Xf("title","ASC")),g=0;g<la.length;g++)f.push(la[g]);if(0<d.length)for(d.sort(Xf("title","ASC")),g=0;g<d.length;g++)f.push(d[g]);0<f.length&&(c.entries=f)}else d="ASC",f=b.sortBy.split(" "),la=f[0],2<=f.length&&(d=f[1]),c.entries.sort(Xf(la,d));c.endRow=c.total;if(b.startRow||b.endRow)la=parseInt(b.startRow,
10)||1,d=parseInt(b.endRow,10)||c.total,d>c.total&&(d=c.total),c.entries=c.entries.slice(la-1,d),c.startRow=la,c.endRow=d;for(g=0;g<c.entries.length;g++){la=c.entries[g];d=la.binaries||{};la.binaryNames=[];for(var ga in d)la.binaryNames.push(ga)}c.success=!0;!0!==b.calculateTotal&&(c.total=void 0);return c}return null}
function Zf(a,b,c,d){d=d||!1;if(a.h){var e="customWarehouseUrl"===b?void 0:c,f=void 0;if("customWarehouseUrl"===b)for(var g in a.b){if(a.b.hasOwnProperty(g)){b=ld(a.b[g]);var h=b.customWarehouseUrl;if("user"===b.localStorageObjectClass&&null!=c&&null!=h&&!wa(c,h)){e=g;f=X(a,e);break}}}else f=X(a,e),null!=e&&e.length||null==a.a||(f=X(a,a.a),e=a.a);if(f)return a=$f(a,e,d,f),C(a);a=null;a=n(e)&&""!=e?"RECORD_NOT_FOUND":"AUTHORIZE_ANONYMOUS_ACCESS_TO_GETUSER_WITHOUT_PARAMS_NOT_ALLOWED";return D(H(null,
a))}e={};e[b]=c;e.showPersonalInfo=d;return Q(a,"GetUser",e).then(function(a){return!a.id||v(a.id)?D(a):new T(this,a)},void 0,a)}function dg(a,b){if(a.h){var c=X(a,b.subjectId);"user"!=b.subjectClass||c||(c={});c.attributes=c.attributes||{};var d=c.attributes;d[b.category]=d[b.category]||{};var e={};e.value=b.value;e.dataType=b.dataType;d[b.category][b.name]=e;V(a,b.subjectId,c)}}U.prototype.setAttribute=function(a){return this.h?(dg(this,a),C(null)):Q(this,"SetAttribute",a)};
U.prototype.setAttribute=U.prototype.setAttribute;U.prototype.zb=function(a){if(this.h){var b=X(this,a.subjectId);b&&(b.attributes={},V(this,a.subjectId,b));var b=ld(a.attributes)||{},c;for(c in b)if(b.hasOwnProperty(c))for(var d in b[c])b[c].hasOwnProperty(d)&&dg(this,{subjectId:a.subjectId,subjectClass:a.subjectClass,category:c,name:d,value:b[c][d].value,dataType:b[c][d].dataType});return C({success:!0,subjectId:a.subjectId})}return Q(this,"SetAttributes",a,"POST")};
U.prototype.replaceAttributes=U.prototype.zb;U.prototype.removeAttribute=function(a){if(this.h){var b=X(this,a.subjectId);b.attributes=b.attributes||{};var c=b.attributes;c[a.category]=c[a.category]||{};return c[a.category]?(delete c[a.category][a.name],jb(c[a.category])||delete b.attributes[a.category],V(this,a.subjectId,b),C()):D(H(null,"ATTRIBUTE_CATEGORY_NOT_FOUND"))}return Q(this,"SetAttribute",a)};U.prototype.removeAttribute=U.prototype.removeAttribute;
U.prototype.Ba=function(a){if(this.h){var b={subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true",entries:[]},c=X(this,"dsoEvents")||{};c[a.subjectId]||(c[a.subjectId]=b);for(var c=c[a.subjectId],d=0;d<c.length;d++){var e=X(this,c[d]),f=e.createTime,f=f.substr(0,f.indexOf(" ")).replace(/-/g,""),g={};if(!(null!=a.startDate&&f<a.startDate||null!=a.endDate&&f>a.endDate)){for(var h=!1,m=0;m<b.entries.length;m++)b.entries[m].date==f&&(g=b.entries[m],h=!0);e.type in g?g[e.type]+=1:(g.date=f,
g[e.type]=1);h||b.entries.push(g)}}return C(b)}return Q(this,"GetEventSummary",a)};U.prototype.getEventSummary=U.prototype.Ba;U.prototype.ba=function(a){if(this.h){var b=X(this,a.subjectId);b.sa[a.name]&&delete b.sa[a.name];V(this,b.id,b);return C({success:!0,name:a.name,subjectId:b.id,subjectClass:b.Bd})}return Q(this,"DeleteBinary",a)};U.prototype.deleteBinary=U.prototype.ba;
U.prototype.Ia=function(a){if(this.h){var b=Ef(),c=X(this,a.subjectId),b={id:b,contentUrl:"http://foo.bar/warehouse/getpubliccontent?id="+b,fileSize:a.binary.size,originalFileName:a.binary.name,types:a.name,creator:c.va,modifier:c.Ga,attributes:a.attributes};c.sa||(c.sa={});c.sa[a.name]=b;V(this,c.id,c);return C({success:!0,name:a.name,subjectId:c.id,subjectClass:c.Bd})}var c=new FormData,d;for(d in a)a.hasOwnProperty(d)&&("binary"==d.toLowerCase()?b=d:c.append(d,a[d]));null!=b&&c.append(b,a[b]);
a=Uf(this,c);return a=a.then(void 0,function(a){if(!1===a.success){var b=window.Raven;null!=b&&b.captureMessage(a.errorId||a.message||"Promise for doBinaryPost_ rejected with no message.")}return D(a)})};U.prototype.setBinary=U.prototype.Ia;
U.prototype.ma=function(a){if(this.h){var b=X(this,a.subjectId),c=b.translations||{},d=c[a.language]||{};d[a.name]=a.value;c[a.language]=d;b.translations=c;V(this,a.subjectId,b);return C({subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true"})}return Q(this,"SetTranslation",a)};
U.prototype.ka=function(a){if(this.h){var b=X(this,a.subjectId),c=b.translations||{},d=c[a.language]||{};d[a.name]&&delete d[a.name];c[a.language]=d;b.translations=c;V(this,a.subjectId,b);return C({subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true"})}return Q(this,"SetTranslation",a)};
function Of(a,b){var c=b.U||{};b.entityCount=0;b.collectionCount=0;for(var d in c)if(c.hasOwnProperty(d)&&!0===c[d]){var e=X(a,d).localStorageObjectClass;"entity"===e?b.entityCount++:"collection"===e&&b.collectionCount++}}
U.prototype.Ja=function(a){if(this.h){if(!a.subjectId||v(a.subjectId)||!a.subjectClass||v(a.subjectClass)||!a.rating||v(a.rating))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));if(5<a.rating||0>a.rating)return D(H(null,"INVALID_PARAMETER_VALUE"));var b=Ef();a.id=b;V(this,b,a);var b=Ff(this).w(),c=X(this,"dsoReviews"),d=a.subjectId;n(c)||(c={});d in c||(c[d]={});c[d][b]=a;V(this,"dsoReviews",c);return C({subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true"})}return Q(this,"SetReview",
a)};U.prototype.setReview=U.prototype.Ja;U.prototype.xa=function(a){if(this.h){if(!a.subjectId||v(a.subjectId)||!a.subjectClass||v(a.subjectClass))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var b=Ff(this).w(),c=X(this,"dsoReviews"),d=a.subjectId;if(!(n(c)&&d in c))return C();var e=c[d][b].id;c[d][b]={};V(this,"dsoReviews",c);Kf(this,e,null);return C({subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true"})}return Q(this,"DeleteReview",a)};U.prototype.deleteReview=U.prototype.xa;
U.prototype.Da=function(a){var b=a.startRow||1,c=a.endRow||20;if(this.h){if(!a.subjectId||v(a.subjectId)||!a.subjectClass||v(a.subjectClass))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var d={subjectId:a.subjectId,subjectClass:a.subjectClass,success:"true",total:0,entries:[]},e=X(this,"dsoReviews");e||(e={},e[a.subjectId]=d);var e=e[a.subjectId],f=0,g=0,h;for(h in e)if(f++,!(f<b||f>c)){var m=X(this,e[h].id),y=bg(this,h);m&&(g++,m.userId=y.w(),m.displayName=y.getDisplayName(),m.picture=y.Oa(),
"entity"===a.subjectClass?(m.entityCount=y.g,m.reviewedEntityCount=y.m):(m.collectionCount=y.f,m.reviewedCollectionCount=y.i));d.entries.push(m)}0<g&&(d.total=g);d.startRow=a.startRow||1;d.endRow=a.endRow||d.total;return C(d)}return Q(this,"GetReviews",a)};U.prototype.getReviews=U.prototype.Da;function Hf(a,b){if(!a.h)throw"getReviewCount_ should only be called in localStorage mode.";var c=0;if((a=X(a,"dsoReviews"))&&(a=a[b]))for(var d in a)a.hasOwnProperty(d)&&c++;return c}
function If(a,b){if(!a.h)throw"getAverageRating_ should only be called in localStorage mode.";var c=0,d=0;if((a=X(a,"dsoReviews"))&&(a=a[b]))for(var e in a)a.hasOwnProperty(e)&&(b=a[e],null==b.rating||isNaN(b.rating)||(c++,d+=parseInt(b.rating,10)));e=void 0;0<c&&(e=d/c);return e}function Jf(a,b,c){if(!a.h)throw"getCurrentUserRating_ should only be called in localStorage mode.";var d=void 0;(a=X(a,"dsoReviews"))&&(b=a[b])&&(c=b[c])&&(d=c.rating);return d}
function Gf(a,b){if(!a.h)throw"getCommentCount_ should only be called in localStorage mode.";return(a=X(a,"dso_comments"))?(a.data[b]||[]).length:0}
U.prototype.ab=function(a){var b=eg(a);if(null!=b.success&&!1===b.success)return D(H(null,b.errorId));if(this.h){b=a.commentId||Ef();a.commentId=b;var c=Ff(this).w();a.userId=c;(c=X(this,"dso_comments"))||(c={data:{}});var d=a.subjectId;d in c.data||(c.data[d]=[]);null!=a.parentCommentId||(a.parentCommentId=null);V(this,b,a);c.data[d].push(a);V(this,"dso_comments",c);return C({commentId:b,success:!0})}return Q(this,"SetComment",a)};
U.prototype.Ra=function(a){if(v(a.subjectId)||v(a.subjectClass))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var b=a.startRow||1,c=a.endRow||20,d=a.sortBy||"createTime ASC";if(this.h){var e={success:!0,startRow:b,endRow:c,total:0,entries:[]},f=X(this,"dso_comments");if(f){var g=f.data[a.subjectId];if(null!=g&&null!=g.length&&0<g.length){a=sa(d)?"ASC":"DESC";g=fg(this,g,a,f);d=new ef;gg(this,d,g);for(var g=[],h=0;!d.isEmpty();){var h=ff(d),m=hg(this,f,h.a.commentId,a);if(0<m.length)gg(this,
d,m);else if(h.c())continue;null===h.a.parentCommentId?ab(g,0,0,h):(m=ig(this,g,h.a.parentCommentId)+1)&&ab(g,m,0,h)}h=g.length;c<b&&(c=20);f=[];f=bb(g,b-1,c);e.entries=f;e.startRow=b;e.endRow=c;e.total=h}}return C(e)}var y=r(function(a){for(var b=[],c=0;c<a.entries.length;++c){var d=jg(this,a.entries[c],null);b.push(d)}return b},this),b=r(function(a){if(!0!==a.success)return D(H(Y("An unknown error occurred while getting comments.")));var b=y(a);a.entries=b;return C(a)},this);return Q(this,"GetComments",
a).then(b,void 0,this)};function ig(a,b,c){if(!a.h)throw"findCommentInArray_ should only be called when in localStorage mode.";a=-1;for(var d=0;d<b.length;d++)if(b[d].a.commentId===c){a=d;break}return a}function fg(a,b,c,d){if(!a.h)throw"getTopLevelComments_ should only be called when in localStorage mode.";for(var e=[],f=0;f<b.length;f++){var g=b[f];null===g.parentCommentId&&(g=jg(a,g,d),0<=x(e,g)||e.push(g))}return kg(a,e,c)}
function jg(a,b,c){var d={};d.commentId=b.commentId;d.parentCommentId=b.parentCommentId;d.userId=b.userId;d.commentText=b.commentText;d.createTime=b.createTime;d.modifyTime=b.modifyTime;d.creator=b.creator;d.modifier=b.modifier;d.subjectClass=b.subjectClass;d.subjectId=b.subjectId;if(a.h){var e=bg(a,b.userId);d.displayName=e.getDisplayName();d.picture=e.Oa()}else d.displayName=b.displayName,d.picture=b.picture;a.h?c?(d.commentCount=ag(a,c,b.userId),d.reportCount=b.reportCount||0):(d.commentCount=
0,d.reportCount=0):(d.commentCount=b.commentCount,d.reportCount=b.reportCount);d.isDeleted=b.isDeleted;return new N(d)}
function lg(a){var b={};b.reportId=a.reportId;b.isResolved=a.isResolved;b.resolution=a.resolution;b.commentId=a.commentId;b.reporterId=a.reporterId;b.description=a.description;b.userId=a.userId;b.displayName=a.displayName;b.commentText=a.commentText;b.isMuted=a.isMuted;b.commentDeleted=a.commentDeleted;b.createTime=a.createTime;b.modifyTime=a.modifyTime;b.subjectId=a.subjectId;b.subjectClass=a.subjectClass;return new Ie(b)}
function gg(a,b,c){if(!a.h)throw"addCommentsToQueue_ should only be called when in localStorage mode.";for(a=0;a<c.length;a++)b.a.push(c[a])}function kg(a,b,c){if(!a.h)throw"sortCommentsArrayByCreationDate_ should only be called when in localStorage mode.";if(v(c))throw"You must pass in the required 'sortDirection' parameter.";return b.length?$a(b).sort(Xf("createTime",c)):b}
function hg(a,b,c,d){if(!a.h)throw"getCommentReplies_ should only be called in localStorage mode.";for(var e=[],f=X(a,c),g=b.data[f.subjectId],h=0;h<g.length;h++)f=g[h],!v(f.commentId)&&f.commentId===c||v(f.parentCommentId)||f.parentCommentId!==c||(f=jg(a,f,b),e.push(f));return kg(a,e,d)}
function ag(a,b,c){if(!a.h)throw"computeCommentCount_ should only be called in localStorage mode.";a=0;for(var d=lb(b.data),e=0;e<d.length;e++)for(var f=b.data[d[e]],g=0;g<f.length;g++)f[g].userId===c&&a++;return a}
U.prototype.Hd=function(a){var b=a.description||"";if(100<b.length)return D(H(null,"COMMENT_REPORT_DESCRIPTION_EXCEEDS_ALLOWED_LENGTH"));if(this.h){if(v(a.commentId)||null==a.comment||v(a.subjectId))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));var c=a.commentId,d=a.comment,e=a.subjectId;a=a.userId||"";var f="";if(a)var g=bg(this,a),f=g?g.getDisplayName():"";g=Ef();b={reportId:g,userId:a,displayName:f,subjectId:e,commentId:c,commentText:d.commentText,description:b,isResolved:!1,resolution:""};
V(this,g,b);f=X(this,"dso_comment_reports");e=b.subjectId;n(f)||(f={});e in f||(f[e]={});v(a)&&(a="anonymous");f[e][a]||(f[e][a]={});f[e][a][g]=g;V(this,"dso_comment_reports",f);null!=d&&(d instanceof N?d.a.reportCount&&0<Ka(d.a.reportCount)?d.a.reportCount++:d.a.reportCount=1:null!=d.reportCount&&0<Ka(d.reportCount)?d.reportCount++:d.reportCount=1,V(this,c,d));return C({commentId:b.commentId,reportId:b.reportId,success:!0})}return Q(this,"ReportComment",a)};U.prototype.reportComment=U.prototype.Hd;
U.prototype.Id=function(a){if(v(a.reportId)||v(a.resolution))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));if(200<a.resolution.length)return D(H(null,"COMMENT_REPORT_RESOLUTION_EXCEEDS_ALLOWED_LENGTH"));if(this.h){var b=Ff(this);if(!(0<=x(b.wb(),"moderator")||b.W("admin")))return D(H(null,"COMMENT_REPORT_RESOLVE_PERMISSION_DENIED"));b=X(this,a.reportId);b.We=!0;b.resolution=a.resolution;V(this,a.reportId,b);return C({reportId:a.reportId,success:!0})}return Q(this,"ResolveCommentReport",a)};
U.prototype.resolveCommentReport=U.prototype.Id;
U.prototype.Ec=function(a){if(this.h){var b={total:0};b.startRow=parseInt(a.startRow,10)||1;b.entries=[];var c=[],d=X(this,"dso_comment_reports"),e;for(e in d)if(d.hasOwnProperty(e)&&this.b[e]){var f=d[e],g;for(g in f)if(f.hasOwnProperty(g)){var h=f[g],m;for(m in h)h.hasOwnProperty(m)&&c.push(m)}}for(d=0;d<c.length;d++){e=!0;f=X(this,c[d]);a.commentId&&(e&=f.commentId===a.commentId);a.subjectId&&(e&=f.subjectId===a.subjectId);if(a.show)switch(a.show){case "unresolved":e&=!f.isResolved;break;case "resolved":e&=
f.isResolved}e&&(b.total++,e=lg(f),b.entries.push(e))}c=(a.sortBy||"createTime DESC").split(" ");b.entries.sort(Xf(c[0],1<c.length?c[1]:"ASC"));b.endRow=b.total;if(a.startRow||a.endRow)c=parseInt(a.startRow,10)||1,a=Math.min(parseInt(a.endRow,10)||b.total,b.total),b.entries=b.entries.slice(c-1,a),b.startRow=c,b.endRow=a;b.success=!0;try{return C(b)}catch(y){return D(H(y.toString()))}}b=r(function(a){if(!0!==a.success)return D(H(Y("An unknown error occurred while getting comment reports.")));for(var b=
[],c=0;c<a.entries.length;++c){var d=lg(a.entries[c]);b.push(d)}a.entries=b;return C(a)},this);return Q(this,"GetCommentReports",a).then(b,void 0,this)};U.prototype.getCommentReports=U.prototype.Ec;
U.prototype.rc=function(a){if(!Ff(this).W("admin"))return D(H(null,"COMMENT_REPORT_DELETE_PERMISSION_DENIED"));if(v(a.reportId))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));if(this.h){var b={},c=X(this,a.reportId),d=c.userId,c=c.subjectId;this.b.removeItem(a.reportId);var e=X(this,"dso_comment_reports");delete e[c][d][a.reportId];V(this,"dso_comment_reports",e);b.reportId=a.reportId;b.success=!0;return C(b)}return Q(this,"DeleteCommentReport",a)};U.prototype.deleteCommentReport=U.prototype.rc;
U.prototype.sc=function(a,b){if(v(a)||v(b))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));if(this.h){var c=H(),d;a:{if(!this.h)throw"fetchCommentFromLocalStore_ should only be called when in localStorage mode.";d=X(this,a).subjectId;d=X(this,"dso_comments").data[d];for(var e=0;e<d.length;e++){var f=d[e];if(f.commentId===a){d=f;break a}}d=null}if(!d)return c.errorId="RECORD_NOT_FOUND",D(c);e=new T(this,X(this,this.a));if(!e)return c.errorId="PAGE_REQUIRES_LOGIN",D(c);if(!e.Ya(d)&&!e.W("admin"))return c.errorId=
"INSUFFICIENT_PERMISSIONS",D(c);d.commentText=b;if(!this.h)throw"updateExistingCommentInLocalStore_ should only be called when in localStorage mode.";e=d.commentId;V(this,e,d);f=X(this,"dso_comments");a=f.data[d.subjectId];for(b=0;b<a.length;b++)if(a[b].commentId===e){a[b]=d;V(this,"dso_comments",f);break}c.success=!0;return C(c)}return Q(this,"EditComment",{commentId:a,commentText:b})};U.prototype.editComment=U.prototype.sc;
function eg(a){var b={success:!1,errorId:null};if(!a||v(a.subjectId)||v(a.subjectClass)||v(a.commentText))return b.errorId="MISSING_REQUIRED_INPUT_PARAMETER",b;if(2048<a.commentText.length)return b.errorId="COMMENT_EXCEEDS_ALLOWED_LENGTH",b;b.success=!0;return b}
U.prototype.qc=function(a){if(v(a))return D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"));if(this.h){var b=H();b.commentId=a;var c=X(this,a);if(!c)return b.errorId="RECORD_NOT_FOUND",D(b);var d=new T(this,X(this,this.a));if(!d)return b.errorId="PAGE_REQUIRES_LOGIN",D(b);if(!d.Ya(c)&&!d.W("moderator"))return b.errorId="INSUFFICIENT_PERMISSIONS",D(b);d=X(this,"dso_comments");c=d.data[c.subjectId];if(null==c)return b.errorId="RECORD_NOT_FOUND",D(b);for(var e=c.length,f=0;f<e;f++)c[f].commentId===a&&(c[f].isDeleted=
!0);V(this,"dso_comments",d);b.success=!0;return C(b)}return Q(this,"DeleteComment",{commentId:a})};U.prototype.deleteComment=U.prototype.qc;U.prototype.oc=function(a){return a&&null!=a.senderId&&null!=a.recipientId&&null!=a.message?this.h?C({success:!0}):Q(this,"ContactUser",a):D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER"))};U.prototype.contactUser=U.prototype.oc;
U.prototype.Nd=function(a,b){return null==a||null==b?D(H(null,"MISSING_REQUIRED_INPUT_PARAMETER")):this.h?Ff(this).W("moderator")?(a=bg(this,a),a.a.canContactUser=b,a.save()):C():Q(this,"SetContactUser",{UserId:a,canContactUser:b})};U.prototype.setContactUser=U.prototype.Nd;
U.prototype.ed=function(a){if(this.h){var b=a.q;return null!=a.q_test_returns&&null!=a.q_test_returns[b]?C(a.q_test_returns[b]):C([])}a.contentType="3dw";return Mf(this,"GET","suggestions",a).then(function(a){if(null==a.suggestions)return D(H(Y("No results")));for(var b=[],e=0;e<a.suggestions.length;e++)b.push(a.suggestions[e].q);return b},void 0,this)};U.prototype.getSearchSuggestions=U.prototype.ed;
function Sf(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];null!=d&&(b[c]=d)}for(var e in b)c=b[e],"tags"==e.toLowerCase()?(a=e,c=p(c)?c.join(","):c,b[a]=c):null!=c&&(b[e]=c);return b}function Tf(a){var b={},c;for(c in a){var d=a[c];fa(d)||p(d)?b[c]=md(d):b[c]=d}return b}function mg(a,b){if(q(b)){var c=ng(a,b);c&&(a.style[c]=void 0)}else for(c in b){var d=a,e=b[c],f=ng(d,c);f&&(d.style[f]=e)}}var og={};
function ng(a,b){var c=og[b];if(!c){var d=Ia(b),c=d;void 0===a.style[d]&&(d=(ac?"Webkit":$b?"Moz":Yb?"ms":Xb?"O":null)+Ja(d),void 0!==a.style[d]&&(c=d));og[b]=c}return c}
function pg(a){var b=a.offsetWidth,c=a.offsetHeight,d=ac&&!b&&!c;if((!n(b)||d)&&a.getBoundingClientRect){var e;a:{try{e=a.getBoundingClientRect()}catch(f){e={left:0,top:0,right:0,bottom:0};break a}Yb&&a.ownerDocument.body&&(a=a.ownerDocument,e.left-=a.documentElement.clientLeft+a.body.clientLeft,e.top-=a.documentElement.clientTop+a.body.clientTop)}return new Zd(e.right-e.left,e.bottom-e.top)}return new Zd(b,c)}var qg=null,rg=null,sg=$b||ac&&!ee||Xb||!ee&&!Yb&&"function"==typeof l.atob;
function tg(a){if(sg)return l.atob(a);var b="";ug(a,function(a){b+=String.fromCharCode(a)});return b}function ug(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=rg[c];if(null!=e)return e;if(!ua(c))throw Error("Unknown base64 encoding at char: "+c);}return b}vg();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),h=c(64);if(64===h&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=h&&b(g<<6&192|h))}}
function vg(){if(!qg){qg={};rg={};for(var a=0;65>a;a++)qg[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),rg[qg[a]]=a,62<=a&&(rg["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}}function wg(a){this.a=a||{cookie:""}}var xg=/\s*;\s*/;k=wg.prototype;
k.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');n(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":c?";expires="+(new Date(oa()+1E3*c)).toUTCString():";expires="+(new Date(1970,1,1)).toUTCString();this.a.cookie=a+"="+b+e+d+c+f};
k.get=function(a,b){for(var c=a+"=",d=(this.a.cookie||"").split(xg),e=0,f;f=d[e];e++){if(!f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};k.B=function(){return yg(this).keys};k.v=function(){return yg(this).values};k.isEmpty=function(){return!this.a.cookie};k.u=function(){return this.a.cookie?(this.a.cookie||"").split(xg).length:0};k.clear=function(){for(var a=yg(this).keys,b=a.length-1;0<=b;b--){var c=a[b];this.get(c);this.set(c,"",0,void 0,void 0)}};
function yg(a){a=(a.a.cookie||"").split(xg);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}}
t("frontend.ExternalUrl",{LOCALHOST_DEV_LOGIN_PATH:"/warehouse/authorizewithlocaldev",LOCALHOST_DEV_LOGOFF_PATH:"/warehouse/logoff",SKETCHUP_IDP_PREFIX:"https://accounts.sketchup.com/",SKETCHUP_IDP_PREFIX_STAGE:"https://stg-accounts.sketchup.com/",SKETCHUP_IDP_LOGIN:"/user/login",SKETCHUP_IDP_LOGOUT:"/user/logout",REPORT_ABUSE_FORM_PREFIX:"http://help.sketchup.com/",REPORT_ABUSE_FORM_SUFFIX:"/report-abuse/3DWarehouse",SKETCHUP_MOBILE_VIEWER_IPAD:"https://itunes.apple.com/us/app/sketchup-mobile-viewer/id796352563",
SKETCHUP:"http://www.sketchup.com/",SKETCHUP_WHATS_NEW:"https://www.sketchup.com/products/sketchup-pro/new-in-2018",SKETCHUP_RENEW_LICENSE:"http://www.sketchup.com/license/renew",SKETCHUP_EDU_K12:"https://www.sketchup.com/education/grants",SKETCHUP_EDU_HIGHER_ED:"https://www.sketchup.com/3Dfor/education-students",SKETCHUP_BLOG_MATERIALS:"https://blog.sketchup.com/article/3dwarehouse-materials",EXTENSION_WAREHOUSE:"https://extensions.sketchup.com/",SKETCHUP_BLOG_HASHTAGS:"https://blog.sketchup.com/Hashtag-3D-Warehouse",
HELP_CONTACT_ME:"https://help.sketchup.com/{languageCode}/privatemessaging",HELP_REDIRECT:"https://help.sketchup.com/{languageCode}/article/3000177",HELP_GEO_DATA_CHANGE:"https://help.sketchup.com/en/geodatachange",HELP_MATCH_PHOTO:"https://help.sketchup.com/en/article/3000115",HELP_MATCH_PHOTO_VIDEO:"https://www.youtube.com/watch?v=2hSyw6bobpc",MATERIALISE:"http://www.materialise.com",MATERIALISE_INFO:"https://cloud.materialise.com",APP_SKETCHUP_DEV:"https://dev-app.sketchup.com/",APP_SKETCHUP_STG:"https://stg-app.sketchup.com/",
APP_SKETCHUP_PROD:"https://app.sketchup.com/",MICROSOFT_IE_UPGRADE:"https://www.microsoft.com/en-us/download/internet-explorer.aspx",HASHTAGS_WARNING_BLOG_POST:"https://forums.sketchup.com/t/3d-warehouse-from-tags-hashtags/48239"});var zg={st:"jpg",lt:"jpg",smontage:"jpg",stl:"stl",s:"skp",s6:"skp",s7:"skp",s8:"skp",s13:"skp",s14:"skp",s15:"skp",s16:"skp",s17:"skp",s18:"skp",ks:"kmz",k2:"kmz",zip:"zip"};t("frontend.BinaryExtension",zg);
var Ag={"cs-CZ":"\u010de\u0161tina",de:"Deutsch",en:"English",es:"Espa\u00f1ol",fr:"fran\u00e7ais",it:"italiano",hu:"Magyar",nl:"Nederlands",pl:"Polski","pt-BR":"portugu\u00eas (Brasil)",sv:"Svenska",tr:"T\u00fcrk\u00e7e",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",ja:"\u65e5\u672c\u8a9e",ko:"\ud55c\uad6d\uc5b4","zh-CN":"\u7b80\u4f53\u4e2d\u6587","zh-TW":"\u7e41\u9ad4\u4e2d\u6587"};t("frontend.Language",Ag);
t("frontend.HelpLanguage",{de:"de",en:"en",es:"es",fr:"fr",it:"it",ja:"ja",ko:"ko",pl:"pl",ru:"ru",sv:"sv","pt-BR":"pt-BR","zh-CN":"zh-CN","zh-TW":"zh-TW"});t("frontend.AccountsLanguage",{de:"de",en:"en",es:"es",fr:"fr",it:"it",ja:"ja",ko:"ko",nl:"nl","pt-br":"pt-BR",ru:"ru",sv:"sv","zh-cn":"zh-CN","zh-tw":"zh-TW"});function Bg(a){this.a=new wg(a)}Bg.prototype.get=function(a,b){return this.a.get(a,b)};
Bg.prototype.set=function(a,b,c){if(null==a)throw Error("Cookie name undefined or null");if(!a.length)throw Error("Cookie name was empty");this.a.set(a,b,c,"/")};var Z={};t("frontend.l10n",Z);var Cg="undefined"!==typeof window?window.frontend.strings||{}:{};Z.lb=new Bg("undefined"!==typeof document?document:null);Z.rd=new Je("undefined"!==typeof window?window.location.href:null,!0);
Z.rb=function(){Z.F||(Z.F=Z.rd.b.get("hl")||Z.lb.get("hl","en")||"en");for(var a in Ag)if(Z.F.toLowerCase()==a.toLowerCase()){Z.F=a;break}if(!Ag[Z.F]){a=Z.F;var b=a.indexOf("-");-1<b&&(a=Z.F.substr(0,b));Ag[a]?Z.F=a:Z.F="en"}return Z.F};Z.getCurrentLanguage=Z.rb;Z.Ze=function(a){Z.F=a;Z.lb.set("hl",a,-1)};Z.Ye=function(a){a=a.replace("_","-");for(var b in Ag)if(!wa(b,a))return b;return null};Z.translate=function(a,b){b=b||Z.rb();if("en"==b)return a;b=(Cg[b.toLowerCase()]||{})[a];return n(b)?b:a};
var Y=Z.translate,Dg={value:"st",text:Y("Small Thumbnail"),downloadable:!1,uploadable:!0},Eg={value:"lt",text:Y("Large Thumbnail"),downloadable:!1,uploadable:!0},Fg={value:"bot_st",text:Y("Small Thumbnail"),downloadable:!1,uploadable:!1},Gg={value:"bot_lt",text:Y("Large Thumbnail"),downloadable:!1,uploadable:!1},Hg={value:"custom_st",text:Y("Small Thumbnail"),downloadable:!1,uploadable:!0},Ig={value:"cbanner",text:Y("Catalog Banner Image"),downloadable:!1,uploadable:!1},Jg={value:"avatar",text:Y("User Picture"),
downloadable:!1,uploadable:!1},Kg={value:"smontage",text:Y("Swivel"),downloadable:!1,uploadable:!1,frameWidth:400,frameHeight:300},Lg={value:"bot_smontage",text:Y("Swivel"),downloadable:!1,uploadable:!1,frameWidth:654,frameHeight:368},Ng={value:"skp_unknown",text:Y("SketchUp Model"),downloadable:!1,uploadable:!1},Og={value:"s",text:Y("SketchUp 5 Model"),downloadable:!1,uploadable:!0,relativeOrder:10},Pg={value:"s6",text:Y("SketchUp 6 Model"),downloadable:!1,uploadable:!0,relativeOrder:9},Qg={value:"s7",
text:Y("SketchUp 7 Model"),downloadable:!1,uploadable:!0,relativeOrder:8},Rg={value:"s8",text:Y("SketchUp 8 Model"),downloadable:!1,uploadable:!0,relativeOrder:7},Sg={value:"s13",text:Y("SketchUp 2013 Model"),downloadable:!1,uploadable:!0,relativeOrder:6},Tg={value:"s14",text:Y("SketchUp 2014 Model"),downloadable:!0,uploadable:!0,relativeOrder:5},Ug={value:"s15",text:Y("SketchUp 2015 Model"),downloadable:!0,uploadable:!0,relativeOrder:4},Vg={value:"s16",text:Y("SketchUp 2016 Model"),downloadable:!0,
uploadable:!0,relativeOrder:3},Wg={value:"s17",text:Y("SketchUp 2017 Model"),downloadable:!0,uploadable:!0,relativeOrder:2},Xg={value:"s18",text:Y("SketchUp 2018 Model"),downloadable:!0,uploadable:!0,relativeOrder:1},Yg={value:"s19",text:Y("SketchUp 2019 Model"),downloadable:!0,uploadable:!0,relativeOrder:0},Zg={value:"stl",text:Y("STL File"),downloadable:!0,uploadable:!1,relativeOrder:10},$g={value:"ks",text:Y("Google Earth KMZ"),downloadable:!0,uploadable:!1,relativeOrder:20},ah={value:"k2",text:Y("KMZ From SketchUp"),
downloadable:!0,uploadable:!0,relativeOrder:20},bh={value:"zip",text:Y("Collada File"),downloadable:!0,uploadable:!0,relativeOrder:15},ch={value:"featured_logo",text:Y("Company Logo"),downloadable:!1,uploadable:!0},dh={SMALL_THUMBNAIL:Dg,LARGE_THUMBNAIL:Eg,SMALL_THUMBNAIL_BOT:Fg,LARGE_THUMBNAIL_BOT:Gg,SMALL_THUMBNAIL_CUSTOM:Hg,CATALOG_BANNER:Ig,AVATAR:Jg,SWIVEL:Kg,SWIVEL_BOT:Lg,SKP_UNKNOWN:Ng,SKETCHUP_5:Og,SKETCHUP_6:Pg,SKETCHUP_7:Qg,SKETCHUP_8:Rg,SKETCHUP_2013:Sg,SKETCHUP_2014:Tg,SKETCHUP_2015:Ug,
SKETCHUP_2016:Vg,SKETCHUP_2017:Wg,SKETCHUP_2018:Xg,SKETCHUP_2019:Yg,STL:Zg,SERVER_GEN_KMZ:$g,SKETCHUP_GEN_KMZ:ah,COLLADA:bh,FEATURED_LOGO:ch};t("frontend.BinaryProperty",dh);Y("Sina Weibo");Y("Share on Sina Weibo");Y("WeChat");Y("Share on WeChat");Y("QQ");Y("Share on QQ");Y("RenRen");Y("Share on RenRen");Y("Google+");Y("Share on Google+");Y("Facebook");Y("Share on Facebook");Y("Twitter");Y("Share on Twitter");Y("Pinterest");Y("Share on Pinterest");Y("LinkedIn");
t("frontend.UserAgentType",{IPAD:"iPad",IPOD:"iPod",IPHONE:"iPhone",IOS:"iOS",ANDROID:"Android"});t("frontend.ui.Cookies",{SEARCH_PAGE:"searchPageScrollbar",COLLECTION_PAGE:"collectionPageScrollbar",MODEL_PAGE:"modelPageScrollbar",USER_PAGE:"userPageScrollbar",SEARCH_BAR_SEARCH_TYPE:"searchBarSearchType",COLLECTION_PAGE_SEARCH_TYPE:"collectionPageSearchType",MAX_POLYS:"maxPolys",HIDE_MOBILE_SPLASH_SCREEN:"hideMobileSplashScreen",REDIRECT:"redirect",SKETCHUP_TYPE:"sketchUpType",HIDE_DELETE_FROM_COLLECTION_DIALOG:"hideDeleteFromCollectionDialog"});
function eh(a){return!!fh(a).match(/sandbox\d-3dwarehouse.sketchup.com/)}t("frontend.util.EnvironmentChecker.isUserSandbox",eh);function gh(a){return"3dwarehouse.sketchup.com"===fh(a)||hh(a)}t("frontend.util.EnvironmentChecker.isProduction",gh);function hh(a){return"smoke-3dwarehouse.sketchup.com"===fh(a)}t("frontend.util.EnvironmentChecker.isSmokeProduction",hh);function ih(a){return"stg-3dwarehouse.sketchup.com"===fh(a)}t("frontend.util.EnvironmentChecker.isStaging",ih);
function fh(a){return We(a,!0).c.toLowerCase()}t("frontend.util.EnvironmentChecker.getCurrentDomain",fh);function jh(a){a=a||window.location.href;return-1<a.indexOf("//196.0.0.1")||-1<a.indexOf("//127.0.0.1")||-1<a.indexOf("//10.")||-1<a.indexOf("//localhost")||-1<a.indexOf("//localdev.sketchup.com")}t("frontend.util.EnvironmentChecker.isLocalHost",jh);t("frontend.util.EnvironmentChecker.isBetaWarehouse",function(a){return"beta-3dwarehouse.sketchup.com"===fh(a)});
function kh(a){return"dev-3dwarehouse.sketchup.com"===fh(a)}t("frontend.util.EnvironmentChecker.isDevWarehouse",kh);var lh={G:!0,K:!1,H:!1,M:"s19",J:!0,I:!1};
t("frontend.util.FeatureToggle.FeatureToggles",{l:{G:!0,K:!1,H:!1,M:"e_commerce",J:!0,I:!0},g:{G:!0,K:!1,H:!1,M:"delete_account",J:!0,I:!1},a:{G:!1,K:!1,H:!1,M:"abusive_comments_prompt",J:!0,I:!1},m:{G:!0,K:!0,H:!1,M:"log_skp_action",J:!0,I:!0},i:{G:!1,K:!1,H:!1,M:"footer_menu",J:!0,I:!1},b:lh,D:{G:!0,K:!1,H:!1,M:"sponsored_models",J:!0,I:!0},L:{G:!0,K:!0,H:!0,M:"new_tos",J:!0,I:!0},c:{G:!0,K:!1,H:!1,M:"app_sketchup_editor",J:!0,I:!0},f:{G:!0,K:!1,H:!1,M:"beta_search_page",J:!1,I:!1}});
t("frontend.util.isSketchupClient",function(){return 0<=(z||"").toLowerCase().indexOf("sketchup")});function mh(){if(qb()){var a=null,b=/Trident\/([^\s;]+)/i.exec(z||"");b&&(a=parseInt(b[1],10));b=""===sb();return!(0<=Ga(sb(),9))&&!b&&(null===a||7>a)}return!1}t("frontend.util.isIE8OrBelow",mh);
t("frontend.util.isMobile",function(){var a=z||"",b=/^(W|^)Mozilla\/\d\.\d \(Windows NT \d\.\d\).+(W|$)/i;return/ip[hone|od|ad]|android|mobile|blackberry|fennec|nokia|opera mini|phone|blazer/i.test(a)&&!b.test(a)?!0:!1});t("frontend.util.isIphone",function(){return nh("iPhone")&&!nh("iPod")});t("frontend.util.isIpad",function(){return nh("iPad")});t("frontend.util.isIpod",function(){return nh("iPod")});t("frontend.util.isAndroid",function(){return nh("Android")});
function nh(a){return v(a)?!1:-1!=(z||"").toLowerCase().indexOf(a.toLowerCase())}t("frontend.util.matchUserAgent",nh);t("frontend.util.parseSUVersion",function(){return Fe()});t("frontend.util.createValueSortedListFromMap",function(a,b){b=b||lb(a);return Ua(b,function(b,d){eb(b,{key:d,value:a[d]},function(a,b){var c;ea(a.value.localeCompare)?c=a.value.localeCompare(b.value):(c=0,a.value>b.value?c=1:a.value<b.value&&(c=-1));return c});return b},[])});
t("frontend.util.Dom.sanitizeHtml",function(a){if(p(a)){for(var b=[],c=0;c<a.length;c++)b.push(oh(a[c]));return b}return oh(a)});
function oh(a){a=a.toString();a=a.replace(/\[0x00\]/gmi,"");a=a.replace(/(&#x0D;|&#x0A;|&#x09;|&#9;)/gmi,"");a=a.replace(/(&#10;|&#16;|\t|\r)/gmi,"");a=a.replace(/<[^>]*$/gmi,"");a=a.replace(/^[^<]*>/gmi,"");return a.replace(/<[^>]*>/gmi,function(a){return 1==/styles=*|\(|&#41;|<.*<|script:|file:|ftp:|&#040|{|}|[|]|%5B|%5D|%3C|%3E|&#x28;/img.test(a)?"":1==/^<\/*(a href=("|&quot;)http|font)/img.test(a)?1==/on\S*\s*=/img.test(a)?"":a:1==/^<\/*(b|i|u|strong|em|p|br|ol|ul|li|a)\/*>$/img.test(a)?a:""})}
t("frontend.util.Dom.htmlEscape",function(a){return Ee(a)});var ph=void 0;t("frontend.util.Modernizr.shouldServeLegacyPages",function(){void 0===ph&&(ph=!(Modernizr.history&&Modernizr.cf));return ph});t("frontend.util.UrlGenerator.PRODUCTION_DOMAIN","https://3dwarehouse.sketchup.com");t("frontend.util.UrlGenerator.STAGING_DOMAIN","https://stg-3dwarehouse.sketchup.com");t("frontend.util.UrlGenerator.DEV_DOMAIN","https://dev-3dwarehouse.sketchup.com");
function qh(a){a=We(null!=a?a:window.location.href);Me(a,"",void 0);a.f="";O(a,"");return a}t("frontend.util.UrlGenerator.generateModelPageUrl",function(a,b,c,d){c=qh(c);O(c,c.a+"/model/"+a);a=rh(b);0<a.length&&O(c,c.a+"/"+a);d&&"en"!=d&&c.b.set("hl",d);return c.toString()});t("frontend.util.UrlGenerator.generateMaterialPageUrl",function(a,b,c,d){c=qh(c);O(c,c.a+"/material/"+a);a=rh(b);0<a.length&&O(c,c.a+"/"+a);d&&"en"!=d&&c.b.set("hl",d);return c.toString()});
function rh(a){a=a.trim().replace(/\s+/g,"-");a=a.replace(/[\x00-\x1F\x7F-\xBF]/g,"");a=a.replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@\[\]^_`{|}~]/g,"");a=a.replace(/\-+/g,"-");a=a.replace(/^\-/,"").replace(/\-$/,"");return a.substring(0,500)}t("frontend.util.UrlGenerator.sanitizeTitleForUrl",rh);t("frontend.util.UrlGenerator.generateCollectionPageUrl",function(a,b,c,d){c=qh(c);O(c,c.a+"/collection/"+a);a=rh(b);0<a.length&&O(c,c.a+"/"+a);d&&"en"!=d&&c.b.set("hl",d);return c.toString()});
t("frontend.util.UrlGenerator.generateUserPageUrl",function(a,b,c,d,e,f,g){d=qh(d);null!=a?v(c)?(O(d,d.a+"/user/"+a),a=rh(b||""),0<a.length&&O(d,d.a+"/"+a)):O(d,d.a+"/by/"+c):O(d,d.a+"/user.html");e&&"en"!=e&&d.b.set("hl",e);f&&d.b.set("msg",f);g&&d.b.set("nav",g);return d.toString()});t("frontend.util.UrlGenerator.generateGetBinaryUrl",function(a,b,c,d,e){a=De(a,b,c,d,e);mh()&&(b=encodeURIComponent((z||"").toLowerCase()),b=b.replace(/\(/g,"%28"),b=b.replace(/\)/g,"%29"),a+="&X-User-Agent="+b);return a});
t("frontend.util.UrlGenerator.generate3DWarehouseIndexPageUrl",function(a){a=qh(a||"https://3dwarehouse.sketchup.com");return O(a,a.a+"/index.html").toString()});t("frontend.util.UrlGenerator.generate3DWarehouseUrl",function(a,b){var c="https://3dwarehouse.sketchup.com";b&&(c=qh(b));return c+a});t("frontend.util.UrlGenerator.decodeCustomBase64",function(a){a=a.replace(/-/g,"+");a=a.replace(/\./g,"/");a=a.replace(/_/g,"=");return tg(a)});
t("frontend.util.File.getBestBinaryName",function(a,b){b=b||[];if(0<b.length)for(var c=0;c<b.length;c++){var d=b[c],e=null,e=Wa(a,function(a){return a.toLowerCase()==d.toLowerCase()});if(null!=e)return e}else return sh(a);return null});
function sh(a){var b=0,c=null,d=Fe(),e=void 0;d&&d.major&&(e=d.major);for(d=0;d<a.length;d++){var f=a[d],g;if(!(g="s19"!=f)){g=lh;var h;h=window.location.href;var m;m=g;if(m.J){var y;y=(new Je(h)).b.get("shf");v(y)?m=!1:(y=y.toString().toLowerCase(),y=y.split(","),m=m.M,m=0<=x(y,"all")||0<=x(y,m))}else m=!1;g=jh(h)||eh(h)||kh(h)?g.G||m:ih(h)?g.K||m:gh(h)?g.I&&m?!0:g.H:!1}g&&(g=f,g=!!g.match(/^s\d*$/g)||"skp_unknown"===g);if(g){g=parseInt(f.substr(1),10)||5;if(h=g>b&&!(n(e)&&g>e)){a:{h=void 0;for(h in dh)if(dh[h].value===
f){h=dh[h];break a}h=null}h=h?h.downloadable:!1}h&&(b=g,c=f)}}null===c&&(0<=x(a,"ks")?c="ks":0<=x(a,"k2")&&(c="k2"));return c}t("frontend.util.File.getBestSketchUpFile",sh);t("frontend.util.File.getOriginalFilename",function(a,b,c,d){a=a.originalFileName;var e;a&&-1!=a.indexOf(".")?(d=a.split("."),d[0].toLowerCase()!=b.toLowerCase()?e=a:e=(c+"."+d[1]).replace(/[^\w._]+/g,"_")):e=(c+"."+(zg[d]||"skp")).replace(/[^\w._]+/g,"_");return e});
t("frontend.util.Thumbnail.getBestSmallThumbnail",function(a){return th(["custom_st","bot_st","st"],a)});t("frontend.util.Thumbnail.getBestLargeThumbnail",function(a){return th(["bot_lt","lt"],a)});function th(a,b){for(var c=0;c<a.length;c++){var d=a[c],e;a:{e=d;var f=b;if(p(f)){if(0<=x(f,e)){e=!0;break a}}else if(e in f){e=!0;break a}e=!1}if(e)return d}return null}t("frontend.util.Thumbnail.getThumbnailSizing",function(a){return"lt"===a||"st"===a?"contain":"cover"});
function uh(a,b,c,d,e){var f=a/b,g=a,h=b;a-=c;b-=d;"contain"===e?a>b?(g=c,h=Math.min(d,Math.floor(g/f))):(h=d,g=Math.min(c,Math.floor(h*f))):"cover"===e&&(a<b?(g=c,h=Math.max(d,Math.floor(g/f))):a>=b&&(h=d,g=Math.max(c,h*f)));return{left:Math.floor((c-g)/2),top:Math.floor((d-h)/2),height:h,width:g}}t("frontend.util.Thumbnail.fitImageToViewport",uh);
t("frontend.util.Thumbnail.createImageElement",function(a,b,c,d,e){var f=be("img",d),g=e||"";mg(f,{display:"none"});a&&(a.appendChild(f),mg(a,{overflow:"hidden"}));return new B(function(d,e){a?(b=b||g||"",c=c||"cover",ua(b))?e(H(null,"THUMBNAIL_NO_SOURCE")):(e=be("img"),""!==g&&Hc(e,"error",r(vh,this,e,g)),e.onload=r(wh,this,e,f,a,c,d),e.src=b):e(H(null,"THUMBNAIL_NO_CONTAINER"))})});function vh(a,b){function c(){a.src=b}mh()?Pc(c,10):c()}
function wh(a,b,c,d,e){var f=a.width,g=a.height;b.resize=function(){var a;a=9==c.nodeType?c:c.ownerDocument||c.document;a=a.defaultView&&a.defaultView.getComputedStyle&&(a=a.defaultView.getComputedStyle(c,null))?a.display||a.getPropertyValue("display")||"":"";a||(a=c.currentStyle?c.currentStyle.display:null);if("none"!=(a||c.style&&c.style.display))a=pg(c);else{a=c.style;var e=a.display,y=a.visibility,K=a.position;a.visibility="hidden";a.position="absolute";a.display="inline";var L=pg(c);a.display=
e;a.position=K;a.visibility=y;a=L}a=uh(f,g,a.width,a.height,d);mg(b,{display:"",marginLeft:a.left.toString()+"px",marginTop:a.top.toString()+"px",width:a.width+"px",height:a.height+"px"})};b.resize();b.src=a.src;e(b)}
(function(){function a(a,b){b=b||"";"string"!==typeof a&&(a.global&&0>b.indexOf("g")&&(b+="g"),a.ignoreCase&&0>b.indexOf("i")&&(b+="i"),a.multiline&&0>b.indexOf("m")&&(b+="m"),a=a.source);return new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){a=f.txt.regexen[b]||"";"string"!==typeof a&&(a=a.source);return a}),b)}function b(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function c(a,b,c){var d=String.fromCharCode(b);c!==b&&(d+="-"+String.fromCharCode(c));a.push(d);return a}function d(a){var b=
{},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function e(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:"string"===typeof a&&a.match(b)&&RegExp["$&"]===a}if("undefined"===typeof f||null===f)var f={};f.txt={};f.txt.regexen={};var g={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};f.txt.htmlEscape=function(a){return a&&a.replace(/[&"'><]/g,function(a){return g[a]})};f.txt.regexSupplant=a;f.txt.stringSupplant=b;f.txt.addCharsToCharClass=c;var h=String.fromCharCode,m=[h(32),
h(133),h(160),h(5760),h(6158),h(8232),h(8233),h(8239),h(8287),h(12288)];c(m,9,13);c(m,8192,8202);var y=[h(65534),h(65279),h(65535)];c(y,8234,8238);f.txt.regexen.spaces_group=a(m.join(""));f.txt.regexen.spaces=a("["+m.join("")+"]");f.txt.regexen.invalid_chars_group=a(y.join(""));f.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;f.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm;f.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;
m=[];c(m,1024,1279);c(m,1280,1319);c(m,11744,11775);c(m,42560,42655);c(m,1425,1471);c(m,1473,1474);c(m,1476,1477);c(m,1479,1479);c(m,1488,1514);c(m,1520,1524);c(m,64274,64296);c(m,64298,64310);c(m,64312,64316);c(m,64318,64318);c(m,64320,64321);c(m,64323,64324);c(m,64326,64335);c(m,1552,1562);c(m,1568,1631);c(m,1646,1747);c(m,1749,1756);c(m,1758,1768);c(m,1770,1775);c(m,1786,1788);c(m,1791,1791);c(m,1872,1919);c(m,2208,2208);c(m,2210,2220);c(m,2276,2302);c(m,64336,64433);c(m,64467,64829);c(m,64848,
64911);c(m,64914,64967);c(m,65008,65019);c(m,65136,65140);c(m,65142,65276);c(m,8204,8204);c(m,3585,3642);c(m,3648,3662);c(m,4352,4607);c(m,12592,12677);c(m,43360,43391);c(m,44032,55215);c(m,55216,55295);c(m,65441,65500);c(m,12449,12538);c(m,12540,12542);c(m,65382,65439);c(m,65392,65392);c(m,65296,65305);c(m,65313,65338);c(m,65345,65370);c(m,12353,12438);c(m,12441,12446);c(m,13312,19903);c(m,19968,40959);c(m,173824,177983);c(m,177984,178207);c(m,194560,195103);c(m,12291,12291);c(m,12293,12293);c(m,
12347,12347);f.txt.regexen.nonLatinHashtagChars=a(m.join(""));m=[];c(m,192,214);c(m,216,246);c(m,248,255);c(m,256,591);c(m,595,596);c(m,598,599);c(m,601,601);c(m,603,603);c(m,611,611);c(m,616,616);c(m,623,623);c(m,626,626);c(m,649,649);c(m,651,651);c(m,699,699);c(m,768,879);c(m,7680,7935);f.txt.regexen.latinAccentChars=a(m.join(""));f.txt.regexen.hashSigns=/[#\uff03]/;f.txt.regexen.hashtagAlpha=a(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);f.txt.regexen.hashtagAlphaNumeric=a(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
f.txt.regexen.endHashtagMatch=a(/^(?:#{hashSigns}|:\/\/)/);f.txt.regexen.hashtagBoundary=a(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);f.txt.regexen.validHashtag=a(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);f.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|(?:rt|RT|rT|Rt):?)/;f.txt.regexen.atSigns=/[@\uff20]/;f.txt.regexen.validMentionOrList=a("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?",
"g");f.txt.regexen.validReply=a(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);f.txt.regexen.endMentionMatch=a(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);f.txt.regexen.validUrlPrecedingChars=a(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);f.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;f.txt.regexen.invalidDomainChars=b("#{punct}#{spaces_group}#{invalid_chars_group}",f.txt.regexen);f.txt.regexen.validDomainChars=a(/[^#{invalidDomainChars}]/);f.txt.regexen.validSubdomain=
a(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);f.txt.regexen.validDomainName=a(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);f.txt.regexen.validGTLD=a(/(?:(?:academy|accountants|active|actor|aero|agency|airforce|archi|army|arpa|asia|associates|attorney|audio|autos|axa|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|boutique|brussels|build|builders|buzz|bzh|cab|camera|camp|cancerresearch|capetown|capital|cards|care|career|careers|cash|cat|catering|center|ceo|cheap|christmas|church|citic|claims|cleaning|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cruises|cuisinella|dance|dating|degree|democrat|dental|dentist|desi|diamonds|digital|direct|directory|discount|dnp|domains|durban|edu|education|email|engineer|engineering|enterprises|equipment|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|foo|foundation|frogans|fund|furniture|futbol|gal|gallery|gift|gives|glass|global|globo|gmo|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|hiphop|hiv|holdings|holiday|homes|horse|host|house|immobilien|industries|info|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|kred|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|luxe|luxury|maison|management|mango|market|marketing|media|meet|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|museum|nagoya|name|navy|net|neustar|nhk|ninja|nyc|okinawa|onl|org|organic|ovh|paris|partners|parts|photo|photography|photos|physio|pics|pictures|pink|place|plumbing|post|press|pro|productions|properties|pub|qpon|quebec|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|reviews|rich|rio|rocks|rodeo|ruhr|ryukyu|saarland|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|town|toys|trade|training|travel|university|uno|vacations|vegas|ventures|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wang|watch|webcam|website|wed|wien|wiki|works|wtc|wtf|xxx|xyz|yachts|yokohama|zone|\u0434\u0435\u0442\u0438|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u043e\u0440\u0433|\u0441\u0430\u0439\u0442|\u0628\u0627\u0632\u0627\u0631|\u0634\u0628\u0643\u0629|\u0645\u0648\u0642\u0639|\u0938\u0902\u0917\u0920\u0928|\u307f\u3093\u306a|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u6587\u7f51|\u516c\u53f8|\u516c\u76ca|\u5546\u57ce|\u5546\u6807|\u5728\u7ebf|\u6211\u7231\u4f60|\u653f\u52a1|\u673a\u6784|\u6e38\u620f|\u79fb\u52a8|\u7ec4\u7ec7\u673a\u6784|\u7f51\u5740|\u7f51\u7edc|\u96c6\u56e2|\uc0bc\uc131)(?=[^0-9a-zA-Z@]|$))/);
f.txt.regexen.validCCTLD=a(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u043c\u043a\u0434|\u043c\u043e\u043d|\u0440\u0444|\u0441\u0440\u0431|\u0443\u043a\u0440|\u049b\u0430\u0437|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0628\u06be\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0639\u0645\u0627\u0646|\u0641\u0644\u0633\u0637\u064a\u0646|\u0642\u0637\u0631|\u0645\u0635\u0631|\u0645\u0644\u064a\u0633\u064a\u0627|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u092d\u093e\u0930\u0924|\u09ac\u09be\u0982\u09b2\u09be|\u09ad\u09be\u09b0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0dbd\u0d82\u0d9a\u0dcf|\u0e44\u0e17\u0e22|\u10d2\u10d4|\u4e2d\u56fd|\u4e2d\u570b|\u53f0\u6e7e|\u53f0\u7063|\u65b0\u52a0\u5761|\u9999\u6e2f|\ud55c\uad6d)(?=[^0-9a-zA-Z@]|$))/);
f.txt.regexen.validPunycode=a(/(?:xn--[0-9a-z]+)/);f.txt.regexen.validSpecialCCTLD=a(/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/);f.txt.regexen.validDomain=a(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);f.txt.regexen.validAsciiDomain=a(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);f.txt.regexen.invalidShortDomain=a(/^#{validDomainName}#{validCCTLD}$/i);f.txt.regexen.validSpecialShortDomain=a(/^#{validDomainName}#{validSpecialCCTLD}$/i);
f.txt.regexen.validPortNumber=a(/[0-9]+/);f.txt.regexen.validGeneralUrlPathChars=a(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);f.txt.regexen.validUrlBalancedParens=a("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i");f.txt.regexen.validUrlPathEndingChars=a(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);f.txt.regexen.validUrlPath=a("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))",
"i");f.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;f.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i;f.txt.regexen.extractUrl=a("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");f.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;f.txt.regexen.urlHasProtocol=/^https?:\/\//i;f.txt.regexen.urlHasHttps=/^https:\/\//i;f.txt.regexen.cashtag=
/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;f.txt.regexen.validCashtag=a("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");f.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;f.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i;f.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;f.txt.regexen.validateUrlPchar=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");f.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;f.txt.regexen.validateUrlUserinfo=a("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*",
"i");f.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;f.txt.regexen.validateUrlIpv4=a(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);f.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;f.txt.regexen.validateUrlIp=a("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");f.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;f.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;f.txt.regexen.validateUrlDomainTld=
/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;f.txt.regexen.validateUrlDomain=a(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);f.txt.regexen.validateUrlHost=a("(?:#{validateUrlIp}|#{validateUrlDomain})","i");f.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;f.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
f.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;f.txt.regexen.validateUrlUnicodeDomain=a(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);f.txt.regexen.validateUrlUnicodeHost=a("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");f.txt.regexen.validateUrlPort=/[0-9]{1,5}/;f.txt.regexen.validateUrlUnicodeAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?",
"i");f.txt.regexen.validateUrlAuthority=a("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");f.txt.regexen.validateUrlPath=a(/(\/#{validateUrlPchar}*)*/i);f.txt.regexen.validateUrlQuery=a(/(#{validateUrlPchar}|\/|\?)*/i);f.txt.regexen.validateUrlFragment=a(/(#{validateUrlPchar}|\/|\?)*/i);f.txt.regexen.validateUrlUnencoded=a("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var K={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,
usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},L={disabled:!0,readonly:!0,multiple:!0,checked:!0};f.txt.tagAttrs=function(a){var b="",c;for(c in a){var d=a[c];
L[c]&&(d=d?c:null);null!=d&&(b+=" "+f.txt.htmlEscape(c)+'="'+f.txt.htmlEscape(d.toString())+'"')}return b};f.txt.linkToText=function(a,c,d,e){e.suppressNoFollow||(d.rel="nofollow");e.linkAttributeBlock&&e.linkAttributeBlock(a,d);e.linkTextBlock&&(c=e.linkTextBlock(a,c));a={text:c,attr:f.txt.tagAttrs(d)};return b("<a#{attr}>#{text}</a>",a)};f.txt.linkToTextWithSymbol=function(a,b,c,d,e){var g=e.symbolTag?"<"+e.symbolTag+">"+b+"</"+e.symbolTag+">":b;c=f.txt.htmlEscape(c);c=e.textWithSymbolTag?"<"+e.textWithSymbolTag+
">"+c+"</"+e.textWithSymbolTag+">":c;return e.usernameIncludeSymbol||!b.match(f.txt.regexen.atSigns)?f.txt.linkToText(a,g+c,d,e):g+f.txt.linkToText(a,c,d,e)};f.txt.linkToHashtag=function(a,b,c){b=b.substring(a.indices[0],a.indices[0]+1);var e=f.txt.htmlEscape(a.hashtag),g=d(c.htmlAttrs||{});g.href=c.hashtagUrlBase+e;g.title="#"+e;g["class"]=c.hashtagClass;e.charAt(0).match(f.txt.regexen.rtl_chars)&&(g["class"]+=" rtl");c.targetBlank&&(g.target="_blank");return f.txt.linkToTextWithSymbol(a,b,e,g,c)};
f.txt.linkToCashtag=function(a,b,c){b=f.txt.htmlEscape(a.cashtag);var e=d(c.htmlAttrs||{});e.href=c.cashtagUrlBase+b;e.title="$"+b;e["class"]=c.cashtagClass;c.targetBlank&&(e.target="_blank");return f.txt.linkToTextWithSymbol(a,"$",b,e,c)};f.txt.linkToMentionAndList=function(a,b,c){b=b.substring(a.indices[0],a.indices[0]+1);var e=f.txt.htmlEscape(a.screenName),g=f.txt.htmlEscape(a.listSlug),h=a.listSlug&&!c.suppressLists,y=d(c.htmlAttrs||{});y["class"]=h?c.listClass:c.usernameClass;y.href=h?c.listUrlBase+
e+g:c.usernameUrlBase+e;h||c.suppressDataScreenName||(y["data-screen-name"]=e);c.targetBlank&&(y.target="_blank");return f.txt.linkToTextWithSymbol(a,b,h?e+g:e,y,c)};f.txt.linkToUrl=function(a,b,c){b=a.url;var e=f.txt.htmlEscape(b),g=c.urlEntities&&c.urlEntities[b]||a;g.display_url&&(e=f.txt.linkTextWithEntity(g,c));var h=d(c.htmlAttrs||{});b.match(f.txt.regexen.urlHasProtocol)||(b="http://"+b);h.href=b;c.targetBlank&&(h.target="_blank");c.urlClass&&(h["class"]=c.urlClass);c.urlTarget&&(h.target=
c.urlTarget);!c.title&&g.display_url&&(h.title=g.expanded_url);return f.txt.linkToText(a,e,h,c)};f.txt.linkTextWithEntity=function(a,c){var d=a.display_url;a=a.expanded_url;var e=d.replace(/\u2026/g,"");if(-1!=a.indexOf(e)){var g=a.indexOf(e),d={displayUrlSansEllipses:e,beforeDisplayUrl:a.substr(0,g),afterDisplayUrl:a.substr(g+e.length),precedingEllipsis:d.match(/^\u2026/)?"\u2026":"",followingEllipsis:d.match(/\u2026$/)?"\u2026":""},h;for(h in d)d.hasOwnProperty(h)&&(d[h]=f.txt.htmlEscape(d[h]));
d.invisible=c.invisibleTagAttrs;return b("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",d)}return d};f.txt.autoLinkEntities=function(a,b,c){c=d(c||{});c.hashtagClass=c.hashtagClass||"tweet-url hashtag";c.hashtagUrlBase=c.hashtagUrlBase||
"https://twitter.com/#!/search?q=%23";c.cashtagClass=c.cashtagClass||"tweet-url cashtag";c.cashtagUrlBase=c.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";c.listClass=c.listClass||"tweet-url list-slug";c.usernameClass=c.usernameClass||"tweet-url username";c.usernameUrlBase=c.usernameUrlBase||"https://twitter.com/";c.listUrlBase=c.listUrlBase||"https://twitter.com/";c.htmlAttrs=f.txt.extractHtmlAttrsFromOptions(c);c.invisibleTagAttrs=c.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";
var e,g,h;if(c.urlEntities){e={};g=0;for(h=c.urlEntities.length;g<h;g++)e[c.urlEntities[g].url]=c.urlEntities[g];c.urlEntities=e}e="";h=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});var y=c.htmlEscapeNonEntities?f.txt.htmlEscape:function(a){return a};for(g=0;g<b.length;g++){var m=b[g];e+=y(a.substring(h,m.indices[0]));m.url?e+=f.txt.linkToUrl(m,a,c):m.hashtag?e+=f.txt.linkToHashtag(m,a,c):m.screenName?e+=f.txt.linkToMentionAndList(m,a,c):m.cashtag&&(e+=f.txt.linkToCashtag(m,a,c));h=m.indices[1]}return e+=
y(a.substring(h,a.length))};f.txt.autoLinkWithJSON=function(a,b,c){if(b.user_mentions)for(var d=0;d<b.user_mentions.length;d++)b.user_mentions[d].screenName=b.user_mentions[d].screen_name;if(b.hashtags)for(d=0;d<b.hashtags.length;d++)b.hashtags[d].hashtag=b.hashtags[d].text;if(b.symbols)for(d=0;d<b.symbols.length;d++)b.symbols[d].cashtag=b.symbols[d].text;var d=[],e;for(e in b)d=d.concat(b[e]);f.txt.modifyIndicesFromUnicodeToUTF16(a,d);return f.txt.autoLinkEntities(a,d,c)};f.txt.extractHtmlAttrsFromOptions=
function(a){var b={},c;for(c in a){var d=a[c];K[c]||(L[c]&&(d=d?c:null),null!=d&&(b[c]=d))}return b};f.txt.autoLink=function(a,b){var c=f.txt.extractEntitiesWithIndices(a,{extractUrlsWithoutProtocol:!1});return f.txt.autoLinkEntities(a,c,b)};f.txt.autoLinkUsernamesOrLists=function(a,b){var c=f.txt.extractMentionsOrListsWithIndices(a);return f.txt.autoLinkEntities(a,c,b)};f.txt.autoLinkHashtags=function(a,b){var c=f.txt.extractHashtagsWithIndices(a);return f.txt.autoLinkEntities(a,c,b)};f.txt.autoLinkCashtags=
function(a,b){var c=f.txt.extractCashtagsWithIndices(a);return f.txt.autoLinkEntities(a,c,b)};f.txt.autoLinkUrlsCustom=function(a,b){var c=f.txt.extractUrlsWithIndices(a,{extractUrlsWithoutProtocol:!1});return f.txt.autoLinkEntities(a,c,b)};f.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var b=a[0],c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]};f.txt.extractEntitiesWithIndices=function(a,b){a=f.txt.extractUrlsWithIndices(a,
b).concat(f.txt.extractMentionsOrListsWithIndices(a)).concat(f.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(f.txt.extractCashtagsWithIndices(a));if(0==a.length)return[];f.txt.removeOverlappingEntities(a);return a};f.txt.extractMentions=function(a){var b=[];a=f.txt.extractMentionsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].screenName);return b};f.txt.extractMentionsWithIndices=function(a){for(var b=[],c=f.txt.extractMentionsOrListsWithIndices(a),d=0;d<c.length;d++)a=c[d],
""==a.listSlug&&b.push({screenName:a.screenName,indices:a.indices});return b};f.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(f.txt.regexen.atSigns))return[];var b=[];a.replace(f.txt.regexen.validMentionOrList,function(a,c,d,e,g,h,y){y.slice(h+a.length).match(f.txt.regexen.endMentionMatch)||(g=g||"",a=h+c.length,b.push({screenName:e,listSlug:g,indices:[a,a+e.length+g.length+1]}))});return b};f.txt.extractReplies=function(a){if(!a)return null;a=a.match(f.txt.regexen.validReply);
return!a||RegExp.rightContext.match(f.txt.regexen.endMentionMatch)?null:a[1]};f.txt.extractUrls=function(a,b){var c=[];a=f.txt.extractUrlsWithIndices(a,b);for(b=0;b<a.length;b++)c.push(a[b].url);return c};f.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];for(var c=[];f.txt.regexen.extractUrl.exec(a);){var d=RegExp.$2,e=RegExp.$3,g=RegExp.$5,h=RegExp.$7,y=f.txt.regexen.extractUrl.lastIndex,m=
y-e.length;if(RegExp.$4)e.match(f.txt.regexen.validTcoUrl)&&(e=RegExp.lastMatch,y=m+e.length),c.push({url:e,indices:[m,y]});else if(b.extractUrlsWithoutProtocol&&!d.match(f.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var K=null,L=0;g.replace(f.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,L);L=b+a.length;K={url:a,indices:[m+b,m+L]};(h||a.match(f.txt.regexen.validSpecialShortDomain)||!a.match(f.txt.regexen.invalidShortDomain))&&c.push(K)});null!=K&&h&&(K.url=e.replace(g,K.url),
K.indices[1]=y)}}return c};f.txt.extractHashtags=function(a){var b=[];a=f.txt.extractHashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].hashtag);return b};f.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(f.txt.regexen.hashSigns))return[];var c=[];a.replace(f.txt.regexen.validHashtag,function(a,b,d,e,g,h){h.slice(g+a.length).match(f.txt.regexen.endHashtagMatch)||(a=g+b.length,c.push({hashtag:e,indices:[a,a+e.length+1]}))});if(b.checkUrlOverlap&&
(a=f.txt.extractUrlsWithIndices(a),0<a.length))for(a=c.concat(a),f.txt.removeOverlappingEntities(a),c=[],b=0;b<a.length;b++)a[b].hashtag&&c.push(a[b]);return c};f.txt.extractCashtags=function(a){var b=[];a=f.txt.extractCashtagsWithIndices(a);for(var c=0;c<a.length;c++)b.push(a[c].cashtag);return b};f.txt.extractCashtagsWithIndices=function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];a.replace(f.txt.regexen.validCashtag,function(a,c,d,e,f,g){a=f+c.length;b.push({cashtag:e,indices:[a,a+e.length+
1]})});return b};f.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){f.txt.convertUnicodeIndices(a,b,!1)};f.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){f.txt.convertUnicodeIndices(a,b,!0)};f.txt.getUnicodeTextLength=function(a){return a.replace(f.txt.regexen.non_bmp_code_pairs," ").length};f.txt.convertUnicodeIndices=function(a,b,c){if(0!=b.length){var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});for(var f=0,g=b[0];d<a.length;){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-
g.indices[0];g.indices[0]=c?e:d;g.indices[1]=g.indices[0]+h;f++;if(f==b.length)break;g=b[f]}h=a.charCodeAt(d);55296<=h&&56319>=h&&d<a.length-1&&(h=a.charCodeAt(d+1),56320<=h&&57343>=h&&d++);e++;d++}}};f.txt.splitTags=function(a){a=a.split("<");for(var b,c=[],d=0;d<a.length;d+=1)if(b=a[d]){b=b.split(">");for(var e=0;e<b.length;e+=1)c.push(b[e])}else c.push("");return c};f.txt.hitHighlight=function(a,b,c){b=b||[];c=c||{};if(0===b.length)return a;c=c.tag||"em";c=["<"+c+">","</"+c+">"];a=f.txt.splitTags(a);
var d,e,g="",h=0,y=a[0],m=0,K=0,L=!1,W=y,R=[],la;for(d=0;d<b.length;d+=1)for(e=0;e<b[d].length;e+=1)R.push(b[d][e]);for(b=0;b<R.length;b+=1){e=R[b];d=c[b%2];for(la=!1;null!=y&&e>=m+y.length;)g+=W.slice(K),L&&e===m+W.length&&(g+=d,la=!0),a[h+1]&&(g+="<"+a[h+1]+">"),m+=W.length,K=0,h+=2,W=y=a[h],L=!1;la||null==y?la||(g+=d):(L=e-m,g+=W.slice(K,L)+d,K=L,L=0===b%2?!0:!1)}if(null!=y)for(K<W.length&&(g+=W.slice(K)),b=h+1;b<a.length;b+=1)g+=0===b%2?a[b]:"<"+a[b]+">";return g};var R=[h(65534),h(65279),h(65535),
h(8234),h(8235),h(8236),h(8237),h(8238)];f.txt.getTweetLength=function(a,b){b||(b={short_url_length:22,short_url_length_https:23});var c=f.txt.getUnicodeTextLength(a),d=f.txt.extractUrlsWithIndices(a);f.txt.modifyIndicesFromUTF16ToUnicode(a,d);for(a=0;a<d.length;a++)c+=d[a].indices[0]-d[a].indices[1],c=d[a].url.toLowerCase().match(f.txt.regexen.urlHasHttps)?c+b.short_url_length_https:c+b.short_url_length;return c};f.txt.isInvalidTweet=function(a){if(!a)return"empty";if(140<f.txt.getTweetLength(a))return"too_long";
for(var b=0;b<R.length;b++)if(0<=a.indexOf(R[b]))return"invalid_characters";return!1};f.txt.isValidTweetText=function(a){return!f.txt.isInvalidTweet(a)};f.txt.isValidUsername=function(a){if(!a)return!1;var b=f.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var W=a(/^#{validMentionOrList}$/);f.txt.isValidList=function(a){a=a.match(W);return!(!a||""!=a[1]||!a[4])};f.txt.isValidHashtag=function(a){if(!a)return!1;var b=f.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)};f.txt.isValidUrl=
function(a,b,c){null==b&&(b=!0);null==c&&(c=!0);if(!a)return!1;var d=a.match(f.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;a=d[1];var g=d[2],h=d[3],y=d[4],d=d[5];return(!c||e(a,f.txt.regexen.validateUrlScheme)&&a.match(/^https?$/i))&&e(h,f.txt.regexen.validateUrlPath)&&e(y,f.txt.regexen.validateUrlQuery,!0)&&e(d,f.txt.regexen.validateUrlFragment,!0)?b&&e(g,f.txt.regexen.validateUrlUnicodeAuthority)||!b&&e(g,f.txt.regexen.validateUrlAuthority):!1};"undefined"!=typeof module&&module.exports&&
(module.exports=f.txt);"function"==typeof define&&define.amd&&define([],f.txt);if("undefined"!=typeof window)if(window.twttr)for(var la in f)window.twttr[la]=f[la];else window.twttr=f})();goog=goog||{};goog.DEBUG=!1;goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};
goog.userAgent||(goog.userAgent=function(){var a="";"undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent&&(a=navigator.userAgent);var b=0==a.indexOf("Opera");return{jscript:{HAS_JSCRIPT:"ScriptEngine"in this},OPERA:b,IE:!b&&-1!=a.indexOf("MSIE"),WEBKIT:!b&&-1!=a.indexOf("WebKit")}}());goog.asserts||(goog.asserts={assert:function(a){if(!a)throw Error("Assertion error");},fail:function(a){}});
goog.dom||(goog.dom={},goog.dom.DomHelper=function(a){this.document_=a||document},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)},goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()});
goog.format||(goog.format={insertWordBreaks:function(a,b){a=String(a);for(var c=[],d=0,e=!1,f=!1,g=0,h=0,m=0,y=a.length;m<y;++m){var K=a.charCodeAt(m);g>=b&&32!=K&&(c[d++]=a.substring(h,m),h=m,c[d++]=goog.format.WORD_BREAK,g=0);if(e)62==K&&(e=!1);else if(f)switch(K){case 59:f=!1;++g;break;case 60:f=!1;e=!0;break;case 32:f=!1,g=0}else switch(K){case 60:e=!0;break;case 38:f=!0;break;case 32:g=0;break;default:++g}}c[d++]=a.substring(h);return c.join("")},WORD_BREAK:goog.userAgent.WEBKIT?"<wbr></wbr>":
goog.userAgent.OPERA?"&shy;":goog.userAgent.IE?"&#8203;":"<wbr>"});goog.i18n||(goog.i18n={bidi:{}});goog.i18n.bidi.IS_RTL=!1;goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0,UNKNOWN:0};goog.i18n.bidi.toDir=function(a,b){return"number"==typeof a?0<a?goog.i18n.bidi.Dir.LTR:0>a?goog.i18n.bidi.Dir.RTL:b?null:goog.i18n.bidi.Dir.NEUTRAL:null==a?null:a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.bidi.estimateDirection=function(a,b){var c=0,d=0,e=!1;a=soyshim.$$bidiStripHtmlIfNecessary_(a,b).split(soyshim.$$bidiWordSeparatorRe_);for(b=0;b<a.length;b++){var f=a[b];soyshim.$$bidiRtlDirCheckRe_.test(f)?(c++,d++):soyshim.$$bidiIsRequiredLtrRe_.test(f)?e=!0:soyshim.$$bidiLtrCharRe_.test(f)?d++:soyshim.$$bidiHasNumeralsRe_.test(f)&&(e=!0)}return 0==d?e?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:c/d>soyshim.$$bidiRtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a,!0)};goog.i18n.BidiFormatter.prototype.getContextDir=function(){return this.dir_};goog.i18n.BidiFormatter.prototype.knownDirAttr=function(a){return a&&a!=this.dir_?0>a?'dir="rtl"':'dir="ltr"':""};goog.i18n.BidiFormatter.prototype.endEdge=function(){return 0>this.dir_?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return 0<this.dir_?"\u200e":0>this.dir_?"\u200f":""};
goog.i18n.BidiFormatter.prototype.markAfterKnownDir=function(a,b,c){null==a&&(a=goog.i18n.bidi.estimateDirection(b,c));return 0<this.dir_&&(0>a||soyshim.$$bidiIsRtlExitText_(b,c))?"\u200e":0>this.dir_&&(0<a||soyshim.$$bidiIsLtrExitText_(b,c))?"\u200f":""};
goog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir=function(a,b,c){null==a&&(a=goog.i18n.bidi.estimateDirection(b,!0));c=this.markAfterKnownDir(a,b,!0);0<a&&0>=this.dir_?b='<span dir="ltr">'+b+"</span>":0>a&&0<=this.dir_&&(b='<span dir="rtl">'+b+"</span>");return b+c};goog.i18n.BidiFormatter.prototype.startEdge=function(){return 0>this.dir_?"right":"left"};
goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir=function(a,b,c){null==a&&(a=goog.i18n.bidi.estimateDirection(b,c));c=this.markAfterKnownDir(a,b,c);0<a&&0>=this.dir_?b="\u202a"+b+"\u202c":0>a&&0<=this.dir_&&(b="\u202b"+b+"\u202c");return b+c};goog.string||(goog.string={newLineToBr:function(a,b){a=String(a);return goog.string.NEWLINE_TO_BR_RE_.test(a)?a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>"):a},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/});
goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.jscript.HAS_JSCRIPT?[]:"";null!=a&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.bufferLength_=0;
goog.string.StringBuffer.prototype.append=function(a,b,c){if(goog.userAgent.jscript.HAS_JSCRIPT)if(null==b)this.buffer_[this.bufferLength_++]=a;else{var d=this.buffer_;d.push.apply(d,arguments);this.bufferLength_=this.buffer_.length}else if(this.buffer_+=a,null!=b)for(d=1;d<arguments.length;d++)this.buffer_+=arguments[d];return this};goog.string.StringBuffer.prototype.clear=function(){goog.userAgent.jscript.HAS_JSCRIPT?this.bufferLength_=this.buffer_.length=0:this.buffer_=""};
goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();a&&this.append(a);return a}return this.buffer_};goog.soy||(goog.soy={renderAsElement:function(a,b,c,d){return soyshim.$$renderWithWrapper_(a,b,d,!0,c)},renderAsFragment:function(a,b,c,d){return soyshim.$$renderWithWrapper_(a,b,d,!1,c)},renderElement:function(a,b,c,d){a.innerHTML=b(c,null,d)},data:{}});
goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:!0}:{},JS:goog.DEBUG?{sanitizedContentJsChars:!0}:{},JS_STR_CHARS:goog.DEBUG?{sanitizedContentJsStrChars:!0}:{},URI:goog.DEBUG?{sanitizedContentUri:!0}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:goog.DEBUG?{sanitizedContentCss:!0}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:!0}:{}};goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly");};
goog.soy.data.SanitizedContent.prototype.contentDir=null;goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content};
var soy={esc:{}},soydata={VERY_UNSAFE:{}},soyshim={$$DEFAULT_TEMPLATE_DATA_:{},$$renderWithWrapper_:function(a,b,c,d,e){var f=c||document;c=f.createElement("div");c.innerHTML=a(b||soyshim.$$DEFAULT_TEMPLATE_DATA_,void 0,e);if(1==c.childNodes.length&&(a=c.firstChild,!d||1==a.nodeType))return a;if(d)return c;for(d=f.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d},$$bidiStripHtmlIfNecessary_:function(a,b){return b?a.replace(soyshim.$$BIDI_HTML_SKIP_RE_,""):a},$$BIDI_HTML_SKIP_RE_:/<[^>]*>|&[^;]+;/g,
$$bidiLtrChars_:"A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",$$bidiRtlChars_:"\u0591-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc"};soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiLtrCharRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"]");soyshim.$$bidiIsRequiredLtrRe_=/^http:\/\/.*/;soyshim.$$bidiHasNumeralsRe_=/\d/;soyshim.$$bidiWordSeparatorRe_=/\s+/;
soyshim.$$bidiRtlDetectionThreshold_=.4;soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(a,b){a=soyshim.$$bidiStripHtmlIfNecessary_(a,b);return soyshim.$$bidiLtrExitDirCheckRe_.test(a)};soyshim.$$bidiIsRtlExitText_=function(a,b){a=soyshim.$$bidiStripHtmlIfNecessary_(a,b);return soyshim.$$bidiRtlExitDirCheckRe_.test(a)};
soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind=goog.soy.data.SanitizedContentKind;soydata.isContentKind=function(a,b){return null!=a&&a.contentKind===b};soydata.getContentDir=function(a){if(null!=a)switch(a.contentDir){case goog.i18n.bidi.Dir.LTR:return goog.i18n.bidi.Dir.LTR;case goog.i18n.bidi.Dir.RTL:return goog.i18n.bidi.Dir.RTL;case goog.i18n.bidi.Dir.NEUTRAL:return goog.i18n.bidi.Dir.NEUTRAL}return null};soydata.SanitizedHtml=function(){goog.soy.data.SanitizedContent.call(this)};
goog.inherits(soydata.SanitizedHtml,goog.soy.data.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedHtml.from=function(a){return null!=a&&a.contentKind===soydata.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),a):soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.esc.$$escapeHtmlHelper(String(a)),soydata.getContentDir(a))};soydata.SanitizedJs=function(){goog.soy.data.SanitizedContent.call(this)};
goog.inherits(soydata.SanitizedJs,goog.soy.data.SanitizedContent);soydata.SanitizedJs.prototype.contentKind=soydata.SanitizedContentKind.JS;soydata.SanitizedJs.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedJsStrChars=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJsStrChars,goog.soy.data.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)};
goog.inherits(soydata.SanitizedUri,goog.soy.data.SanitizedContent);soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedHtmlAttribute=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtmlAttribute,goog.soy.data.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.ATTRIBUTES;
soydata.SanitizedHtmlAttribute.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedCss=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedCss,goog.soy.data.SanitizedContent);soydata.SanitizedCss.prototype.contentKind=soydata.SanitizedContentKind.CSS;soydata.SanitizedCss.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.UnsanitizedText=function(a,b){this.content=String(a);this.contentDir=null!=b?b:null};goog.inherits(soydata.UnsanitizedText,goog.soy.data.SanitizedContent);
soydata.UnsanitizedText.prototype.contentKind=soydata.SanitizedContentKind.TEXT;soydata.$$EMPTY_STRING_={VALUE:""};soydata.$$makeSanitizedContentFactory_=function(a){function b(){}b.prototype=a.prototype;return function(a,d){var e=new b;e.content=String(a);void 0!==d&&(e.contentDir=d);return e}};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(a){function b(){}b.prototype=a.prototype;return function(a){var d=new b;d.content=String(a);return d}};
soydata.markUnsanitizedText=function(a,b){return new soydata.UnsanitizedText(a,b)};soydata.VERY_UNSAFE.ordainSanitizedHtml=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.ordainSanitizedJs=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedJs);soydata.VERY_UNSAFE.ordainSanitizedJsStrChars=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJsStrChars);soydata.VERY_UNSAFE.ordainSanitizedUri=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedUri);
soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.ordainSanitizedCss=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedCss);soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(a,b,c,d){return goog.soy.renderAsFragment(a,b,d,new goog.dom.DomHelper(c))};soy.renderAsElement=function(a,b,c,d){return goog.soy.renderAsElement(a,b,d,new goog.dom.DomHelper(c))};
soy.$$IS_LOCALE_RTL=goog.i18n.bidi.IS_RTL;soy.$$augmentMap=function(a,b){function c(){}c.prototype=a;a=new c;for(var d in b)a[d]=b[d];return a};soy.$$checkMapKey=function(a){if("string"!=typeof a)throw Error("Map literal's key expression must evaluate to string (encountered type \""+typeof a+'").');return a};soy.$$getMapKeys=function(a){var b=[],c;for(c in a)b.push(c);return b};soy.$$getDelTemplateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};
soy.$$registerDelegateFn=function(a,b,c,d){var e="key_"+a+":"+b,f=soy.$$DELEGATE_REGISTRY_PRIORITIES_[e];if(void 0===f||c>f)soy.$$DELEGATE_REGISTRY_PRIORITIES_[e]=c,soy.$$DELEGATE_REGISTRY_FUNCTIONS_[e]=d;else if(c==f)throw Error('Encountered two active delegates with the same priority ("'+a+":"+b+'").');};
soy.$$getDelegateFn=function(a,b,c){var d=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+a+":"+b];d||""==b||(d=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+a+":"]);if(d)return d;if(c)return soy.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+a+":"+b+'" (and not allowemptydefault="true").');};soy.$$EMPTY_TEMPLATE_FN_=function(a,b,c){return""};
soydata.$$makeSanitizedContentFactoryForInternalBlocks_=function(a){function b(){}b.prototype=a.prototype;return function(a,d){if(!String(a))return soydata.$$EMPTY_STRING_.VALUE;var e=new b;e.content=String(a);void 0!==d&&(e.contentDir=d);return e}};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_=function(a){function b(){}b.prototype=a.prototype;return function(a){if(!String(a))return soydata.$$EMPTY_STRING_.VALUE;var d=new b;d.content=String(a);return d}};
soydata.$$markUnsanitizedTextForInternalBlocks=function(a,b){return(a=String(a))?new soydata.UnsanitizedText(a,b):soydata.$$EMPTY_STRING_.VALUE};soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks=soydata.$$makeSanitizedContentFactoryForInternalBlocks_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.$$ordainSanitizedJsForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedJs);soydata.VERY_UNSAFE.$$ordainSanitizedUriForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedUri);
soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.$$ordainSanitizedCssForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedCss);soy.$$escapeHtml=function(a){return soydata.SanitizedHtml.from(a)};
soy.$$cleanHtml=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),a):soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.$$stripHtmlTags(a,soy.esc.$$SAFE_TAG_WHITELIST_),soydata.getContentDir(a))};soy.$$escapeHtmlRcdata=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlHelper(a.content)):soy.esc.$$escapeHtmlHelper(a)};
soy.$$HTML5_VOID_ELEMENTS_=/^<(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\b/;
soy.$$stripHtmlTags=function(a,b){if(!b)return String(a).replace(soy.esc.$$HTML_TAG_REGEX_,"").replace(soy.esc.$$LT_REGEX_,"&lt;");a=String(a).replace(/\[/g,"&#91;");var c=[];a=a.replace(soy.esc.$$HTML_TAG_REGEX_,function(a,d){if(d&&(d=d.toLowerCase(),b.hasOwnProperty(d)&&b[d])){a="/"===a.charAt(1)?"</":"<";var g=c.length;c[g]=a+d+">";return"["+g+"]"}return""});a=soy.esc.$$normalizeHtmlHelper(a);var d=soy.$$balanceTags_(c);a=a.replace(/\[(\d+)\]/g,function(a,b){return c[b]});return a+d};
soy.$$balanceTags_=function(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c];if("/"===e.charAt(1)){for(var f=b.length-1;0<=f&&b[f]!=e;)f--;0>f?a[c]="":(a[c]=b.slice(f).reverse().join(""),b.length=f)}else soy.$$HTML5_VOID_ELEMENTS_.test(e)||b.push("</"+e.substring(1))}return b.reverse().join("")};
soy.$$escapeHtmlAttribute=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))):soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))):soy.esc.$$escapeHtmlNospaceHelper(a)};
soy.$$filterHtmlAttributes=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.ATTRIBUTES)?(goog.asserts.assert(a.constructor===soydata.SanitizedHtmlAttribute),a.content.replace(/([^"'\s])$/,"$1 ")):soy.esc.$$filterHtmlAttributesHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};
soy.$$escapeJsString=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.JS_STR_CHARS)?(goog.asserts.assert(a.constructor===soydata.SanitizedJsStrChars),a.content):soy.esc.$$escapeJsStringHelper(a)};
soy.$$escapeJsValue=function(a){if(null==a)return" null ";if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS))return goog.asserts.assert(a.constructor===soydata.SanitizedJs),a.content;switch(typeof a){case "boolean":case "number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};
soy.$$escapeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI))return goog.asserts.assert(a.constructor===soydata.SanitizedUri),soy.$$normalizeUri(a);a=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;return soy.$$problematicUriMarks_.test(a)?a.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_):a};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};
soy.$$filterNormalizeUri=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.URI)?(goog.asserts.assert(a.constructor===soydata.SanitizedUri),soy.$$normalizeUri(a)):soy.esc.$$filterNormalizeUriHelper(a)};soy.$$filterImageDataUri=function(a){return soydata.VERY_UNSAFE.ordainSanitizedUri(soy.esc.$$filterImageDataUriHelper(a))};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};
soy.$$filterCssValue=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.CSS)?(goog.asserts.assert(a.constructor===soydata.SanitizedCss),a.content):null==a?"":soy.esc.$$filterCssValueHelper(a)};soy.$$filterNoAutoescape=function(a){return soydata.isContentKind(a,soydata.SanitizedContentKind.TEXT)?(goog.asserts.fail("Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`",[a.content]),"zSoyz"):a};
soy.$$changeNewlineToBr=function(a){var b=goog.string.newLineToBr(String(a),!1);return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?soydata.VERY_UNSAFE.ordainSanitizedHtml(b,soydata.getContentDir(a)):b};soy.$$insertWordBreaks=function(a,b){b=goog.format.insertWordBreaks(String(a),b);return soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)?soydata.VERY_UNSAFE.ordainSanitizedHtml(b,soydata.getContentDir(a)):b};
soy.$$truncate=function(a,b,c){a=String(a);if(a.length<=b)return a;c&&(3<b?b-=3:c=!1);soy.$$isHighSurrogate_(a.charAt(b-1))&&soy.$$isLowSurrogate_(a.charAt(b))&&--b;a=a.substring(0,b);c&&(a+="...");return a};soy.$$isHighSurrogate_=function(a){return 55296<=a&&56319>=a};soy.$$isLowSurrogate_=function(a){return 56320<=a&&57343>=a};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};
soy.$$bidiTextDir=function(a,b){var c=soydata.getContentDir(a);if(null!=c)return c;b=b||soydata.isContentKind(a,soydata.SanitizedContentKind.HTML);return goog.i18n.bidi.estimateDirection(a+"",b)};soy.$$bidiDirAttr=function(a,b,c){a=soy.$$getBidiFormatterInstance_(a);var d=soydata.getContentDir(b);null==d&&(c=c||soydata.isContentKind(b,soydata.SanitizedContentKind.HTML),d=goog.i18n.bidi.estimateDirection(b+"",c));return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(a.knownDirAttr(d))};
soy.$$bidiMarkAfter=function(a,b,c){a=soy.$$getBidiFormatterInstance_(a);c=c||soydata.isContentKind(b,soydata.SanitizedContentKind.HTML);return a.markAfterKnownDir(soydata.getContentDir(b),b+"",c)};soy.$$bidiSpanWrap=function(a,b){return soy.$$getBidiFormatterInstance_(a).spanWrapWithKnownDir(soydata.getContentDir(b),b+"",!0)};
soy.$$bidiUnicodeWrap=function(a,b){var c=soy.$$getBidiFormatterInstance_(a);a=soydata.isContentKind(b,soydata.SanitizedContentKind.HTML);var d=c.unicodeWrapWithKnownDir(soydata.getContentDir(b),b+"",a),c=c.getContextDir();return soydata.isContentKind(b,soydata.SanitizedContentKind.TEXT)?new soydata.UnsanitizedText(d,c):a?soydata.VERY_UNSAFE.ordainSanitizedHtml(d,c):soydata.isContentKind(b,soydata.SanitizedContentKind.JS_STR_CHARS)?soydata.VERY_UNSAFE.ordainSanitizedJsStrChars(d,c):d};
soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};
soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\b":"\\x08","\t":"\\t","\n":"\\n","\x0B":"\\x0b","\f":"\\f","\r":"\\r",'"':"\\x22","&":"\\x26","'":"\\x27","/":"\\/","<":"\\x3c","=":"\\x3d",">":"\\x3e","\\":"\\\\","\u0085":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029",$:"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};
soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};
soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\b":"\\8 ","\t":"\\9 ","\n":"\\a ","\x0B":"\\b ","\f":"\\c ","\r":"\\d ",'"':"\\22 ","&":"\\26 ","'":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","<":"\\3c ","=":"\\3d ",">":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\u0085":"\\85 ","\u00a0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};
soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06","\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10","\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E",
"\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D",
"\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;
soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;
soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;
soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};
soy.esc.$$normalizeHtmlHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};
soy.esc.$$normalizeHtmlNospaceHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};
soy.esc.$$escapeJsRegexHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(a)?a:"zSoyz"};
soy.esc.$$normalizeUriHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(a)?a.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_):"#zSoyz"};
soy.esc.$$filterImageDataUriHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(a)?a:"data:image/gif;base64,zSoyz"};soy.esc.$$filterHtmlAttributesHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(a)?a:"zSoyz"};soy.esc.$$filterHtmlElementNameHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(a)?a:"zSoyz"};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g;
soy.esc.$$LT_REGEX_=/</g;soy.esc.$$SAFE_TAG_WHITELIST_={b:1,br:1,em:1,i:1,s:1,sub:1,sup:1,u:1};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__awaiter=this&&this.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(e,f){function g(a){try{m(d.next(a))}catch(b){f(b)}}function h(a){try{m(d["throw"](a))}catch(b){f(b)}}
function m(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(g,h)}m((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,g&&(h=g[c[0]&2?"return":c[0]?"throw":"next"])&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[0,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;
g=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(d){c=[6,d],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];
return h[1]},trys:[],ops:[]},f,g,h,m;return m={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m};define("Bindings/AcadUtils",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.getScaleAdjustment=function(){return Module.getScaleAdjustment()}});
define("Bindings/AddLocation",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.LaunchAddLocation=function(){return Module.LaunchAddLocation()};b.OnAddLocationRequestSuccess=function(a,b){Module.OnAddLocationRequestSuccess(a,b)};b.OnAddLocationRequestFailure=function(a){Module.OnAddLocationRequestFailure(a)};b.GetURLsForAddLocationRequest=function(a){return Module.GetURLsForAddLocationRequest(a)};b.DoAddLocationImport=function(a,b){Module.DoAddLocationImport(a,
b)}});
define("Bindings/Command",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.EDIT_CUT=Module.EditCutCommandId;a.EDIT_COPY=Module.EditCopyCommandId;a.EDIT_PASTE=Module.EditPasteCommandId;a.EDIT_PASTE_IN_PLACE=Module.EditPasteInPlaceCommandId;a.EDIT_DELETE=Module.EditDeleteCommandId;a.EDIT_DELETE_GUIDES=Module.EditDeleteGuidesCommandId;a.EDIT_SELECT_ALL=Module.EditSelectAllCommandId;a.EDIT_SELECT_NONE=Module.EditSelectNoneCommandId;a.EDIT_HIDE=
Module.EditHideCommandId;a.EDIT_UNHIDE=Module.EditUnhideCommandId;a.EDIT_UNHIDE_LAST=Module.EditUnhideLastCommandId;a.EDIT_UNHIDE_ALL=Module.EditUnhideAllCommandId;a.EDIT_UNLOCK=Module.EditUnlockCommandId;a.EDIT_UNLOCK_ALL=Module.EditUnlockAllCommandId;a.EDIT_MAKE_COMPONENT=Module.EditMakeComponentCommandId;a.EDIT_MAKE_GROUP=Module.EditMakeGroupCommandId;a.EDIT_CLOSE_GROUP_COMPONENT=Module.EditCloseGroupComponentCommandId;a.VIEW_TOP=Module.ViewTopCommandId;a.VIEW_SHOW_HIDDEN=Module.ViewShowHidden;
a.VIEW_SECTION_PLANES=Module.ViewSectionPlanes;a.VIEW_SECTION_CUTS=Module.ViewSectionCuts;a.VIEW_AXES=Module.ViewAxes;a.VIEW_GUIDES=Module.ViewGuides;a.VIEW_SHADOWS=Module.ViewShadows;a.VIEW_FOG=Module.ViewFog;a.VIEW_EDGES=Module.ViewEdges;a.VIEW_BACK_EDGES=Module.ViewBackEdges;a.VIEW_PROFILES=Module.ViewProfiles;a.VIEW_DEPTH_CUE=Module.ViewDepthCue;a.VIEW_EDGE_EXTENSIONS=Module.ViewEdgeExtensions;a.VIEW_XRAY=Module.ViewXray;a.VIEW_WIREFRAME=Module.ViewWireframe;a.VIEW_HIDDEN_LINE=Module.ViewHiddenline;
a.VIEW_SHADED=Module.ViewShaded;a.VIEW_SHADED_WITH_TEXTURES=Module.ViewTextured;a.VIEW_MONOCHROME=Module.ViewMonochrome;a.VIEW_COMPONENT_HIDE_REST=Module.ViewCompHideRest;a.VIEW_COMPONENT_HIDE_SIMILAR=Module.ViewCompHideSimilar;a.VIEW_BOTTOM=Module.ViewBottomCommandId;a.VIEW_FRONT=Module.ViewFrontCommandId;a.VIEW_BACK=Module.ViewBackCommandId;a.VIEW_LEFT=Module.ViewLeftCommandId;a.VIEW_RIGHT=Module.ViewRightCommandId;a.VIEW_ISO=Module.ViewIsoCommandId;a.PARALLEL_PROJECTION=Module.ParallelProjCommandId;
a.PERSPECTIVE_PROJECTION=Module.PersProjCommandId;a.TWO_PT_PERSPECTIVE_PROJECTION=Module.TwoPtPersCommandId;a.ACTIVATE_PUSH_PULL=Module.PushPullCommandId;a.ACTIVATE_ARC=Module.ArcCommandId;a.ACTIVATE_ARC_2PT=Module.Arc2PointCommandId;a.ACTIVATE_ARC_3PT=Module.Arc3PointCommandId;a.ACTIVATE_ARC_PIE=Module.ArcPieCommandId;a.ACTIVATE_RECTANGLE=Module.RectangleCommandId;a.ACTIVATE_ROTATED_RECTANGLE=Module.RotatedRectangleCommandId;a.ACTIVATE_CIRCLE=Module.CircleCommandId;a.ACTIVATE_POLYGON=Module.PolygonCommandId;
a.ACTIVATE_PENCIL=Module.PencilCommandId;a.ACTIVATE_FREEHAND=Module.FreehandCommandId;a.ACTIVATE_SELECTION=Module.SelectionCommandId;a.ACTIVATE_ERASE=Module.EraseCommandId;a.ACTIVATE_OFFSET=Module.OffsetCommandId;a.ACTIVATE_MOVE=Module.MoveCommandId;a.ACTIVATE_ROTATE=Module.RotateCommandId;a.ACTIVATE_SCALE=Module.ScaleCommandId;a.ACTIVATE_PAINT_BUCKET=Module.PaintBucketCommandId;a.ACTIVATE_PAINT_MATCH=Module.PaintMatchCommandId;a.ACTIVATE_TAPE_MEASURE=Module.TapeMeasureCommandId;a.ACTIVATE_DRAW_TEXT=
Module.DrawTextCommandId;a.ACTIVATE_ORBIT=Module.OrbitCommandId;a.ACTIVATE_PAN=Module.PanCommandId;a.ACTIVATE_FOV=Module.FOVCommandId;a.ACTIVATE_ZOOM=Module.ZoomCommandId;a.ACTIVATE_ZOOM_WINDOW=Module.ZoomWindowCommandId;a.ACTIVATE_ZOOM_EXTENTS=Module.ZoomExtentsId;a.ACTIVATE_POSITION_CAMERA=Module.PositionCameraCommandId;a.ACTIVATE_WALK=Module.WalkCommandId;a.ACTIVATE_LOOK_AROUND=Module.LookAroundCommandId;a.ACTIVATE_FOLLOW_ME=Module.FollowMeCommandId;a.ACTIVATE_PROTRACTOR=Module.ProtractorCommandId;
a.ACTIVATE_DIMENSIONS=Module.DimensionCommandId;a.ACTIVATE_SECTION_PLANE=Module.SectionCommandId;a.ACTIVATE_AXES=Module.AxesCommandId;a.ACTIVATE_OUTER_SHELL=Module.OuterShellCommandId;a.ACTIVATE_INTERSECT=Module.IntersectCommandId;a.ACTIVATE_UNION=Module.UnionCommandId;a.ACTIVATE_DIFFERENCE=Module.DifferenceCommandId;a.ACTIVATE_TRIM=Module.TrimCommandId;a.ACTIVATE_SPLIT=Module.SplitCommandId;a.UNDO=Module.UndoCommandId;a.REDO=Module.RedoCommandId};return a}();b.CommandIds=a;var c=function(){function a(){}
a.init=function(){a.MF_ENABLED=Module.MF_ENABLED;a.MF_GRAYED=Module.MF_GRAYED;a.MF_DISABLED=Module.MF_DISABLED;a.MF_CHECKED=Module.MF_CHECKED;a.MF_UNCHECKED=Module.MF_UNCHECKED};return a}();b.CommandStates=c;b.RunCommand=function(a){Module.RunCommand(a)};b.GetCommandState=function(a){return Module.GetCommandState(a)};b.IsCommandEnabled=function(a){return Module.GetCommandState(a)==c.MF_ENABLED};b.IsNotViewerCommand=function(a){return Module.IsNotViewerCommand(a)}});
define("Bindings/Component",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.GLUE_TO_NONE=Module.GlueToNone;a.GLUE_TO_ANY=Module.GlueToAny;a.GLUE_TO_VERTICAL=Module.GlueToVertical;a.GLUE_TO_HORIZONTAL=Module.GlueToHorizontal;a.GLUE_TO_SLOPED=Module.GlueToSloped};return a}();b.ComponentBehaviorTypes=a;b.CreateComponentEntityInfoPageInstance=function(){return new Module.ComponentEntityInfoPage};b.CreateComponentBrowserInstance=
function(){return new Module.WebComponentBrowser};b.CreateComponentMakerInstance=function(a){return new Module.WebComponentMaker(a)}});define("Bindings/Display",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.CreateShadowsBrowserInstance=function(){return new Module.WebShadowsBrowser};b.GetWebFogInstance=function(){return Module.WebFog.getInstance()};b.GetWebDisplayInstance=function(){return Module.WebDisplay.getInstance()}});
define("Bindings/Utils",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.UnzipFile=function(a,b){return Module.UnzipFile(a,b)};b.CreateEmptyWStringVector=function(){return Module.CreateEmptyWStringVector()};b.CreateStringVectorInstance=function(){return new Module.StringVector};b.CreateConnectUtilsAttributeDataVectorInstance=function(){return new Module.ConnectUtilsAttributeDataVector};b.CreateConnectUtilsAttributeDataInstance=function(a,b,e,f,g){return new Module.ConnectUtilsAttributeData(a,
b,e,f,g)};b.GetUndoLogFilePath=function(){return Module.GetUndoLogFilePath()};b.HasLoaded=function(){return void 0!=Module.Resize};b.GetCursorImages=function(){return Module.GetCursorImages()};b.MeasurePerf=function(){return Module.MeasurePerf()}});
define("Bindings/EntityInfo",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.GetWebEntityInfoInstance=function(){return Module.WebEntityInfo.getInstance()};a=function(){function a(){}a.init=function(){a.NONE=Module.DimensionArrow.None;a.SLASH=Module.DimensionArrow.Slash;a.DOT=Module.DimensionArrow.Dot;a.CLOSED=Module.DimensionArrow.Closed;a.OPEN=Module.DimensionArrow.Open};return a}();b.DimensionArrow=a;a=function(){function a(){}a.init=function(){a.SCREEN=Module.DimensionTextAlignment.Screen;
a.ABOVE=Module.DimensionTextAlignment.Above;a.CENTERED=Module.DimensionTextAlignment.Center;a.OUTSIDE=Module.DimensionTextAlignment.Outside};return a}();b.DimensionTextAlignment=a;a=function(){function a(){}a.init=function(){a.START=Module.DimensionTextPosition.Start;a.CENTERED=Module.DimensionTextPosition.Centered;a.END=Module.DimensionTextPosition.End};return a}();b.DimensionTextPosition=a;a=function(){function a(){}a.init=function(){a.HIDDEN=Module.LabelLeader.Hidden;a.VIEW=Module.LabelLeader.View;
a.MODEL=Module.LabelLeader.Model};return a}();b.LabelLeader=a;b.CreateWebMaterial=function(){return new Module.WebMaterial};b.GetWebSectionPlaneInfo=function(){return Module.WebSectionPlaneInfo.getInstance()}});define("Bindings/Font",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.getAvailableFonts=function(){for(var a=[],b=Module.getAvailableFonts(),e=0;e<b.size();++e)a.push(b.get(e));b.delete();return a}});
define("Bindings/Input",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.MOUSE_DOWN=Module.MOUSE_DOWN;a.MOUSE_UP=Module.MOUSE_UP;a.MOUSE_DOUBLE_CLICK=Module.MOUSE_DOUBLE_CLICK};return a}();b.MouseStates=a;b.MouseButtonHandler=function(a,b,e,f){return Module.MouseButtonHandler(a,b,e,f)};b.MouseMoveHandler=function(a,b){return Module.MouseMoveHandler(a,b)};b.OnMouseEnteredCanvas=function(){Module.OnMouseEnteredCanvas()};
a=function(){function a(){}a.init=function(){a.VK_BACK=Module.VK_BACK;a.VK_DELETE=Module.VK_DELETE;a.VK_LEFT=Module.VK_LEFT;a.VK_UP=Module.VK_UP;a.VK_RIGHT=Module.VK_RIGHT;a.VK_DOWN=Module.VK_DOWN;a.VK_END=Module.VK_END;a.VK_HOME=Module.VK_HOME;a.VK_INSERT=Module.VK_INSERT;a.VK_OEM_PLUS=Module.VK_OEM_PLUS;a.VK_OEM_MINUS=Module.VK_OEM_MINUS;a.VK_PAGE_UP=Module.VK_PRIOR;a.VK_PAGE_DOWN=Module.VK_NEXT};return a}();b.KeyCodes=a;b.OnModifierKey=function(a,b){Module.OnModifierKey(a,b)};b.KeyWillInvokeShortcut=
function(a){return Module.KeyWillInvokeShortcut(a)};b.OnKey=function(a){return Module.OnKey(a)}});define("Bindings/Label",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.endLabelEditing=function(a){Module.WebLabelHelper.endEditing(a)};b.cancelLabelEditing=function(){Module.WebLabelHelper.cancelEditing()}});define("Bindings/Layer",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.CreateLayerBrowserInstance=function(){return new Module.WebLayerBrowser}});
define("Bindings/StdCpp",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0})});
define("Bindings/Material",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.CURRENT_SELECTION=Module.MaterialNotificationType.currentSelection.value;a.DELETION=Module.MaterialNotificationType.deletion.value;a.MODIFICATION=Module.MaterialNotificationType.modification.value};return a}();b.MaterialNotificationType=a;b.CreateMaterialEditorInstance=function(a){return new Module.WebMaterialEditor(a)};b.IsMaterialNameUsed=
function(a){return Module.isMaterialNameUsed(a)};b.CreateMaterialBrowserInstance=function(){return new Module.WebMaterialBrowser};b.GetWebMaterialMatcherInstance=function(){return Module.WebMaterialMatcher.getInstance()};b.GetInModelMaterialName=function(a){return Module.GetInModelMaterialName(a)}});
define("Bindings/Model",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.SKETCHUP_LATEST=Module.SKETCHUP_LATEST;a.SKETCHUP18_0=Module.SKETCHUP18_0;a.SKETCHUP17_0=Module.SKETCHUP17_0;a.SKETCHUP16_0=Module.SKETCHUP16_0;a.SKETCHUP15_0=Module.SKETCHUP15_0;a.SKETCHUP14_0=Module.SKETCHUP14_0;a.SKETCHUP13_0=Module.SKETCHUP13_0;a.SKETCHUP8_0=Module.SKETCHUP8_0};return a}();b.Version=a;b.LoadWarehouseFileIntoModel=function(a,
b,e,f,g,h){Module.LoadWarehouseFileIntoModel(a,b,e,f,g,h)};b.LoadImageFileIntoModel=function(a,b){Module.LoadImageFileIntoModel(a,b)};b.LoadSkpFileIntoModel=function(a,b,e){Module.LoadSkpFileIntoModel(a,e?e:"")};b.OpenModel=function(a){Module.OpenModel(a)};b.NewModel=function(a){goog.isDefAndNotNull(a)?Module.NewModel(a):Module.NewModelFromDefaultTemplate()};b.SaveModelWithVersion=function(a,b){return Module.SaveModelWithVersion(a,b)};b.SaveModel=function(a){return Module.SaveModel(a)};b.GetModelVersion=
function(){return Module.GetModelVersion()};b.GetModelTitle=function(){return Module.GetModelTitle()};b.SetWarehouseModelId=function(a){Module.SetWarehouseModelId(a)};b.GetWarehouseModelId=function(){return Module.GetWarehouseModelId()};b.UpdateWarehouseCredits=function(a,b){Module.UpdateWarehouseCredits(a,b)};b.GetLatestContributorUserID=function(){return Module.GetLatestContributorUserID()};a=function(){function a(){}a.init=function(){a.SUCCESS=Module.ImportReferenceModel_Success;a.FAILED_RECURSIVE=
Module.ImportReferenceModel_Failed_Recursive;a.FAILED_ALREADY_REFERENCED=Module.ImportReferenceModel_Failed_AlreadyReferenced;a.FAILED_OTHER=Module.ImportReferenceModel_Failed_Other};return a}();b.RefModelImportResult=a;b.GetComponentDefinitions=function(){return Module.getComponentDefinitions()};b.LoadInModelComponent=function(a){return Module.loadInModelComponent(a)};b.LoadComponentFromFile=function(a){return Module.loadComponentFromFile(a)};b.SetIsoViewDirection=function(a,b){return Module.setIsoViewDirection(a,
b)};b.GetReferenceModelData=function(){return Module.GetReferenceModelData()};b.ImportReferenceModel=function(a,b,e){return Module.ImportReferenceModel(a,b,e)};b.UpdateReferenceModels=function(a,b){return Module.UpdateReferenceModels(a,b)};b.HasReferenceModel=function(){return Module.HasReferenceModel()};b.SetModelTitleAndPath=function(a,b){Module.SetModelTitleAndPath(a,b)};b.GetModelFilePath=function(){return Module.GetModelFilePath()};b.IsModelUntitled=function(){return Module.IsModelUntitled()};
b.SetModelUntitled=function(){Module.SetModelUntitled()};b.GetTempFilename=function(a,b){return Module.GetTempFilename(a,b)};b.FixPathString=function(a){return Module.FixPathString(a)};b.IsSaveNeeded=function(){return Module.IsSaveNeeded?Module.IsSaveNeeded():!1};b.FinishAutoSave=function(){return Module.FinishAutoSave()};b.GetAutoSaveFilename=function(){return Module.GetAutoSaveFilename()};b.GetAutoSavePrefix=function(){return Module.GetAutoSavePrefix()};b.SetAutoSaveDirectories=function(a,b){return Module.SetAutoSaveDirectories(a,
b)};b.ResetAutoSaveFilePath=function(){Module.ResetAutoSaveFilePath()};b.CloseAutoSaveFile=function(){Module.CloseAutoSaveFile()};b.SetModelModified=function(a){Module.SetModelModified(a)}});
define("Bindings/ModelInfo",["require","exports","Bindings/EntityInfo"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});b.GetGlobalDimensionOptions=function(){return{containsRadial:function(){return!1},hasCommonText:function(){return!0},getCommonText:function(){return""},hasCommonFont:function(){return!0},getCommonFontFace:Module.WebTextOptions_GetDimensionFontFace,getCommonFontBold:Module.WebTextOptions_GetDimensionFontBold,getCommonFontItalic:Module.WebTextOptions_GetDimensionFontItalic,
getCommonFontSize:Module.WebTextOptions_GetDimensionFontSize,setCommonFont:Module.WebTextOptions_SetDimensionFont,getArrowType:Module.WebTextOptions_GetDimensionArrowType,canSetArrowType:function(){return!0},setArrowType:Module.WebTextOptions_SetDimensionArrowType,getTextAlignment:Module.WebTextOptions_GetDimensionTextAlignment,canSetTextAlignment:function(){return!0},setTextAlignment:Module.WebTextOptions_SetDimensionTextAlignment,getTextPosition:function(){return c.DimensionTextPosition.CENTERED},
canSetTextPosition:function(){return!1},setTextPosition:function(){}}};b.ApplyDefaultStyleToAllDimensions=function(){Module.WebTextOptions_ApplyDefaultStyleToAllDimensions()}});
define("EntityType",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=b.EntityType||(b.EntityType={});a[a.NoEntity=-1]="NoEntity";a[a.Entity=0]="Entity";a[a.ArcCurve=1]="ArcCurve";a[a.Component=2]="Component";a[a.ComponentInstance=5]="ComponentInstance";a[a.ConstructionLine=7]="ConstructionLine";a[a.ConstructionPoint=8]="ConstructionPoint";a[a.Curve=9]="Curve";a[a.DimensionLinear=13]="DimensionLinear";a[a.DimensionRadial=14]="DimensionRadial";a[a.Edge=16]="Edge";
a[a.Face=18]="Face";a[a.Group=20]="Group";a[a.Image=21]="Image";a[a.SectionPlane=31]="SectionPlane";a[a.Text=36]="Text";a[a.SolidComponent=2006]="SolidComponent";a[a.SolidGroup=2007]="SolidGroup";a[a.Model=3E3]="Model"});
define("Bindings/Outliner",["require","exports","EntityType"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(b){this.emboundNode_=b;this.elementId=b.getElementId();this.name=b.getName();this.definition="";this.type=b.getType();this.numChildren=b.numChildren();this.selected=b.isSelected();this.onActivePath=b.isOnActivePath()}Object.defineProperty(a.prototype,"emboundNode",{get:function(){return this.emboundNode_},enumerable:!0,configurable:!0});a.prototype.getChildren=
function(){if(!goog.isDefAndNotNull(this.children_)){var b=this.emboundNode_.getChildren();this.children_=[];for(var c=0;c<b.size();c++){var d=b.get(c);this.children_.push(new a(d))}b.delete()}return this.children_};a.prototype.setSelected=function(a){return a?Module.WebOutliner_AddToSelectionSet(this.emboundNode_):Module.WebOutliner_RemoveFromSelectionSet(this.emboundNode_)};a.prototype.cleanUp=function(){this.emboundNode_.delete();goog.isDefAndNotNull(this.children_)&&this.children_.forEach(function(a){return a.cleanUp()})};
a.prototype.canBeParentOf=function(a){return Module.WebOutliner_CanReparent(this.emboundNode_,a.emboundNode_)};a.prototype.setAsParentOf=function(a){Module.WebOutliner_Reparent(this.emboundNode_,a.emboundNode_)};return a}();b.OutlinerEntity=d;b.getRootOutlinerNode=function(){var a=Module.WebOutliner_GetRootNode(),a=new d(a);a.type=c.EntityType.Model;return a};b.registerOutlinerListener=function(){Module.WebOutliner_RegisterListener()};b.clearSelectionSet=function(){Module.WebOutliner_ClearSelectionSet()};
b.addToSelectionSet=function(a){var b=new Module.WebOutlinerNodeVector;a.forEach(function(a){b.push_back(a.emboundNode)});Module.WebOutliner_BulkAddToSelectionSet(b);b.delete()};b.removeFromSelectionSet=function(a){var b=new Module.WebOutlinerNodeVector;a.forEach(function(a){b.push_back(a.emboundNode)});Module.WebOutliner_BulkRemoveFromSelectionSet(b);b.delete()}});
define("Bindings/STL",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.METERS=Module.StlUnits.Meters;a.CENTIMETERS=Module.StlUnits.Centimeters;a.MILLIMETERS=Module.StlUnits.Millimeters;a.FEET=Module.StlUnits.Feet;a.INCHES=Module.StlUnits.Inches};return a}();b.StlUnits=a});
define("Bindings/Porters",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.GetModelMetadataFromSkpFile=function(a){return Module.GetMetadataFromSkpFile(a)};b.canExportSectionCuts=function(){return Module.canExportSectionCuts()};b.ExportSTL=function(a,b){return Module.ExportSTL(a,b)};b.ImportSTL=function(a,b,e,f,g,h){return Module.ImportSTL(a,b,e,f,g,h)};b.getImportTypeCandidates=function(a){return Module.getImportTypeCandidates(a)}});
define("Bindings/RenderingOptions",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.getRenderingOptionInt=function(a){return Module.getRenderingOptionInt(a)}});define("Bindings/Scene",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.CreateWebSceneProperties=function(){return Module.createWebSceneProperties()};b.CreateSceneBrowserInstance=function(){return new Module.WebScenesBrowser}});
define("Bindings/Style",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.NEW_STYLE=Module.kStyleNewStyle;a.UPDATE_STYLE=Module.kStyleUpdateStyle;a.DO_NOTHING=Module.kStyleDoNothing};return a}();b.StyleUpdateTask=a;b.CreateStylesBrowserInstance=function(){return new Module.WebStylesBrowser}});
define("Bindings/Text",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.Left=Module.TextAlignLeft;a.Center=Module.TextAlignCenter;a.Right=Module.TextAlignRight};return a}();b.TextAlignment=a;b.launch3DTextTool=function(a){return Module.launch3DTextTool(a)}});
define("Bindings/Tool",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.init=function(){a.ERROR=Module.TOOLTIPTYPE_ERROR;a.INFO=Module.TOOLTIPTYPE_INFO;a.INFO_DELAY=Module.TOOLTIPTYPE_INFODELAY;a.INFERENCE=Module.TOOLTIPTYPE_INFERENCE};return a}();b.TooltipTypes=a;b.GetActiveToolId=function(){return Module.GetActiveToolId()}});
define("Bindings/Unit",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.Decimal=0]="Decimal";a[a.Architectural=1]="Architectural";a[a.Engineering=2]="Engineering";a[a.Fractional=3]="Fractional"})(b.LengthFormat||(b.LengthFormat={}));(function(a){a[a.Inches=0]="Inches";a[a.Feet=1]="Feet";a[a.Millimeter=2]="Millimeter";a[a.Centimeter=3]="Centimeter";a[a.Meter=4]="Meter"})(b.LengthUnit||(b.LengthUnit={}));b.CreateWebUnitsOptionsInstance=function(){return new Module.WebUnitsOptions};
b.lengthToString=function(a){return Module.lengthToString(a)};b.parseLength=function(a,b){void 0===b&&(b=0);return Module.parseLength(a,b)};b.unitLengthInInches=function(){return Module.unitLengthInInches()}});
define("Bindings/View",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.ResetView=function(){return Module.ResetView()};b.HasGraphicsError=function(){return Module.HasGraphicsError()};b.Draw=function(){return Module.Draw()};b.GetCanvas=function(){return Module.canvas};b.Resize=function(a,b){Module.Resize(a,b)};b.SetFieldOfView=function(a){Module.setFieldOfView(a)};b.GetFieldOfView=function(){return Module.getFieldOfView()};b.getHlrClipWindow=function(){return Module.getHlrClipWindow()};
b.getViewportDimensions=function(){return Module.getViewportDimensions()}});
define("Bindings/index","require exports Bindings/AcadUtils Bindings/AddLocation Bindings/Command Bindings/Component Bindings/Display Bindings/EntityInfo Bindings/Font Bindings/Input Bindings/Label Bindings/Layer Bindings/Material Bindings/Model Bindings/ModelInfo Bindings/Outliner Bindings/Porters Bindings/RenderingOptions Bindings/Scene Bindings/STL Bindings/Style Bindings/Text Bindings/Tool Bindings/Unit Bindings/Utils Bindings/View".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,
zh,Ch,Ah,Bh,Eh,yh,Fh,Gh){function Dh(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}Object.defineProperty(b,"__esModule",{value:!0});Dh(c);Dh(d);Dh(e);Dh(f);Dh(g);Dh(h);Dh(m);Dh(y);Dh(K);Dh(L);Dh(R);Dh(W);Dh(la);Dh(ga);Dh(xh);Dh(Mg);Dh(zh);Dh(Ch);Dh(Ah);Dh(Bh);Dh(Eh);Dh(yh);Dh(Fh);Dh(Gh)});
define("EnvironmentSettings",["require","exports"],function(a,b){function c(a){var b=/https?:\/\/(.+-)?(.+).sketchup.com/.exec(a);if(null!==b&&3==b.length)return a={origin:a,stack:"",label:b[2]},goog.isDef(b[1])&&1<b[1].length&&(a.stack=b[1].slice(0,-1)),a;console.log("Failed to parse the origin: "+a);return null}function d(a){return"localdev"===a.stack||"dev"===a.stack||e(a)||"stg"===a.stack}function e(a){return goog.string.contains(a.stack,"sandbox")}function f(){return"localdev"===c(window.location.href).stack}
function g(){var a=c(window.location.href);return d(a)}function h(){var a=c(window.location.href);return d(a)?m():y()}function m(){var a=y();switch((new goog.Uri(window.location.href)).getParameterValue("use_stacks")){case "dev":a.connectBaseUrl="https://app.stage.connect.trimble.com";a.ecomAccountPage="https://ecom-stg.trimblepaas.com/ecom/portal";a.entitlementsBaseUrl="https://stg-entitlements.sketchup.com";a.loginServer="https://stg-login.sketchup.com";a.munchkinId="826-WAP-663";a.tdsFileServiceUrl=
"https://files.staging-trimbledata.com";a.teklaWarehouseUrl="https://dev.warehouse.tekla.com";a.tidProfilePage="https://identity-stg.trimble.com/profile/";a.warehouseUrl=WarehouseUtil.UrlGenerator.DEV_DOMAIN;break;case "stg":a.connectBaseUrl="https://app.stage.connect.trimble.com",a.ecomAccountPage="https://ecom-stg.trimblepaas.com/ecom/portal",a.entitlementsBaseUrl="https://stg-entitlements.sketchup.com",a.loginServer="https://stg-login.sketchup.com",a.munchkinId="826-WAP-663",a.tdsFileServiceUrl=
"https://files.staging-trimbledata.com",a.teklaWarehouseUrl="https://preprod.warehouse.tekla.com",a.tidProfilePage="https://identity-stg.trimble.com/profile/",a.warehouseUrl=WarehouseUtil.UrlGenerator.STAGING_DOMAIN}return a}function y(){var a;a=g()?"https://stg-geolocation.sketchup.com":"https://geolocation.sketchup.com";return{addLocationURL:a,baseUrl:window.location.origin,connectBaseUrl:"https://app.connect.trimble.com",connectAPIEndPoint:"/tc/api/2.0",ecomAccountPage:"https://ecom-prd.trimblepaas.com/ecom/portal/",
loginUsersEndPoint:"/api/v1.0/users",loginRefreshTokenEndPoint:"/api/v1.0/users/refreshtoken",loginConnectTokenEndPoint:"/api/v1.0/users/connecttoken",loginServer:"https://login.sketchup.com",loginEndPoint:"/login/trimbleid",logoutEndPoint:"/logout",munchkinId:"645-COJ-341",warehouseUrl:WarehouseUtil.UrlGenerator.PRODUCTION_DOMAIN,teklaWarehouseUrl:"https://warehouse.tekla.com",tdsFileServiceUrl:"https://files.trimbledata.com",tidProfilePage:"https://identity.trimble.com/profile/",entitlementsBaseUrl:"https://entitlements.sketchup.com",
entitlementsApiBase:"/api/v1",MODEL_HERE_DIALOG:a+("/addlocation/static/addlocation.html?hl="+SketchUp.getCurrentLanguage()),ADD_LOCATION_SERVICES:a+"/addlocation/v1.0/services",ADD_LOCATION_TERRAIN:a+"/addlocation/v1.0/terrain"}}Object.defineProperty(b,"__esModule",{value:!0});b.IsLocal=f;b.IsDev=function(){var a=c(window.location.href);return"dev"===a.stack||e(a)};b.IsLocalOrDev=function(){var a=c(window.location.href);return"localdev"===a.stack||"dev"===a.stack||e(a)};b.IsStaging=function(){return"stg"===
c(window.location.href).stack};b.IsTest=g;b.IsSandbox=function(){var a=c(window.location.href);return e(a)};b.CheckOrigin=function(a){var b=c(a);return f()&&null!==b&&"localdev"===b.stack||goog.string.contains(a,".sketchup.com")};b.Get=h;b.GetTest=m;b.GetProd=y;b.Get3dWarehouseURL=function(){return h().warehouseUrl};b.GetTeklaWarehouseURL=function(){return h().teklaWarehouseUrl};b.GetSketchUpURL=function(){return"https://www.sketchup.com"};b.isSafeUrl=function(a){a=new goog.Uri(a);var b=new goog.Uri(window.location.href),
c=a.getScheme();if(c&&("http"==c||"https"==c)){if(b.getDomain()!=a.getDomain())return!0;a=a.getPath().toLowerCase();if(0!=a.indexOf("/3dw")&&0!=a.indexOf("/tcc")&&0!=a.indexOf("/warehouse"))return!0}return!1};b.getStackQueryString=function(){var a=(new goog.Uri(window.location.href)).getParameterValue("use_stacks");return goog.isDef(a)?"use_stacks="+a:""}});
define("KOExtensions",["require","exports","knockout","EnvironmentSettings"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});c.extenders.required=function(a,b){function d(c){a.hasError(c?!1:!0);a.validationMessage(c?"":b.overrideMessage||$t("This field is required"))}goog.isDefAndNotNull(a.hasError)||(a.hasError=c.observable(!1));goog.isDefAndNotNull(a.validationMessage)||(a.validationMessage=c.observable());b.doInitialValidation&&d(a());a.subscribe(d);return a};c.extenders.validUrl=
function(a,b){function g(c){var g=!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(c));g&&(g=!d.isSafeUrl(c));a.hasError(g);a.validationMessage(g?b.overrideMessage||$t("This is not a valid URL."):"")}goog.isDefAndNotNull(a.hasError)||(a.hasError=c.observable(!1));goog.isDefAndNotNull(a.validationMessage)||(a.validationMessage=c.observable());b.doInitialValidation&&g(a());a.subscribe(g);return a};c.bindingHandlers.selectText={update:function(a,b){(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)&&
!0===c.unwrap(b())&&a.select()}};c.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}}});
define("SelectWidget",["require","exports","knockout","KOExtensions"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,d,g,h){var m=this;this.template_=SketchUpTemplates.selectWidget;this.options=c.observableArray();this.currentDisplayed=c.observable();this.currentValue=c.observable();this.customInputText=c.observable();this.areOptionsVisible=c.observable(!1);this.isCustomInputVisible=c.observable(!1);this.placeHolderText_=d;this.inputParser_=h;this.customInputError=
c.computed(function(){return goog.isDefAndNotNull(m.inputParser_)?void 0===m.inputParser_(m.customInputText()):!1});this.displayText=c.computed(function(){return goog.isDefAndNotNull(m.currentDisplayed())?m.currentDisplayed():m.placeHolderText_});this.updateOptions(b);goog.isDefAndNotNull(g)&&this.setValue(g)}a.prototype.render=function(){goog.isDefAndNotNull(this.container_)||(this.container_=goog.soy.renderAsFragment(this.template_),c.applyBindings(this,this.container_),this.registerEventListeners());
return this.container_};a.prototype.destroy=function(){document.removeEventListener("mousedown",this.onOutsideClick_)};a.prototype.onChange=function(a){this.onChangeAction_=a};a.prototype.updateOptions=function(a,b){this.options([]);if(Array.isArray(a))for(var c=0;c<a.length;c++){var d=a[c];this.options.push({display:d.toString(),value:d})}else for(c=0,d=goog.object.getKeys(a);c<d.length;c++){var m=d[c];this.options.push({display:m,value:a[m]})}goog.isDef(b)&&this.setOption(b)};a.prototype.getOption=
function(){return this.currentDisplayed()};a.prototype.getValue=function(){return this.currentValue()};a.prototype.setValue=function(a){for(var b=0,c=this.options();b<c.length;b++){var d=c[b];if(d.value===a){this.setOption(d.display);return}}if("string"===typeof a||"number"===typeof a)this.setOption(a.toString());else throw Error("Unknown value passed to select widget setValue");};a.prototype.setOption=function(a){var b=this.currentValue(),c;if(!goog.isDefAndNotNull(c))for(var d=0,m=this.options();d<
m.length;d++){var y=m[d];if(y.display===a){c=y.value;break}}!goog.isDefAndNotNull(c)&&goog.isDefAndNotNull(this.inputParser_)&&(c=this.inputParser_(a));if(goog.isDefAndNotNull(c)&&(this.currentDisplayed(a),this.currentValue(c),this.customInputText(a),this.areOptionsVisible(!1),this.isCustomInputVisible(!1),goog.isDefAndNotNull(this.onChangeAction_)&&c!==b))this.onChangeAction_(c)};a.prototype.onClick=function(){1!==this.options().length&&(this.areOptionsVisible(!this.areOptionsVisible()),goog.isDefAndNotNull(this.inputParser_)&&
this.isCustomInputVisible(!0))};a.prototype.onCustomInputKeyPress=function(a,b){return this.isCustomInputVisible()&&b.keyCode===goog.events.KeyCodes.ENTER?(this.closeSelector(),!1):!0};a.prototype.registerEventListeners=function(){var a=this;this.onOutsideClick_=function(b){if(a.areOptionsVisible()||a.isCustomInputVisible())b=b.target,a.container_===b||a.container_.contains(b)||a.closeSelector()};document.addEventListener("mousedown",this.onOutsideClick_)};a.prototype.closeSelector=function(){this.areOptionsVisible(!1);
if(this.isCustomInputVisible()){this.isCustomInputVisible(!1);var a=this.inputParser_(this.customInputText());void 0!==a&&a!==this.currentValue()?this.setOption(this.customInputText()):this.customInputText(this.currentDisplayed())}};return a}();b.default=a});
define("FontSelector",["require","exports","knockout","Bindings/index","SelectWidget"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});var f=[[$t("Regular"),!1,!1],[$t("Bold"),!0,!1],[$t("Italic"),!1,!0],[$t("Bold Italic"),!0,!0]],g=[9,10,11,12,14,18,20,24,32];a=function(){function a(b){var c=this;goog.isDefAndNotNull(b)||(b={includeSize:!0});var d={faceName:void 0,isBold:void 0,isItalic:void 0,pointSize:void 0};goog.isDefAndNotNull(b.defaultFont)&&(d=b.defaultFont);var m={face:$t("Select Font"),
style:$t("Select Style"),size:$t("Select Size")};goog.isDefAndNotNull(b.placeholderTexts)&&(m=b.placeholderTexts);this.faceSelector_=new h(m.face,d.faceName);var W=goog.array.find(f,function(a){var b=a[2];return a[1]===d.isBold&&b===d.isItalic});this.styleSelector_=new e.default(goog.array.map(f,function(a){return a[0]}),m.style,goog.isDefAndNotNull(W)?W[0]:void 0);b.includeSize&&(b=goog.isDefAndNotNull(d.pointSize)?d.pointSize.toString():void 0,this.sizeSelector_=new e.default(goog.array.map(g,function(a){return a.toString()}),
m.size,b,function(a){if(goog.isDefAndNotNull(a)&&(a=a.match(/^(\d+)(?:pt)?$/),goog.isDefAndNotNull(a)&&(a=parseInt(a[1]))&&0<a&&300>a))return a.toString()}));m=function(){c.updateFaceAndStyleOptions();if(goog.isDefAndNotNull(c.onChangeAction_))c.onChangeAction_(c.getSelectedFont())};this.styleSelector_.onChange(m);this.faceSelector_.onChange(m);if(goog.isDefAndNotNull(this.sizeSelector_))this.sizeSelector_.onChange(m)}a.prototype.updateFaceAndStyleOptions=function(){var a=this,b=this.faceSelector_.currentValue(),
c=d.getAvailableFonts(),e=goog.array.find(c,function(a){return b===a.name})||c[0],c=f.filter(function(a,b){var c=a[1];a=a[2];return 0===b?!0:c&&a?e.hasBold&&e.hasItalic:c?e.hasBold:a?e.hasItalic:!1}),g=goog.array.find(c,function(b){return b[0]===a.styleSelector_.getOption()})||c[0];this.styleSelector_.updateOptions(c.map(function(a){return a[0]}),g[0]);this.faceSelector_.updateWysiwyg(g[1],g[2])};a.prototype.getStyleByName=function(a){return goog.array.find(f,function(b){return b[0]===a})||void 0};
a.prototype.render=function(){goog.isDefAndNotNull(this.container_)||(this.container_=goog.soy.renderAsFragment(SketchUpTemplates.fontSelector),this.container_.appendChild(this.faceSelector_.render()),this.container_.appendChild(this.styleSelector_.render()),goog.isDefAndNotNull(this.sizeSelector_)&&this.container_.appendChild(this.sizeSelector_.render()));this.updateFaceAndStyleOptions();return this.container_};a.prototype.destroy=function(){this.faceSelector_.destroy();this.styleSelector_.destroy();
goog.isDefAndNotNull(this.sizeSelector_)&&this.sizeSelector_.destroy()};a.prototype.onChange=function(a){this.onChangeAction_=a};a.prototype.getSelectedFont=function(){var a=this.getStyleByName(this.styleSelector_.getOption()),b;goog.isDefAndNotNull(this.sizeSelector_)&&(b=parseInt(this.sizeSelector_.getOption()));return{faceName:this.faceSelector_.getOption(),isBold:a[1],isItalic:a[2],pointSize:b}};return a}();b.FontSelector=a;b.getFontFaces=function(){return d.getAvailableFonts().map(function(a){return a.name})};
b.defaultFontSize=12;var h=function(a){function d(e,f){var g=this,g=b.getFontFaces();g.sort(function(a,b){return a.localeCompare(b)});goog.isDefAndNotNull(f)&&0>g.indexOf(f)&&(f=g.indexOf(f)?d.DEFAULT_FACE:g[0]);g=a.call(this,g,e,f)||this;g.style=c.observable("");g.weight=c.observable("");return g}__extends(d,a);d.prototype.updateWysiwyg=function(a,b){this.style(b?"italic":"");this.weight(a?"bold":"")};d.prototype.render=function(){this.template_=SketchUpTemplates.fontFaceSelect;return a.prototype.render.call(this)};
d.prototype.setOption=function(a){var b=this.currentValue();this.currentDisplayed(a);this.currentValue(a);this.customInputText(a);this.areOptionsVisible(!1);this.isCustomInputVisible(!1);if(goog.isDefAndNotNull(this.onChangeAction_)&&a!==b)this.onChangeAction_(a)};d.DEFAULT_FACE="Open Sans";return d}(e.default);b.FontFaceSelect=h});
define("NetworkStatus",["require","exports"],function(a,b){function c(){return window.navigator.onLine?(d=!1,!0):!1}Object.defineProperty(b,"__esModule",{value:!0});var d=!1,e;(function(a){a[a.NO_INTERNET_CONNECTION=0]="NO_INTERNET_CONNECTION"})(b.Status||(b.Status={}));b.isConnected=c;b.pollConnection=function(a,b){window.clearInterval(e);e=window.setInterval(function(){c()?d=!1:(d||a(),d=!0)},b||5E3)};b.stopPollingConnection=function(){window.clearInterval(e)}});
define("Repromise",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c,f,g,h){var m=this;this.promiseGenerator_=b;this.predicate_=c||function(a,b){return!0};this.nextDelay_=this.firstDelay_=f||5E3;this.alpha_=g||1;this.maxAttempts_=h||5;this.attempts_=0;this.aborted_=!1;goog.asserts.assert(0<=this.firstDelay_,"Must be non-negative");goog.asserts.assert(0<=this.alpha_,"Must be non-negative");goog.asserts.assert(0<=this.maxAttempts_,"Must be non-negative");
this.outerPromise_=new goog.Promise(function(a,b){m.resolver_=a;m.rejecter_=b;m.retry()})}a.prototype.promise=function(){return this.outerPromise_};a.prototype.abort=function(){this.aborted_=!0;window.clearTimeout(this.currentTimeoutId_);this.innerPromise_.cancel()};a.prototype.retry=function(){var a=this;this.innerPromise_=this.promiseGenerator_().then(function(b){a.resolver_(b)}).thenCatch(function(b){a.attempts_++;!a.aborted_&&a.predicate_(b,a.nextDelay_)&&a.attempts_<a.maxAttempts_?(a.currentTimeoutId_=
window.setTimeout(function(){a.retry()},a.nextDelay_),a.nextDelay_=a.firstDelay_*Math.pow(a.alpha_,a.attempts_)):a.rejecter_(b)})};return a}();b.default=a});define("PromiseUtils",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.toEs6Promise=function(a){return new Promise(function(b,e){a.then(b).thenCatch(e)})}});
define("XhrUtils","require exports Bindings/index NetworkStatus Repromise PromiseUtils".split(" "),function(a,b,c,d,e,f){function g(a,b,c,e,f,g,la,ga,xh){void 0===b&&(b="GET");var Mg=new XMLHttpRequest;return{promise:new goog.Promise(function(zh,Ch){Mg.open(b,a,!0);Mg.withCredentials=ga||!1;Mg.timeout=xh||0;if(e)for(var Ah in e)Mg.setRequestHeader(Ah,e[Ah]);f&&Mg.setRequestHeader("Content-Type","application/json");g&&(Mg.responseType="arraybuffer");"POST"!==b&&"PUT"!==b||!Mg.upload?Mg.onprogress=
la:Mg.upload.onprogress=la;Mg.onerror=function(a){Ch(h[h.XHR_ERROR])};Mg.onabort=function(a){Ch(h[h.XHR_ABORTED])};Mg.ontimeout=function(a){Ch(h[h.XHR_TIMED_OUT])};Mg.onload=function(a){200<=Mg.status&&300>Mg.status?zh(Mg.response):""==Mg.responseType||"text"==Mg.responseType?Ch(Error(Mg.responseText)):Ch(Error())};d.isConnected()?c?Mg.send(c):Mg.send():Ch(d.Status[d.Status.NO_INTERNET_CONNECTION])}),cancel:function(){Mg.abort()}}}Object.defineProperty(b,"__esModule",{value:!0});var h;(function(a){a[a.XHR_ABORTED=
0]="XHR_ABORTED";a[a.XHR_ERROR=1]="XHR_ERROR";a[a.XHR_TIMED_OUT=2]="XHR_TIMED_OUT"})(h=b.Reason||(b.Reason={}));b.doRequest=g;b.doRequestWithRetries=function(a,b,c,d,f,h,la,ga,xh,Mg){void 0===b&&(b="GET");void 0===Mg&&(Mg=5);goog.asserts.assert(0<=Mg);var zh,Ch=!1;return{promise:(new e.default(function(){if(Ch)return goog.Promise.reject();zh=g(a,b,c,d,f,h,la,ga,xh);return zh.promise},function(a,b){return!Ch},1E3,1,Mg)).promise(),cancel:function(){Ch=!0;zh.cancel()}}};b.doGet=function(a,b,c,d,e,h){a=
g(a,"GET",void 0,b,!1,c,d,e,h);return{promise:f.toEs6Promise(a.promise),cancel:a.cancel}};b.doPost=function(a,b,c,d,e,h){var la=b instanceof Object&&!(b instanceof String);la&&(b=JSON.stringify(b));a=g(a,"POST",b,c,la,!1,d,e,h);return{promise:f.toEs6Promise(a.promise),cancel:a.cancel}};b.fetchBinary=function(a,b,c,e,f){void 0===f&&(f=!1);var g=e||function(a){console.error("Problem during xmlhttprequest "+a)},h=c||function(){},ga=new XMLHttpRequest;ga.open("GET",a,!0);ga.responseType="arraybuffer";
ga.withCredentials=f;ga.onprogress=function(a){h(a)};ga.onload=function(a){200==ga.status?b(ga.response):g(a)};d.isConnected()?ga.send():g(d.Status[d.Status.NO_INTERNET_CONNECTION])};b.crossDomainRequest=function(a){return new goog.Promise(function(b,c){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!0;e.onload=function(a){200==e.status?b(e.response):c(a)};e.onerror=function(a){c(a)};d.isConnected()?e.send():c(d.Status[d.Status.NO_INTERNET_CONNECTION])})};b.DoAddLocationXHR=function(a,
b){for(var d=c.GetURLsForAddLocationRequest(a),e=[],f=0;f<d.size();++f){var h=d.get(f);e.push(g(h,"GET",void 0,void 0,void 0,b).promise)}d=goog.Promise.all(e).then(function(d){var e=c.CreateEmptyWStringVector();d.forEach(function(a){if(b){var c="";a=new Uint8Array(a);for(var d=a.length,f=0;f<d;f++)c+=String.fromCharCode(a[f]);e.push_back(c)}else e.push_back(a)});c.OnAddLocationRequestSuccess(a,e);e.delete()});d=d.thenCatch(function(b){c.OnAddLocationRequestFailure(a)})};b.doWarehouseSetBinaryXHR=
function(a,b,c){var d=new FormData,e,f,h;for(h in b)b.hasOwnProperty(h)&&(goog.string.caseInsensitiveEquals(h,"binary")?e=b[h]:goog.string.caseInsensitiveEquals(h,"fileName")?f=b[h]:d.append(h,b[h]));goog.isDefAndNotNull(e)&&d.append("binary",e,f);return g(a+warehouse.Constants.API_BASE_PATH+"/SetBinary","POST",d,void 0,void 0,void 0,c,!0)};b.ComputeProgressPercentage=function(a,b){var c=a.loaded;a=a.total;0===a&&(a=b||0);return 0<a?Math.round(c/a*100):0}});
define("DialogPrompts",["require","exports","XhrUtils"],function(a,b,c){function d(a,b){a.getContentElement().innerHTML=b}function e(a,b){var c=a.getButtonSet();a=a.getElementByClass("goog-buttonset-default");b?(c.setButtonEnabled(c.getDefault(),!0),a.classList.remove("modal-dialog-button-disabled")):(c.setButtonEnabled(c.getDefault(),!1),a.classList.add("modal-dialog-button-disabled"))}function f(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,
!0)}Object.defineProperty(b,"__esModule",{value:!0});b.ShowInfoDialog=function(a,b,c,e,f){var L=!0;goog.isDefAndNotNull(c)||(c=goog.ui.Dialog.ButtonSet.DefaultButtons.OK.caption,L=!1);e=e||!1;return new goog.Promise(function(R,W){W=new goog.ui.Dialog(null);W.setDisposeOnHide(!0);W.setTitle(a);W.getDialogElement().classList.add("skinny-dialog");goog.isDef(f)&&W.getDialogElement().classList.add(f);e?d(W,b):W.setTextContent(b);W.setButtonSet(goog.ui.Dialog.ButtonSet.createOk());var la=W.getButtonElement().getElementsByTagName("button")[0];
goog.dom.classlist.add(la,"goog-buttonset-one-button");la.innerHTML=c;L&&(la=W.getButtonElement().getElementsByTagName("button")[0],goog.style.setWidth(la,300));goog.events.listen(W,goog.ui.Dialog.EventType.SELECT,function(a){R()});W.setVisible(!0)})};b.ShowQuestionDialog=function(a){return new goog.Promise(function(b,c){c=new goog.ui.Dialog(null);c.setDisposeOnHide(!0);c.setTitle($t("Please confirm"));c.getDialogElement().classList.add("skinny-dialog");c.setTextContent(a);c.setButtonSet((new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,
!1,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0));goog.events.listen(c,goog.ui.Dialog.EventType.SELECT,function(a){a.key==goog.ui.Dialog.DefaultButtonKeys.YES?b(!0):b(!1)});c.setVisible(!0)})};b.showYesNoCancelQuestionDialog=function(a){return new goog.Promise(function(b,c){var d=new goog.ui.Dialog(null);d.setDisposeOnHide(!0);d.setTitle($t("Please confirm"));d.getDialogElement().classList.add("skinny-dialog");d.setTextContent(a);d.setButtonSet(goog.ui.Dialog.ButtonSet.createYesNoCancel());
goog.events.listen(d,goog.ui.Dialog.EventType.SELECT,function(a){a.key==goog.ui.Dialog.DefaultButtonKeys.YES?b(!0):a.key==goog.ui.Dialog.DefaultButtonKeys.NO?b(!1):c(void 0)});d.setVisible(!0)})};b.showCustomButtonDialog=function(a,b,c){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];return new goog.Promise(function(e,f){var K=new goog.ui.Dialog(null);K.setDisposeOnHide(!0);K.setTitle(b);K.setTextContent(a);var la=new goog.ui.Dialog.ButtonSet;d.forEach(function(a,b){la.addButton({key:b.toString(),
caption:a},b==c)});K.setButtonSet(la);goog.events.listen(K,goog.ui.Dialog.EventType.SELECT,function(a){goog.isDefAndNotNull(a)?e(parseInt(a.key)):f(void 0)});K.setVisible(!0)})};b.GetModelNameFromUser=function(a){void 0===a&&(a="");return new goog.Promise(function(b,c){var y=new goog.ui.Dialog(null);y.setDisposeOnHide(!0);y.setTitle($t("Please enter a model name"));y.setButtonSet(f());d(y,SketchUpTemplates.modelTitleInput());y.setVisible(!0);var K=y.getElementByClass("model-title-input");K.value=
a;e(y,0<K.value.length);K.addEventListener("input",function(a){e(y,0<a.target.value.length)});K.focus();goog.events.listen(y,goog.ui.Dialog.EventType.SELECT,function(a){a.key==goog.ui.Dialog.DefaultButtonKeys.OK?b(K.value):c(null)})})};b.ShowProgressDialog=function(a,b,e,f){void 0===e&&(e=!1);void 0===f&&(f=!1);var K=new goog.ui.Dialog(null);K.setDisposeOnHide(!0);K.setTitle(a);K.setHasTitleCloseButton(f);d(K,SketchUpTemplates.progressDialog());K.setVisible(!0);var L=K.getElementByClass("progress-dialog-progress-bar");
e?K.setButtonSet((new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)):K.setButtonSet(null);return{dialog:K,onProgress:function(a){L.value=c.ComputeProgressPercentage(a,b)},close:function(){K.setVisible(!1)},setMessage:function(a){K.setTitle(a)},setCancelCallback:function(a){e&&goog.events.listenOnce(K,goog.ui.Dialog.EventType.SELECT,function(b){b.key==goog.ui.Dialog.DefaultButtonKeys.CANCEL&&a()})}}};b.SetDefaultButtonEnabled=e;b.CreateNoButtons=function(){return new goog.ui.Dialog.ButtonSet};
b.CreateOkCancel=f});
define("GenericDialog",["require","exports","knockout","DialogPrompts"],function(a,b,c,d){function e(a,b,e,y,K){void 0===K&&(K=f.OkCancel);goog.isDefAndNotNull(e)||(e="SketchUp");return new goog.Promise(function(L,R){a.setTitle(e);a.setDisposeOnHide(!0);K===f.None?a.setButtonSet(d.CreateNoButtons()):K===f.OkCancel?a.setButtonSet(d.CreateOkCancel()):K===f.Ok&&a.setButtonSet(goog.ui.Dialog.ButtonSet.createOk());var W=a.getContentElement();W.appendChild(b);a.setVisible(!0);goog.isDefAndNotNull(y)&&c.applyBindings(y,
W);K===f.None?goog.events.listen(a,goog.ui.Dialog.EventType.AFTER_HIDE,function(a){L()}):K!==f.Ok&&K!==f.OkCancel||goog.events.listen(a,goog.ui.Dialog.EventType.SELECT,function(a){a.key===goog.ui.Dialog.DefaultButtonKeys.OK?L():R(null)})})}Object.defineProperty(b,"__esModule",{value:!0});var f;(function(a){a[a.None=0]="None";a[a.Ok=1]="Ok";a[a.OkCancel=2]="OkCancel"})(f=b.ButtonSetType||(b.ButtonSetType={}));a=function(){function a(){}Object.defineProperty(a.prototype,"dialogClosed",{get:function(){return this.dialogClosedPromise_},
enumerable:!0,configurable:!0});a.prototype.show=function(a,b,c,d,g){void 0===d&&(d=f.OkCancel);this.googDialog_=new goog.ui.Dialog;goog.string.isEmptySafe(g)||this.googDialog_.getDialogElement().classList.add(g);this.dialogClosedPromise_=e(this.googDialog_,a,b,c,d)};a.prototype.hide=function(){this.googDialog_.setVisible(!1)};a.prototype.setClickHandler=function(a){this.googDialog_.getDialogElement().addEventListener("click",a)};a.prototype.getContentElement=function(){return this.googDialog_.getContentElement()};
return a}();b.GenericDialog=a;b.show=function(a,b,c,d){void 0===d&&(d=f.OkCancel);return e(new goog.ui.Dialog(null),a,b,c,d)}});
define("ApplicationFeatures",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c;a=c||(c={});a.AdvancedFeatures="ADVANCED_FEATURES";a.EduCurriculum="EDU_CURRICULUM";a.ExportFile="EXPORT_FILE";a.ImportFile="IMPORT_FILE";a.MaterialEditing="MATERIAL_EDITING";a.Outliner="OUTLINER";a.SolidTools="SOLID_TOOLS";a.StyleEditing="STYLE_EDITING";a.SupportPaid="SUPPORT_PAID";a.RemoveWatermark="REMOVE_WATERMARK";b.default=c});
define("GoogleClient",["require","exports","EnvironmentSettings"],function(a,b,c){function d(){return e().then(function(){return new goog.Promise(function(a,b){gapi.load("auth2",a)})})}function e(){return(new goog.Promise(function(b,c){goog.isDefAndNotNull(window.gapi)?b():a(["https://apis.google.com/js/api.js"],b)})).then(function(){return new goog.Promise(function(a,b){gapi.load("client",a)})})}function f(){return g?goog.Promise.resolve():d().then(function(){return gapi.auth2.init({client_id:c.IsTest()?
"260457348581-rkcd5m6tg4bpak4at11u9g41p3jv4h9q.apps.googleusercontent.com":"260457348581-5vv0kcqj70tqs88mcb0h3nm4hqflkh9c.apps.googleusercontent.com",fetch_basic_profile:!0,scope:h.join(" ")}).then(function(){g=!0},function(a){return a})})}Object.defineProperty(b,"__esModule",{value:!0});var g=!1,h=["profile","email","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/classroom.courses.readonly","https://www.googleapis.com/auth/appsmarketplace.license"];b.initializeGoogleAuth=
f;b.listenToSignIn=function(a){return f().then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(a)})};b.hasClassroomAccess=function(){return e().then(function(){var a={path:"https://classroom.googleapis.com/v1/courses",method:"GET"};return(new goog.Promise(function(b,c){gapi.client.request(a).then(function(a){400>a.status?b():c("The user does not have Google Classroom access.")},c)})).thenCatch(function(a){if(goog.isDefAndNotNull(a)&&403===a.status)throw"The user does not have Google Classroom access.";
a=a.result;if(goog.isDefAndNotNull(a)&&(a=a.error,goog.isDefAndNotNull(a)))throw a.message||"";throw"An unexpected error occured with Google Classroom API.";})})};b.hasSketchUpAccess=function(a){return e().then(function(){var b={path:"https://www.googleapis.com/appsmarket/v2/userLicense/260457348581/"+a,method:"GET"};return new goog.Promise(function(a,c){gapi.client.request(b).then(function(b){400>b.status&&(b=JSON.parse(b.body))&&"ACTIVE"===b.state&&!0===b.enabled&&a();c("The user does not have access to the SketchUp G Suite Marketplace app.")},
c)})})}});
define("LoginPrompt",["require","exports","EnvironmentSettings","GoogleClient","Login"],function(a,b,c,d,e){function f(a,b,c,d,e){return window.open(a,b,"height="+d+",width="+c+",top="+(screen.height?(screen.height-d)/2:0)+",left="+(screen.width?(screen.width-c)/2:0)+",scrollbars="+scroll+",resizable")}function g(){var a=c.Get(),a=a.loginServer+a.loginEndPoint,b=goog.uri.utils.getHost(window.location.href),b=goog.uri.utils.appendPath(b,"static"),b=goog.uri.utils.appendPath(b,"postloginout.html");return goog.uri.utils.appendParam(a,
"destination",b)}function h(a){var b=c.Get();return goog.uri.utils.appendParam(b.loginServer+b.logoutEndPoint,"destination",a)}function m(){K||(window.addEventListener("storage",function(a){"login"===a.key&&goog.isDefAndNotNull(a.newValue)&&e.alertListeners()}),K=!0)}Object.defineProperty(b,"__esModule",{value:!0});var y;(function(a){a[a.WINDOW_BLOCKED=0]="WINDOW_BLOCKED";a[a.WINDOW_CLOSED=1]="WINDOW_CLOSED"})(y=b.LoginError||(b.LoginError={}));b.googleSignIn=function(){return d.initializeGoogleAuth().then(function(){var a=
gapi.auth2.getAuthInstance(),b=new gapi.auth2.SigninOptionsBuilder;b.setPrompt("select_account");return a.signIn(b).then(function(){return e.getInfo()},function(){return goog.Promise.reject(y.WINDOW_CLOSED)})})};b.trimbleSignIn=function(){var a=[];return(new goog.Promise(function(b,c){m();var d=f(g(),"TrimbleLogin",400,600,!0);if(goog.isDefAndNotNull(d)){var h=localStorage.getItem("login"),K=setInterval(function(){d.closed&&(localStorage.getItem("login")!=h?b(e.getInfo()):c(y.WINDOW_CLOSED))},500);
a.push(function(){clearInterval(K)})}else c(y.WINDOW_BLOCKED)})).thenAlways(function(){a.forEach(function(a){a()})})};b.trimbleSignOut=function(){window.location.assign(h("https://www.sketchup.com/products/sketchup-free"));return goog.Promise.resolve()};var K=!1});
define("SketchUpEvent",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){this.handlers=[]}a.prototype.listen=function(a){goog.array.insert(this.handlers,a)};a.prototype.remove=function(a){goog.array.remove(this.handlers,a)};a.prototype.removeAll=function(){this.handlers=[]};a.prototype.trigger=function(a){this.handlers.forEach(function(b){return b(a)})};return a}();(function(a){a.Create=function(){return new c}})(b.SketchUpEvents||(b.SketchUpEvents=
{}))});
define("Login","require exports EnvironmentSettings GoogleClient LoginPrompt ProgramMode SketchUpEvent XhrUtils".split(" "),function(a,b,c,d,e,f,g,h){function m(){return null!==xh&&xh.loggedIn&&(goog.isDef(xh.oauthToken)&&goog.isDef(xh.oauthTokenExpirationTime)?Date.now()<xh.oauthTokenExpirationTime-3E5:1)?goog.Promise.resolve(xh):y()}function y(){xh=null;if(goog.isDefAndNotNull(zh))return zh;f.currentProgramMode.requiresGoogleAuthentication()?(ga||(d.listenToSignIn(W),ga=!0),zh=K()):zh=L().then(R);return zh.then(function(a){xh=
a;zh=void 0;return a})}function K(){var a={};return d.initializeGoogleAuth().then(function(){var a=gapi.auth2.getAuthInstance();if(!a.isSignedIn.get())throw null;return a.currentUser.get().reloadAuthResponse()}).then(function(b){var c=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();a.oauthToken=b.access_token;a.oauthTokenExpirationTime=parseInt(b.expires_at);a.firstname=c.getGivenName();a.lastname=c.getFamilyName();a.email=c.getEmail();a.userId=c.getId();a.imageUrl=c.getImageUrl();
a.loggedIn=!0;return a},function(){a.loggedIn=!1;return a})}function L(){var a=c.Get(),a=h.crossDomainRequest(a.loginServer+a.loginUsersEndPoint),b={},a=a.then(function(a){a=JSON.parse(a);return b={loggedIn:!0,email:a.email,firstname:a.firstname,lastname:a.lastname,imageUrl:a.image,userId:a.trimbleid,oauthToken:a.sketchupKey}});return a=a.thenCatch(function(a){b.loggedIn=!1;return b})}function R(a){var b={useLocalStorage:!1,baseUrl:c.Get3dWarehouseURL()},b=(new warehouse.DataStore(b)).getUser().then(function(b){a.warehouseUserId=
b.getId();a.warehouseDisplayName=b.getDisplayName();return a});return b=b.thenCatch(function(){a.warehouseUserId="";a.warehouseDisplayName="";return a})}function W(){xh=null;return m().then(function(a){xh=a;Mg.trigger(a);return a})}function la(){var a=c.Get();return h.crossDomainRequest(a.loginServer+a.loginRefreshTokenEndPoint)}Object.defineProperty(b,"__esModule",{value:!0});var ga=!1,xh=null,Mg=g.SketchUpEvents.Create(),zh;b.onChange=function(a){Mg.listen(a)};b.getInfo=m;b.getInfoIgnoringCache=
y;b.getInfoRefreshingToken=function(){return f.currentProgramMode.requiresGoogleAuthentication()?y():la().then(function(){return y()})};b.getCachedInfo=function(){return xh};b.signInUser=function(){return f.currentProgramMode.requiresGoogleAuthentication()?e.googleSignIn():e.trimbleSignIn()};b.signOutUser=function(){return f.currentProgramMode.requiresGoogleAuthentication()?new goog.Promise(function(a,b){gapi.auth2.getAuthInstance().signOut().then(a,b)}):e.trimbleSignOut()};b.alertListeners=W});
define("GlobalConstants",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.LOCAL_RESOURCES_PATH="/Resources/";b.URL_RESOURCES_PATH="/resources/";b.SKP_MIME_TYPE="application/vnd.sketchup.skp";b.SKP_ALTERNATE_MIME_TYPE="application/x-koan";b.JPEG_MIME_TYPE="image/jpeg";b.JPG_MIME_TYPE="image/jpg";b.PNG_MIME_TYPE="image/png";b.THUMBNAIL_MIME_TYPE=b.JPG_MIME_TYPE;b.THUMBNAIL_DATA_URL="data:"+b.THUMBNAIL_MIME_TYPE+";base64,";b.INJECTED_SOY_DATA={THUMBNAIL_DATA_URL:b.THUMBNAIL_DATA_URL}});
define("ModelStorageProvider",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.READ_ONLY=0]="READ_ONLY";a[a.WRITE=1]="WRITE"})(b.Permission||(b.Permission={}));(function(a){a[a.File=0]="File";a[a.Folder=1]="Folder"})(b.FolderItemType||(b.FolderItemType={}));(function(a){a[a.UpToDate=0]="UpToDate";a[a.ModifiedAtRemoteStorage=1]="ModifiedAtRemoteStorage";a[a.ModifiedLocally=2]="ModifiedLocally";a[a.HasConflict=3]="HasConflict"})(b.FileVersionState||
(b.FileVersionState={}));(function(a){a[a.UnknownError=0]="UnknownError";a[a.ItemWasDeleted=1]="ItemWasDeleted";a[a.ProjectWasDeleted=2]="ProjectWasDeleted";a[a.UnauthorizedLicense=3]="UnauthorizedLicense";a[a.InvalidName=4]="InvalidName";a[a.StorageLimitExceeded=5]="StorageLimitExceeded";a[a.CouldNotCreateProject=6]="CouldNotCreateProject"})(b.ErrorType||(b.ErrorType={}));(function(a){a[a.Unknown=0]="Unknown";a[a.FileUpload=1]="FileUpload"})(b.ErrorContext||(b.ErrorContext={}))});
define("BusyScreen",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){a.modalPopup_||(a.modalPopup_=new goog.ui.ModalPopup,a.modalPopup_.render());var b=a.modalPopup_.getBackgroundElement();b.style.zIndex="50000";b.style.cursor="wait";a.modalPopup_.setVisible(!0)}a.prototype.restore=function(){a.modalPopup_.setVisible(!1)};return a}();b.default=a});
define("LocalStorage",["require","exports"],function(a,b){function c(){if(goog.isDef(d))return d;var a;try{a=window.localStorage,a.setItem("__storage_test__","__storage_test__"),a.removeItem("__storage_test__"),d=!0}catch(b){d=b instanceof DOMException&&(22===b.code||1014===b.code||"QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&0!==a.length}return d}Object.defineProperty(b,"__esModule",{value:!0});var d;b.isSupported=c;b.getItem=function(a){return c()?window.localStorage.getItem(a):
null};b.setItem=function(a,b){c()&&window.localStorage.setItem(a,b)}});
define("Log",["require","exports","LocalStorage"],function(a,b,c){function d(){return c.getItem("log")||""}function e(a,b){var e;f?e="":(f=!0,e="*****\n");var y=new Date,y="m-d h:min:sec:ms ".replace("m",(y.getMonth()+1).toString()).replace("d",y.getDate().toString()).replace("h",y.getHours().toString()).replace("min",y.getMinutes().toString()).replace("sec",y.getSeconds().toString()).replace("ms",y.getMilliseconds().toString());e+=y+a+b+"\n";a=d();1E5<a.length&&(a="Log cleared\n");c.setItem("log",
a+e)}Object.defineProperty(b,"__esModule",{value:!0});var f=!1;b.info=function(a){e("",a)};b.warn=function(a){e("Warning: ",a)};b.error=function(a){e("ERROR: ",a)};b.getContents=d;DumpLog=function(){var a=d();console.log(a);console.log("\nSize: "+a.length)}});define("Uuid",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.create=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})}});
define("FileUtils","require exports Bindings/index GlobalConstants Log Uuid".split(" "),function(a,b,c,d,e,f){function g(a,b){void 0===b&&(b="");if(a.isFolder){var c=[],d;for(d in a.contents)c=c.concat(g(a.contents[d],b+"/"+d));return c}return[b]}function h(a){try{return null!=FS.lookupPath(a).node}catch(b){return!1}}function m(a){try{for(var b=0,c=Mg(a);b<c.length;b++){var d=c[b];d.isDirectory?m(d.fullPath):FS.unlink(d.fullPath)}FS.rmdir(a);return!0}catch(e){return!1}}function y(a,b){a=FS.readFile(a,
{encoding:"binary"});FS.writeFile(b,a,{encoding:"binary"})}function K(a){var b=goog.string.path.basename(a),c=goog.string.path.extension(b);return{directory:goog.string.path.dirname(a),filename:b.substr(0,b.length-c.length-1),extension:c}}function L(a){var b=goog.string.path.extension(a);0<b.length&&(a=a.slice(0,a.length-b.length-1));return a}function R(a,b){FS.writeFile(b,a,{encoding:"binary"})}function W(a){return FS.readFile(a,{encoding:"binary"})}function la(a){a=new Uint8Array(a);return xh(a)}
function ga(a){return a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function xh(a){for(var b="",c=a.byteLength,d=0;d<c;++d)b+=String.fromCharCode(a[d]);return window.btoa(b)}function Mg(a,b){void 0===b&&(b=!1);var c=[];if(h(a)){var d=FS.lookupPath(a).node;d.isFolder||goog.asserts.assert(!1,"GetDirectoryContents was given a file.");var d=d.contents,e;for(e in d)if(d.hasOwnProperty(e)){var f=goog.string.path.join(a,e),g=d[e],y=g.timestamp,m=void 0;b&&g.isFolder&&(m=Mg(f,b));c.push({isDirectory:g.isFolder,
children:m,fullPath:f,name:e,timestamp:y})}}return c}function zh(a,b){return 0===goog.string.caseInsensitiveCompare(a,b)}function Ch(a,b){return zh(goog.string.path.extension(a),b)}function Ah(a){return Ch(a,b.EXTENSION_SKP)}Object.defineProperty(b,"__esModule",{value:!0});b.EXTENSION_SKP="skp";b.TEMP_DIR="/tmp/";var Bh=goog.Promise.resolve();b.syncFileSystem=function(a){void 0===a&&(a=!1);return Bh=Bh.then(function(){return new goog.Promise(function(b,c){e.info("syncFileSystem - doRead: "+a);FS.syncfs(a,
function(a){e.info("syncFileSystem - end");a&&(console.error(a),e.error("File sync error: "+a));b()})})})};b.BuildFileListRecursive=g;b.MkdirRecursive=function(a){a=a.split("/");for(var b="/",c=0;c<a.length;++c)b=goog.string.path.join(b,a[c]),h(b)||FS.mkdir(b)};b.ensureDirExists=function(a){h(a)||(goog.string.endsWith(a,"/")&&(a=a.slice(0,a.length-1)),FS.mkdir(a))};b.ClearDir=function(a){for(var b=Object.keys(FS.lookupPath(a).node.contents),c=0;c<b.length;++c)FS.unlink(a+"/"+b[c])};b.Exists=h;b.DeleteFile=
function(a){if(h(a)){FS.unlink(a);if(h(a))throw Error("DeleteFile was unsuccessful.");return!0}return!1};b.DeleteDirectory=m;b.CopyFile=y;b.SafeCopyFile=function(a,b){if(h(b)){b=K(b);var c=b.directory,d="."+b.extension,e=b.filename,f=0;do++f,b=goog.string.path.join(c,e+"_"+f.toString()+d);while(h(b))}y(a,b);return b};b.SplitPath=K;b.StripExtension=L;b.replaceExtension=function(a,b){a=L(a);goog.string.endsWith(a,".")&&(a=goog.string.removeAt(a,a.length-1,1));goog.string.startsWith(b,".")||(b="."+b);
return a+b};b.buildSanitizedFilePath=function(a,b){b=b.replace(/(\/|\\)/g,"_");a=goog.string.isEmptyOrWhitespaceSafe(a)?b:goog.string.path.join(a,b);return c.FixPathString(a)};b.SaveFileFromBuffer=function(a,b){a=new Uint8Array(a);R(a,b)};b.saveFileFromUint8Array=R;b.readFileContents=function(a){if(!goog.isDefAndNotNull(a))return Promise.reject(null);var b=new FileReader,c=new Promise(function(a,c){b.onload=function(c){a(new Uint8Array(b.result))}});b.readAsArrayBuffer(a);return c};b.ReadFileToBlob=
function(a){a=W(a);return new Blob([a])};b.ReadFileToUint8Array=W;b.ReadTextFile=function(a){return FS.readFile(a,{encoding:"utf8"})};b.WriteTextFile=function(a,b){FS.writeFile(a,b,{encoding:"utf8"})};b.AppendToTextFile=function(a,b){a=FS.open(a,"a");var c=new Uint8Array(Module.lengthBytesUTF8(b)+1);b=Module.stringToUTF8Array(b,c,0,c.length);FS.write(a,c,0,b,void 0);FS.close(a)};b.ArrayBufferToBase64=la;b.ArrayBufferToUrlSafeBase64=function(a){return ga(la(a))};b.encodeUrlSafeBase64=ga;b.convertUint8ArrayToBase64=
xh;b.getTimestamp=function(a){return FS.lookupPath(a).node.timestamp};b.GetDirectoryContents=Mg;b.GetNewestFile=function(a){for(var b={isDirectory:!1,children:void 0,fullPath:"",name:"",timestamp:0},c=0;c<a.length;c++){var d=a[c];!d.isDirectory&&d.timestamp>b.timestamp&&(b=d)}return b};b.getFileStatistics=function(a){a=FS.stat(a);return{file_size:a.size,creation_time:a.ctime,modification_time:a.mtime}};b.isSameExtension=zh;b.hasExtension=Ch;b.hasSkpModelExtension=Ah;b.hasStlExtension=function(a){return Ch(a,
"stl")};b.addSkpModelExtensionIfMissing=function(a){Ah(a)||(a=goog.string.endsWith(a,".")?a+b.EXTENSION_SKP:a+("."+b.EXTENSION_SKP));return a};b.generateFileSystemName=function(a){var b=f.create();return goog.isDef(a)?b+"."+a:b};b.isImageFile=function(a){a=goog.string.path.extension(a).toLowerCase();return"jpg"===a||"jpeg"===a||"png"===a};b.getImageMimeType=function(a){a=goog.string.path.extension(a).toLowerCase();if("jpg"===a||"jpeg"===a)return d.JPG_MIME_TYPE;if("png"===a)return d.PNG_MIME_TYPE};
b.getExtensionFromMimeType=function(a){switch(a){case d.SKP_MIME_TYPE:case d.SKP_ALTERNATE_MIME_TYPE:return b.EXTENSION_SKP;case d.JPEG_MIME_TYPE:case d.JPG_MIME_TYPE:return"jpg";case d.PNG_MIME_TYPE:return"png"}return""};b.getSkpMimeTypes=function(){return[d.SKP_MIME_TYPE,d.SKP_ALTERNATE_MIME_TYPE]};b.getImageMimeTypes=function(){return[d.JPEG_MIME_TYPE,d.JPG_MIME_TYPE,d.PNG_MIME_TYPE]};b.rename=function(a,b){FS.rename(a,b)}});
define("FolderMetadata",["require","exports","FileUtils","Log"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e=function(){return function(a){void 0===a&&(a={});this.filesMap=a}}();a=function(){function a(b){this.folderPath_=b;this.serializable_=new e}a.prototype.initFromJson=function(a){this.serializable_=JSON.parse(a)};a.prototype.addFile=function(a,b){d.info("FolderMetadata.addFile - "+a);this.serializable_.filesMap[a]=b};a.prototype.removeFile=function(a){d.info("FolderMetadata.removeFile - "+
a);delete this.serializable_.filesMap[a]};a.prototype.lookupFile=function(a){return this.serializable_.filesMap[a]};a.prototype.renameFile=function(a,b,c,e){if(a===b)return!0;d.info("FolderMetadata.renameFile - "+a+" -> "+b);var f=this.lookupFile(a);return goog.isDef(f)?(f.fileNameInUI=c,f.versionId=e,this.removeFile(a),this.addFile(b,f),!0):!1};a.prototype.write=function(){d.info("FolderMetadata.write");var b=goog.string.path.join(this.folderPath_,a.METADATA_FILENAME),e=JSON.stringify(this.serializable_);
c.WriteTextFile(b,e)};a.hasMetadata=function(b){b=goog.string.path.join(b,a.METADATA_FILENAME);return c.Exists(b)};a.read=function(b){var d=goog.string.path.join(b,a.METADATA_FILENAME);b=new a(b);if(!c.Exists(d))return b;d=c.ReadTextFile(d);b.initFromJson(d);return b};a.lookupRemoteModelMetadata=function(b){var c=goog.string.path.dirname(b);b=goog.string.path.baseName(b);return a.read(c).lookupFile(b)};a.lookupRemoteModelMetadataById=function(b,c){b=a.read(b);for(var d in b.serializable_.filesMap){var e=
b.serializable_.filesMap[d];if(e.fileId===c)return{fileName:d,metadata:e}}};a.lookupRemoteModelMetadataByParentId=function(b,c){var d=[];b=a.read(b);for(var e in b.serializable_.filesMap){var K=b.serializable_.filesMap[e];K.parentFolderId===c&&d.push({fileName:e,metadata:K})}return d};a.getAll=function(b){var c=[];b=a.read(b);for(var d in b.serializable_.filesMap)c.push({fileName:d,metadata:b.serializable_.filesMap[d]});return c};a.METADATA_FILENAME=".metadata";return a}();b.FolderMetadata=a});
define("DebugEnvironmentSettings",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.getWebGLContext=function(){if(!this.isCanvasAvailable()||!window.WebGLRenderingContext)return null;var a=document.createElement("canvas");return a.getContext("webgl")||a.getContext("experimental-webgl")||null};b.getWebGL2Context=function(){return this.isCanvasAvailable()&&window.WebGL2RenderingContext?document.createElement("canvas").getContext("webgl2")||null:null};b.isWebGLAvailable=
function(){return null===this.getWebGLContext()&&null===this.getWebGL2Context()?!1:!0};b.getWebGLVersion=function(){var a=this.getWebGLContext(),b=this.getWebGL2Context();return this.isWebGLAvailable()?null!==b?b.getParameter(b.VERSION):a.getParameter(a.VERSION):"Not Available"};b.getMaxVaryingVectors=function(){var a=this.getWebGLContext(),b=this.getWebGL2Context();return this.isWebGLAvailable()?null!==b?b.getParameter(b.MAX_VARYING_VECTORS):a.getParameter(a.MAX_VARYING_VECTORS):"Not Available"};
b.isWebAssemblySupported=function(){return"object"!==typeof WebAssembly?!1:!0};b.isIndexedDBSupported=function(){return new goog.Promise(function(a,b){window.indexedDB||a();var e=window.indexedDB.open("TestSupport",1);e.onerror=function(a){b(null)};e.onsuccess=function(b){window.indexedDB.deleteDatabase("TestSupport");a()}})};b.isCanvasAvailable=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))};b.parseDisplayInfo=function(){if(!this.isCanvasAvailable())return{renderer:"",
vendor:""};var a=document.createElement("canvas").getContext("experimental-webgl");if(!a)return{renderer:"",vendor:""};var b={renderer:"",vendor:""},e=a.getExtension("WEBGL_debug_renderer_info");null!=e&&(b.renderer=a.getParameter(e.UNMASKED_RENDERER_WEBGL),b.vendor=a.getParameter(e.UNMASKED_VENDOR_WEBGL));return b};b.parseMacOSXVersion=function(){var a={major:void 0,minor:void 0},b=navigator.userAgent;goog.string.isEmptySafe(b)||(b=b.match(/Mac OS X (\d+)_(\d+)/i))&&0<b.length&&(a.major=parseInt(b[1],
10),a.minor=parseInt(b[2],10));return a}});
define("CrashReporter","require exports Bindings/index DebugEnvironmentSettings DialogPrompts EnvironmentSettings FileUtils Log Login ProgramMode".split(" "),function(a,b,c,d,e,f,g,h,m,y){function K(){return!W&&!f.IsLocal()&&!f.IsSandbox()}function L(){var a=d.parseDisplayInfo(),b=h.getContents();goog.isDefAndNotNull(b)&&16380<b.length&&(b=b.slice(-16380));var e=la,f="";try{var y=c.GetUndoLogFilePath(),f=g.ReadTextFile(y)}catch(m){console.log("Unable to record undo log.")}return{crashDialog:e,log:b,
undoLog:f,display:a.vendor+" / "+a.renderer}}function R(){window.setTimeout(function(){if(!ga){if(!goog.isDefAndNotNull(y.currentProgramMode)||y.currentProgramMode.isEdu())Raven.setUserContext(),e.ShowInfoDialog($t("Error"),$t("Sorry, it looks like we're having some internal issues.")+"\n"+$t("Our team has been notified."));else{var a=m.getCachedInfo();goog.isDefAndNotNull(a)&&a.loggedIn&&Raven.setUserContext({name:a.firstname+" "+a.lastname,email:a.email});Raven.showReportDialog(null);Raven.setUserContext()}ga=
W=!0}},0)}Object.defineProperty(b,"__esModule",{value:!0});var W=!1,la=!0,ga=!1;b.RecordBreadcrumb=function(a){Raven.captureBreadcrumb(a)};b.ReportGraphicsError=function(){if(K()){var a="Graphics Error";goog.string.contains(navigator.userAgent,"SketchUp")&&(a+=" - SU Client");la=!1;Raven.captureMessage(a)}};b.ReportBrowserCheckError=function(a){if(K()){var b="Browser check error";goog.string.contains(navigator.userAgent,"SketchUp")&&(b+=" - SU Client");la=!1;Raven.captureMessage(b+(" - "+a))}};b.ReportUncaughtPromiseRejection=
function(a){if(K())if(la=!1,"string"===typeof a){var b="Uncaught promise rejection";goog.string.isEmptyOrWhitespaceSafe(a)||(b+=" - "+a);Raven.captureMessage(b)}else Raven.captureException(a)};b.ReportMetadataOutOfSyncError=function(){K()&&(la=!1,Raven.captureMessage("Metadata out of sync"))};b.ReportEntitlementActivationError=function(a,b){K()&&(la=!1,Raven.captureMessage("Error getting activations.",{extra:{response:a,error:b}}))};b.ReportStorageProviderInitError=function(a){K()&&(la=!1,Raven.captureMessage("Storage provider init error",
{extra:{error:a}}))};b.ReportNotLoggedInError=function(){K()&&(la=!1,Raven.captureMessage("Not logged in"))};goog.isDefAndNotNull(window.VERSION)&&Raven.setRelease(window.VERSION);Raven.setDataCallback(function(a){la&&K()&&R();Object.assign(a.extra,L());la=!0;return a});Raven.setShouldSendCallback(K)});
define("FilePickerUtils","require exports FileUtils FolderMetadata Login ModelStorageProvider".split(" "),function(a,b,c,d,e,f){function g(a){for(var b=0;b<a.length;++b){var c=a[b];R[c.id]=c}}function h(a,b,c,d,e){c=a.getFolderDetails(b,c);c=c.then(function(c){g([c]);c.parentFolderId?h(a,b,c.parentFolderId,d,e):d();return null});c.thenCatch(function(a){e(a)})}function m(a){a={name:a.name,isFolder:a.type===f.FolderItemType.Folder,thumbnailURL:a.thumbnailURL,isLocal:!1,versionState:f.FileVersionState.UpToDate,
isActionInProgress:!1,remoteId:a.id,remoteVersionId:a.versionId,sizeInKB:a.size/1024,createdOn:(new Date(a.createdOn)).toLocaleString(),modifiedOn:(new Date(a.modifiedOn)).toLocaleString(),createdByEmail:a.createdByEmail,createdByFirstName:a.createdByFirstName,createdByLastName:a.createdByLastName,modifiedByEmail:a.modifiedByEmail,modifiedByFirstName:a.modifiedByFirstName,modifiedByLastName:a.modifiedByLastName};a.isFolder&&!goog.isDef(a.thumbnailURL)&&(a.thumbnailURL=L);return a}function y(a,b){var c=
f.FileVersionState.UpToDate;goog.isDefAndNotNull(b)&&(a.localVersionId!==a.remoteVersionId?c=b.isModified?f.FileVersionState.HasConflict:f.FileVersionState.ModifiedAtRemoteStorage:b.isModified&&(c=f.FileVersionState.ModifiedLocally));return c}Object.defineProperty(b,"__esModule",{value:!0});var K="/base",L="/";b.setBaseDir=function(a){K=a};b.setDefaultFolderImageURL=function(a){L=a};var R={},W={};b.clearMaps=function(){R={};W={}};b.getProjectCount=function(){return goog.object.getKeys(W).length};
b.addRemoteProjects=function(a){for(var b=0;b<a.length;b++){var c=a[b];W[c.rootFolderId]=c}};b.getFolderAncestorList=function(a){var b=[];do{var c=R[a];if(!c)break;b.unshift({name:c.name,id:c.id});a=c.parentFolderId}while(a);c=W[a];goog.isDefAndNotNull(c)&&b.unshift({name:c.name,id:a});return b};b.addAncestorFoldersToCache=function(a,b,c){return new goog.Promise(function(d,e){h(a,b,c,d,e)})};b.makeFolderPathFromAncestorList=function(a){for(var b="",c=0;c<a.length;++c)b=goog.string.path.join(b,a[c].name);
return b};b.lookupFolderItemForView=function(a){return R[a.remoteId]};b.setFolderItemFileSystemName=function(a,b){goog.asserts.assert(goog.isDefAndNotNull(a),"setFolderItemFileSystemName: folderItem undefined");goog.asserts.assert(goog.isDefAndNotNull(b),"setFolderItemFileSystemName: fileView undefined");goog.asserts.assert(a.id==b.remoteId,"setFolderItemFileSystemName: unrelated inputs");b.isLocal?(a.fileSystemName=goog.string.path.baseName(b.localPath),goog.asserts.assert(!goog.string.isEmptyOrWhitespaceSafe(a.fileSystemName),
"setFolderItemFileSystemName: found local file without a path")):goog.isDefAndNotNull(a.fileSystemName)||(b="",goog.isDefAndNotNull(a.mimeType)&&(b=c.getExtensionFromMimeType(a.mimeType)),goog.string.isEmptyOrWhitespaceSafe(b)&&(b=goog.string.path.extension(a.name)),a.fileSystemName=c.generateFileSystemName(b))};b.createRemoteFolder=function(a,b,c,d){return a.createFolder(b,c,d).then(function(a){g([a]);return m(a)})};b.convertFolderItemToFileItemView=m;b.getRemoteFileViewsForFolder=function(a,b,c,
d){var e=[];a=b.getContents(c,d).then(function(a){g(a);for(var b=0;b<a.length;++b){var c=m(a[b]);e.push(c)}return e});return a=a.thenCatch(function(){console.log("Could not get remote contents.")})};b.combineFileViewsForFolder=function(a,b,c){b=b.filter(function(b){var e=goog.array.findIndex(a,function(a){if(a.isFolder)goog.asserts.assert(!1,"Found a local folder.");else{if(goog.isDefAndNotNull(a.remoteId))return a.remoteId===b.remoteId;if(c)return goog.string.caseInsensitiveEquals(a.name,b.name)}return!1});
if(-1!==e){var e=a[e],f=d.FolderMetadata.lookupRemoteModelMetadata(e.localPath);e.remoteId=b.remoteId;e.remoteVersionId=b.remoteVersionId;e.localVersionId=goog.isDefAndNotNull(f)?f.versionId:"";e.versionState=y(e,f);e.createdByFirstName=b.createdByFirstName;e.createdByLastName=b.createdByLastName;e.createdByEmail=b.createdByEmail;e.modifiedByFirstName=b.modifiedByFirstName;e.modifiedByLastName=b.modifiedByLastName;e.modifiedByEmail=b.modifiedByEmail;e.createdOn=b.createdOn;e.modifiedOn=b.modifiedOn;
return!1}return!0});a.forEach(function(a){goog.string.isEmptySafe(a.remoteId)&&(a.versionState=f.FileVersionState.ModifiedLocally)});b=b.concat(a);b.sort(function(a,b){return a.isFolder===b.isFolder?a.name.localeCompare(b.name):a.isFolder?-1:1});return b};b.determineVersionState=y;b.makeFileViewForLocalDirectory=function(a){return{name:goog.string.path.basename(a),isFolder:!0,thumbnailURL:L,isLocal:!0,versionState:f.FileVersionState.UpToDate,isActionInProgress:!1,localPath:a,remoteId:"",sizeInKB:0,
createdOn:"",modifiedOn:""}};b.getOfflineModelPath=function(a){var b;b=e.getCachedInfo();goog.asserts.assert(goog.isDefAndNotNull(b),"");b=goog.string.path.join(K,b.userId);return goog.string.path.join(b,a.toString())}});
define("ModelSyncAction",["require","exports","FileUtils","FolderMetadata","ModelSynchronizer"],function(a,b,c,d,e){function f(a){c.DeleteFile(a);var b=goog.string.path.dirname(a);a=goog.string.path.baseName(a);b=d.FolderMetadata.read(b);b.removeFile(a);b.write()}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.filePath_=b}a.prototype.run=function(){console.log("Deleting file: "+this.filePath_);f(this.filePath_)};return a}();b.DeleteLocalFileAction=a;a=function(){function a(b){this.filePath_=
b}a.prototype.run=function(){var b=c.getTimestamp(this.filePath_),b=new Date(b),b=Date.now()-b.getTime();Math.floor(b/a.MILLIS_IN_ONE_DAY)>=a.MIN_DAYS_TO_PURGE&&(console.log("Purging file: "+this.filePath_),f(this.filePath_))};a.MILLIS_IN_ONE_DAY=864E5;a.MIN_DAYS_TO_PURGE=8;return a}();b.PurgeLocalFileAction=a;a=function(){function a(b,c,d,e,f,g){this.filePath_=b;this.providerKey_=c;this.parentFolderId_=d;this.fileNameInUI_=e;this.fileId_=f;this.region_=g}a.prototype.run=function(){var a=this;console.log("Uploading file: "+
this.filePath_);e.ModelSynchronizer.getInstance().queueForUpload(this.filePath_,this.providerKey_,this.parentFolderId_,this.fileNameInUI_,this.fileId_,this.region_).thenCatch(function(){console.log("Upload failed: "+a.filePath_)})};return a}();b.UploadFileAction=a});
define("ModelSynchronizer","require exports CrashReporter EnvironmentSettings FileManager FilePickerUtils FileUtils FolderMetadata Log ModelStorageProvider ModelStorageProviderFactory ModelSyncAction ModelUtils SketchUpEvent Uuid XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.uploadXhrMap_={};this.progressEvent_=W.SketchUpEvents.Create();this.uploadFailedEvent_=W.SketchUpEvents.Create();this.syncInProgressEvent_=
W.SketchUpEvents.Create();this.metadataSyncCheckInProgress_=this.fullSyncInProgress_=!1;this.conflictingFilePaths_=[]}Object.defineProperty(a.prototype,"progressEvent",{get:function(){return this.progressEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"uploadFailedEvent",{get:function(){return this.uploadFailedEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"syncInProgressEvent",{get:function(){return this.syncInProgressEvent_},enumerable:!0,configurable:!0});
a.prototype.isConflictingFilePath=function(a){return-1<this.conflictingFilePaths_.indexOf(a)};a.prototype.startFullSync=function(){var a=this;m.info("startFullSync");if(this.fullSyncInProgress_||this.hasUploadInProgress())return null;this.conflictingFilePaths_=[];var b=f.getOfflineModelPath(K.defaultProviderKey);if(!h.FolderMetadata.hasMetadata(b))return null;this.syncInProgressEvent_.trigger(!0);this.fullSyncInProgress_=!0;var c=K.Providers[K.defaultProviderKey];return c.initialize().then(function(){return a.ensureMetadataInSync(b)}).then(function(){return a.doSync(b,
c)}).thenCatch(function(a){m.error("Sync error: "+a);console.log(a)}).thenAlways(function(){return g.syncFileSystem().then(function(){a.hasUploadInProgress()||a.syncInProgressEvent_.trigger(!1);a.fullSyncInProgress_=!1;m.info("startFullSync - end")})})};a.prototype.doSync=function(a,b){for(var c=this,d=h.FolderMetadata.getAll(a),f={},g=0;g<d.length;g++){var m=d[g];f[m.metadata.parentFolderId]={items:[],region:m.metadata.region,isDeleted:!1}}for(var g=[],K=Object.getOwnPropertyNames(f),m=0;m<K.length;m++){var W=
K[m];g.push(b.getContents(f[W].region,W))}return goog.Promise.allSettled(g).then(function(a){a.forEach(function(a,c){c=f[K[c]];a.fulfilled&&goog.isDef(a.value)?c.items=a.value:!a.fulfilled&&goog.isDef(a.reason)&&(a=b.getErrorTypeFromErrorString(a.reason),c.isDeleted=a===y.ErrorType.ItemWasDeleted)})}).then(function(){for(var b=function(b){var d=b.metadata;b=goog.string.path.join(a,b.fileName);var g=f[d.parentFolderId],h=goog.array.find(g.items,function(a){return a.id===d.fileId});g.isDeleted||!goog.isDefAndNotNull(h)?
d.isModified?g.isDeleted?R.isCurrentModelPath(b)||(console.log("Found orphaned file: "+b),e.FileManager.getInstance().moveFileToRecovered(b)):(new L.UploadFileAction(b,d.providerKey,d.parentFolderId,d.fileNameInUI,d.fileId,d.region)).run():R.isCurrentModelPath(b)||(new L.DeleteLocalFileAction(b)).run():h.versionId===d.versionId?d.isModified?(new L.UploadFileAction(b,d.providerKey,d.parentFolderId,d.fileNameInUI,d.fileId,d.region)).run():R.isCurrentModelPath(b)||(new L.PurgeLocalFileAction(b)).run():
d.isModified?c.conflictingFilePaths_.push(b):R.isCurrentModelPath(b)||(new L.DeleteLocalFileAction(b)).run()},g=0;g<d.length;g++)b(d[g])})};a.prototype.ensureMetadataInSync=function(a){var b=this;return e.FileManager.mountAndReadOfflineDirectory().then(function(){return b.doEnsureMetadataInSync(a)})};a.prototype.doEnsureMetadataInSync=function(a){var b=this;if(this.metadataSyncCheckInProgress_)return m.info("ensureMetadataInSync - already in progress"),goog.Promise.resolve();this.metadataSyncCheckInProgress_=
!0;m.info("ensureMetadataInSync");var e=this.checkMetadataInSync(a);if(null!==e)return d.IsTest()&&alert("Metadata out of sync!"),this.fixOutOfSyncData(a,e).then(function(){e=b.checkMetadataInSync(a);null!==e&&(d.IsTest()&&alert("Metadata fix did not work"),m.error("Metadata fix did not work"));c.ReportMetadataOutOfSyncError()}).thenAlways(function(){b.metadataSyncCheckInProgress_=!1});this.metadataSyncCheckInProgress_=!1;m.info("ensureMetadataInSync - all good");return goog.Promise.resolve()};a.prototype.checkMetadataInSync=
function(a){var b={metadata:h.FolderMetadata.getAll(a),dirItems:g.GetDirectoryContents(a,!1)};b.dirItems=b.dirItems.filter(function(a){return a.isDirectory||!g.hasSkpModelExtension(a.name)&&!g.isImageFile(a.name)||goog.array.removeIf(b.metadata,function(b){return b.fileName===a.name})?!1:!0});return 0<b.dirItems.length||0<b.metadata.length?(m.error("Metadata out of sync."),0<b.metadata.length&&m.error("Out-of-sync metadata: "+b.metadata.map(function(a){return a.fileName}).join("\n")),0<b.dirItems.length&&
m.error("Out-of-sync files: "+b.dirItems.map(function(a){return a.name}).join("\n")),b):null};a.prototype.fixOutOfSyncData=function(a,b){if(0<b.metadata.length){for(var c=h.FolderMetadata.read(a),d=0,f=b.metadata;d<f.length;d++){var y=f[d];c.removeFile(y.fileName)}c.write()}if(0<b.dirItems.length){c=e.FileManager.getInstance();d=0;for(b=b.dirItems;d<b.length;d++)y=b[d],g.DeleteFile(y.fullPath);c.deleteRecoveredDir(a)}return g.syncFileSystem()};a.prototype.queueForUpload=function(a,b,c,d,f,h){var m=
this;this.fullSyncInProgress_||this.hasUploadInProgress()||this.syncInProgressEvent_.trigger(!0);var L=this.uploadXhrMap_[a];goog.isDef(L)&&(this.removeXHRPromise(a),L.cancel());var W=K.Providers[b],R=g.ReadFileToUint8Array(a),L=W.uploadFile(h,d,f,c,R,function(b){m.onUploadProgress(a,b,R.byteLength)});this.uploadXhrMap_[a]=L;return L.promise.then(function(b){return e.FileManager.getInstance().updateMetadataAfterModelUpload(a,b.fileId,b.versionId,b.projectId,b.parentFolderId)}).thenCatch(function(b){m.uploadFailedEvent_.trigger(a);
if(b!==ga.Reason[ga.Reason.XHR_ABORTED])throw console.error(b),W.getErrorTypeFromErrorString(b,y.ErrorContext.FileUpload);}).thenAlways(function(){m.removeXHRPromise(a)})};a.prototype.onUploadProgress=function(a,b,c){b=ga.ComputeProgressPercentage(b,c);this.progressEvent_.trigger({filePath:a,progressPercentage:b})};a.prototype.removeXHRPromise=function(a){delete this.uploadXhrMap_[a];this.fullSyncInProgress_||this.hasUploadInProgress()||this.syncInProgressEvent_.trigger(!1)};a.prototype.hasUploadInProgress=
function(){return 0<Object.keys(this.uploadXhrMap_).length};a.prototype.isUploadInProgressForFile=function(a){return-1<Object.keys(this.uploadXhrMap_).indexOf(a)};a.getInstance=function(){goog.isDefAndNotNull(a.staticInstance_)||(a.staticInstance_=new a);return a.staticInstance_};return a}();b.ModelSynchronizer=a;MakeOutOfSyncData=function(a,b,c){m.info("MakeOutOfSyncData");if(b){b=h.FolderMetadata.read(a);var d="fake_"+la.create()+".skp";b.addFile(d,{fileNameInUI:"",fileId:"",projectId:"",parentFolderId:"",
versionId:"",providerKey:0,region:"",isModified:!1});b.write()}c&&(a=goog.string.path.join(a,"fake_"+la.create()+".skp"),g.WriteTextFile(a,""))}});
define("FileManager","require exports Bindings/index FileUtils FolderMetadata GlobalConstants Log ModelStorageProvider ModelStorageProviderFactory ModelSynchronizer".split(" "),function(a,b,c,d,e,f,g,h,m,y){Object.defineProperty(b,"__esModule",{value:!0});var K;(function(a){a[a.NoSkpExtension=0]="NoSkpExtension"})(K=b.Reason||(b.Reason={}));a=function(){function a(){a.AUTOSAVE_PREFIX=c.GetAutoSavePrefix()}a.prototype.deleteFileOrFolder=function(a,b,c,f){var h=this;g.info("deleteFileOrFolder - "+a.name);
var y=goog.Promise.resolve(!0),K;if(!goog.string.isEmptySafe(a.remoteId))var L=m.Providers[b],y=a.isFolder?this.getSubFolderIds(L,c,a.remoteId).then(function(b){K=b.concat(a.remoteId);return L.deleteFolder(c,a.remoteId)}):L.deleteFile(c,a.remoteId);return y.then(function(b){return b?(a.isFolder?(b=K.reduce(function(a,b){b=e.FolderMetadata.lookupRemoteModelMetadataByParentId(f,b);return a.concat(b)},[]),0<b.length&&(b=b.map(function(a){return a.fileName}),h.deleteFilesAndMetadata(f,b))):a.isLocal&&
(b=goog.string.path.baseName(a.localPath),h.deleteFilesAndMetadata(f,[b])),d.syncFileSystem(!1).then(function(){g.info("deleteFileOrFolder - end");return!0})):b})};a.prototype.getSubFolderIds=function(a,b,c){var d=this;return a.getContents(b,c).then(function(c){for(var e=[],f=[],g=0;g<c.length;g++){var y=c[g];y.type==h.FolderItemType.Folder&&(e.push(y.id),f.push(d.getSubFolderIds(a,b,y.id)))}return goog.Promise.all(f).then(function(a){for(var b=0;b<a.length;b++)e=e.concat(a[b]);return e})})};a.prototype.deleteFilesAndMetadata=
function(a,b){var c=e.FolderMetadata.read(a);b.forEach(function(b){var e=goog.string.path.join(a,b);d.DeleteFile(e)&&goog.isDef(c.lookupFile(b))&&c.removeFile(b)});c.write()};a.prototype.getLocalFileViewsInFolder=function(b,c){var d=this;return a.mountAndReadOfflineDirectory().then(function(){return e.FolderMetadata.lookupRemoteModelMetadataByParentId(b,c).map(function(a){a=goog.string.path.join(b,a.fileName);return d.doReadFileViewFromPath(a)})})};a.prototype.readFileViewFromPath=function(b){var c=
this;return a.mountAndReadOfflineDirectory().then(function(){return d.Exists(b)?c.doReadFileViewFromPath(b):void 0})};a.prototype.doReadFileViewFromPath=function(a){var b=e.FolderMetadata.lookupRemoteModelMetadata(a);goog.asserts.assert(goog.isDefAndNotNull(b),"doReadFileViewFromPath: found file without metadata");var g,y;d.hasSkpModelExtension(b.fileNameInUI)?(y=c.GetModelMetadataFromSkpFile(a),g=y.getThumbnail(),y.delete(),y=f.THUMBNAIL_MIME_TYPE):d.isImageFile(b.fileNameInUI)&&(y=d.getImageMimeType(b.fileNameInUI),
g=d.ReadFileToUint8Array(a),g=d.convertUint8ArrayToBase64(g));var m;goog.isDefAndNotNull(g)&&(m="data:"+y+";base64,"+g);g=d.getFileStatistics(a);return{name:b.fileNameInUI,isFolder:!1,thumbnailURL:m,isLocal:!0,versionState:h.FileVersionState.UpToDate,isActionInProgress:!1,localPath:a,remoteId:goog.isDefAndNotNull(b)?b.fileId:"",sizeInKB:g.file_size/1024,createdOn:g.creation_time,modifiedOn:g.modification_time}};a.prototype.readInFile=function(a){var b=new FileReader,c=new goog.Promise(function(a,
c){b.onload=function(c){a(b.result)}});b.readAsArrayBuffer(a);return c};a.prototype.importNewLocalFile=function(b,c,f,y,m){var Mg=this;if(!d.hasSkpModelExtension(b.name))return goog.Promise.reject(K.NoSkpExtension);g.info("importNewLocalFile - "+b.name);return a.mountAndReadOfflineDirectory().then(function(){return Mg.readInFile(b)}).then(function(a){for(var K,L=0,Bh=e.FolderMetadata.lookupRemoteModelMetadataByParentId(c,f);L<Bh.length;L++){var Eh=Bh[L];if(goog.string.caseInsensitiveEquals(Eh.metadata.fileNameInUI,
b.name)){K=Eh.fileName;break}}goog.isDef(K)||(K=d.generateFileSystemName(d.EXTENSION_SKP));var yh=goog.string.path.join(c,K);d.MkdirRecursive(c);d.SaveFileFromBuffer(a,yh);Mg.saveMetadataForNewLocalModel(yh,b.name,y,f,m);return d.syncFileSystem().then(function(){var a=Mg.doReadFileViewFromPath(yh);a.name=b.name;a.versionState=h.FileVersionState.ModifiedLocally;g.info("importNewLocalFile - end");return a})})};a.prototype.saveDownloadedRemoteFile=function(b,c,f,h){g.info("saveDownloadedRemoteFile - fileName: "+
f);var m=goog.string.path.join(c,f);return a.mountAndReadOfflineDirectory().then(function(){d.MkdirRecursive(c);var a=e.FolderMetadata.read(c);a.addFile(f,h);a.write();d.SaveFileFromBuffer(b,m);return d.syncFileSystem()}).then(function(){return y.ModelSynchronizer.getInstance().ensureMetadataInSync(c)}).then(function(){g.info("saveDownloadedRemoteFile - end");return m})};a.prototype.saveMetadataForNewLocalModel=function(a,b,c,f,h){var y=goog.string.path.dirname(a);a=goog.string.path.baseName(a);g.info("saveMetadataForNewLocalModel - fileName: "+
a);y=e.FolderMetadata.read(y);b={fileNameInUI:d.addSkpModelExtensionIfMissing(b),fileId:void 0,projectId:void 0,parentFolderId:f,versionId:void 0,providerKey:c,region:h,isModified:!0};y.addFile(a,b);y.write();g.info("saveMetadataForNewLocalModel - end")};a.prototype.uploadModel=function(a){var b=goog.string.path.dirname(a),c=goog.string.path.baseName(a);g.info("uploadModel - fileName: "+c);b=e.FolderMetadata.read(b).lookupFile(c);if(goog.isDefAndNotNull(b))return y.ModelSynchronizer.getInstance().queueForUpload(a,
b.providerKey,b.parentFolderId,b.fileNameInUI,b.fileId,b.region).then(function(){g.info("uploadModel - end")}).thenCatch(function(a){g.error("uploadModel - error: "+a);throw a;});goog.asserts.assert(!1,"uploadModel: No metadata found for "+a);return goog.Promise.reject()};a.prototype.updateMetadataAfterModelUpload=function(a,b,c,f,h){var m=goog.string.path.dirname(a),K=goog.string.path.baseName(a);g.info("updateMetadataAfterModelUpload - fileName: "+K);var L=e.FolderMetadata.read(m),Ah=L.lookupFile(K);
if(goog.isDefAndNotNull(Ah))return Ah.isModified=!1,Ah.fileId=b,Ah.versionId=c,Ah.projectId=f,Ah.parentFolderId=h,L.addFile(K,Ah),L.write(),d.syncFileSystem().then(function(){return y.ModelSynchronizer.getInstance().ensureMetadataInSync(m)}).then(function(){g.info("updateMetadataAfterModelUpload - end")});goog.asserts.assert(!1,"updateMetadataAfterModelUpload: No metadata found for "+a);return goog.Promise.resolve()};a.prototype.setModelMetadataModified=function(a){var b=goog.string.path.dirname(a);
a=goog.string.path.baseName(a);b=e.FolderMetadata.read(b);a=b.lookupFile(a);goog.isDefAndNotNull(a)&&(a.isModified=!0,b.write())};a.prototype.hasVersionConflict=function(a){var b=e.FolderMetadata.lookupRemoteModelMetadata(a);if(goog.isDefAndNotNull(b))return goog.isDef(b.fileId)&&b.isModified?m.Providers[b.providerKey].getLatestVersionId(b.region,b.fileId).then(function(a){return a!==b.versionId},function(){return!1}):goog.Promise.resolve(!1);goog.asserts.assert(!1,"hasVersionConflict: No metadata found for "+
a);return goog.Promise.resolve(!1)};a.mountAndReadOfflineDirectory=function(){d.Exists(a.SAVE_DIR)||(FS.mkdir(a.SAVE_DIR),FS.mount(IDBFS,{},a.SAVE_DIR),this.mountPromise_=d.syncFileSystem(!0).then(function(){d.Exists(a.OFFLINE_DIR)||FS.mkdir(a.OFFLINE_DIR);g.info("Mounted at: "+a.OFFLINE_DIR)}));return this.mountPromise_};a.FindAutoSaveFileForModel=function(b){var c=goog.string.path.dirname(b);b=goog.string.path.baseName(b);c=goog.string.path.join(c,a.AUTOSAVE_SUBDIR,a.AUTOSAVE_PREFIX+b);c=d.addSkpModelExtensionIfMissing(c);
return d.Exists(c)?c:null};a.FindUntitledAutoSaveModel=function(){var b=d.GetDirectoryContents(a.DEFAULT_AUTOSAVE_DIR);return 0<b.length&&(b=d.GetNewestFile(b),0<b.name.length)?goog.string.path.join(a.DEFAULT_AUTOSAVE_DIR,b.name):""};a.prototype.moveFileToRecovered=function(b){var c=goog.string.path.dirname(b),f=goog.string.path.baseName(b),h=goog.string.path.join(c,a.RECOVERED_SUBDIR),y=goog.string.path.join(h,f);d.Exists(b)&&(d.Exists(h)||FS.mkdir(h),d.rename(b,y),g.info("Moved to recovered: "+
f),b=e.FolderMetadata.read(c),c=b.lookupFile(f),goog.isDefAndNotNull(c)&&(b.removeFile(f),b.write(),b=e.FolderMetadata.read(h),b.addFile(f,c),b.write()))};a.prototype.deleteRecoveredDir=function(b){b=goog.string.path.join(b,a.RECOVERED_SUBDIR);d.DeleteDirectory(b)};a.prototype.logMetadata=function(a){e.FolderMetadata.hasMetadata(a)?(a=e.FolderMetadata.read(a),console.log(a)):console.log("No metadata")};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};
a.SAVE_DIR="/files";a.OFFLINE_DIR=goog.string.path.join(a.SAVE_DIR,"offline");a.AUTOSAVE_SUBDIR=".autosave";a.DEFAULT_AUTOSAVE_DIR=goog.string.path.join(a.SAVE_DIR,a.AUTOSAVE_SUBDIR);a.RECOVERED_SUBDIR=".recovered";a.mountPromise_=null;return a}();b.FileManager=a});
define("Delay",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){return new goog.Promise(function(e,f){window.setTimeout(function(){e(a())},b||0)})};b.sleep=function(a){return new Promise(function(b){return setTimeout(b,a)})}});
define("DownloadBlob",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){if(goog.userAgent.EDGE)window.navigator.msSaveOrOpenBlob(a,b);else{a=URL.createObjectURL(a);var e=document.createElement("a");e.href=a;e.setAttribute("download",b);e.style.visibility="hidden";document.body.appendChild(e);e.click();e.remove()}}});
define("Uri",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.getEmailDomain=function(a){return goog.format.EmailAddress.isValidAddress(a)?a.split("@")[1]:""};b.getTopLevelDomain=function(a){return goog.format.EmailAddress.isValidDomainPartSpec(a)?a.split(".").reverse()[0]:""};b.getSecondLevelDomain=function(a){return goog.format.EmailAddress.isValidDomainPartSpec(a)?a.split(".").reverse().slice(0,2).reverse().join("."):""};b.getReverseDomain=function(a){return goog.format.EmailAddress.isValidDomainPartSpec(a)?
a.split(".").reverse().join("."):""}});
define("GoogleAnalytics",["require","exports","Uri"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});b.fireToolChangeEvent=function(a){dataLayer.push({event:"tool-change",tool:a})};b.fireHomeBarButtonEvent=function(a){dataLayer.push({event:"home-bar-clicked",buttonName:a})};b.fireOnboardingCompletedEvent=function(){dataLayer.push({event:"onboarding-completed"})};b.fire3DWSearchEvent=function(a){dataLayer.push({event:"3dw-search",searchString:a})};b.fireEduAuthorizationEvent=function(a){var b=
c.getEmailDomain(a.email);dataLayer.push({event:"edu-authorization",domain:b,reverseDomain:c.getReverseDomain(b),topLevelDomain:c.getTopLevelDomain(b),secondLevelDomain:c.getSecondLevelDomain(b),success:a.success,message:a.reason||""})}});
define("Download","require exports Bindings/index BusyScreen Delay DialogPrompts DownloadBlob FileUtils GoogleAnalytics ModelUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y){function K(a){var b=c.GetTempFilename(h.TEMP_DIR,"tmp");goog.isDefAndNotNull(a)?c.SaveModelWithVersion(b,a):c.SaveModel(b);return b}Object.defineProperty(b,"__esModule",{value:!0});b.downloadSkp=function(a){m.fireHomeBarButtonEvent("Download");var b=new d.default;e.default(function(){try{var c=K(a),d=h.addSkpModelExtensionIfMissing(y.getPresentableModelTitle()),
e=h.ReadFileToBlob(c);g.default(e,d);h.DeleteFile(c)}catch(m){console.error(m),f.ShowInfoDialog($t("Error"),$t("An error occurred while downloading the model."))}b.restore()},250)};b.downloadStl=function(){m.fireHomeBarButtonEvent("Export STL");var a=new d.default;e.default(function(){try{var b=K(),d=c.GetTempFilename(h.TEMP_DIR,"tmp"),d=d+".stl";if(c.ExportSTL(b,d)){var e=y.getPresentableModelTitle()+".stl",m=h.ReadFileToBlob(d);g.default(m,e)}h.DeleteFile(b);h.DeleteFile(d)}catch(xh){console.error(xh),
f.ShowInfoDialog($t("Error"),$t("An error occurred while creating the STL file."))}a.restore()},250)}});define("EntitlementsInterfaces",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=b.ActivationErrorCode||(b.ActivationErrorCode={});a.NoError="NO_ERROR";a.LoginRequired="LOG_IN_REQUIRED";a.Expired="EXPIRED";a.ErrorRetrievingEntitlement="ERROR_RETRIEVING_ENTITLEMENT";a.MalformedRequest="MALFORMED_REQUEST";a.UnknownError="UNKNOWN_ERROR"});
define("Cursor",["require","exports","Bindings/index"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=!1,e="",f=[];b.override=function(a){d||(d=!0,e=document.body.style.cursor,document.body.style.cursor=a)};b.restore=function(){d&&(document.body.style.cursor=e);e=void 0;d=!1};b.setCanvasCursor=function(a){document.body.style.cursor=0!==a?f[a].value:"default"};b.createCursor=function(a,b,c,d){var e;e=[c,d];e=[goog.userAgent.EDGE_OR_IE?"url("+("/static/images/web/"+b+".cur")+
")":"url("+("/static/images/web/"+b+".png")+") "+e.join(" "),"auto"].join(", ");f[a]={hotPoint:[c,d],baseName:b,value:e};return a};b.getAllCursorPaths=function(){for(var a=c.GetCursorImages(),b=[],d=goog.userAgent.EDGE_OR_IE?".cur":".png",e=0;e<a.size();++e){var f=a.get(e);b.push("/static/images/web/"+f+d)}a.delete();return b}});
define("BackgroundMask",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(b){this.clickHandler_=function(a){};"number"===typeof b?this.zIndex_=b:(b=b.style.zIndex,goog.asserts.assert(goog.isDefAndNotNull(b)),this.zIndex_=+b-1,goog.asserts.assert(!isNaN(this.zIndex_)))}a.prototype.show=function(){this.render();this.mask_.className="js-background-mask enabled"};a.prototype.hide=function(){goog.isDefAndNotNull(this.mask_)&&(goog.dom.removeNode(this.mask_),
this.mask_=null)};a.prototype.setClickHandler=function(a){goog.isDefAndNotNull(this.mask_)&&goog.isDefAndNotNull(this.clickHandler_)&&this.mask_.removeEventListener("click",this.clickHandler_);this.clickHandler_=a;this.render()};a.prototype.render=function(){if(!goog.isDefAndNotNull(this.mask_)){var a=document.createElement("div");a.className="js-background-mask";a=document.body.appendChild(a);a.style.zIndex=this.zIndex_.toString();this.mask_=a}goog.isDefAndNotNull(this.clickHandler_)&&this.mask_.addEventListener("click",
this.clickHandler_)};return a}();b.createUnderElement=function(a){return new c(a)};b.createAtZIndex=function(a){return new c(a)}});
define("ToolGroup",["require","exports","knockout","knockout.mapping","Bindings/index"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a.makeToolData=function(b,c,d,e){void 0===e&&(e=!0);b=new a.Command(b,c,e);return this.makeToolDataWithCommand(b,d)};a.makeToolDataWithCommand=function(a,b,c){void 0===c&&(c=!1);return{command:a,imageSrc:b,toolTip:a.visibleName,isGroupLeader:c,containerClass:"tool-group-active-tool",flyoutClass:"tool-flyout",left:void 0,top:void 0}};
var b=function(){function a(b,c,d,e){void 0===d&&(d=!0);void 0===e&&(e=!1);this.id_=b;this.visibleName_=c;this.isEnabled=d;this.alwaysClickable=e}Object.defineProperty(a.prototype,"visibleName",{get:function(){return this.visibleName_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.id_},enumerable:!0,configurable:!0});a.prototype.run=function(){e.RunCommand(this.id_)};return a}();a.Command=b;b=function(){function a(b,d,e){void 0===e&&(e=!1);var f=
this;this.container_=d;this.numberOfTools_=b.length;this.isExpanded_=!1;d=goog.soy.renderAsFragment(SketchUpTemplates.toolGroup,{hasSeparator:e});this.container_.appendChild(d);e=[];for(var g=-1,h=0;h<this.numberOfTools_;h++){var la=b[h];la.isGroupLeader&&-1===g?g=h:la.isGroupLeader=!1;e.push(this.convertToolDataToObservables(b[h]))}g=-1===g?0:g;e[g].isGroupLeader(!0);this.viewModel_={activeTool:c.observable(e[g]),hasCurrentlySelectedTool:c.observable(!1),isHidden:c.observable(!1),numberOfTools:this.numberOfTools_,
onClicked:this.onClicked.bind(this),onFlyoutClicked:this.onFlyoutClicked.bind(this),tools:e,toolClass:c.pureComputed(function(){var a=f.viewModel_.activeTool().containerClass();f.viewModel_.hasCurrentlySelectedTool()?a+=" tool-group-active-tool-selected":f.viewModel_.activeTool().isEnabled()||(a+=" tool-disabled");return a})};c.applyBindings(this.viewModel_,d)}a.prototype.onClicked=function(a,b){b.stopPropagation();a.activeTool().command.run();this.isExpanded_?this.collapse():this.expand()};a.prototype.onFlyoutClicked=
function(a,b){b.stopPropagation();a.command.run();this.collapse()};a.prototype.activeToolChanged=function(a){a=this.getTool(a);goog.isDefAndNotNull(a)?this.activateTool(a):this.deactivateTool()};a.prototype.hasTool=function(a){return goog.isDefAndNotNull(this.getTool(a))};a.prototype.setEnabled=function(a,b){a=this.getTool(a);goog.isDefAndNotNull(a)&&(a.command.isEnabled=b,a.isEnabled(b))};a.prototype.setHidden=function(a){this.viewModel_.isHidden(a)};a.prototype.getTool=function(a){for(var b=0,c=
this.viewModel_.tools;b<c.length;b++){var d=c[b];if(d.command.id===a)return d}return null};a.prototype.activateTool=function(a){this.viewModel_.activeTool(a);this.viewModel_.hasCurrentlySelectedTool(!0)};a.prototype.deactivateTool=function(){this.viewModel_.hasCurrentlySelectedTool(!1);this.collapse()};a.prototype.expand=function(){this.isExpanded_||1===this.numberOfTools_||(this.expandTools(),this.isExpanded_=1<this.numberOfTools_)};a.prototype.expandTools=function(){var a=40*this.viewModel_.tools.length/
2,b=function(b){return 2*Math.sqrt(Math.pow(2*a,2)-Math.pow(40*b-a+20,2))},c=-b(0)+50;this.viewModel_.tools.forEach(function(d,e){d.flyoutClass(d.flyoutClass()+" expanded-base");d.isEnabled()||d.flyoutClass(d.flyoutClass()+" tool-disabled");d.alwaysClickable&&d.flyoutClass(d.flyoutClass()+" clickable");d.left(b(e)+c+"px");d.top(40*e-a+20+"px")})};a.prototype.collapse=function(){if(this.isExpanded_&&1!==this.numberOfTools_){for(var a=0,b=this.viewModel_.tools;a<b.length;a++){var c=b[a],d=c.flyoutClass().replace(/\sexpanded[a-z\-\d]+/g,
"");c.flyoutClass(d);c.top(0);c.left(0)}this.isExpanded_=!1}};a.prototype.convertToolDataToObservables=function(a){a=d.fromJS(a,{copy:["command"]});a.isEnabled=c.observable(a.command.isEnabled);a.alwaysClickable=c.observable(a.command.alwaysClickable);return a};return a}();a.Tool=b})(b.Tools||(b.Tools={}))});
define("UserTracking","require exports Entitlements EnvironmentSettings Login XhrUtils".split(" "),function(a,b,c,d,e,f){function g(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){m("freetoshop.launch");return[2]})})}function h(a){return __awaiter(this,void 0,void 0,function(){var b,c,e,g;return __generator(this,function(h){switch(h.label){case 0:if(!goog.isDefAndNotNull(y))return[2];b="/api/munchkin?email="+btoa(a.email);c=d.getStackQueryString();goog.string.isEmptyOrWhitespaceSafe(c)||
(b+="&"+c);h.label=1;case 1:return h.trys.push([1,3,,4]),[4,f.doGet(b).promise];case 2:return e=h.sent(),Munchkin.munchkinFunction("associateLead",{Email:a.email,FirstName:a.firstname,LastName:a.lastname},e),[3,4];case 3:return g=h.sent(),console.error(g),[3,4];case 4:return[2]}})})}function m(a){return __awaiter(this,void 0,void 0,function(){var b,d;return __generator(this,function(e){switch(e.label){case 0:if(!goog.isDefAndNotNull(y))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,
y];case 2:return e.sent(),b=c.getInfo().sku,Munchkin.munchkinFunction("visitWebPage",{url:"/"+a,params:"sku="+b}),[3,4];case 3:return d=e.sent(),console.error(d),[3,4];case 4:return[2]}})})}Object.defineProperty(b,"__esModule",{value:!0});var y;b.initialize=function(){goog.isDefAndNotNull(y)||(y=(new Promise(function(a,b){var c=document.createElement("script");c.type="text/javascript";c.async=!0;c.onload=function(){try{Munchkin.init(d.Get().munchkinId,{asyncOnly:!0}),a()}catch(c){b()}};c.onerror=
function(){b()};c.src="//munchkin.marketo.net/munchkin.js";document.head.appendChild(c)})).then(function(){return e.getInfo()}).then(function(a){goog.isDefAndNotNull(a)&&h(a);g()}).catch(function(){y=void 0}));return y};(function(a){a.EXPORT="export";a.INSERT="insert";a.MATERIAL_EDIT="material";a.OUTLINER="outliner";a.REMOVE_WATERMARK="watermark";a.RENEW="renew";a.SOLID_TOOLS="solid";a.STYLE_EDIT="style";a.UPGRADE_ACCOUNT="account";a.UPGRADE_CANVAS="upgrade"})(b.UpsellTriggers||(b.UpsellTriggers=
{}));b.recordUpgradeInteraction=function(a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){switch(b.label){case 0:return[4,m("freetoshop.upsell."+a)];case 1:return b.sent(),[2]}})})};b.recordOnboardingCompletion=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){m("freetoshop.completestour");return[2]})})};b.recordApplicationLaunch=g});
define("UpgradeDialog",["require","exports","GenericDialog","Entitlements","PromiseUtils"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.showUpgradeDialog=function(a,b,h){var m=new c.GenericDialog,y=goog.soy.renderAsFragment(SketchUpTemplates.upgradeDialog,{});m.show(y,"",{title:a,message:b,onClose:function(){m.hide()},onUpgrade:function(){m.hide();d.upgrade(h)}},c.ButtonSetType.None);return e.toEs6Promise(m.dialogClosed)}});
define("UpgradeCommand",["require","exports","ToolGroup","UpgradeDialog"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d,f,y,K,L){void 0===f&&(f=!0);c=a.call(this,c,d,f,!0)||this;c.trigger_=y;c.upgradeTitle_=K;c.upgradeMessage_=L;return c}__extends(b,a);b.prototype.run=function(){d.showUpgradeDialog(this.upgradeTitle_,this.upgradeMessage_,this.trigger_)};return b}(c.Tools.Command);b.UpgradeCommand=a});
define("ModelingToolbarManager","require exports Add3DTextDialog ApplicationFeatures Bindings/index EntitlementsFeatures ProgramMode ToolGroup UpgradeCommand UserTracking".split(" "),function(a,b,c,d,e,f,g,h,m,y){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){var b=this;this.tools_=[];this.render();document.addEventListener("mousedown",function(){b.collapseAll()},!1)}a.getInstance=function(){goog.isDefAndNotNull(a.instance_)||(a.instance_=new a);return a.instance_};a.prototype.collapseAll=
function(){for(var a=0,b=this.tools_;a<b.length;a++)b[a].collapse()};a.prototype.show=function(){goog.dom.classlist.remove(this.container_,"invisible")};a.prototype.hide=function(){goog.dom.classlist.add(this.container_,"invisible")};a.prototype.activeToolChanged=function(a){for(var b=0,c=this.tools_;b<c.length;b++)c[b].activeToolChanged(a)};a.prototype.render=function(){goog.isDefAndNotNull(this.container_)&&goog.dom.removeNode(this.container_);this.tools_=[];this.container_=goog.soy.renderAsFragment(SketchUpTemplates.modelingToolbar,
{});this.makeTopSoloTools();this.makePaintTools();this.makePencilTools();this.makeArcTools();this.makeShapeTools();this.makeReshapeTools();this.makeBooleanTools();this.makeMoveTools();this.makeAnnotationTools();this.makeCameraTools();this.makeViewTools();this.container_.addEventListener("mousedown",function(a){a.stopPropagation()});e.RunCommand(e.CommandIds.ACTIVATE_SELECTION);this.activeToolChanged(e.CommandIds.ACTIVATE_SELECTION);document.body.appendChild(this.container_)};a.prototype.makeTopSoloTools=
function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_SELECTION,$t("Select"),"/static/images/web/tb_select_web.svg");a.isGroupLeader=!0;this.tools_.push(new h.Tools.Tool([a],this.container_));a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ERASE,$t("Eraser"),"/static/images/web/tb_erase_web.svg");a.isGroupLeader=!0;this.tools_.push(new h.Tools.Tool([a],this.container_,!0))};a.prototype.makePaintTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_PAINT_BUCKET,$t("Paint"),"/static/images/web/tb_paint_web.svg");
a.isGroupLeader=!0;var b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_PAINT_MATCH,$t("Sample Material"),"/static/images/web/tb_eyedropper_web.svg");b.isGroupLeader=!0;this.tools_.push(new h.Tools.Tool([a,b],this.container_))};a.prototype.makePencilTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_PENCIL,$t("Line"),"/static/images/web/tb_line_web.svg");a.isGroupLeader=!0;var b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_FREEHAND,$t("Freehand"),"/static/images/web/tb_freehand_web.svg");
this.tools_.push(new h.Tools.Tool([a,b],this.container_))};a.prototype.makeArcTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ARC,$t("Arc"),"/static/images/web/tb_arc3point_web.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ARC_2PT,$t("2 Point Arc"),"/static/images/web/tb_arc_web.svg"),c=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ARC_3PT,$t("3 Point Arc"),"/static/images/web/tb_arc3pointfit_web.svg"),d=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ARC_PIE,$t("Pie"),"/static/images/web/tb_arc3pointpie_web.svg");
this.tools_.push(new h.Tools.Tool([a,b,c,d],this.container_))};a.prototype.makeShapeTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_RECTANGLE,$t("Rectangle"),"/static/images/web/tb_rectangle_web.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ROTATED_RECTANGLE,$t("Rotated Rectangle"),"/static/images/web/tb_rectangle3point_web.svg"),d=h.Tools.makeToolData(e.CommandIds.ACTIVATE_CIRCLE,$t("Circle"),"/static/images/web/tb_circle_web.svg"),f=h.Tools.makeToolData(e.CommandIds.ACTIVATE_POLYGON,
$t("Polygon"),"/static/images/web/tb_polygon_web.svg"),g=h.Tools.makeToolDataWithCommand(new c.Add3DTextCommand,"/static/images/web/tb_3dtext_web.svg");this.tools_.push(new h.Tools.Tool([a,b,d,f,g],this.container_,!0))};a.prototype.makeMoveTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_MOVE,$t("Move"),"/static/images/web/tb_move_web.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ROTATE,$t("Rotate"),"/static/images/web/tb_rotate_web.svg"),c=h.Tools.makeToolData(e.CommandIds.ACTIVATE_SCALE,
$t("Scale"),"/static/images/web/tb_scale_web.svg");this.tools_.push(new h.Tools.Tool([a,b,c],this.container_))};a.prototype.makeReshapeTools=function(){var a=[];a.push(h.Tools.makeToolData(e.CommandIds.ACTIVATE_PUSH_PULL,$t("Push/Pull"),"/static/images/web/tb_pushpull_web.svg"));a.push(h.Tools.makeToolData(e.CommandIds.ACTIVATE_FOLLOW_ME,$t("Follow Me"),"/static/images/web/tb_followme_web.svg"));a.push(h.Tools.makeToolData(e.CommandIds.ACTIVATE_OFFSET,$t("Offset"),"/static/images/web/tb_offset_web.svg"));
g.currentProgramMode.featureIsAvailable(d.default.SolidTools)||a.push(h.Tools.makeToolData(e.CommandIds.ACTIVATE_OUTER_SHELL,$t("Outer Shell"),"/static/images/web/tb_outershell.svg"));this.tools_.push(new h.Tools.Tool(a,this.container_))};a.prototype.makeBooleanTools=function(){if(g.currentProgramMode.featureIsAvailable(d.default.SolidTools)){var a=$t("Can we do you a solid?"),b=$t("Our solid tools let you intersect groups to combine, subtract, or isolate objects to create complex 3D shapes. Upgrade to mix it up!"),
c=function(c,e,g){c=f.canAccess(d.default.SolidTools)?new h.Tools.Command(c,e,!0):new m.UpgradeCommand(c,e,!1,y.UpsellTriggers.SOLID_TOOLS,a,b);return h.Tools.makeToolDataWithCommand(c,g)},K=h.Tools.makeToolData(e.CommandIds.ACTIVATE_OUTER_SHELL,$t("Outer Shell"),"/static/images/web/tb_outershell.svg",!0),ga=c(e.CommandIds.ACTIVATE_UNION,$t("Union"),"/static/images/web/tb_union.svg"),xh=c(e.CommandIds.ACTIVATE_DIFFERENCE,$t("Subtract"),"/static/images/web/tb_subtract.svg"),Mg=c(e.CommandIds.ACTIVATE_TRIM,
$t("Trim"),"/static/images/web/tb_trim.svg"),zh=c(e.CommandIds.ACTIVATE_INTERSECT,$t("Intersect"),"/static/images/web/tb_intersect.svg"),c=c(e.CommandIds.ACTIVATE_SPLIT,$t("Split"),"/static/images/web/tb_split.svg"),K=new h.Tools.Tool([K,ga,xh,Mg,zh,c],this.container_);this.tools_.push(K)}};a.prototype.makeAnnotationTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_TAPE_MEASURE,$t("Tape Measure"),"/static/images/web/tb_measure_web.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_DIMENSIONS,
$t("Dimensions"),"/static/images/web/tb_dimension_web.svg"),c=h.Tools.makeToolData(e.CommandIds.ACTIVATE_DRAW_TEXT,$t("Text"),"/static/images/web/cursor_label.svg"),d=h.Tools.makeToolData(e.CommandIds.ACTIVATE_SECTION_PLANE,$t("Section Plane"),"/static/images/web/tb_section_planes.svg"),f=h.Tools.makeToolData(e.CommandIds.ACTIVATE_PROTRACTOR,$t("Protractor"),"/static/images/web/tb_protractor_web.svg"),g=h.Tools.makeToolData(e.CommandIds.ACTIVATE_AXES,$t("Axes"),"/static/images/web/tb_axes_web.svg");
this.tools_.push(new h.Tools.Tool([a,b,c,d,f,g],this.container_))};a.prototype.makeCameraTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_WALK,$t("Walk"),"/static/images/web/tb_walk.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_POSITION_CAMERA,$t("Position Camera"),"/static/images/web/tb_positioncamera.svg"),c=h.Tools.makeToolData(e.CommandIds.ACTIVATE_LOOK_AROUND,$t("Look Around"),"/static/images/web/tb_lookaround.svg");this.tools_.push(new h.Tools.Tool([a,b,c],this.container_))};
a.prototype.makeViewTools=function(){var a=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ZOOM,$t("Zoom"),"/static/images/web/tb_zoom_web.svg"),b=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ORBIT,$t("Orbit"),"/static/images/web/tb_orbit_web.svg"),c=h.Tools.makeToolData(e.CommandIds.ACTIVATE_PAN,$t("Pan"),"/static/images/web/tb_pan_web.svg"),d=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ZOOM_EXTENTS,$t("Zoom Extents"),"/static/images/web/tb_zoomextents_web.svg"),f=h.Tools.makeToolData(e.CommandIds.ACTIVATE_ZOOM_WINDOW,
$t("Zoom Window"),"/static/images/web/tb_zoomwindow_web.svg");this.tools_.push(new h.Tools.Tool([b,c,a,f,d],this.container_))};return a}();b.default=a});
define("Look",["require","exports","knockout"],function(a,b,c){function d(){!W&&0<R.length?e(R.shift()):!W&&la&&(c.cleanNode(K),goog.dom.removeNode(K),L=K=null,la=!1)}function e(a){W=!0;L.notification(a);L.cssClass(["look--active -ease",a.style].join(" "));a=1E3*a.duration||Math.max(1E3+1E3*m(a.text),5E3);ga=window.setTimeout(function(){f()},a)}function f(){if(goog.isDefAndNotNull(L)){var a=L.notification().style;L.cssClass(["look--inactive -ease",a].join(" "));W=!1;window.setTimeout(function(){d()},
400)}}function g(){var a=new xh;goog.isDefAndNotNull(K)||(K=goog.soy.renderAsFragment(SketchUpTemplates.look),y.appendChild(K),la=!0);c.applyBindings(a,K);a.cssClass("look--inactive");return a}function h(a,b,c,e){R.push({text:a,duration:c,style:b,buttons:e});goog.isDefAndNotNull(L)?d():(L=g(),window.setTimeout(function(){d()},100))}function m(a){var b=200/60;a=a.split(" ").length;return Math.ceil(a/b)}Object.defineProperty(b,"__esModule",{value:!0});var y=document.body,K,L,R=[],W=!1,la=!1,ga,xh=function(){function a(){this.cssClass=
c.observable("look--inactive");this.notification=c.observable({text:"",buttons:[]})}a.prototype.onClick=function(){window.clearTimeout(ga);f()};return a}();b.cancelAll=function(){R=[];f();goog.isDefAndNotNull(ga)&&window.clearTimeout(ga)};b.success=function(a,b,c){h(a,"-success",b,c)};b.info=function(a,b,c){h(a,"",b,c)};b.warning=function(a,b,c){h(a,"-warning",b,c)};b.error=function(a,b,c){h(a,"-error",b,c)}});
define("WarehouseProvider","require exports Bindings/index EnvironmentSettings Login ModelStorageProvider ProgramMode XhrUtils".split(" "),function(a,b,c,d,e,f,g,h){function m(){return"s"+c.GetModelVersion()}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.SEARCH_RESULTS_INCREMENT=30;this.GET_USER_PATH="/warehouse/GetUser?showPersonalInfo=true&id=";this.GET_ENTITY_PATH="/warehouse/v1.0/entities/";this.WAREHOUSE_ENTITY_UUID_PARAMETER="WarehouseModelId"}Object.defineProperty(a.prototype,
"name",{get:function(){return"3D Warehouse"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"iconURL",{get:function(){return"/static/images/web/wi_warehouse.svg"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"logoURL",{get:function(){return"/static/images/web/3dw-logo.png"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseURL",{get:function(){return d.Get3dWarehouseURL()},enumerable:!0,configurable:!0});a.prototype.initialize=function(){this.warehouseApi_=
new warehouse.DataStore({useLocalStorage:!1,baseUrl:this.baseURL});return e.getInfo()};a.prototype.getProjectsOrCreateDefault=function(){var a=e.getCachedInfo(),b=[],c={promise:h.doRequest(this.baseURL+this.GET_USER_PATH+a.warehouseUserId,"GET",void 0,void 0,!1,!1,void 0,!0).promise.then(function(b){b=JSON.parse(b);return[{region:"",id:a.warehouseUserId,name:"3D Warehouse",thumbnailURL:b.picture,rootFolderId:"3D Warehouse",hasChildren:!0}]}),cancel:function(){}};b.push(c);return b};a.prototype.getRegionForProject=
function(a){return goog.Promise.resolve("")};a.prototype.getLatestVersionId=function(a,b){return this.getFileDetails(a,b).then(function(a){return a.versionId})};a.prototype.getContents=function(a,b){a=e.getCachedInfo();return this.loadModels({backendClass:warehouse.BackendClass.ENTITY,startRow:1,endRow:this.SEARCH_RESULTS_INCREMENT,createUserId:a.warehouseUserId,calculateTotal:!0,showAttributes:!0,showBinaryMetadata:!0},[])};a.prototype.loadModels=function(a,b){var c=this;return this.warehouseApi_.search(a).then(function(d){goog.array.forEach(d.entries,
function(a,d){d=c.parseEntityResponse(a);if(goog.isDefAndNotNull(d)){var e=c.chooseBestThumbnail(a);b.push({region:"",id:d.id,parentFolderId:void 0,projectId:"",versionId:d.versionId,name:d.fileName,fileSystemName:void 0,type:f.FolderItemType.File,size:d.fileSize,thumbnailURL:e,hasChildren:!1,createdOn:a.createTime,modifiedOn:a.modifyTime})}});return a.endRow<d.total?(a.startRow=a.endRow+1,a.endRow=a.startRow+c.SEARCH_RESULTS_INCREMENT,c.loadModels(a,b)):b})};a.prototype.getFolderDetails=function(a,
b){return goog.Promise.resolve({region:"",id:"",parentFolderId:void 0,projectId:"",versionId:"",name:"3D Warehouse",fileSystemName:void 0,type:f.FolderItemType.Folder,size:0,thumbnailURL:"",hasChildren:!0,createdOn:"",modifiedOn:""})};a.prototype.getEntityDetails=function(a,b){var c=this;if(!goog.isDefAndNotNull(b))return a=e.getCachedInfo(),goog.Promise.resolve({title:"",id:void 0,isPrivate:!1,isPrintable:!1,externalUrl:"",description:"",creatorId:a.warehouseUserId,creatorDisplayName:a.warehouseDisplayName,
createTime:"",modifyTime:"",fileName:"",fileSize:0,versionId:"",thumbnailUrl:""});a=this.baseURL+this.GET_ENTITY_PATH+b+"?showBinaryAttributes=true";a=g.currentProgramMode.isViewer()?a+"&recordEvent=false":a+"&recordEvent=true";return h.doRequest(a,"GET",void 0,void 0,!1,void 0,void 0,!0).promise.then(function(a){a=JSON.parse(a);return c.parseEntityResponse(a)})};a.prototype.getFileDetails=function(a,b){var c=this;return this.getEntityDetails(a,b).then(function(a){return c.convertEntityToFolderItem(a)})};
a.prototype.getFilePermission=function(a,b){return goog.Promise.resolve(f.Permission.WRITE)};a.prototype.getIsPrintable=function(a){return goog.isDefAndNotNull(a.attributes.stl)?a.attributes.stl.isPrintable.value:!1};a.prototype.convertEntityToFolderItem=function(a){return{id:a.id,createdOn:a.createTime,modifiedOn:a.modifyTime,parentFolderId:void 0,versionId:a.versionId,name:a.fileName,fileSystemName:void 0,type:f.FolderItemType.File,size:a.fileSize,thumbnailURL:a.thumbnailUrl,hasChildren:!1,region:"",
projectId:""}};a.prototype.downloadFile=function(a,b,c,d){a=!0;g.currentProgramMode.isViewer()&&(a=!1);b=WarehouseUtil.UrlGenerator.generateGetBinaryUrl(b,warehouse.BackendClass.ENTITY,c,void 0,a);return h.doRequest(this.baseURL+b,"GET",null,null,!1,!0,d,!0)};a.prototype.uploadFile=function(a,b,c,d,f,g){var h=this,y={},m=e.getCachedInfo();return{promise:this.getEntityDetails(a,c).then(function(a){if(a.creatorId===m.warehouseUserId&&goog.isDefAndNotNull(c)){y={id:c,isHidden:!0};var d=new warehouse.Entity(h.warehouseApi_,
y);d.setType(warehouse.EntityType.SKETCHUP_MODEL);d.setTitle(a.title);d.setIsPrivate(a.isPrivate);return d.save(!0).then(function(c){return h.uploadCurrentModel(c,b,f,g,a.versionId)},h)}y={isHidden:!0};var d=new warehouse.Entity(h.warehouseApi_,y),e=a.title;goog.isDefAndNotNull(e)&&0!=e.length||(e=b.replace(".skp",""));d.setTitle(WarehouseUtil.Dom.htmlEscape(e));d.setIsPrivate(a.isPrivate);d.setType(warehouse.EntityType.SKETCHUP_MODEL);d.setDescription(a.description);goog.isDefAndNotNull(a.externalUrl)&&
d.setExternalUrl(a.externalUrl);return d.save(!0).then(function(c){h.updateApplicationUrlParameter(c.getId());return h.uploadCurrentModel(c,b,f,g,a.versionId)})}),cancel:function(){}}};a.prototype.renameFile=function(a,b,c){return goog.Promise.resolve(null)};a.prototype.downloadThumbnail=function(a){return goog.Promise.resolve()};a.prototype.createFolder=function(a,b,c){return goog.Promise.resolve(null)};a.prototype.deleteFile=function(a,b){return goog.Promise.resolve(!1)};a.prototype.deleteFolder=
function(a,b){return goog.Promise.resolve(!1)};a.prototype.getErrorTypeFromErrorString=function(a,b){return f.ErrorType.UnknownError};a.prototype.parseEntityResponse=function(a){var b=0,c="",d;for(d in a.binaries)if(this.isSketchUpSkpBinaryFileName(d)){var e=+d.substr(1,2);e>b&&(b=e,c=d)}if(0<b)return{title:a.title,id:a.id,isPrivate:a.isPrivate,isPrintable:this.getIsPrintable(a),externalUrl:a.externalUrl,description:a.description,creatorId:a.creator.id,creatorDisplayName:a.creator.displayName,createTime:a.createTime,
modifyTime:a.modifyTime,fileName:a.binaries[c].originalFileName,fileSize:a.binaries[c].fileSize,versionId:c,thumbnailUrl:this.chooseBestThumbnail(a)}};a.prototype.chooseBestThumbnail=function(a){if(goog.isDefAndNotNull(a.binaries)){if(goog.isDefAndNotNull(a.binaries.bot_lt))return a.binaries.bot_lt.contentUrl;if(goog.isDefAndNotNull(a.binaries.bot_st))return a.binaries.bot_st.contentUrl}return""};a.prototype.isSketchUpSkpBinaryFileName=function(a){return"s"!==a[0]||3!==a.length&&2!==a.length?!1:!0};
a.prototype.uploadCurrentModel=function(a,b,c,d,e){var f=goog.string.makeSafe(a.getId()),g={name:m(),subjectId:f,subjectClass:warehouse.BackendClass.ENTITY,binary:new Blob([c]),task:warehouse.Constants.NEW_MODEL_TASK,priority:warehouse.Constants.NEW_MODEL_PRIORITY,filename:b};return h.doWarehouseSetBinaryXHR(this.baseURL,g,d).promise.then(function(a){return{projectId:"",parentFolderId:"",fileId:f,versionId:g.name}})};a.prototype.updateApplicationUrlParameter=function(a){var b=new goog.Uri(window.location);
b.setParameterValue(this.WAREHOUSE_ENTITY_UUID_PARAMETER,a);window.history.pushState({},null,b.toString())};a.prototype.handlePreModelSave=function(){var a=e.getCachedInfo();c.GetLatestContributorUserID()!==a.warehouseUserId&&c.UpdateWarehouseCredits(a.warehouseUserId,a.warehouseDisplayName)};a.prototype.requiresUniqueFileNames=function(){return!1};return a}();b.Warehouse=a;b.getWarehouseNameOfSketchUpFileVersion=m});
define("WarehouseModelUploader","require exports Bindings/index EnvironmentSettings FileUtils Login ModelUtils WarehouseProvider XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.ModelSaveFailure=0]="ModelSaveFailure"})(b.Reason||(b.Reason={}));a=function(){function a(){this.baseWarehouseUrl_=d.Get3dWarehouseURL();this.warehouseApi_=new warehouse.DataStore({useLocalStorage:!1,baseUrl:this.baseWarehouseUrl_})}a.prototype.uploadModel=
function(a,b,c){var d=this;void 0===c&&(c=!1);return f.getInfo().then(function(c){return d.createWarehouseModelObject(a).save(!0).then(function(a){return d.uploadCurrentModel(a,c.warehouseUserId,function(a){b(m.ComputeProgressPercentage(a))})}).then(function(a){})})};a.prototype.createWarehouseModelObject=function(a){if(!a.hasError){var b=new warehouse.Entity(this.warehouseApi_,{id:a.id,isHidden:!0});b.setTitle(WarehouseUtil.Dom.htmlEscape(a.title));b.setDescription(WarehouseUtil.Dom.htmlEscape(a.description));
b.setIsPrivate(a.isPrivate);b.setIsPrintable(a.isPrintable);b.setType(warehouse.EntityType.SKETCHUP_MODEL);goog.string.isEmptyOrWhitespace(a.url)||b.setExternalUrl(a.url);return b}};a.prototype.uploadCurrentModel=function(a,b,d){var f=goog.string.makeSafe(a.getId());b=goog.string.makeSafe(b);a=goog.string.makeSafe(a.getCreatorDisplayName());c.SetWarehouseModelId(f);c.UpdateWarehouseCredits(b,a);a=c.GetModelFilePath();a=e.ReadFileToBlob(a);f={name:h.getWarehouseNameOfSketchUpFileVersion(),fileName:e.addSkpModelExtensionIfMissing(g.getPresentableModelTitle()),
subjectId:f,subjectClass:warehouse.BackendClass.ENTITY,binary:a,task:warehouse.Constants.NEW_MODEL_TASK,priority:warehouse.Constants.NEW_MODEL_PRIORITY};return m.doWarehouseSetBinaryXHR(this.baseWarehouseUrl_,f,d).promise};return a}();b.ModelUploader=a});
define("Upload3DW","require exports knockout Bindings/index DialogPrompts EnvironmentSettings Login Look SaveHandler SketchUpEvent WarehouseModelUploader KOExtensions".split(" "),function(a,b,c,d,e,f,g,h,m,y,K){Object.defineProperty(b,"__esModule",{value:!0});var L;(function(a){a[a.Unsaved=0]="Unsaved"})(L||(L={}));a=function(){function a(b){var d=this;this.container_=b;this.openViewEvent_=y.SketchUpEvents.Create();this.closeViewEvent_=y.SketchUpEvents.Create();b=goog.soy.renderAsFragment(SketchUpTemplates.upload3dw,
{});this.container_.appendChild(b);this.viewModel_=new R;c.applyBindings(this.viewModel_,this.container_);this.viewModel_.openEvent.listen(function(){d.openViewEvent_.trigger()});this.viewModel_.closeEvent.listen(function(){d.closeViewEvent_.trigger()})}Object.defineProperty(a.prototype,"openViewEvent",{get:function(){return this.openViewEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"closeViewEvent",{get:function(){return this.closeViewEvent_},enumerable:!0,configurable:!0});
a.prototype.onOpen=function(){this.viewModel_.onOpen()};return a}();b.default=a;var R=function(){function a(){var b=this;this.openEvent_=y.SketchUpEvents.Create();this.closeEvent_=y.SketchUpEvents.Create();this.isPrivate=c.observable(!1);var d={useLocalStorage:!1,baseUrl:f.Get3dWarehouseURL()};this.warehouseApi_=new warehouse.DataStore(d);this.isPublic=c.pureComputed({read:function(){return!b.isPrivate()},write:function(a){b.isPrivate(!a);b.isPrivate()&&b.isPrintable(!1)},owner:this});this.title=
c.observable("").extend({required:{overrideMessage:$t("A title must be provided."),doInitialValidation:!0}});this.description=c.observable("");this.url=c.observable("").extend({validUrl:{overrideMessage:null,doInitialValidation:!1}});this.isPrintable=c.observable(!1);this.isPrivate.subscribe(function(){b.isPrivate()&&b.isPrintable(!1)});this.hasValidationError=c.computed(function(){return this.title.hasError()||this.url.hasError()}.bind(this));this.fileUploadProgress=c.observable(0);this.waitingOnUpload=
c.observable(!1);this.uploadStarted=c.observable(!1);this.fileUploadError=c.observable(!1);this.fileUploadStatusMessage=c.observable("");this.fileUploadMessage=c.observable("");this.finishedButtonText=c.observable("");this.uploadImageSource=c.observable("");this.uploadWarningMessage=c.observable("");this.uploadButtonText=c.observable("");this.uploadHeaderText=c.observable("");this.suggestions=c.observableArray();this.selectedIndex_=c.observable(0);g.onChange(function(a){b.reset()})}Object.defineProperty(a.prototype,
"openEvent",{get:function(){return this.openEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"closeEvent",{get:function(){return this.closeEvent_},enumerable:!0,configurable:!0});a.prototype.onOpen=function(){var a=this;g.getInfo().then(function(b){var c=goog.string.makeSafe(d.GetWarehouseModelId()),e={title:void 0,description:void 0,url:void 0,isPrivate:!1,isPrintable:!1,hasError:!1};(goog.string.isEmptyOrWhitespace(c)?goog.Promise.resolve(e):a.warehouseApi_.getEntity(c).then(function(a){return goog.string.makeSafe(b.warehouseUserId)===
a.getCreatorId()?{id:a.getId(),title:a.getTitle(),description:a.getDescription(),url:a.getExternalUrl(),isPrivate:a.getIsPrivate(),isPrintable:a.isPrintable(),hasError:!1}:{title:$t("Copy of {MODEL_TITLE}").replace("{MODEL_TITLE}",a.getTitle()),description:$t('My copy of {ORIGINAL_AUTHOR}\'s model "{MODEL_TITLE}".').replace("{ORIGINAL_AUTHOR}",a.getCreatorDisplayName()).replace("{MODEL_TITLE}",a.getTitle()),url:void 0,isPrivate:!1,isPrintable:a.isPrintable(),hasError:!1}}).thenCatch(function(a){"OBJECT_DOES_NOT_EXIST"===
a.errorId&&h.warning($t("It appears this model no longer exists in your 3D Warehouse. A new model will be uploaded."));return e})).then(function(b){a.modelId_=b.id;var c=goog.isDef(a.modelId_);a.title(b.title);a.description(b.description);a.url(b.url);a.isPrivate(b.isPrivate);a.isPrintable(b.isPrintable);a.uploadHeaderText(c?$t("Update Model"):$t("Upload Model"));a.uploadButtonText(c?$t("Update"):$t("Upload"));a.uploadWarningMessage(c?$t("This action will overwrite the existing model on 3D Warehouse."):
$t("This action will create a new model on 3D Warehouse."))})})};a.prototype.onUpload=function(){var a=this,b,c=new K.ModelUploader,f=function(b){a.fileUploadProgress(b)};if(d.IsModelUntitled()){b=$t("Save Model");var g=$t("Your model must be saved before it is uploaded to the 3D Warehouse.");b=e.ShowInfoDialog(b,g)}else b=goog.Promise.resolve();b=b.then(function(){return m.default.getInstance().save(!0,!1)}).then(function(b){a.openEvent.trigger();return b});b=b.then(function(b){return b?(a.uploadStarted(!0),
a.waitingOnUpload(!0),a.fileUploadProgress(0),a.fileUploadError(!1),a.fileUploadStatusMessage($t("Uploading to 3D Warehouse")),a.fileUploadMessage(""),a.uploadImageSource("/static/images/web/tb_upload3dwarehouse.svg"),c.uploadModel(a.toJS(),f)):goog.Promise.reject(L.Unsaved)});b=b.then(function(){a.uploadImageSource("/static/images/web/tb_success.svg");a.fileUploadStatusMessage($t("Success"));a.fileUploadMessage($t("Your model will be viewable on the 3D Warehouse shortly."));a.finishedButtonText($t("Done"));
a.waitingOnUpload(!1);return!0});b=b.then(function(){return m.default.getInstance().save(!0)});return b=b.thenCatch(function(b){if(b!==L.Unsaved)return console.error(b),a.uploadImageSource("/static/images/web/tb_fail.svg"),a.fileUploadError(!0),a.setErrorMessages(b),a.finishedButtonText($t("Back")),a.waitingOnUpload(!1),!1})};a.prototype.onFinished=function(){this.uploadStarted(!1);this.fileUploadError()||(this.reset(),this.closeEvent.trigger())};a.prototype.reset=function(){this.isPrivate(!1);this.title("");
this.description("");this.url("");this.isPrintable(!1);this.modelId_=void 0};a.prototype.isSelected=function(a){return a===this.selectedIndex_()};a.prototype.onDescriptionChange=function(a,b){var c=this;this.description(a);this.textAreaElement_=b;a=this.getCurrentSeed(a,b.selectionStart);goog.isDefAndNotNull(a)?(this.currentSeed_=a,this.getHashtagSuggestions(a.value).then(function(a){c.suggestions(a)})):this.suggestions([]);this.selectedIndex_(0)};a.prototype.onDescriptionKeydown=function(a,b){if(0<
this.suggestions().length)switch(b.keyCode){case goog.events.KeyCodes.UP:return this.selectedIndex_(goog.math.modulo(this.selectedIndex_()-1,this.suggestions().length)),!1;case goog.events.KeyCodes.DOWN:return this.selectedIndex_(goog.math.modulo(this.selectedIndex_()+1,this.suggestions().length)),!1;case goog.events.KeyCodes.ENTER:case goog.events.KeyCodes.TAB:return this.onSuggestionSelect(this.suggestions()[this.selectedIndex_()]),!1;case goog.events.KeyCodes.ESC:return this.suggestions([]),this.selectedIndex_(0),
b.stopImmediatePropagation(),!1}return!0};a.prototype.onSuggestionSelect=function(a){var b=this.description(),b=b.substring(0,this.currentSeed_.start)+a+b.substring(this.currentSeed_.end);this.description(b);this.suggestions([]);this.selectedIndex_(0);goog.isDefAndNotNull(this.textAreaElement_)&&(this.textAreaElement_.focus(),this.textAreaElement_.selectionStart=this.currentSeed_.start+a.length,this.textAreaElement_.selectionEnd=this.textAreaElement_.selectionStart)};a.prototype.getHashtagSuggestions=
function(a){return this.warehouseApi_.getSearchSuggestions({q:a,property:"tags",count:10}).thenCatch(function(a){console.log(a);return[]})};a.prototype.getCurrentSeed=function(a,b){b=a.substring(0,b);b=/(?:[^\w_#]|^)#([\w_]+)$/.exec(b);if(!goog.isDefAndNotNull(b))return null;b=b.index+(b[0].length-b[1].length);a=a.substring(b);a=/^([\w_]+)(?:[^\w_#]|$)/.exec(a);if(!goog.isDefAndNotNull(a))return null;a=a[1];return{value:a,start:b,end:b+a.length}};a.prototype.setErrorMessages=function(a){this.fileUploadStatusMessage($t("Error"));
this.fileUploadMessage($t("Sorry. There was a problem uploading your file :(. Please try again."))};a.prototype.toJS=function(){return{title:this.title(),description:this.description(),url:this.url(),isPrivate:this.isPrivate(),isPrintable:this.isPrintable(),hasError:this.hasValidationError(),id:this.modelId_}};return a}()});
define("leftsidebar/SidebarTab",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.Default=0]="Default";a[a.ModelSave=1]="ModelSave";a[a.InsertFile=2]="InsertFile"})(b.LaunchMode||(b.LaunchMode={}));a=function(){function a(b){this.doCloseEvent=b}a.prototype.requiresLogin=function(){return!1};a.prototype.close=function(){goog.isDefAndNotNull(this.container)&&this.makeVisible(!1)};a.prototype.logMetadata=function(){};a.prototype.makeVisible=function(a){goog.isDefAndNotNull(this.container)&&
(a?this.container.classList.remove("left-sidebar-hidden"):this.container.classList.add("left-sidebar-hidden"))};a.prototype.allowTransition=function(a){goog.isDefAndNotNull(this.container)&&(a?this.container.classList.add("left-sidebar-container-transition"):this.container.classList.remove("left-sidebar-container-transition"))};Object.defineProperty(a.prototype,"isVisible",{get:function(){return goog.isDefAndNotNull(this.container)?!this.container.classList.contains("left-sidebar-hidden"):!1},enumerable:!0,
configurable:!0});return a}();b.SidebarTab=a});
define("leftsidebar/Sidebar3DWUploadTab",["require","exports","Upload3DW","leftsidebar/SidebarTab"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this,c)||this;d.render().then(function(){d.view_.closeViewEvent.listen(function(){d.doCloseEvent.trigger()})});return d}__extends(b,a);b.prototype.requiresLogin=function(){return!0};b.prototype.open=function(a){this.makeVisible(!0);this.view_.onOpen();return goog.Promise.resolve()};Object.defineProperty(b.prototype,
"openTabEvent",{get:function(){return this.view_.openViewEvent},enumerable:!0,configurable:!0});b.prototype.render=function(){goog.isDefAndNotNull(this.container)&&document.body.removeChild(this.container);this.container=goog.soy.renderAsFragment(SketchUpTemplates.upload3dwTab,{});document.body.appendChild(this.container);this.content_=this.container.querySelector(".upload-3dw-content");this.view_=new c.default(this.content_);return goog.Promise.resolve()};return b}(d.SidebarTab);b.default=a});
define("Canvas",["require","exports","Bindings/index","Log"],function(a,b,c,d){function e(a){for(var b in GL.contexts)if(GL.contexts[b]&&GL.contexts[b].GLctx==a)return GL.contexts[b].handle;return 0}function f(){h||(h=!0,Browser.requestAnimationFrame(function(){h=!1;Browser.mainLoop.runIter(function(){c.Draw()})}))}function g(a,b,c){return(a=y[a])?(a.width=b,a.height=c,!0):!1}Object.defineProperty(b,"__esModule",{value:!0});var h=!1,m=0,y={};b.Init=function(){var a=this,b=getMainContextAttributes(),
f=Module.canvas;Module.ctx=Browser.createContext(f,!0,!0,b);Module.ctx&&(m=e(Module.ctx),f.addEventListener("webglcontextlost",function(a){d.error("WebGL context was lost.");a.preventDefault()},!1),f.addEventListener("webglcontextrestored",function(b){d.info("WebGL context was restored.");c.ResetView();a.PostRedisplay()},!1))};b.IsInitialized=function(){return goog.isDefAndNotNull(Module.ctx)};b.PostRedisplay=f;b.MainLoop=function(){f();throw"SimulateInfiniteLoop";};b.CreateOffScreenContext=function(a,
b,c,d,f){for(var h in y){var m=+h,Mg=y[m],zh=GL.contexts[h].GLctx;if(goog.isDefAndNotNull(zh)&&(goog.isDefAndNotNull(Mg)||goog.asserts.assert("Canvas should exist for a WebGLRenderingContext"),Mg=zh.getContextAttributes(),goog.isDefAndNotNull(Mg)&&Mg.depth==d&&Mg.alpha==c&&Mg.stencil==f))return g(m,a,b),m}d={alpha:c,depth:d,stencil:f,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!0};c=goog.dom.createDom("CANVAS",{"class":"offscreen-canvas"});document.body.appendChild(c);c.width=a;c.height=
b;"undefined"==typeof GL.getNewIdOriginal&&(GL.getNewIdOriginal=GL.getNewId,GL.getNewIdModified=function(a){return a.length});GL.getNewId=GL.getNewIdModified;a=null;try{Module.preinitializedWebGLContext=void 0,a=Browser.createContext(c,!0,!1,d)}finally{GL.getNewId=GL.getNewIdOriginal}a=e(a);y[a]=c;return a};b.ActivateMainContext=function(){GL.makeContextCurrent(m)};b.ActivateOffScreenContext=function(a){GL.makeContextCurrent(a)};b.DeleteOffScreenContext=function(a){GL.makeContextCurrent(m)};b.ResizeOffScreenContext=
g;b.getOffScreenContextWidth=function(a){a=y[a];if(goog.isDefAndNotNull(a))return a.width;goog.asserts.assert(!1);return 0};b.getOffScreenContextHeight=function(a){a=y[a];if(goog.isDefAndNotNull(a))return a.height;goog.asserts.assert(!1);return 0};b.getRenderWidth=function(){return Module.canvas.width};b.getRenderHeight=function(){return Module.canvas.height};b.getBoundingBox=function(){return Module.canvas.getBoundingClientRect()}});
define("EventTypes",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=b.ComponentEventType||(b.ComponentEventType={});a.GLUE_CHANGE="glue";a.CHECKBOX_CHANGE="checkbox";a.TEXT_CHANGE="text"});
define("ComponentEditor",["require","exports","Bindings/index","EventTypes","SketchUpEvent"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){var d=b.querySelectorAll('.component-alignment-subsection input[type="checkbox"]');this.changeEvent_=e.SketchUpEvents.Create();for(var f=0;f<d.length;++f){var K=d[f];"cut-opening"==K.name?this.cutOpeningCheckbox_=K:"always-face-camera"==K.name?this.alwaysFaceCameraCheckbox_=K:"shadows-face-sun"==K.name&&(this.shadowsFaceSunCheckbox_=
K);K.addEventListener("change",this.handleCheckboxChange.bind(this))}d=b.querySelectorAll(".make-component-dialog .glue-to-option");this.selectedGlueTo_=d[0];K={};for(f=0;f<d.length;++f){var L=d[f];K[L.dataset.optionvalue]=L;L.addEventListener("click",this.handleGlueToChange.bind(this,L))}this.handleGlueToChange(K[c.selectedGlueTo]);this.alwaysFaceCameraCheckbox_.checked=c.alwaysFaceCamera;this.cutOpeningCheckbox_.checked=c.cutsOpening;this.shadowsFaceSunCheckbox_.checked=c.shadowsFaceSun;this.alwaysFaceCameraCheckbox_.checked&&
this.enableCheckbox(this.shadowsFaceSunCheckbox_);this.nameField_=b.querySelector(".make-component-dialog .component-name-input");this.descriptionField_=b.querySelector(".make-component-dialog .component-description-input");this.nameField_.addEventListener("change",this.handleTextChange_.bind(this));this.descriptionField_.addEventListener("change",this.handleTextChange_.bind(this))}a.prototype.handleTextChange_=function(){this.changeEvent_.trigger(d.ComponentEventType.TEXT_CHANGE)};Object.defineProperty(a.prototype,
"onChange",{get:function(){return this.changeEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this.nameField_.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"description",{get:function(){return this.descriptionField_.value},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cutOpening",{get:function(){return this.cutOpeningCheckbox_.checked},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"alwaysFaceCamera",{get:function(){return this.alwaysFaceCameraCheckbox_.checked},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shadowsFaceSun",{get:function(){return this.shadowsFaceSunCheckbox_.checked},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glueToText",{get:function(){return this.selectedGlueTo_.dataset.optionvalue},enumerable:!0,configurable:!0});a.prototype.handleGlueToChange=function(a){this.selectedGlueTo_.classList.remove("selected-glue-to");
this.selectedGlueTo_=a;this.selectedGlueTo_.classList.add("selected-glue-to");this.changeEvent_.trigger(d.ComponentEventType.GLUE_CHANGE);this.selectedGlueTo_.dataset.optionvalue==c.ComponentBehaviorTypes.GLUE_TO_NONE?(this.disableCheckbox(this.cutOpeningCheckbox_),this.enableCheckbox(this.alwaysFaceCameraCheckbox_)):(this.enableCheckbox(this.cutOpeningCheckbox_),this.disableCheckbox(this.alwaysFaceCameraCheckbox_));this.disableCheckbox(this.shadowsFaceSunCheckbox_);this.alwaysFaceCameraCheckbox_.checked=
!1;this.shadowsFaceSunCheckbox_.checked=!1};a.prototype.handleCheckboxChange=function(a){a.target==this.alwaysFaceCameraCheckbox_&&this.alwaysFaceCameraCheckbox_.checked?(this.enableCheckbox(this.shadowsFaceSunCheckbox_),this.shadowsFaceSunCheckbox_.checked=!0):a.target!=this.alwaysFaceCameraCheckbox_||this.alwaysFaceCameraCheckbox_.checked||(this.disableCheckbox(this.shadowsFaceSunCheckbox_),this.shadowsFaceSunCheckbox_.checked=!1);this.changeEvent_.trigger(d.ComponentEventType.CHECKBOX_CHANGE)};
a.prototype.disableCheckbox=function(a){a.disabled=!0;a.parentElement.classList.add("disabled-text")};a.prototype.enableCheckbox=function(a){a.disabled=!1;a.parentElement.classList.remove("disabled-text")};return a}();b.default=a});
define("SidebarTabBar",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.paneMap_={};this.panes_=[]}a.prototype.add=function(a){this.paneMap_[a.name]=a;this.panes_.push(a)};a.prototype.render=function(a,b){var c=this,g=goog.soy.renderAsFragment(SketchUpTemplates.sidebarTabs,{tabPanes:this.panes_});a.appendChild(g);this.paneContainer_=a.querySelector(".sidebar-tab-body-container");b&&a.querySelector(".sidebar-tab-bar").classList.add("invisible");
a=a.querySelectorAll(".sidebar-tab-bar-tab");goog.array.forEach(a,function(a,b){var d=c.paneMap_[a.dataset.name];0==b&&c.selectTab(a,d);a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();c.selectTab(a.target,d)})})};a.prototype.selectTab=function(a,b){this.selectedTab_!=a&&(this.selectedTab_&&this.selectedTab_.classList.remove("selected-tab"),this.selectedTab_=a,this.selectedTab_.classList.add("selected-tab"),this.paneContainer_.innerHTML="",b.render(this.paneContainer_))};
return a}();b.SidebarTabBar=a});
define("ComponentDetails","require exports Bindings/index ComponentEditor EventTypes SidebarTabBar SketchUpEvent".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){this.component_=b;b=goog.soy.renderAsFragment(SketchUpTemplates.componentDetails,{});this.tabs_=new f.SidebarTabBar;this.editPage_=new h(this.component_);this.tabs_.add(this.editPage_);this.tabs_.render(b,!0);c.appendChild(b);this.contentEl_=b}Object.defineProperty(a.prototype,
"editPage",{get:function(){return this.editPage_},enumerable:!0,configurable:!0});a.prototype.hide=function(){goog.dom.removeNode(this.contentEl_)};return a}();b.default=a;var h=function(){function a(b){this.compData_=b;this.onChangeEvent_=g.SketchUpEvents.Create()}Object.defineProperty(a.prototype,"name",{get:function(){return $t("Edit")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onChange",{get:function(){return this.onChangeEvent_},enumerable:!0,configurable:!0});a.prototype.render=
function(a){var b={componentInfo:{name:this.compData_.getTitle(),description:this.compData_.getDescription()},behaviorTypes:c.ComponentBehaviorTypes},b=goog.soy.renderAsFragment(SketchUpTemplates.componentEdit,b),e={selectedGlueTo:this.compData_.getGlueTo(),cutsOpening:this.compData_.getCutsOpening(),alwaysFaceCamera:this.compData_.getAlwaysFaceCamera(),shadowsFaceSun:this.compData_.getShadowsFaceSun()};this.editor_=new d.default(b,e);this.editor_.onChange.listen(this.handleEditorChange_.bind(this));
a.appendChild(b)};a.prototype.handleEditorChange_=function(a){a==e.ComponentEventType.TEXT_CHANGE&&(this.compData_.setDescription(this.editor_.description),this.compData_.setName(this.editor_.name),this.onChangeEvent_.trigger(e.ComponentEventType.TEXT_CHANGE));this.compData_.getCutsOpening()!=this.editor_.cutOpening&&this.compData_.setCutsOpening(this.editor_.cutOpening);this.compData_.getAlwaysFaceCamera()!=this.editor_.alwaysFaceCamera&&this.compData_.setAlwaysFaceCamera(this.editor_.alwaysFaceCamera);
this.compData_.getShadowsFaceSun()!=this.editor_.shadowsFaceSun&&this.compData_.setShadowsFaceSun(this.editor_.shadowsFaceSun)};return a}()});
define("ResizeObserver",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){var f=this;this.action_=c;this.element_=b;this.lastHeight_=b.offsetHeight;this.lastWidth_=b.offsetWidth;this.mutationObserver_=new MutationObserver(function(){return f.handleMutation()});this.mutationObserver_.observe(b,{subtree:!0,attributes:!0,childList:!0,characterData:!0});this.cssTransitionListener_=function(){f.handleMutation()};this.element_.addEventListener("transitionend",
this.cssTransitionListener_)}a.prototype.disconnect=function(){this.mutationObserver_.disconnect();this.element_.removeEventListener("transitionend",this.cssTransitionListener_)};a.prototype.handleMutation=function(){var a=this.element_;if(a.offsetHeight!==this.lastHeight_||a.offsetWidth!==this.lastWidth_)this.lastHeight_=a.offsetHeight,this.lastWidth_=a.offsetWidth,this.action_()};return a}();b.default=a});
define("SidebarBrowser",["require","exports","Delay","ResizeObserver"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.contentsRendered_=!1}a.prototype.setContainerInteractions=function(a){this.parentCallbacks_=a};a.prototype.render=function(){var a=this;if(!goog.isDefAndNotNull(this.browserElement_)){this.browserElement_=goog.soy.renderAsFragment(this.template,{});this.browserElement_.addEventListener("mouseenter",function(){a.parentCallbacks_.onActiveChange(!0)});
this.browserElement_.addEventListener("mouseleave",function(){a.parentCallbacks_.onActiveChange(!1)});this.browserElement_.addEventListener("mousedown",function(){a.saveOffset()});this.browserContentElement_=this.browserElement_.querySelector(".browser-content");if(this.hasTabs())for(var b=this.getTabs(),c=0;c<b.length;++c){var e=b[c];e.addEventListener("click",this.handleTabClick.bind(this,e));e.classList.contains("selected-tab")&&(this.selectedTab_=e)}var y=this.browserElement_.querySelector(".browser-header-close");
y.addEventListener("click",function(){a.setExpanded(!1);a.setVisible(!1)});this.browserElement_.querySelector(".browser-header").addEventListener("click",function(b){b.target===y||y.contains(b.target)||a.toggleExpanded()});new d.default(this.browserElement_,function(){return a.parentCallbacks_.onViewportChange()});this.initialize(this.browserElement_)}return this.browserElement_};a.prototype.hasTabs=function(){return!1};a.prototype.getTabs=function(){return this.browserElement_.querySelectorAll(".browser-tab")};
a.prototype.show=function(){return goog.isDefAndNotNull(this.parentCallbacks_)?(this.setVisible(!0),this.parentCallbacks_.scrollTo(this),this.setExpanded(!0)):goog.Promise.reject()};Object.defineProperty(a.prototype,"isVisible",{get:function(){return this.browserElement_.classList.contains("is-visible")&&this.parentCallbacks_.isVisible()},enumerable:!0,configurable:!0});a.prototype.setExpanded=function(a){var b=this;this.parentCallbacks_.onExpandedChange(a);if(a)return this.browserElement_.classList.add("is-open"),
c.default(function(){b.contentsRendered_||b.renderContents()},250);this.browserElement_.classList.remove("is-open");return goog.Promise.resolve()};a.prototype.toggleExpanded=function(){var a=this.browserElement_.classList.contains("is-open");this.setExpanded(!a)};a.prototype.setVisible=function(a){a?(this.browserElement_.classList.add("is-visible"),this.parentCallbacks_.onOpenChange(!0)):(this.browserElement_.classList.remove("is-visible"),this.parentCallbacks_.onOpenChange(!1))};a.prototype.pinDivToBottomOfBrowser=
function(a){this.bottomBar_=a};a.prototype.adjustBottomPinnedBar=function(){if(this.bottomBar_){var a=this.parentCallbacks_.getViewportTop()+this.parentCallbacks_.getViewportHeight(),b=this.browserElement_.offsetTop+this.browserElement_.offsetHeight;this.bottomBar_.style.bottom=(b<a?0:Math.min(b-a,this.browserContentElement_.clientHeight-this.bottomBar_.clientHeight))+"px"}};a.prototype.onViewportChange=function(){this.adjustBottomPinnedBar()};a.prototype.getOffset=function(){var a=this.parentCallbacks_.getViewportTop(),
b=this.parentCallbacks_.getViewportHeight(),c=this.browserElement_.offsetHeight;a=this.isCoveringViewport(a,b)?this.storedLocalOffset_=0:this.storedLocalOffset_&&c>b&&0<=this.storedLocalOffset_&&this.storedLocalOffset_<c?this.storedLocalOffset_>c-b?c-b:this.storedLocalOffset_:0;return a+this.browserElement_.offsetTop};a.prototype.blur=function(){var a=this.parentCallbacks_.getViewportTop(),b=this.parentCallbacks_.getViewportHeight();this.isCoveringViewport(a,b)&&this.saveOffset()};a.prototype.saveOffset=
function(){var a=this.parentCallbacks_.getViewportTop();goog.isDefAndNotNull(this.browserElement_)&&(this.storedLocalOffset_=a-this.browserElement_.offsetTop)};a.prototype.isCoveringViewport=function(a,b){if(goog.isDefAndNotNull(this.browserElement_)){var c=this.browserElement_.offsetTop+this.browserElement_.offsetHeight;return this.browserElement_.offsetTop<=a&&c>=a+b}return!1};Object.defineProperty(a.prototype,"collapsibleContents",{get:function(){return this.browserElement_.querySelector(".collapsible-browser-contents")},
enumerable:!0,configurable:!0});a.prototype.onFileNewOrOpen=function(){};a.prototype.isHomeTabSelected=function(){return"home"===this.selectedTab_.dataset.tab};a.prototype.handleTabClick=function(a){this.selectedTab_.classList.remove("selected-tab");a.classList.add("selected-tab");this.selectedTab_=a;if(this.isHomeTabSelected())this.onHomeTabSelected();else this.onBrowseTabSelected()};a.prototype.selectHomeTab=function(){this.selectTab("home")};a.prototype.selectBrowseTab=function(){this.selectTab("browse")};
a.prototype.selectTab=function(a){a=this.getTab(a);goog.isDefAndNotNull(a)&&this.handleTabClick(a)};a.prototype.getTab=function(a){for(var b=this.getTabs(),c=0;c<b.length;++c){var d=b[c];if(d.dataset.tab===a)return d}return null};a.prototype.onHomeTabSelected=function(){};a.prototype.onBrowseTabSelected=function(){};return a}();b.SidebarBrowser=a});
define("WarehouseBrowserHelper","require exports Bindings/index GoogleAnalytics EnvironmentSettings FileUtils Look NetworkStatus XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.pageNumber_=0;this.cachedResults_={};this.isActive_=!1;this.container_=b;this.baseWarehouseUrl_=e.Get3dWarehouseURL();this.warehouseApi_=new warehouse.DataStore({useLocalStorage:!1,baseUrl:this.baseWarehouseUrl_})}a.prototype.getWarehouseSearchTextInput=
function(){return this.container_.querySelector('#warehouse-search input[type="text"]')};a.prototype.setup=function(){var a=this;this.warehouseNoResults_=this.warehouseNavigation_=null;this.isActive_=!0;this.container_.querySelector("#warehouse-search").addEventListener("submit",function(b){b.preventDefault();b=a.getWarehouseSearchTextInput();a.pageNumber_=0;a.query_!=b.value&&(a.cachedResults_={});a.query_=b.value;goog.string.isEmptySafe(a.query_)||(d.fire3DWSearchEvent(a.query_),a.fetchPage(a.query_,
a.pageNumber_).then(function(b){a.searchSuccess(b)}))})};a.prototype.clear=function(){this.isActive_=!1};a.prototype.fetchPage=function(a,b){var c=this.cachedResults_[b];return goog.isDefAndNotNull(c)?goog.Promise.resolve(c):h.isConnected()?this.warehouseApi_.search({q:a,startRow:12*b+1,endRow:12*(b+1),calculateTotal:!0,showBinaryMetadata:!0}).thenCatch(function(a){g.error($t("Oh no! An error occured while fetching this page."));return goog.Promise.resolve({entries:[],total:0})}):goog.Promise.resolve({entries:[],
total:0})};a.prototype.setupNavigation=function(){var a=this;goog.isDefAndNotNull(this.warehouseNavigation_)||(this.warehouseNavigation_=goog.soy.renderAsFragment(SketchUpTemplates.resultsNavigation,{}),this.container_.appendChild(this.warehouseNavigation_),this.container_.querySelector("#previous-page-button").addEventListener("click",function(b){b.preventDefault();--a.pageNumber_;goog.string.isEmptySafe(a.query_)||a.fetchPage(a.query_,a.pageNumber_).then(function(b){a.searchSuccess(b)})}),this.container_.querySelector("#next-page-button").addEventListener("click",
function(b){b.preventDefault();++a.pageNumber_;goog.string.isEmptySafe(a.query_)||a.fetchPage(a.query_,a.pageNumber_).then(function(b){a.searchSuccess(b)})}))};a.prototype.updateNavigation=function(){0===this.pageNumber_?this.container_.querySelector("#previous-page-button").classList.add("disabled-button"):this.container_.querySelector("#previous-page-button").classList.remove("disabled-button");this.pageNumber_===this.lastPageNumber_?this.container_.querySelector("#next-page-button").classList.add("disabled-button"):
this.container_.querySelector("#next-page-button").classList.remove("disabled-button");this.container_.querySelector(".warehouse-pages").innerText=$t("Page {PAGE_NUM} of {TOTAL_PAGES}").replace("{PAGE_NUM}",(this.pageNumber_+1).toLocaleString()).replace("{TOTAL_PAGES}",(this.lastPageNumber_+1).toLocaleString())};a.prototype.removeNavigation=function(){goog.isDefAndNotNull(this.warehouseNavigation_)&&(goog.dom.removeNode(this.warehouseNavigation_),this.warehouseNavigation_=null)};a.prototype.removeNoResults=
function(){goog.isDefAndNotNull(this.warehouseNoResults_)&&(goog.dom.removeNode(this.warehouseNoResults_),this.warehouseNoResults_=null)};a.prototype.getSearchString=function(){var a=this.getWarehouseSearchTextInput();return goog.isDefAndNotNull(a)?a.value:""};a.prototype.setSearchString=function(a){var b=this.getWarehouseSearchTextInput();goog.isDefAndNotNull(b)&&(b.value=a,b.focus())};a.prototype.getTemplateData=function(a){var b=WarehouseUtil.Thumbnail.getBestSmallThumbnail(a.binaryNames),b=a.binaries[b];
return goog.isDefAndNotNull(b)?{thumbnailUrl:b.contentUrl,title:a.title,description:a.description,author:a.creator.displayName}:void 0};a.prototype.clearResults=function(){for(var a=this.container_.querySelectorAll(".component-instance-container"),b=0,c=a.length;b<c;b++)goog.dom.removeNode(a[b])};a.prototype.searchSuccess=function(a){if(this.isActive_){var b=a.entries.filter(function(a){return goog.isDefAndNotNull(a.binaryNames)&&0<a.binaryNames.length});this.totalResults_=a.total;this.lastPageNumber_=
Math.floor(this.totalResults_/12);this.clearResults();this.removeNoResults();0<this.lastPageNumber_?(this.setupNavigation(),this.updateNavigation()):this.removeNavigation();0<a.entries.length&&(this.cachedResults_[this.pageNumber_]=a);if(0<b.length)for(a=0;a<b.length;++a)this.renderComponent(b[a]);else this.removeNavigation(),this.warehouseNoResults_=goog.soy.renderAsFragment(SketchUpTemplates.noResults3DWSearch,{}),this.container_.appendChild(this.warehouseNoResults_)}};a.prototype.componentClick=
function(b,c){c.classList.contains("selected-component")||c.classList.add("selected-component");a.selectedInstance_!=c&&(c.classList.add("selected-component"),a.selectedInstance_&&a.selectedInstance_.classList.remove("selected-component"));a.selectedInstance_=c;this.downloadComponent(b,c)};a.prototype.renderComponent=function(a){var b=this,c=this.getTemplateData(a);if(goog.isDefAndNotNull(c)){var d=goog.soy.renderAsFragment(SketchUpTemplates.component,c);this.container_.appendChild(d);d.addEventListener("click",
function(c){b.componentClick(a,d)})}};a.prototype.downloadSuccess=function(a,b){var d=goog.string.path.join(f.TEMP_DIR,f.generateFileSystemName("skp")),e=a.title,g=a.description,h=a.creator.displayName,y=a.creator.id,m=a.id;window.setTimeout(function(){var a=new Uint8Array(b);f.saveFileFromUint8Array(a,d);c.LoadWarehouseFileIntoModel(d,e,g,m,h,y);f.DeleteFile(d)},1)};a.prototype.onDownloadProgress=function(a,b){b=Math.round(b.loaded/b.total*100);a.setValue(b);100==b?window.setTimeout(function(){a.getElement().style.display=
"none"},2E3):a.getElement().style.display="block"};a.prototype.onDownloadError=function(a,b){a.setValue(0);a.getElement().style.display="none";g.error($t("Oh no! An error occured while downloading this component."))};a.prototype.downloadComponent=function(a,b){var c=a.id,d=new goog.ui.ProgressBar;b=b.querySelector(".progress-bar");d.decorate(b);if(b=WarehouseUtil.File.getBestBinaryName(a.binaryNames))c=WarehouseUtil.UrlGenerator.generateGetBinaryUrl(c,warehouse.BackendClass.ENTITY,b,void 0,!0),m.fetchBinary(this.baseWarehouseUrl_+
c,this.downloadSuccess.bind(this,a),this.onDownloadProgress.bind(this,d),this.onDownloadError.bind(this,d),!0)};return a}();b.default=a});
define("ComponentBrowser","require exports knockout Bindings/index ComponentDetails Cursor EnvironmentSettings EventTypes GlobalConstants SidebarBrowser WarehouseBrowserHelper Delay".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var c=a.call(this)||this;c.searchString_="";c.instanceNotificationTimer_=0;c.definitionNotificationTimer_=0;c.compBrowser_=d.CreateComponentBrowserInstance();c.componentVector_=null;c.componentInstances_=
[];return c}__extends(b,a);b.prototype.initialize=function(a){this.componentContent_=a.querySelector(".browser-content");this.warehouseHelper_=new K.default(this.componentContent_)};b.prototype.hasTabs=function(){return!0};b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){a.clearComponentsContent();a.renderSelectedTab();b()})};b.prototype.onComponentDefinitionNotification=function(){var a=this;0===this.definitionNotificationTimer_&&(this.definitionNotificationTimer_=
window.setTimeout(function(){a.reloadInModelComponents();a.definitionNotificationTimer_=0}))};b.prototype.reloadInModelComponents=function(){if(this.contentsRendered_)if(this.isVisible){if(this.isHomeTabSelected())this.onHomeTabSelected()}else this.contentsRendered_=!1};b.prototype.onFileNewOrOpen=function(){this.contentsRendered_&&this.isHomeTabSelected()&&this.selectBrowseTab()};b.prototype.clearComponentsContent=function(){if(this.componentVector_){for(var a=0;a<this.componentInstances_.length;++a)this.componentInstances_[a].delete();
this.componentVector_.delete();this.componentVector_=null;this.componentInstances_=[]}this.removeComponentActionsBar();this.componentContent_.innerHTML=""};b.prototype.renderSelectedTab=function(){if(this.isHomeTabSelected())this.warehouseHelper_.clear(),this.browserContentElement_.classList.add("in-model"),this.renderComponentList(),this.renderComponentActionsBar();else{this.browserContentElement_.classList.remove("in-model");var a={analyticsIframeUrl:this.get3dwIframeAnalyticsUrl()},a=goog.soy.renderAsFragment(SketchUpTemplates.components3DWSearch,
a,m.INJECTED_SOY_DATA);this.componentContent_.appendChild(a);this.warehouseHelper_.setup();this.warehouseHelper_.setSearchString(this.searchString_)}};b.prototype.get3dwIframeAnalyticsUrl=function(){var a=WarehouseUtil.UrlGenerator.PRODUCTION_DOMAIN;g.IsTest()&&(a=WarehouseUtil.UrlGenerator.STAGING_DOMAIN);return a+"/sketchupwebanalytics.html"};b.prototype.saveSearchString=function(){this.searchString_=this.warehouseHelper_.getSearchString()};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"components-tab"},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"components-browser-top"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.componentsBrowser},enumerable:!0,configurable:!0});b.prototype.renderComponentList=function(){f.override("wait");var a=this.compBrowser_.getInModelComponents();this.componentVector_=a;for(var b=[],c=0;c<a.size();++c){var d=a.get(c);this.componentInstances_.push(d);
d.isShownInList()&&b.push(d)}b.sort(function(a,b){return a.getTitle()<b.getTitle()?-1:a.getTitle()>b.getTitle()?1:0});for(c=0;c<b.length;++c)(new W(b[c],this.componentContent_)).render();this.contentsRendered_=!0;f.restore()};b.prototype.renderComponentActionsBar=function(){this.pinDivToBottomOfBrowser(goog.soy.renderAsFragment(SketchUpTemplates.componentsBottomActionsBar,{}));this.componentActionsViewModel_=new R(this.compBrowser_);c.applyBindings(this.componentActionsViewModel_,this.bottomBar_);
this.componentContent_.appendChild(this.bottomBar_)};b.prototype.removeComponentActionsBar=function(){goog.isDefAndNotNull(this.bottomBar_)&&(c.cleanNode(this.bottomBar_),c.removeNode(this.bottomBar_),this.bottomBar_=null)};b.prototype.onHomeTabSelected=function(){this.saveSearchString();this.clearComponentsContent();this.renderSelectedTab()};b.prototype.onBrowseTabSelected=function(){this.clearComponentsContent();this.renderSelectedTab()};b.getInstance=function(){b.staticInstance_||(b.staticInstance_=
new b);return b.staticInstance_};b.prototype.onComponentInstanceNotification=function(){var a=this;0===this.instanceNotificationTimer_&&(this.instanceNotificationTimer_=window.setTimeout(function(){a.instanceNotificationTimer_=0}))};return b}(y.SidebarBrowser);b.default=a;var R=function(){function a(b){this.model_=b;this.isPurging=c.observable(!1)}a.prototype.purge=function(){var a=this;this.isPurging(!0);L.default(function(){a.model_.purge()},10);L.default(function(){a.isPurging(!1)},2E3)};return a}(),
W=function(){function a(b,c){this.component_=b;this.container_=c;this.details_=null}Object.defineProperty(a.prototype,"componentDom",{get:function(){return this.componentDom_},enumerable:!0,configurable:!0});a.prototype.onEditChange=function(a){a==h.ComponentEventType.TEXT_CHANGE&&(this.render(!0),this.setExpanderToExpandedState())};a.prototype.setExpanderToExpandedState=function(){this.componentDom_.querySelector(".expand-button").classList.add("expanded")};a.prototype.getTemplateData=function(){return{thumbnailBase64:this.component_.getThumbnail(),
title:this.component_.getTitle(),description:this.component_.getDescription(),author:this.component_.getAuthor(),addExpander:!0}};a.prototype.handleExpanderClick=function(a){var b=this.componentDom_.parentElement;a.preventDefault();a.stopPropagation();null!==this.details_?(b.classList.remove("expanded"),this.details_.hide(),this.details_=null):(b.classList.add("expanded"),this.details_=new e.default(this.component_,b),this.details_.editPage.onChange.listen(this.onEditChange.bind(this)))};a.prototype.handleClick=
function(b){this.componentDom_.classList.contains("selected-component")||this.componentDom_.classList.add("selected-component");a.selectedInstance_!=this&&(this.componentDom_.classList.add("selected-component"),a.selectedInstance_&&a.selectedInstance_.componentDom.classList.remove("selected-component"));a.selectedInstance_=this;this.component_.handleClick()};a.prototype.render=function(a){var b=goog.soy.renderAsFragment(SketchUpTemplates.component,this.getTemplateData(),m.INJECTED_SOY_DATA);a?goog.dom.replaceNode(b,
this.componentDom_):this.container_.appendChild(b);this.componentDom_=b.firstChild;this.componentDom_.addEventListener("click",this.handleClick.bind(this));this.componentDom_.querySelector(".expand-button").addEventListener("click",this.handleExpanderClick.bind(this))};return a}()});
define("ColorPicker",["require","exports","jquery","SketchUpEvent"],function(a,b,c,d){function e(a){return"rgb("+[a.r,a.g,a.b].map(function(a){return Math.floor(255*a)}).join(",")+")"}function f(a){function b(a){return Math.min(Math.max(a,0),1)}return{r:b(a.r/255),g:b(a.g/255),b:b(a.b/255),alpha:a.alpha?b(a.alpha/255):1}}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.colorChangedEvent_=d.SketchUpEvents.Create();this.options_={color:"rgba(119,119,119,1)",flat:!0,preferredFormat:"hex",
showInput:!0,showButtons:!1}}a.prototype.render=function(a){var b=this;this.container_&&this.container_.spectrum("destroy");this.container_=c(a);this.container_.spectrum(this.options_);this.colorPickerElement_=this.container_.spectrum("container");c(this.colorPickerElement_).appendTo(a);a.removeAttribute("style");this.container_.on("move.spectrum",function(a,c){a=c.toRgb();b.colorChangedEvent_.trigger(f(a))});this.container_.on("change.spectrum",function(a,c){goog.isDefAndNotNull(c)&&(a=c.toRgb(),
b.colorChangedEvent_.trigger(f(a)))})};a.prototype.setColor=function(a){return 0<arguments.length?(this.container_.spectrum("set",e(a)),this):this.container_.spectrum("get")};a.prototype.getColor=function(){var a=this.container_.spectrum("get").toRgb();return f(a)};Object.defineProperty(a.prototype,"colorChangedEvent",{get:function(){return this.colorChangedEvent_},enumerable:!0,configurable:!0});a.prototype.remove=function(){this.container_.remove(this.colorPickerElement_);this.colorPickerElement_=
null};return a}();b.ColorPicker=a});
define("DisplayBrowser","require exports knockout nouislider Bindings/index ColorPicker SidebarBrowser".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(){}a.prototype.onUnhideAll=function(){e.RunCommand(e.CommandIds.EDIT_UNHIDE_ALL);return!0};a.prototype.onUnhideSelected=function(){e.RunCommand(e.CommandIds.EDIT_UNHIDE);return!0};a.prototype.onUnhideLast=function(){e.RunCommand(e.CommandIds.EDIT_UNHIDE_LAST);return!0};return a}(),m=function(){function a(b){this.showHiddenObjects=
c.observable(!1);this.showSectionPlanes=c.observable(!1);this.showSectionCuts=c.observable(!1);this.showAxes=c.observable(!1);this.showGuideLines=c.observable(!1);this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){var a=e.GetCommandState(e.CommandIds.VIEW_SHOW_HIDDEN)===e.CommandStates.MF_CHECKED;this.showHiddenObjects(a);a=e.GetCommandState(e.CommandIds.VIEW_SECTION_PLANES)===e.CommandStates.MF_CHECKED;this.showSectionPlanes(a);a=e.GetCommandState(e.CommandIds.VIEW_SECTION_CUTS)===
e.CommandStates.MF_CHECKED;this.showSectionCuts(a);a=e.GetCommandState(e.CommandIds.VIEW_AXES)===e.CommandStates.MF_CHECKED;this.showAxes(a);a=e.GetCommandState(e.CommandIds.VIEW_GUIDES)===e.CommandStates.MF_CHECKED;this.showGuideLines(a)};a.prototype.onShowHiddenObjects=function(){e.RunCommand(e.CommandIds.VIEW_SHOW_HIDDEN);return!0};a.prototype.onShowSectionPlanes=function(){e.RunCommand(e.CommandIds.VIEW_SECTION_PLANES);return!0};a.prototype.onShowSectionCuts=function(){e.RunCommand(e.CommandIds.VIEW_SECTION_CUTS);
return!0};a.prototype.onShowAxes=function(){e.RunCommand(e.CommandIds.VIEW_AXES);return!0};a.prototype.onShowGuideLines=function(){e.RunCommand(e.CommandIds.VIEW_GUIDES);return!0};a.prototype.onDeleteAllGuides=function(){e.RunCommand(e.CommandIds.EDIT_DELETE_GUIDES);return!0};return a}(),y=function(){function a(b){this.hideRestOfModel=c.observable(!0);this.hideSimilarComponents=c.observable(!0);this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){var a=e.GetCommandState(e.CommandIds.VIEW_COMPONENT_HIDE_REST)===
e.CommandStates.MF_CHECKED;this.hideRestOfModel(a);a=e.GetCommandState(e.CommandIds.VIEW_COMPONENT_HIDE_SIMILAR)===e.CommandStates.MF_CHECKED;this.hideSimilarComponents(a)};a.prototype.toggleHideRestOfModel=function(){e.RunCommand(e.CommandIds.VIEW_COMPONENT_HIDE_REST);this.updateViewModelFromModel();return!0};a.prototype.toggleHideSimilarComponents=function(){e.RunCommand(e.CommandIds.VIEW_COMPONENT_HIDE_SIMILAR);this.updateViewModelFromModel();return!0};return a}(),K=function(){function a(b){var d=
this;this.model_=b;this.isBound=!1;this.shadowsImageSrc=c.observable(a.SHADOWS_OFF_IMAGE);this.shadowsImageText=c.observable(a.SHADOWS_OFF_TEXT);this.timeValue=c.observable(0);this.dateValue=c.observable(0);this.maxTime=c.observable(600);this.maxDays=c.observable(365);this.enabled=c.observable(!1);this.dateString=c.computed({read:function(){d.dateValue();var a=d.getCurrentTimeFromModel();return(new goog.i18n.DateTimeFormat("MM/dd")).format(a)},write:function(a){var b=new Date;(new goog.i18n.DateTimeParse("MM/dd")).strictParse(a,
b)===a.length?(a=b.getMonth()+1,b=b.getDate(),d.model_.setMonthAndDay(a,b),d.dateValue(d.model_.getDayOfYear()-1),d.updateTimeRangeAndValueFromModel()):(b=d.dateString(),d.dateString(""),d.dateString(b))}});this.timeString=c.computed({read:function(){d.timeValue();var a=d.getCurrentTimeFromModel();return(new goog.i18n.DateTimeFormat("h:mm a")).format(a)},write:function(a){var b=new Date;if((new goog.i18n.DateTimeParse("h:mm a")).strictParse(a,b)===a.length){a=b.getHours();var c=b.getMinutes(),b=d.model_.getSunriseInMinutes(),
e=d.model_.getSunsetInMinutes();a=60*a+c;a<b?a=b:a>e&&(a=e);a-=b;d.model_.setTimeFromSunriseInMinutes(a);d.timeValue(a)}else a=d.timeString(),d.timeString(""),d.timeString(a)}});this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){var b=this.model_.shadowsEnabled();this.enabled(b);this.shadowsImageSrc(b?a.SHADOWS_ON_IMAGE:a.SHADOWS_OFF_IMAGE);this.shadowsImageText(b?a.SHADOWS_ON_TEXT:a.SHADOWS_OFF_TEXT);this.updateTimeRangeAndValueFromModel();this.maxDays(this.model_.getDaysInYear()-
1);this.dateValue(this.model_.getDayOfYear()-1)};a.prototype.updateTimeRangeAndValueFromModel=function(){var a=this.model_.getSunriseInMinutes(),b=this.model_.getSunsetInMinutes();this.maxTime(b-a);var c=this.model_.getTimeInMinutes();c<a?c=a:c>b&&(c=b);this.timeValue(c-a)};a.prototype.toggleShadows=function(){var b=!this.model_.shadowsEnabled();this.model_.enableShadows(b);this.shadowsImageSrc(b?a.SHADOWS_ON_IMAGE:a.SHADOWS_OFF_IMAGE);this.shadowsImageText(b?a.SHADOWS_ON_TEXT:a.SHADOWS_OFF_TEXT);
this.updateViewModelFromModel()};a.prototype.onSlideTime=function(a){if(this.isBound){var b=parseInt(a);this.model_.setTimeFromSunriseInMinutes(b);this.timeValue(a)}};a.prototype.onSlideDate=function(a){if(this.isBound){var b=parseInt(a);this.model_.setDaysFromJanFirst(b);this.dateValue(a);this.updateTimeRangeAndValueFromModel()}};a.prototype.getCurrentTimeFromModel=function(){var a=this.model_.getShadowDateTime(),b=new Date(a.year,a.month-1,a.day,a.hour,a.minute);a.delete();return b};a.SHADOWS_ON_IMAGE=
"/static/images/web/ei_shadowsCastOn.svg";a.SHADOWS_OFF_IMAGE="/static/images/web/ei_shadowsCastOff.svg";a.SHADOWS_ON_TEXT=$t("Shadows On");a.SHADOWS_OFF_TEXT=$t("Shadows Off");return a}(),L=function(){function a(b){var d=this;this.model_=b;this.fogImageSrc=c.observable(a.FOG_OFF_IMAGE);this.fogImageText=c.observable(a.FOG_OFF_TEXT);this.fogStartValue=c.observable(0);this.fogEndValue=c.observable(100);this.color=c.observable({r:0,g:0,b:0,alpha:1});this.fogEnabled=c.observable(!1);this.useBackgroundColor=
c.observable(!0);this.useBackgroundColor.subscribe(function(a){d.model_.useBackgroundColor(a)});this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){var b=this.model_.fogEnabled();this.fogEnabled(b);var c=this.model_.getFogColor(),d={r:c.red(),g:c.green(),b:c.blue(),alpha:c.alpha()};this.color(d);c.delete();this.fogImageSrc(b?a.FOG_ON_IMAGE:a.FOG_OFF_IMAGE);this.fogImageText(b?a.FOG_ON_TEXT:a.FOG_OFF_TEXT);this.updateFogStartEndValuesFromModel()};a.prototype.updateFogStartEndValuesFromModel=
function(){this.fogStartValue(this.model_.getFogStartValue());this.fogEndValue(this.model_.getFogEndValue())};a.prototype.toggleFog=function(){var a=!this.model_.fogEnabled();this.model_.enableFog(a);this.updateViewModelFromModel()};a.prototype.onStartEndFogValuesChanged=function(a,b){goog.math.nearlyEquals(a,this.fogStartValue(),1)||(this.fogStartValue(a),this.model_.setFogStartValue(a));goog.math.nearlyEquals(b,this.fogEndValue(),1)||(this.fogEndValue(b),this.model_.setFogEndValue(b))};a.prototype.onColorChange=
function(a){this.useBackgroundColor()||this.model_.setFogColor(a.r,a.g,a.b,a.alpha||1)};a.FOG_ON_IMAGE="/static/images/web/tb_fog_on.svg";a.FOG_OFF_IMAGE="/static/images/web/tb_fog_off.svg";a.FOG_ON_TEXT=$t("Fog On");a.FOG_OFF_TEXT=$t("Fog Off");return a}(),R=function(){function a(b){this.model_=b;this.smoothImageSrc=c.observable(a.SMOOTH_OFF_IMAGE);this.smoothImageText=c.observable(a.SMOOTH_OFF_TEXT);this.softenImageSrc=c.observable(a.SOFTEN_OFF_IMAGE);this.softenImageText=c.observable(a.SOFTEN_OFF_TEXT);
this.angle=c.observable(30);this.canSmooth=c.observable(!1);this.canSoften=c.observable(!1);this.smoothDetail=c.observable("");this.softenDetail=c.observable("");this.nothingToSmoothSoften=c.observable(!0);this.isBound=!1;this.updateViewModelFromModel()}a.prototype.onSlideAngle=function(a){this.isBound&&(this.maybeSoftenSmooth(),this.angle(a),this.updateViewModelFromModel())};a.prototype.toggleSmooth=function(){this.canSmooth()&&this.model_.setSmoothOn(!1);this.canSmooth(!this.canSmooth());this.maybeSoftenSmooth();
this.updateViewModelFromModel()};a.prototype.toggleSoften=function(){this.canSoften()&&this.model_.setSoftenOn(!1);this.canSoften(!this.canSoften());this.maybeSoftenSmooth();this.updateViewModelFromModel()};a.prototype.updateViewModelFromModel=function(){var b=this.model_.getSelectedEdgeCount();this.nothingToSmoothSoften(0===b);this.nothingToSmoothSoften()&&(this.canSmooth(!1),this.canSoften(!1));var b=this.model_.getSmoothedEdgeCount(),c=this.model_.getSoftenedEdgeCount();this.nothingToSmoothSoften()?
(b=$t("No selected edges"),this.smoothDetail(b),this.softenDetail(b)):(0===b?this.smoothDetail($t("No smoothed edges")):1===b?this.smoothDetail($t("1 smoothed edge")):this.smoothDetail($t("{NUM_EDGES} smoothed edges").replace("{NUM_EDGES}",b.toLocaleString())),0===c?this.softenDetail($t("No softened edges")):1===c?this.softenDetail($t("1 softened edge")):this.softenDetail($t("{NUM_EDGES} softened edges").replace("{NUM_EDGES}",c.toLocaleString())));this.smoothImageSrc(this.canSmooth()?a.SMOOTH_ON_IMAGE:
a.SMOOTH_OFF_IMAGE);this.smoothImageText(this.canSmooth()?a.SMOOTH_ON_TEXT:a.SMOOTH_OFF_TEXT);this.softenImageSrc(this.canSoften()?a.SOFTEN_ON_IMAGE:a.SOFTEN_OFF_IMAGE);this.softenImageText(this.canSoften()?a.SOFTEN_ON_TEXT:a.SOFTEN_OFF_TEXT)};a.prototype.toRadians=function(a){return Math.PI/180*a};a.prototype.maybeSoftenSmooth=function(){var a=this.toRadians(this.angle());this.model_.softenSmooth(this.canSoften(),this.canSmooth(),a)};a.SMOOTH_ON_IMAGE="/static/images/web/ei_edge_smooth_on.svg";a.SMOOTH_OFF_IMAGE=
"/static/images/web/ei_edge_smooth_off.svg";a.SMOOTH_ON_TEXT=$t("Smoothing On");a.SMOOTH_OFF_TEXT=$t("Smoothing Off");a.SOFTEN_ON_IMAGE="/static/images/web/ei_edge_soften_on.svg";a.SOFTEN_OFF_IMAGE="/static/images/web/ei_edge_soften_off.svg";a.SOFTEN_ON_TEXT=$t("Soften Coplanar On");a.SOFTEN_OFF_TEXT=$t("Soften Coplanar Off");return a}();a=function(a){function b(){var c=a.call(this)||this;c.shadowsBrowser_=e.CreateShadowsBrowserInstance();return c}__extends(b,a);b.getInstance=function(){b.staticInstance_||
(b.staticInstance_=new b);return b.staticInstance_};b.prototype.initialize=function(a){};b.prototype.onUpdateFogSettings=function(){this.contentsRendered_&&goog.isDefAndNotNull(this.fogViewModel_)&&this.fogViewModel_.updateViewModelFromModel()};b.prototype.onUpdateFogStartEnd=function(){this.contentsRendered_&&goog.isDefAndNotNull(this.fogViewModel_)&&this.fogViewModel_.updateFogStartEndValuesFromModel()};b.prototype.onUpdateDisplaySettings=function(){this.contentsRendered_&&goog.isDefAndNotNull(this.visibilityViewModel_)&&
this.visibilityViewModel_.updateViewModelFromModel();this.contentsRendered_&&goog.isDefAndNotNull(this.componentEditViewModel_)&&this.componentEditViewModel_.updateViewModelFromModel()};b.prototype.onUpdateEdgeSettings=function(){this.contentsRendered_&&goog.isDefAndNotNull(this.edgeViewModel_)&&this.edgeViewModel_.updateViewModelFromModel()};b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){a.contentsRendered_=!0;a.createUnhideControls();a.createVisibilityControls();
a.createComponentEditControls();a.createShadowControls();a.createFogControls();a.createEdgeControls();b()})};b.prototype.createUnhideControls=function(){var a=this.browserElement_.querySelector(".display-unhide-content");this.unhideViewModel_=new h;c.applyBindings(this.unhideViewModel_,a)};b.prototype.createVisibilityControls=function(){var a=e.GetWebDisplayInstance(),b=this.browserElement_.querySelector(".display-visibility-content");this.visibilityViewModel_=new m(a);c.applyBindings(this.visibilityViewModel_,
b)};b.prototype.createComponentEditControls=function(){var a=e.GetWebDisplayInstance(),b=this.browserElement_.querySelector(".display-edit-visibility-content");this.componentEditViewModel_=new y(a);c.applyBindings(this.componentEditViewModel_,b)};b.prototype.createShadowControls=function(){this.browserContent_=this.browserElement_.querySelector(".display-shadows-content");this.shadowsViewModel_=new K(this.shadowsBrowser_);c.applyBindings(this.shadowsViewModel_,this.browserContent_);this.shadowsViewModel_.isBound=
!0;this.shadowsViewModel_.updateViewModelFromModel()};b.prototype.createFogControls=function(){var a=this,b=e.GetWebFogInstance(),g=this.browserElement_.querySelector(".display-fog-content");this.fogViewModel_=new L(b);var h=this.browserElement_.querySelector(".near-far-slider");d.create(h,{start:[this.fogViewModel_.fogStartValue(),this.fogViewModel_.fogEndValue()],connect:!0,range:{min:0,max:100},step:1});h.noUiSlider.on("update",function(){var b=h.noUiSlider.get(),c=parseFloat(b[0]),b=parseFloat(b[1]);
a.fogViewModel_.onStartEndFogValuesChanged(c,b)});this.fogViewModel_.fogStartValue.subscribe(function(a){var b=h.noUiSlider.get(),b=parseFloat(b[0]);1<Math.abs(b-a)&&h.noUiSlider.set([a,null])});this.fogViewModel_.fogEndValue.subscribe(function(a){var b=h.noUiSlider.get(),b=parseFloat(b[1]);1<Math.abs(b-a)&&h.noUiSlider.set([null,a])});var b=this.browserElement_.querySelector(".fog-color-container"),y=new f.ColorPicker;y.render(b);y.colorChangedEvent.listen(function(b){a.fogViewModel_.onColorChange(b)});
this.fogViewModel_.color.subscribe(function(a){y.setColor(a)});c.applyBindings(this.fogViewModel_,g);this.fogViewModel_.updateViewModelFromModel()};b.prototype.createEdgeControls=function(){var a=this,b=e.GetWebEntityInfoInstance();this.browserContent_=this.browserElement_.querySelector(".display-edges-content");this.edgeViewModel_=new R(b);c.applyBindings(this.edgeViewModel_,this.browserContent_);this.edgeViewModel_.isBound=!0;this.edgeViewModel_.angle.subscribe(function(b){a.edgeViewModel_.onSlideAngle(b)});
this.edgeViewModel_.updateViewModelFromModel()};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"display-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"display-browser-top"},enumerable:!0,configurable:!0});b.prototype.onFileNewOrOpen=function(){this.contentsRendered_&&(this.visibilityViewModel_.updateViewModelFromModel(),this.componentEditViewModel_.updateViewModelFromModel(),this.fogViewModel_.updateViewModelFromModel(),
this.shadowsViewModel_.updateViewModelFromModel())};Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.displayBrowser},enumerable:!0,configurable:!0});return b}(g.SidebarBrowser);b.default=a});
define("EntityInfoModel",["require","exports","EntityType","GlobalConstants"],function(a,b,c,d){function e(){return{fields:[],commonMaterial:null,commonBackMaterial:null,commonLayer:null}}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.webEntityInfo_=b;this.entityType=this.webEntityInfo_.getInfoType();this.parseTitle()}Object.defineProperty(a.prototype,"selectionCount",{get:function(){return this.webEntityInfo_.getSelectionCount()},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"isVisible",{get:function(){return this.webEntityInfo_.isVisible()},set:function(a){this.webEntityInfo_.setVisible(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isLocked",{get:function(){return this.webEntityInfo_.isLocked()},set:function(a){this.webEntityInfo_.setLocked(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"castsShadows",{get:function(){return this.webEntityInfo_.castsShadows()},set:function(a){this.webEntityInfo_.setCastsShadows(a)},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"receivesShadows",{get:function(){return this.webEntityInfo_.receivesShadows()},set:function(a){this.webEntityInfo_.setReceivesShadows(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isSoftenOn",{get:function(){return this.webEntityInfo_.getSoftenOn()},set:function(a){this.webEntityInfo_.setSoftenOn(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isSmoothOn",{get:function(){return this.webEntityInfo_.getSmoothOn()},
set:function(a){this.webEntityInfo_.setSmoothOn(a)},enumerable:!0,configurable:!0});a.prototype.getImageFormattedWidth=function(){var a=this.webEntityInfo_.getImage(),b=a.formattedWidth;a.delete();return b};a.prototype.setImageWidth=function(a,b){this.webEntityInfo_.setImageWidth(a,b)};a.prototype.getImageFormattedHeight=function(){var a=this.webEntityInfo_.getImage(),b=a.formattedHeight;a.delete();return b};a.prototype.setImageHeight=function(a,b){this.webEntityInfo_.setImageHeight(a,b)};a.prototype.isImageUniform=
function(){var a=this.webEntityInfo_.getImage(),b=a.isUniform;a.delete();return b};a.prototype.getDimensionInfoModel=function(){return this.webEntityInfo_.getDimensionInfo()};a.prototype.getLabelInfoModel=function(){return this.webEntityInfo_.getLabelInfo()};a.prototype.cleanupEntityData=function(a){goog.isDefAndNotNull(a.commonMaterial)&&a.commonMaterial.delete();goog.isDefAndNotNull(a.commonBackMaterial)&&a.commonBackMaterial.delete()};a.prototype.getInfo=function(){var a=e(),b=!0;switch(this.entityType){case c.EntityType.Component:case c.EntityType.ComponentInstance:a=
this.getComponentInfo();break;case c.EntityType.Edge:a=this.getEdgeInfo();break;case c.EntityType.Face:a=this.getFaceInfo();break;case c.EntityType.ArcCurve:case c.EntityType.Curve:a=this.getCurveInfo(this.entityType);break;case c.EntityType.Image:a=this.getImageInfo();b=!1;break;case c.EntityType.ConstructionLine:case c.EntityType.ConstructionPoint:b=!1;break;case c.EntityType.DimensionLinear:case c.EntityType.DimensionRadial:a=this.getDimensionInfo();break;case c.EntityType.SolidComponent:var a=
this.getComponentInfo(),d=this.getSolidInfo().fields;a.fields=a.fields.concat(d);break;case c.EntityType.SolidGroup:a=this.getSolidInfo()}b&&(a.commonMaterial=this.getCommonMaterial(!1));a.commonLayer=this.getCommonLayer();return a};a.prototype.getCommonLayer=function(){var a={id:-1,thumbnail:"/static/images/web/wi_Layers.svg",name:$t("Multiple"),isActive:!1,isHidden:!1,isDefaultLayer:!1},b=this.webEntityInfo_.hasCommonLayer()?this.webEntityInfo_.getCommonLayer():null;goog.isDefAndNotNull(b)&&(a.id=
b.getId(),a.thumbnail=d.THUMBNAIL_DATA_URL+b.getThumbnail(),a.name=b.getName(),a.isActive=b.isActive(),a.isHidden=b.isHidden(),a.isDefaultLayer=b.isDefaultLayer(),b.delete());return a};a.prototype.getCommonMaterial=function(a){a=a?this.webEntityInfo_.getCommonBackMaterial():this.webEntityInfo_.getCommonMaterial();a.hasNothingSelected?a.name=$t("No selection"):!a.isSingleSelection&&a.hasNoCommonMaterial?a.name=$t("Multiple"):a.hasNoMaterial&&(a.name=$t("Default material"));a.thumbnail=a.hasNoMaterial?
"url("+a.thumbnail+")":"url("+d.THUMBNAIL_DATA_URL+a.thumbnail+")";return a};a.prototype.getEdgeInfo=function(){var a=e(),b=this.webEntityInfo_.getLengthAsString(),c=this.webEntityInfo_.getLengthCanChange();a.fields.push({fieldType:f.Length,label:$t("Length:"),value:b,editable:c});return a};a.prototype.getFaceInfo=function(){var a=e(),b=this.webEntityInfo_.getAreaAsString();a.fields.push({fieldType:f.Area,label:$t("Area:"),value:b,editable:!1});b=this.getCommonMaterial(!0);a.commonBackMaterial=b;
return a};a.prototype.getSolidInfo=function(){var a=e(),b=this.webEntityInfo_.getVolumeAsString();goog.string.isEmptyOrWhitespaceSafe(b)||a.fields.push({fieldType:f.Volume,label:$t("Volume:"),value:b,editable:!1});return a};a.prototype.getCurveInfo=function(a){var b=e(),d=this.webEntityInfo_.getCurve();a===c.EntityType.ArcCurve&&b.fields.push({fieldType:f.Radius,label:$t("Radius:"),value:d.radiusFormatted,editable:d.radiusCanChange});b.fields.push({fieldType:f.SegmentCount,label:$t("Segments:"),value:d.segmentCount,
editable:d.segmentCountCanChange});b.fields.push({fieldType:f.Length,label:$t("Length:"),value:d.lengthFormatted,editable:d.lengthCanChange});d.delete();return b};a.prototype.getComponentInfo=function(){var a=e(),b=this.webEntityInfo_.getInstanceName();a.fields.push({fieldType:f.InstanceName,label:$t("Instance:"),value:b,editable:!0});b=this.webEntityInfo_.getDefinitionName();a.fields.push({fieldType:f.DefinitionName,label:$t("Definition:"),value:b,editable:!0});return a};a.prototype.getImageInfo=
function(){var a=e(),b=this.webEntityInfo_.getImage(),c=b.path;if(0<c.length){c=goog.string.path.baseName(c);a.fields.push({fieldType:f.InstanceName,label:$t("Name:"),value:c,editable:!1});var c=b.pixelWidth,d=b.pixelHeight;a.fields.push({fieldType:f.Size,label:$t("Size (px):"),value:[c,d].join(" x "),editable:!1})}b.delete();return a};a.prototype.getDimensionInfo=function(){var a=e(),b;b=this.getDimensionInfoModel().hasCommonText()?this.getDimensionInfoModel().getCommonText():$t("Multiple");a.fields.push({fieldType:f.DefinitionName,
label:$t("Text:"),value:b,editable:!1});return a};a.prototype.parseTitle=function(){var a=this.webEntityInfo_.getTitle(),a=goog.string.makeSafe(a),b=/(.+)([(]\d.+[)])/g.exec(a);goog.isDefAndNotNull(b)&&3===b.length?(this.title=b[1],this.numberInModel=b[2]):(this.title=a,this.numberInModel="")};a.prototype.setFieldValue=function(a){switch(a.fieldType){case f.Length:this.webEntityInfo_.setLength(a.value);break;case f.SegmentCount:isNaN(Number(a.value))||isNaN(parseInt(a.value,10))||this.webEntityInfo_.setSegmentCount(parseInt(a.value,
10));break;case f.Radius:this.webEntityInfo_.setRadius(a.value);break;case f.InstanceName:this.webEntityInfo_.setInstanceName(a.value);break;case f.DefinitionName:this.webEntityInfo_.setDefinitionName(a.value)}};a.prototype.setLayer=function(a){this.webEntityInfo_.setLayer(a.name)};a.prototype.removeCommonMaterial=function(){this.webEntityInfo_.removeCommonMaterial()};a.prototype.removeCommonBackMaterial=function(){this.webEntityInfo_.removeCommonBackMaterial()};return a}();b.EntityInfoModel=a;var f;
(function(a){a[a.Area=0]="Area";a[a.DefinitionName=1]="DefinitionName";a[a.Length=2]="Length";a[a.InstanceName=3]="InstanceName";a[a.Radius=4]="Radius";a[a.SegmentCount=5]="SegmentCount";a[a.Size=6]="Size";a[a.Volume=7]="Volume"})(f||(f={}))});
define("DimensionDetailsWidget",["require","exports","knockout","Bindings/index","FontSelector"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,f){void 0===f&&(f=!1);var m=this;this.ArrowType=d.DimensionArrow;this.TextAlign=d.DimensionTextAlignment;this.TextPosition=d.DimensionTextPosition;this.forRadial=b.containsRadial();this.forGlobal=f;this.fontFaceSelector_=new e.FontFaceSelect($t("Multiple Fonts"));this.fontFaceSelector_.onChange(function(a){b.setCommonFont(a,
!1,!1,e.defaultFontSize)});var y;b.hasCommonFont()&&(y={faceName:b.getCommonFontFace(),isBold:b.getCommonFontBold(),isItalic:b.getCommonFontItalic(),pointSize:b.getCommonFontSize()});this.fontSelector_=new e.FontSelector({defaultFont:y,includeSize:!0});this.fontSelector_.onChange(function(a){goog.isDefAndNotNull(a.faceName)&&!isNaN(a.pointSize)&&m.dimensionInfo.setCommonFont(a.faceName,a.isBold,a.isItalic,a.pointSize)});this.canSetArrowType=c.observable(b.canSetArrowType());this.arrowType=c.observable(b.getArrowType());
this.canSetTextAlign=c.observable(b.canSetTextAlignment());this.textAlignment=c.observable(b.getTextAlignment());this.canSetTextPosition=c.observable(b.canSetTextPosition());this.textPosition=c.observable(b.getTextPosition());this.hasCommonFont=c.observable(b.hasCommonFont());this.dimensionInfo=b;this.canSetAlignAboveOrOutside=c.computed(function(){return m.canSetTextAlign()&&m.textPosition()===d.DimensionTextPosition.CENTERED})}a.prototype.render=function(){goog.isDefAndNotNull(this.contents_)||
(this.contents_=goog.soy.renderAsFragment(SketchUpTemplates.dimensionDetails,{}),c.applyBindings(this,this.contents_),this.contents_.querySelector(".face-selector-wrapper").appendChild(this.fontFaceSelector_.render()),this.contents_.querySelector(".font-selector-wrapper").appendChild(this.fontSelector_.render()));return this.contents_};a.prototype.setArrowType=function(a){this.canSetArrowType()&&(this.arrowType(a),this.dimensionInfo.setArrowType(a))};a.prototype.setTextAlign=function(a){var b=!this.canSetAlignAboveOrOutside()&&
(a===d.DimensionTextAlignment.ABOVE||a===d.DimensionTextAlignment.OUTSIDE);this.canSetTextAlign()&&!b&&(this.textAlignment(a),this.dimensionInfo.setTextAlignment(a))};a.prototype.setTextPosition=function(a){this.canSetTextPosition()&&(this.textPosition(a),this.dimensionInfo.setTextPosition(a),a!==d.DimensionTextPosition.CENTERED&&this.textAlignment()!==d.DimensionTextAlignment.CENTERED&&this.textAlignment()!==d.DimensionTextAlignment.SCREEN&&this.setTextAlign(d.DimensionTextAlignment.CENTERED))};
a.prototype.destroy=function(){this.fontSelector_.destroy()};return a}();b.DimensionDetailsWidget=a});
define("ListFilter",["require","exports"],function(a,b){function c(a){return a.name()}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,d,g,h){void 0===h&&(h=c);this.container_=b;this.listFilterItems_=d;this.displayText_=g;this.textGetter_=h;this.displayText_=this.displayText_||$t("Search");this.setFilterItems(d)}a.prototype.setFilterItems=function(a){this.listFilterItems_=a;this.excludedItems_=[];this.includedItems_=this.listFilterItems_.slice()};a.prototype.setOnFilterCalback=
function(a){this.onFilterChangedCallback_=a};a.prototype.render=function(){var a=this,b=goog.soy.renderAsFragment(SketchUpTemplates.listFilter,{});this.container_.appendChild(b);this.listFilterInput_=b.querySelector("input");goog.string.isEmptyOrWhitespace(this.displayText_)||(this.listFilterInput_.placeholder=this.displayText_);this.listFilterInput_.addEventListener("input",function(b){a.onInput()})};a.prototype.clear=function(){this.listFilterInput_.value=""};a.prototype.onInput=function(){this.doFilter(this.listFilterInput_.value);
this.onFilterEvent()};a.prototype.doFilter=function(a){if(goog.string.isEmptyOrWhitespaceSafe(a))this.excludedItems_=[],this.includedItems_=this.listFilterItems_.slice();else{a=a.toLowerCase();this.includedItems_=[];this.excludedItems_=[];for(var b=0,c=this.listFilterItems_;b<c.length;b++){var d=c[b],m=this.textGetter_(d);goog.string.isEmptyOrWhitespaceSafe(m)||(0<=m.toLowerCase().indexOf(a)?this.includedItems_.push(d):this.excludedItems_.push(d))}}};a.prototype.onFilterEvent=function(){if(goog.isDefAndNotNull(this.onFilterChangedCallback_))this.onFilterChangedCallback_(this.includedItems_.slice(),
this.excludedItems_.slice())};return a}();b.ListFilter=a});
define("TextInput",["require","exports","SketchUpEvent"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});b.EditField=function(a,b){void 0===b&&(b=!1);return new goog.Promise(function(c,g){var h=goog.dom.createDom("INPUT",{type:"text",value:a.textContent,"class":"scene-name-editable"});h.addEventListener("click",function(a){a.stopPropagation()});goog.dom.replaceNode(h,a);h.focus();b&&h.select();var m=!1,y=function(){m||(m=!0,a.textContent=h.value,goog.dom.replaceNode(a,h),c(h.value))};
h.addEventListener("keydown",function(b){var c=b.keyCode||b.which;c==goog.events.KeyCodes.ENTER?(b.stopPropagation(),y()):c==goog.events.KeyCodes.ESC&&(b.stopPropagation(),m=!0,goog.dom.replaceNode(a,h),g(null))});h.addEventListener("blur",function(a){y()})})};a=function(){function a(b,d){var g=this;this.changeEvent_=c.SketchUpEvents.Create();this.label_=b;this.initialValue_=d;this.content_=b=goog.soy.renderAsFragment(SketchUpTemplates.inputText,{title:b,initialValue:d});var h=b.querySelector("input");
h.addEventListener("keypress",function(a){(a.keyCode||a.which)==goog.events.KeyCodes.ENTER&&g.fireTextChange(h.value)});h.addEventListener("blur",function(a){g.fireTextChange(h.value)})}a.prototype.addToContainer=function(a){a.appendChild(this.content_)};a.prototype.fireTextChange=function(a){this.changeEvent_.trigger(a)};Object.defineProperty(a.prototype,"onChange",{get:function(){return this.changeEvent_},enumerable:!0,configurable:!0});return a}();b.LabeledTextInput=a});
define("LayerPicker","require exports knockout knockout.mapping Bindings/index ColorPicker DialogPrompts GlobalConstants ListFilter SketchUpEvent TextInput".split(" "),function(a,b,c,d,e,f,g,h,m,y,K){Object.defineProperty(b,"__esModule",{value:!0});var L=null,R=null;b.pickLayer=function(a){return R=new goog.Promise(function(b,c){L=new W(a);L.layerPickedEvent.listen(function(a){L.cleanUp();L=null;b(a)})})};b.exitPickLayer=function(){goog.isDefAndNotNull(R)&&(R.cancel(),R=null);goog.isDefAndNotNull(L)&&
(L.cleanUp(),L=null)};var W=function(){function a(b){this.layerColorPickerDoneHandler_=this.layerColorPickerCancelHandler_=this.layerColorPickerHandler_=null;this.layerPickerConfig_=b;this.layerPickerModel_=new ga;this.layerPickerViewModel_=new la(this.layerPickerConfig_,this.layerPickerModel_);this.layerPickerContent_=goog.soy.renderAsFragment(SketchUpTemplates.layersContainer,{isEditMode:this.layerPickerConfig_.isEditMode});this.layerPickerConfig_.container.appendChild(this.layerPickerContent_);
this.setupFilter();this.setupOverlay();c.applyBindings(this.layerPickerViewModel_,this.layerPickerContent_)}a.prototype.setupFilter=function(){var a=this.layerPickerConfig_.container.querySelector(".layers-filter"),b=this.layerPickerViewModel_.getLayerFilterItems(),a=new m.ListFilter(a,b,$t("Search layers"));a.setOnFilterCalback(function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.isFiltered(!0)}for(b=0;b<a.length;b++)d=a[b],d.isFiltered(!1)});a.render()};a.prototype.setupOverlay=function(){var a=
this;if(this.layerPickerConfig_.isEditMode&&goog.isDefAndNotNull(this.layerPickerViewModel_)){var b=this.layerPickerConfig_.container,c=goog.soy.renderAsFragment(SketchUpTemplates.layersContainerOverlay,{});b.appendChild(c);var d=c.querySelector("#layers-container-overlay-close-button"),e=c.querySelector(".layers-container-overlay-ok-button"),b=c.querySelector(".layers-container-overlay-colorpicker");this.layerColorPicker_=new f.ColorPicker;this.layerColorPicker_.render(b);this.layerColorPickerHandler_=
function(b){a.layerColorPicker_.setColor(b.currentColor);goog.isDefAndNotNull(a.layerColorPickerCancelHandler_)&&d.removeEventListener("click",a.layerColorPickerCancelHandler_);goog.isDefAndNotNull(a.layerColorPickerDoneHandler_)&&e.removeEventListener("click",a.layerColorPickerDoneHandler_);a.layerColorPickerCancelHandler_=function(b){b.stopPropagation();b.preventDefault();a.showOverlay(!1)};a.layerColorPickerDoneHandler_=function(c){c=a.layerColorPicker_.getColor();b.onUpdate(c);a.showOverlay(!1)};
d.addEventListener("click",a.layerColorPickerCancelHandler_);e.addEventListener("click",a.layerColorPickerDoneHandler_);a.showOverlay(!0)};this.layerPickerViewModel_.pickLayerColorEvent.listen(this.layerColorPickerHandler_)}};a.prototype.showOverlay=function(a){var b=this.layerPickerConfig_.container,c=b.querySelector(".layers-content .layers-container"),d=b.querySelector(".layers-content #layers-browser-bottom-actions-bar"),b=b.querySelector(".layers-content .layers-container-overlay");a?(c.classList.add("invisible"),
d.classList.add("invisible"),b.classList.remove("invisible")):(b.classList.add("invisible"),c.classList.remove("invisible"),d.classList.remove("invisible"))};Object.defineProperty(a.prototype,"layerPickedEvent",{get:function(){return this.layerPickerViewModel_.layerPickedEvent},enumerable:!0,configurable:!0});a.prototype.onLayerAdded=function(a){this.layerPickerViewModel_.update()};a.prototype.onLayerRemoved=function(a){this.layerPickerViewModel_.update()};a.prototype.onLayerUndoChange=function(a){this.layerPickerViewModel_.onLayerUndoChange(a)};
a.prototype.cleanUp=function(){goog.dom.removeChildren(this.layerPickerContent_);this.layerPickerViewModel_.pickLayerColorEvent.remove(this.layerColorPickerHandler_);this.layerPickerViewModel_=null;goog.isDefAndNotNull(this.layerPickerModel_)&&(this.layerPickerModel_.cleanUp(),this.layerPickerModel_=null)};a.prototype.sortLayersAtoZ=function(){this.layerPickerViewModel_.sortLayersAtoZ()};a.prototype.sortLayersZtoA=function(){this.layerPickerViewModel_.sortLayersZtoA()};a.prototype.addLayer=function(){this.layerPickerViewModel_.addLayer()};
a.prototype.addSelectionToLayer=function(){this.layerPickerViewModel_.addSelectionToLayer()};a.prototype.colorByLayer=function(){this.layerPickerViewModel_.colorByLayer()};a.prototype.purgeUnusedLayers=function(){this.layerPickerViewModel_.purgeUnusedLayers()};return a}();b.LayerPickerView=W;var la=function(){function a(b,d){this.layerPickerConfig_=b;this.layerPickerModel_=d;this.layers=c.observableArray();this.selectedLayer=c.observable();this.selectedLayerId=c.observable();this.isEditMode=this.layerPickerConfig_.isEditMode;
this.layerPickedEvent_=y.SketchUpEvents.Create();this.pickLayerColorEvent_=y.SketchUpEvents.Create();this.update()}a.prototype.update=function(){this.layers(this.getLayers());var a;goog.isDefAndNotNull(this.layerPickerConfig_.selectedLayer)&&(a=this.getLayerById(this.layerPickerConfig_.selectedLayer.id));a=a||this.getActiveLayer();this.selectedLayer(a);this.selectedLayerId(a.id())};Object.defineProperty(a.prototype,"layerPickedEvent",{get:function(){return this.layerPickedEvent_},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"pickLayerColorEvent",{get:function(){return this.pickLayerColorEvent_},enumerable:!0,configurable:!0});a.prototype.getLayerFilterItems=function(){for(var a=[],b=0,c=this.layers();b<c.length;b++)a.push(c[b]);return a};a.prototype.getLayers=function(){var a=this;return this.layerPickerModel_.getLayers().map(function(b){return a.toObservableLayer(b)})};a.prototype.onLayerPicked=function(a){a=a||this.selectedLayer();this.layerPickedEvent.trigger(this.toWebLayer(a));
return!1};a.prototype.onChangeVisibility=function(a){if(a.isActive())return!1;a.isHidden(!a.isHidden());this.layerPickerModel_.hideLayer(this.toWebLayer(a));return!1};a.prototype.onChangeColor=function(a){var b=this,c=this.layerPickerModel_.getLayerColor(a.name());this.pickLayerColorEvent.trigger({currentColor:c,onUpdate:function(c){b.setLayerColor(a.name(),c)}});return!1};a.prototype.onDelete=function(a){if(a.isActive()||a.isDefaultLayer)return!1;var b=this.toWebLayer(a),c=this.layerPickerModel_.isLayerUsed(b);
this.layers.remove(a);this.layerPickerModel_.removeLayer(b);c&&g.ShowInfoDialog($t("Information"),$t("All of the entities were moved to the active layer."));return!1};a.prototype.onRename=function(a,b){var c=this;if(a.isDefaultLayer)return!1;var d=b.target;this.handleLayerRenameUI(d).then(function(b){a.name()===b?d.textContent=a.name():c.layerPickerModel_.renameLayer(a.name(),b)?a.name(b):(d.textContent=a.name(),window.setTimeout(function(){g.ShowInfoDialog($t("SketchUp"),$t("Layer name must be unique."))}))});
return!1};a.prototype.onMakeActive=function(a){goog.isDefAndNotNull(a)&&!a.isActive()&&(this.selectedLayer().isActive(!1),this.selectedLayer(a),this.selectedLayer().isActive(!0),this.selectedLayerId(a.id()),this.layerPickerModel_.setActiveLayer(this.toWebLayer(a)));return!1};a.prototype.setLayerColor=function(a,b){this.layerPickerModel_.setLayerColor(a,b)};a.prototype.addLayer=function(){this.layerPickerModel_.addLayer()};a.prototype.addSelectionToLayer=function(){this.layerPickerModel_.addSelectionToLayer()};
a.prototype.colorByLayer=function(){this.layerPickerModel_.colorByLayer()};a.prototype.purgeUnusedLayers=function(){this.layerPickerModel_.purgeUnusedLayers()};a.prototype.sortLayersAtoZ=function(){this.sortLayersLexicographically(!0)};a.prototype.sortLayersZtoA=function(){this.sortLayersLexicographically(!1)};a.prototype.sortLayersLexicographically=function(a){this.sortLayers(function(b,c){return b.isDefaultLayer?-1:c.isDefaultLayer?1:(a?1:-1)*b.name().localeCompare(c.name())})};a.prototype.sortLayers=
function(a){a=this.layers().sort(a);this.layers(a)};a.prototype.getActiveLayer=function(){return goog.array.find(this.layers(),function(a){return!0===a.isActive()})};a.prototype.getLayerById=function(a){return goog.array.find(this.layers(),function(b){return b.id()===a})};a.prototype.handleLayerRenameUI=function(a){var b=a.textContent;return K.EditField(a,!0).then(function(a){a=a.trim();goog.string.isEmptyOrWhitespace(a)&&(a=b);return a}).thenCatch(function(){return b})};a.prototype.onLayerUndoChange=
function(a){a=this.getLayerById(a);goog.isDefAndNotNull(a)&&this.refreshObservableLayer(a)};a.prototype.toWebLayer=function(a){return d.toJS(a)};a.prototype.toObservableLayer=function(a){return{id:c.observable(a.id),name:c.observable(a.name),thumbnail:c.observable(a.thumbnail),isActive:c.observable(a.isActive),isHidden:c.observable(a.isHidden),isDefaultLayer:a.isDefaultLayer,isFiltered:c.observable(!1)}};a.prototype.refreshObservableLayer=function(a){var b=this.layerPickerModel_.getLayerById(a.id());
goog.isDefAndNotNull(b)&&(a.name(b.name),a.thumbnail(b.thumbnail),a.isActive(b.isActive),a.isHidden(b.isHidden))};return a}(),ga=function(){function a(){this.layerModel_=e.CreateLayerBrowserInstance()}a.prototype.toWebLayer=function(a){return{id:a.getId(),thumbnail:h.THUMBNAIL_DATA_URL+a.getThumbnail(),name:a.getName(),isActive:a.isActive(),isHidden:a.isHidden(),isDefaultLayer:a.isDefaultLayer()}};a.prototype.getLayerById=function(a){a=this.layerModel_.getLayerById(a);var b=this.toWebLayer(a);a.delete();
return b};a.prototype.getLayerColor=function(a){a=this.layerModel_.getLayerByName(a);var b=a.getColor(),c={r:b.red(),g:b.green(),b:b.blue(),alpha:b.alpha()};b.delete();a.delete();return c};a.prototype.setLayerColor=function(a,b){var c=b.r,d=b.g,e=b.b;b=goog.isDefAndNotNull(b.alpha)?b.alpha:1;c=new Module.WebColor(c,d,e,b);this.layerModel_.getLayerByName(a).setColor(c);c.delete()};a.prototype.getLayers=function(){goog.isDefAndNotNull(this.layerModel_)||(this.layerModel_=e.CreateLayerBrowserInstance());
for(var a=this.layerModel_.getLayers(),b=[],c=0;c<a.size();++c){var d=a.get(c);b.push(this.toWebLayer(d));d.delete()}a.delete();return b};a.prototype.addLayer=function(){this.layerModel_.addLayer()};a.prototype.setActiveLayer=function(a){a=this.layerModel_.getLayerByName(a.name);a.setActive();a.delete()};a.prototype.purgeUnusedLayers=function(){this.layerModel_.purgeLayers()};a.prototype.colorByLayer=function(){this.layerModel_.toggleColorByLayer()};a.prototype.removeLayer=function(a){a.isActive||
(a=this.layerModel_.getLayerByName(a.name),a.remove(),a.delete())};a.prototype.addSelectionToLayer=function(){this.layerModel_.addSelectionToActiveLayer()};a.prototype.hideLayer=function(a){if(!a.isActive){var b=this.layerModel_.getLayerByName(a.name);b.setHidden(a.isHidden);b.delete()}};a.prototype.renameLayer=function(a,b){a=this.layerModel_.getLayerByName(a);b=a.rename(b);a.delete();return b};a.prototype.isLayerUsed=function(a){a=this.layerModel_.getLayerByName(a.name);var b=a.isUsed();a.delete();
return b};a.prototype.cleanUp=function(){this.layerModel_.delete();this.layerModel_=null};return a}()});
define("EntityInfoViewModel","require exports knockout knockout.mapping Bindings/index DialogPrompts EntityType SketchUpEvent".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.pickLayerEvent_=h.SketchUpEvents.Create();this.changeCommonMaterialEvent_=h.SketchUpEvents.Create();this.changeBackMaterialEvent_=h.SketchUpEvents.Create();this.entityModel_=b;this.entityData=this.initializeFromModel();this.title=c.observable(this.entityModel_.title);
this.selectionCount=c.observable(this.entityModel_.selectionCount);this.numberInModel=c.observable(this.entityModel_.numberInModel);this.locked=c.observable(this.entityModel_.isLocked);this.lockedImageSrc=c.observable(this.locked()?a.LOCK_IMAGE:a.UNLOCK_IMAGE);this.receivesShadows=c.observable(this.entityModel_.receivesShadows);this.receivesShadowsImageSrc=c.observable(this.receivesShadows()?a.RECEIVES_SHADOWS_ON_IMAGE:a.RECEIVES_SHADOWS_OFF_IMAGE);this.castsShadows=c.observable(this.entityModel_.castsShadows);
this.castsShadowsImageSrc=c.observable(this.castsShadows()?a.CASTS_SHADOWS_ON_IMAGE:a.CASTS_SHADOWS_OFF_IMAGE);this.isVisible=c.observable(this.entityModel_.isVisible);this.isVisibleImageSrc=c.observable(this.isVisible()?a.VISIBLE_IMAGE:a.NOT_VISIBLE_IMAGE);this.toolbarVisibility=R.Create(this.entityModel_.entityType);goog.isDefAndNotNull(c.bindingHandlers.entityInfoLengthOnEnter)&&delete c.bindingHandlers.entityInfoLengthOnEnter;c.bindingHandlers.entityInfoLengthOnEnter={init:function(a,b,c,d){a.onkeypress=
function(a){return(a.which?a.which:a.keyCode)===goog.events.KeyCodes.ENTER?(a.target.blur(),!1):!0}}};this.requiresDimensionFields()?this.dimensionEntityInfoViewModel=new m(this.entityModel_):this.requiresEdgeFields()?this.edgeEntityInfoViewModel=new y(this.entityModel_):this.requiresImageFields()?this.imageEntityInfoViewModel=new K(this.entityModel_):this.requiresSectionPlaneFields()&&(this.sectionPlaneInfoViewModel=new L)}a.prototype.initializeFromModel=function(){var a=this.entityModel_.getInfo(),
b=d.fromJS(a);this.entityModel_.cleanupEntityData(a);return b};a.prototype.requiresDimensionFields=function(){return this.entityModel_.entityType===g.EntityType.DimensionLinear||this.entityModel_.entityType===g.EntityType.DimensionRadial};a.prototype.requiresLabelFields=function(){return this.entityModel_.entityType===g.EntityType.Text};a.prototype.requiresEdgeFields=function(){return this.entityModel_.entityType===g.EntityType.Edge};a.prototype.requiresImageFields=function(){return this.entityModel_.entityType===
g.EntityType.Image&&1===this.entityModel_.selectionCount};a.prototype.requiresSectionPlaneFields=function(){return this.entityModel_.entityType===g.EntityType.SectionPlane};Object.defineProperty(a.prototype,"pickLayerEvent",{get:function(){return this.pickLayerEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"changeCommonMaterialEvent",{get:function(){return this.changeCommonMaterialEvent_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"changeBackMaterialEvent",
{get:function(){return this.changeBackMaterialEvent_},enumerable:!0,configurable:!0});a.prototype.saveField=function(a){a.editable()&&(a={fieldType:a.fieldType(),label:a.label(),value:a.value(),editable:a.editable()},this.entityModel_.setFieldValue(a))};a.prototype.toggleLocked=function(){var b=this.locked();this.locked(!b);b=this.locked()?a.LOCK_IMAGE:a.UNLOCK_IMAGE;this.lockedImageSrc(b);this.entityModel_.isLocked=this.locked()};a.prototype.toggleReceivesShadows=function(){var b=this.receivesShadows();
this.receivesShadows(!b);b=this.receivesShadows()?a.RECEIVES_SHADOWS_ON_IMAGE:a.RECEIVES_SHADOWS_OFF_IMAGE;this.receivesShadowsImageSrc(b);this.entityModel_.receivesShadows=this.receivesShadows()};a.prototype.toggleCastsShadows=function(){var b=this.castsShadows();this.castsShadows(!b);b=this.castsShadows()?a.CASTS_SHADOWS_ON_IMAGE:a.CASTS_SHADOWS_OFF_IMAGE;this.castsShadowsImageSrc(b);this.entityModel_.castsShadows=this.castsShadows()};a.prototype.toggleIsVisible=function(){var b=this.isVisible();
this.isVisible(!b);b=this.isVisible()?a.VISIBLE_IMAGE:a.NOT_VISIBLE_IMAGE;this.isVisibleImageSrc(b);this.entityModel_.isVisible=this.isVisible()};a.prototype.pickLayer=function(){var a=this,b={selectedLayer:d.toJS(this.entityData.commonLayer),pickLayerCallback:function(b){a.updateLayer(b)},container:null,isEditMode:!1};this.pickLayerEvent.trigger(b)};a.prototype.updateLayer=function(a){a.id!==this.entityData.commonLayer.id()&&(this.entityData.commonLayer.id(a.id),this.entityData.commonLayer.thumbnail(a.thumbnail),
this.entityData.commonLayer.name(a.name),this.entityData.commonLayer.isActive(a.isActive),this.entityData.commonLayer.isHidden(a.isHidden),this.entityModel_.setLayer(a))};a.prototype.editCommonMaterial=function(){this.changeCommonMaterialEvent_.trigger(this.entityData.commonMaterial)};a.prototype.editBackMaterial=function(){this.changeBackMaterialEvent_.trigger(this.entityData.commonBackMaterial)};a.prototype.removeCommonMaterial=function(){this.assignDefaultMaterial(!1)};a.prototype.removeBackMaterial=
function(){this.assignDefaultMaterial(!0)};a.prototype.assignDefaultMaterial=function(a){var b=this;f.ShowQuestionDialog($t("Do you want to assign the default material to the selected entities?")).then(function(c){c&&(a?b.entityModel_.removeCommonBackMaterial():b.entityModel_.removeCommonMaterial())}).thenCatch(function(){})};a.LOCK_IMAGE="/static/images/web/u_lock.svg";a.UNLOCK_IMAGE="/static/images/web/u_unlock.svg";a.RECEIVES_SHADOWS_ON_IMAGE="/static/images/web/ei_shadowsReceivesOn.svg";a.RECEIVES_SHADOWS_OFF_IMAGE=
"/static/images/web/ei_shadowsReceivesOff.svg";a.CASTS_SHADOWS_ON_IMAGE="/static/images/web/ei_shadowsCastOn.svg";a.CASTS_SHADOWS_OFF_IMAGE="/static/images/web/ei_shadowsCastOff.svg";a.VISIBLE_IMAGE="/static/images/web/wi_visible.svg";a.NOT_VISIBLE_IMAGE="/static/images/web/wi_notvisible.svg";return a}();b.default=a;var m=function(){function a(b){this.ArrowType=e.DimensionArrow;this.TextAlign=e.DimensionTextAlignment;this.TextPosition=e.DimensionTextPosition;this.dimensionModel_=b.getDimensionInfoModel();
this.arrowType=c.observable(this.dimensionModel_.getArrowType());this.textAlignment=c.observable(this.dimensionModel_.getTextAlignment());this.textPosition=c.observable(this.dimensionModel_.getTextPosition());this.containsRadialDimension=c.observable(this.dimensionModel_.containsRadial());this.hasCommonFont=c.observable(this.dimensionModel_.hasCommonFont());this.fontFace=c.observable(void 0);this.fontBold=c.observable(void 0);this.fontItalic=c.observable(void 0);this.fontSize=c.observable(void 0);
this.hasCommonFont()&&(this.fontFace(this.dimensionModel_.getCommonFontFace()),this.fontBold(this.dimensionModel_.getCommonFontBold()),this.fontItalic(this.dimensionModel_.getCommonFontItalic()),this.fontSize(this.dimensionModel_.getCommonFontSize()))}a.prototype.canSetArrowType=function(){return this.dimensionModel_.canSetArrowType()};a.prototype.setArrowType=function(a){this.canSetArrowType()&&(this.dimensionModel_.setArrowType(a),this.updateViewModelFromModel())};a.prototype.canSetTextAlign=function(){return this.dimensionModel_.canSetTextAlignment()};
a.prototype.setTextAlign=function(a){this.canSetTextAlign()&&(this.dimensionModel_.setTextAlignment(a),this.updateViewModelFromModel())};a.prototype.canSetTextPosition=function(){return this.dimensionModel_.canSetTextPosition()};a.prototype.setTextPosition=function(a){this.canSetTextPosition()&&(this.dimensionModel_.setTextPosition(a),this.updateViewModelFromModel())};a.prototype.setFont=function(a,b,c,d){this.dimensionModel_.setCommonFont(a,b,c,d);this.updateViewModelFromModel()};a.prototype.updateViewModelFromModel=
function(){this.arrowType(this.dimensionModel_.getArrowType());this.textAlignment(this.dimensionModel_.getTextAlignment());this.textPosition(this.dimensionModel_.getTextPosition());this.containsRadialDimension(this.dimensionModel_.containsRadial())};return a}(),y=function(){function a(b){this.entityModel_=b;this.isSmoothOn_=this.isSoftenOn_=!1;this.softenImageSrc=c.observable("");this.smoothImageSrc=c.observable("");this.softenText=c.observable("");this.smoothText=c.observable("");this.updateViewModelFromModel()}
a.prototype.updateViewModel=function(){this.isSoftenOn_?(this.softenImageSrc(a.SOFTEN_OFF_IMAGE),this.softenText(a.SOFTEN_OFF_TEXT)):(this.softenImageSrc(a.SOFTEN_ON_IMAGE),this.softenText(a.SOFTEN_ON_TEXT));this.isSmoothOn_?(this.smoothImageSrc(a.SMOOTH_OFF_IMAGE),this.smoothText(a.SMOOTH_OFF_TEXT)):(this.smoothImageSrc(a.SMOOTH_ON_IMAGE),this.smoothText(a.SMOOTH_ON_TEXT))};a.prototype.updateViewModelFromModel=function(){this.isSoftenOn_=this.entityModel_.isSoftenOn;this.isSmoothOn_=this.entityModel_.isSmoothOn;
this.updateViewModel()};a.prototype.toggleSoften=function(){this.isSoftenOn_=!this.isSoftenOn_;this.entityModel_.isSoftenOn=this.isSoftenOn_;this.updateViewModel()};a.prototype.toggleSmooth=function(){this.isSmoothOn_=!this.isSmoothOn_;this.entityModel_.isSmoothOn=this.isSmoothOn_;this.updateViewModel()};a.SOFTEN_ON_IMAGE="/static/images/web/ei_edge_soften_on.svg";a.SOFTEN_OFF_IMAGE="/static/images/web/ei_edge_soften_off.svg";a.SMOOTH_ON_IMAGE="/static/images/web/ei_edge_smooth_on.svg";a.SMOOTH_OFF_IMAGE=
"/static/images/web/ei_edge_smooth_off.svg";a.SOFTEN_OFF_TEXT=$t("Soften Off");a.SOFTEN_ON_TEXT=$t("Soften On");a.SMOOTH_OFF_TEXT=$t("Smooth Off");a.SMOOTH_ON_TEXT=$t("Smooth On");return a}(),K=function(){function a(b){this.entityModel_=b;this.lockedAspectRatio=!0;this.lockAspectRatioImageSrc=c.observable("");this.width=c.observable("");this.widthEditedLast=!1;this.height=c.observable("");this.lockedAspectRatio=this.entityModel_.isImageUniform();this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=
function(){this.lockAspectRatioImageSrc(this.lockedAspectRatio?a.LOCKED_ASPECT_RATIO_IMAGE:a.UNLOCKED_ASPECT_RATIO_IMAGE);this.width(this.entityModel_.getImageFormattedWidth());this.height(this.entityModel_.getImageFormattedHeight())};a.prototype.toggleLockAspectRatio=function(){(this.lockedAspectRatio=!this.lockedAspectRatio)&&(this.widthEditedLast?this.entityModel_.setImageWidth(this.width(),!0):this.entityModel_.setImageHeight(this.height(),!0));this.updateViewModelFromModel()};a.prototype.setWidth=
function(){this.width()!==this.entityModel_.getImageFormattedWidth()&&(this.entityModel_.setImageWidth(this.width(),this.lockedAspectRatio),this.widthEditedLast=!0,this.updateViewModelFromModel())};a.prototype.setHeight=function(){this.height()!==this.entityModel_.getImageFormattedHeight()&&(this.entityModel_.setImageHeight(this.height(),this.lockedAspectRatio),this.widthEditedLast=!1,this.updateViewModelFromModel())};a.LOCKED_ASPECT_RATIO_IMAGE="/static/images/web/u_link.svg";a.UNLOCKED_ASPECT_RATIO_IMAGE=
"/static/images/web/u_unlink.svg";return a}(),L=function(){function a(){this.sectionPlaneInfo_=e.GetWebSectionPlaneInfo();this.name=c.observable("");this.symbol=c.observable("");this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){this.name(this.sectionPlaneInfo_.getCommonName());this.symbol(this.sectionPlaneInfo_.getCommonSymbol())};a.prototype.setName=function(){(this.sectionPlaneInfo_.hasCommonName()||""!==this.name())&&this.sectionPlaneInfo_.setName(this.name())};a.prototype.setSymbol=
function(){(this.sectionPlaneInfo_.hasCommonSymbol()||""!==this.symbol())&&this.sectionPlaneInfo_.setSymbol(this.symbol())};return a}(),R=function(){function a(){}Object.defineProperty(a.prototype,"lockButtonVisibility",{get:function(){return this.lockButtonVisibility_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"receivesShadowsButtonVisibility",{get:function(){return this.receivesShadowsButtonVisibility_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"castsShadowsButtonVisibility",
{get:function(){return this.castsShadowsButtonVisibility_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visibleButtonVisibility",{get:function(){return this.visibleButtonVisibility_},enumerable:!0,configurable:!0});a.Create=function(b){var c=new a;c.lockButtonVisibility_=!1;c.receivesShadowsButtonVisibility_=!0;c.castsShadowsButtonVisibility_=!0;c.visibleButtonVisibility_=!0;switch(b){case g.EntityType.Component:case g.EntityType.ComponentInstance:case g.EntityType.Group:case g.EntityType.SolidComponent:case g.EntityType.SolidGroup:c.lockButtonVisibility_=
!0;break;case g.EntityType.ConstructionLine:case g.EntityType.DimensionLinear:case g.EntityType.DimensionRadial:case g.EntityType.SectionPlane:case g.EntityType.Text:c.receivesShadowsButtonVisibility_=!1;c.castsShadowsButtonVisibility_=!1;break;case g.EntityType.ArcCurve:case g.EntityType.Curve:c.receivesShadowsButtonVisibility_=!1}return c};return a}()});
define("LabelDetailsWidget",["require","exports","knockout","Bindings/index","FontSelector"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){var f=this;this.ArrowType=d.DimensionArrow;this.LeaderType=d.LabelLeader;this.fontFaceSelector_=new e.FontFaceSelect($t("Multiple Fonts"));this.fontFaceSelector_.onChange(function(a){b.setCommonFont({fontFace:a,bold:!1,italic:!1,size:e.defaultFontSize})});var m;b.hasCommonFont()&&(m=b.getCommonFont(),m={faceName:m.fontFace,
isBold:m.bold,isItalic:m.italic,pointSize:m.size});this.fontSelector_=new e.FontSelector({defaultFont:m,includeSize:!0});this.fontSelector_.onChange(function(a){goog.isDefAndNotNull(a.faceName)&&!isNaN(a.pointSize)&&f.labelInfo_.setCommonFont({fontFace:a.faceName,bold:a.isBold,italic:a.isItalic,size:a.pointSize})});this.canSetArrowType=c.observable(b.canSetArrowType());this.arrowType=c.observable(b.getArrowType());this.canSetLeaderPosition=c.observable(b.canSetLeaderType());this.leaderPosition=c.observable(b.getLeaderType());
this.hasCommonFont=c.observable(b.hasCommonFont());this.labelInfo_=b}a.prototype.render=function(){goog.isDefAndNotNull(this.contents_)||(this.contents_=goog.soy.renderAsFragment(SketchUpTemplates.labelDetails,{}),c.applyBindings(this,this.contents_),this.contents_.querySelector(".face-selector-wrapper").appendChild(this.fontFaceSelector_.render()),this.contents_.querySelector(".font-selector-wrapper").appendChild(this.fontSelector_.render()));return this.contents_};a.prototype.setArrowType=function(a){this.canSetArrowType()&&
(this.arrowType(a),this.labelInfo_.setArrowType(a))};a.prototype.setLeaderPosition=function(a){this.canSetLeaderPosition()&&(this.leaderPosition(a),this.labelInfo_.setLeaderType(a))};a.prototype.destroy=function(){this.fontSelector_.destroy()};return a}();b.LabelDetailsWidget=a});
define("EntityInfoView","require exports knockout DimensionDetailsWidget EntityInfoModel EntityInfoViewModel LabelDetailsWidget".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,h){this.container_=h;goog.dom.removeChildren(this.container_);h=goog.soy.renderAsFragment(SketchUpTemplates.entityInfoContents);this.container_.appendChild(h);h=new e.EntityInfoModel(b);this.entityInfoViewModel_=new f.default(h);b=this.container_.querySelector(".entity-info-body #custom-fields");
this.entityInfoViewModel_.requiresLabelFields()?(h=h.getLabelInfoModel(),goog.isDefAndNotNull(this.labelDetails_)&&this.labelDetails_.destroy(),this.labelDetails_=new g.LabelDetailsWidget(h)):this.entityInfoViewModel_.requiresDimensionFields()?(h=h.getDimensionInfoModel(),goog.isDefAndNotNull(this.dimensionDetails_)&&this.dimensionDetails_.destroy(),this.dimensionDetails_=new d.DimensionDetailsWidget(h)):this.entityInfoViewModel_.requiresEdgeFields()?(h=goog.soy.renderAsFragment(SketchUpTemplates.entityInfoEdgeContents),
b.appendChild(h)):this.entityInfoViewModel_.requiresImageFields()?(h=goog.soy.renderAsFragment(SketchUpTemplates.entityInfoImageContents),b.appendChild(h)):this.entityInfoViewModel_.requiresSectionPlaneFields()&&(h=goog.soy.renderAsFragment(SketchUpTemplates.entityInfoSectionPlaneContents),b.appendChild(h));h=goog.dom.getElement("entity-info-contents");c.applyBindings(this.entityInfoViewModel_,h);this.entityInfoViewModel_.requiresDimensionFields()&&b.appendChild(this.dimensionDetails_.render());this.entityInfoViewModel_.requiresLabelFields()&&
b.appendChild(this.labelDetails_.render())}Object.defineProperty(a.prototype,"pickLayerUIEvent",{get:function(){return this.entityInfoViewModel_.pickLayerEvent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"changeCommonMaterialEvent",{get:function(){return this.entityInfoViewModel_.changeCommonMaterialEvent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"changeBackMaterialEvent",{get:function(){return this.entityInfoViewModel_.changeBackMaterialEvent},enumerable:!0,
configurable:!0});a.prototype.destroy=function(){goog.isDefAndNotNull(this.dimensionDetails_)&&this.dimensionDetails_.destroy()};return a}();b.EntityInfoView=a});
define("Debouncer",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.func_=b;this.executeEnqueued_=!1}a.debounce=function(b){var e=new a(b);return function(){return e.execute()}};a.prototype.execute=function(){var a=this;this.executeEnqueued_||(window.setTimeout(function(){a.func_();a.executeEnqueued_=!1}),this.executeEnqueued_=!0)};return a}();b.default=a});
define("MaterialsLoader","require exports Bindings/index FileUtils GlobalConstants Repromise SketchUpEvent XhrUtils".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});var m=function(){function a(){this.materialsBrowser_=c.CreateMaterialBrowserInstance();this.browserDataCache_={};this.onChangeEvent_=g.SketchUpEvents.Create();this.categoryMap_={}}a.getInstance=function(){goog.isDefAndNotNull(a.instance_)||(a.instance_=new a);return a.instance_};a.prototype.getMaterialsChangeEvent=
function(){return this.onChangeEvent_};a.prototype.getInModelMaterials=function(){for(var a=this.materialsBrowser_.getInModelMaterials(),b=[],c=0;c<a.size();c++)b.push(a.get(c));a.delete();return b};a.prototype.getBrowserCategories=function(){if(!this.haveUnpackedZipFile_)throw Error("The promise returned by loadZip() must be fulfilled before calling getBrowserCategories.");return this.categoryMap_};a.prototype.loadMaterialFromPath=function(a){if(!this.haveUnpackedZipFile_)throw Error("The promise returned by loadZip() must be fulfilled before calling getMaterialData.");
goog.isDefAndNotNull(this.browserDataCache_[a])||(this.browserDataCache_[a]=this.materialsBrowser_.loadMaterialFromPath(a));return this.browserDataCache_[a]};a.prototype.loadZip=function(){var a=this;if(!this.haveUnpackedZipFile_){if(goog.isDefAndNotNull(this.zipRetry_))return this.zipRetry_.promise();this.zipRetry_=new f.default(function(){return new goog.Promise(function(a,b){h.fetchBinary("/static/resources/materials.zip",function(b){a(b)},void 0,function(a){b(a)})})});return this.zipRetry_.promise().then(function(b){a.unpackZip(e.LOCAL_RESOURCES_PATH+
"materials.zip",b)}).thenAlways(function(){a.zipRetry_=void 0})}return goog.Promise.resolve()};a.prototype.unpackZip=function(a,b){this.haveUnpackedZipFile_||(this.haveUnpackedZipFile_=!0,b=new Uint8Array(b),FS.writeFile(a,b,{encoding:"binary"}),d.Exists("/Materials")||FS.mkdir("/Materials"),c.UnzipFile(a,"/Materials"),a=d.BuildFileListRecursive(FS.lookupPath("/Materials/content/sketchup/Materials").node),this.initMaterialCategories(a))};a.prototype.initMaterialCategories=function(a){for(var b=0;b<
a.length;++b){var c=a[b].substr(1),d=goog.string.path.dirname(c),d=this.materialsBrowser_.translateCategoryName(d);this.categoryMap_[d]||(this.categoryMap_[d]=[]);c=goog.string.path.join("/Materials/content/sketchup/Materials",c);this.categoryMap_[d].push(c)}};return a}();b.Loader=m;b.onMaterialNotification=function(a,b){m.getInstance().getMaterialsChangeEvent().trigger({id:a,notificationType:b})}});
define("TabsWidget",["require","exports","knockout"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){var e=this;this.tabData_=b;this.tabHeaders_=c.observableArray();b.forEach(function(a,b){a=new d(a.title,a.imageSrc,function(){e.switchToTab(b)});e.tabHeaders_.push(a)})}a.prototype.render=function(){goog.isDefAndNotNull(this.container_)||(this.container_=goog.soy.renderAsFragment(SketchUpTemplates.tabsWidget),this.contents_=this.container_.querySelector(".tabs-widget-contents"),
c.applyBindings(this,this.container_),this.switchToTab(0));return this.container_};a.prototype.switchToTab=function(a){if(a!==this.currentTabIndex_){var b=this.tabHeaders_()[this.currentTabIndex_];goog.isDefAndNotNull(b)&&b.isSelected(!1);this.currentTabIndex_=a;this.tabHeaders_()[this.currentTabIndex_].isSelected(!0);goog.dom.removeChildren(this.contents_);this.contents_.appendChild(this.tabData_[a].getContents())}};Object.defineProperty(a.prototype,"currentTabIndex",{get:function(){return this.currentTabIndex_},
enumerable:!0,configurable:!0});return a}();b.TabsWidget=a;var d=function(){return function(a,b,d){this.isSelected=c.observable(!1);this.title=a;this.imageSrc=b;this.select=d}}()});
define("MaterialPicker","require exports Bindings/index Debouncer Delay GlobalConstants MaterialsLoader TabsWidget".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,e){var m=this;this.pickerBody_=goog.soy.renderAsFragment(SketchUpTemplates.materialPicker,{},f.INJECTED_SOY_DATA);b.appendChild(this.pickerBody_);this.onPick_=e;this.materialsLoader_=g.Loader.getInstance();this.renderedCategories_={};this.browseInProgressOrRendered_=!1;this.materialMap_=
{};this.isDestroyed_=!1;this.inModelTabIsDirty_=!0;var R=d.default.debounce(function(){m.isInModelTabActive()?m.refreshInModelContents():m.inModelTabIsDirty_=!0});this.onMaterialsChangedEventHandle_=function(a){if(a.notificationType===c.MaterialNotificationType.MODIFICATION||a.notificationType===c.MaterialNotificationType.DELETION)a=m.materialMap_[a.id],goog.isDefAndNotNull(a)&&(a.stale=!0),R()};this.materialsLoader_.getMaterialsChangeEvent().listen(this.onMaterialsChangedEventHandle_);this.tabs_=
new h.TabsWidget([{title:$t("In Model"),imageSrc:"/static/images/web/wi_InModel.svg",getContents:function(){return m.renderInModelContents()}},{title:$t("Browse"),imageSrc:"/static/images/web/wi_Browse.svg",getContents:function(){return m.renderBrowseContents()}}]);this.pickerBody_.appendChild(this.tabs_.render())}a.prototype.destroy=function(){this.clearMaterialData();this.materialsLoader_.getMaterialsChangeEvent().remove(this.onMaterialsChangedEventHandle_);this.isDestroyed_=!0};a.prototype.findAndHighlightMaterial=
function(a){for(var b=0,c=Object.getOwnPropertyNames(this.materialMap_);b<c.length;b++){var d=this.materialMap_[c[b]];if(a.isLastMatchedEqualTo(d.materialBrowserData))return this.setHighlightedMaterialDiv(d.element),{browserData:d.materialBrowserData,thumbnailSrc:this.extractThumbnailSource(d.element)}}};a.prototype.switchToInModelTab=function(){this.tabs_.switchToTab(0)};a.prototype.switchToBrowseTab=function(){this.tabs_.switchToTab(1)};a.prototype.isInModelTabActive=function(){return 0===this.tabs_.currentTabIndex};
a.prototype.setHighlightedMaterialDiv=function(a){goog.isDefAndNotNull(this.selectedMaterialDiv_)&&this.selectedMaterialDiv_.classList.remove("selected-material");this.selectedMaterialDiv_=a;a.classList.add("selected-material")};a.prototype.clearMaterialData=function(){for(var a=0,b=Object.getOwnPropertyNames(this.materialMap_);a<b.length;a++)this.materialMap_[b[a]].materialBrowserData.delete();this.materialMap_={}};a.prototype.renderInModelContents=function(){goog.isDefAndNotNull(this.inModelTabWrapper_)?
this.inModelTabIsDirty_&&this.refreshInModelContents():(this.inModelTabWrapper_=goog.soy.renderAsFragment(SketchUpTemplates.browserContentContainer,{},f.INJECTED_SOY_DATA),this.refreshInModelContents());return this.inModelTabWrapper_};a.prototype.refreshInModelContents=function(){var a=this;if(goog.isDefAndNotNull(this.inModelTabWrapper_)){var b=this.materialsLoader_.getInModelMaterials(),c=b.map(function(a){return a.getMaterialId()}),d=!1,e;for(e in this.materialMap_){var f=this.materialMap_[e];
if(goog.isDefAndNotNull(f)&&f.stale){d=!0;break}}e=Object.getOwnPropertyNames(this.materialMap_);if(c.length!==e.length||d||e.filter(function(a){return-1<c.indexOf(parseInt(a))}).length!==e.length){goog.dom.removeChildren(this.inModelTabWrapper_);var g={};b.forEach(function(b){var c=b.getMaterialId(),d=a.materialMap_[c];goog.isDefAndNotNull(d)&&!d.stale?(a.inModelTabWrapper_.appendChild(d.element),g[c]=d,goog.object.remove(a.materialMap_,c)):(d=a.renderIndividualMaterial(b,a.inModelTabWrapper_),b.deleteThumbnail(),
g[c]={materialBrowserData:b,element:d,stale:!1})});this.clearMaterialData();this.materialMap_=g;this.inModelTabIsDirty_=!1}else b.forEach(function(a){return a.delete()})}};a.prototype.renderBrowseContents=function(){var a=this;if(!this.browseInProgressOrRendered_){this.browseInProgressOrRendered_=!0;if(!goog.isDefAndNotNull(this.browserTabWrapper_)){this.browserTabWrapper_=goog.soy.renderAsFragment(SketchUpTemplates.browserContentContainer,{},f.INJECTED_SOY_DATA);var b=goog.soy.renderAsFragment(SketchUpTemplates.loadingSpinner,
{});this.browserTabWrapper_.appendChild(b)}e.default(function(){return a.materialsLoader_.loadZip()}).then(function(){goog.dom.removeChildren(a.browserTabWrapper_);a.categoryMap_=a.materialsLoader_.getBrowserCategories();for(var b=Object.keys(a.categoryMap_),c=0;c<b.length;++c){var d=b[c],e=a.materialsLoader_.loadMaterialFromPath(a.categoryMap_[d][0]),d={title:d,thumbnail:e.getThumbnail()},e=goog.soy.renderAsFragment(SketchUpTemplates.materialCategory,{materialCategory:d},f.INJECTED_SOY_DATA);e.querySelector(".category-header").addEventListener("click",
a.toggleCategory.bind(a,d,e));a.browserTabWrapper_.appendChild(e)}}).thenCatch(function(){a.browseInProgressOrRendered_=!1})}return this.browserTabWrapper_};a.prototype.toggleCategory=function(a,b,c){b.classList.toggle("expanded");b=b.querySelector(".category-contents");this.renderMaterialCategory(a.title,b)};a.prototype.renderIndividualMaterial=function(a,b){var c=a.getThumbnail(),c=goog.soy.renderAsFragment(SketchUpTemplates.materialThumbnail,{thumbnail:c},f.INJECTED_SOY_DATA),d=c.querySelector("img");
parseInt(d.style.height)==d.width&&parseInt(d.style.width)==d.height||this.resizeAndPositionThumbnail(d);b.appendChild(c);c.addEventListener("click",this.handleMaterialClick.bind(this,a,c));return c};a.prototype.renderMaterialCategory=function(a,b){if(!this.renderedCategories_[a]){this.renderedCategories_[a]=!0;a=this.categoryMap_[a];for(var c=0;c<a.length;++c){var d=this.materialsLoader_.loadMaterialFromPath(a[c]);this.renderIndividualMaterial(d,b);d.deleteThumbnail()}}};a.prototype.handleMaterialClick=
function(a,b,c){this.isDestroyed_||(this.setHighlightedMaterialDiv(b),b=this.extractThumbnailSource(b),this.onPick_({browserData:a,thumbnailSrc:b}))};a.prototype.extractThumbnailSource=function(a){a=a.querySelector("img");return goog.isDefAndNotNull(a)&&goog.isDefAndNotNull(a.src)?a.src:""};a.prototype.resizeAndPositionThumbnail=function(a){var b=parseInt(a.style.height),c=parseInt(a.style.width),d=a.width,e=a.height;if(d!=e){var f,g;d>=e?(f=c,g=e/d*f):(d=f/g,g=b,f=g*d);a.style.width=f+"px";a.style.height=
g+"px";g<b&&(a.style.top=Math.floor((b-g)/2)+"px");f<c&&(a.style.left=Math.floor((c-f)/2)+"px")}};return a}();b.MaterialPicker=a});
define("EntityInfoBrowser","require exports knockout Bindings/index Delay EntityInfoView LayerPicker MaterialPicker SidebarBrowser".split(" "),function(a,b,c,d,e,f,g,h,m){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var c=a.call(this)||this;c.titleDiv_=null;return c}__extends(b,a);b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){a.renderContentsImplementation();b()})};b.prototype.updateTitle=function(a){null!=this.titleDiv_&&(this.titleDiv_.textContent=
a)};b.prototype.reset=function(){g.exitPickLayer();goog.dom.removeChildren(this.browserContent_);goog.isDefAndNotNull(this.entityInfoView_)&&this.entityInfoView_.destroy();this.entityInfoView_=null};b.prototype.updateEntityInfo=function(){this.renderContentsImplementation()};b.prototype.renderContentsImplementation=function(){this.reset();this.renderEntityInfoView()};b.prototype.renderEntityInfoView=function(){var a=this;this.webEntityInfo_=d.GetWebEntityInfoInstance();var b=this.browserContent_;
goog.isDefAndNotNull(b)&&(this.entityInfoView_=new f.EntityInfoView(this.webEntityInfo_,b),this.entityInfoView_.pickLayerUIEvent.listen(function(b){a.pickLayer(b)}),this.entityInfoView_.changeCommonMaterialEvent.listen(function(){a.pickMaterial(!1)}),this.entityInfoView_.changeBackMaterialEvent.listen(function(){a.pickMaterial(!0)}))};b.prototype.initialize=function(a){this.browserContent_=a.querySelector(".browser-content");this.loadingGif_=a.querySelector(".loading-gif")};b.prototype.pickLayer=
function(a){var b=this;a.container=document.createElement("div");a.container.classList.add("layers-container-wrapper");this.parentCallbacks_.showSlideout($t("Choose Layer"),a.container,function(){return g.exitPickLayer()})&&g.pickLayer(a).then(function(b){return a.pickLayerCallback(b)}).thenCatch(function(a){if(!(a instanceof goog.Promise.CancellationError))throw a;}).thenAlways(function(){return b.parentCallbacks_.closeSlideout()})};b.prototype.pickMaterial=function(a){var b=this,f=document.createElement("div");
f.classList.add("material-picker-wrapper");var g=new h.MaterialPicker(f,function(c){var g=goog.soy.renderAsFragment(SketchUpTemplates.loadingSpinner,{});goog.dom.removeChildren(f);f.appendChild(g);e.default(function(){var e=d.CreateWebMaterial();e.name=d.GetInModelMaterialName(c.browserData);goog.string.isEmptyOrWhitespaceSafe(e.name)||(a?b.webEntityInfo_.setCommonBackMaterial(e):b.webEntityInfo_.setCommonMaterial(e));d.Draw();b.parentCallbacks_.closeSlideout();e.delete()})}),y=goog.soy.renderAsFragment(SketchUpTemplates.materialPickerSlideoutBottomBar,
{});c.applyBindings({cancel:function(){return b.parentCallbacks_.closeSlideout()}},y);f.appendChild(y);this.parentCallbacks_.showSlideout($t("Choose Material"),f,function(){return g.destroy()})||g.destroy()};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"entity-info-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"entity-info-browser-top"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",
{get:function(){return SketchUpTemplates.entityInfoBrowser},enumerable:!0,configurable:!0});b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};return b}(m.SidebarBrowser);b.default=a});
define("Instructor",["require","exports","@vimeo/player","knockout","Bindings/index"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){var e=this;this.container_=c;goog.dom.removeChildren(this.container_);var g=goog.soy.renderAsFragment(SketchUpTemplates.instructorContents);this.container_.appendChild(g);this.iframe_=goog.dom.getElement("instructorIframe");this.viewModel_=new f(this);var L=-1;this.viewModel_.url.subscribe(function(a){clearInterval(L);
goog.style.setHeight(g,g.scrollHeight);e.viewModel_.iframeHeight("0px");var b=0,c=0;L=setInterval(function(){++b;goog.isDefAndNotNull(e.iframe_.contentWindow)&&goog.isDefAndNotNull(e.iframe_.contentWindow.document)&&goog.isDefAndNotNull(e.iframe_.contentWindow.document.body)&&(e.iframe_.contentWindow.document.body.scrollHeight!=c&&(c=e.iframe_.contentWindow.document.body.scrollHeight,e.viewModel_.iframeHeight(c+"px"),goog.style.setHeight(g,"")),16<=b&&clearInterval(L))},250)});c=goog.dom.getElement("instructor-contents");
d.applyBindings(this.viewModel_,c);this.viewModel_.url(this.makeInstructorUrl(b));this.videoPlaying_=!1}a.prototype.onActiveToolChanged=function(a){this.viewModel_.isVideoView()||("21255"===a&&(a="21074"),this.viewModel_.url(this.makeInstructorUrl(a)))};a.prototype.showToolMode=function(){var a=this;goog.isDefAndNotNull(this.lessonPlayer_)&&(this.lessonPlayer_.getPaused().then(function(b){a.videoPlaying_=!b}),this.lessonPlayer_.pause());this.viewModel_.isVideoView(!1);this.onActiveToolChanged(e.GetActiveToolId())};
a.prototype.loadVideo=function(a,b){var c=this;goog.isDefAndNotNull(this.lessonPlayer_)||this.initializeVideoPlayer(a);this.lessonPlayer_.loadVideo(Number(a)).then(function(){c.lessonPlayer_.getVideoTitle().then(function(a){c.viewModel_.videoTitle(a)});c.viewModel_.isVideoLoaded(!0);c.viewModel_.isVideoView(!0);b?c.lessonPlayer_.play():c.lessonPlayer_.pause()})};a.prototype.showVideoMode=function(){this.viewModel_.isVideoLoaded()&&(this.viewModel_.isVideoView(!0),this.videoPlaying_&&goog.isDefAndNotNull(this.lessonPlayer_)&&
this.lessonPlayer_.play())};a.prototype.openVideoInNewTab=function(){var a=this;goog.isDefAndNotNull(this.lessonPlayer_)&&this.lessonPlayer_.getVideoUrl().then(function(b){a.lessonPlayer_.getCurrentTime().then(function(c){window.open(b+"#t="+c+"s","_blank");a.lessonPlayer_.pause();a.viewModel_.isVideoView(!1)})})};a.prototype.makeInstructorUrl=function(a){return"/static/resources/"+SketchUp.getCurrentLanguage()+"/helpcontent/tool/"+a+"/index.html"};a.prototype.initializeVideoPlayer=function(a){this.lessonPlayer_=
new c("lesson-video-player",{id:Number(a),width:this.container_.offsetWidth,loop:!1})};return a}();b.InstructorView=a;var f=function(){function a(b){this.model_=b;this.url=d.observable("");this.iframeHeight=d.observable("0px");this.isVideoView=d.observable(!1);this.isVideoLoaded=d.observable(!1);this.videoTitle=d.observable("Video")}a.prototype.resumeToolHelp=function(){this.model_.showToolMode()};a.prototype.resumeVideo=function(){this.model_.showVideoMode()};a.prototype.openVideoInNewTab=function(){this.model_.openVideoInNewTab()};
return a}()});
define("InstructorBrowser",["require","exports","Bindings/index","Instructor","SidebarBrowser"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var c=a.call(this)||this;c.titleDiv_=null;c.isRendered_=!1;return c}__extends(b,a);b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};b.prototype.renderContents=function(){var a=this;if(this.isRendered_)return goog.Promise.resolve();this.isRendered_=!0;return new goog.Promise(function(b,
e){goog.dom.removeChildren(a.browserContent_);e=a.browserContent_;goog.isDefAndNotNull(e)||b();var f=c.GetActiveToolId();a.instructorView_=new d.InstructorView(f.toString(10),e);b()})};b.prototype.initialize=function(a){this.browserContent_=a.querySelector(".browser-content");this.loadingGif_=a.querySelector(".loading-gif")};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"instructor-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"instructor-browser-top"},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.instructorBrowser},enumerable:!0,configurable:!0});b.prototype.activeToolChanged=function(a){if(goog.isDefAndNotNull(this.instructorView_))this.instructorView_.onActiveToolChanged(a.toString(10))};b.prototype.playVideo=function(a,b){goog.isDefAndNotNull(this.instructorView_)&&this.instructorView_.loadVideo(a,b)};return b}(e.SidebarBrowser);b.default=a});
define("LayersBrowser","require exports LayerPicker SidebarBrowser knockout Delay".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return a.call(this)||this}__extends(b,a);b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){a.renderContentsImplementation();b()})};b.prototype.reset=function(){goog.dom.removeChildren(this.browserContent_);this.layerPickerView_=null;this.contentsRendered_=!1};b.prototype.renderContentsImplementation=
function(){this.reset();this.renderLayersBrowserView();this.contentsRendered_=!0};b.prototype.onFileNewOrOpen=function(){this.contentsRendered_&&this.renderContentsImplementation()};b.prototype.renderLayersBrowserView=function(){var a=this.browserContent_;goog.isDefAndNotNull(a)&&(this.layerPickerView_=new c.LayerPickerView({selectedLayer:null,pickLayerCallback:null,container:a,isEditMode:!0}),this.renderBottomActionBar())};b.prototype.renderBottomActionBar=function(){this.bottomActionBarViewModel_=
new g(this.layerPickerView_);this.bottomActionBar_=goog.soy.renderAsFragment(SketchUpTemplates.layersBottomActionsBar,{});this.browserContent_.appendChild(this.bottomActionBar_);e.applyBindings(this.bottomActionBarViewModel_,this.bottomActionBar_);this.pinDivToBottomOfBrowser(this.bottomActionBar_)};b.prototype.initialize=function(a){this.browserContent_=a.querySelector(".browser-content")};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"layers-tab"},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"topElementId",{get:function(){return"layers-browser-top"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.layersBrowser},enumerable:!0,configurable:!0});b.prototype.addLayerToUI=function(a){if(goog.isDefAndNotNull(this.layerPickerView_))this.layerPickerView_.onLayerAdded(a)};b.prototype.removeLayerFromUI=function(a){if(goog.isDefAndNotNull(this.layerPickerView_))this.layerPickerView_.onLayerRemoved(a)};
b.prototype.onLayerVisibilityChange=function(a){};b.prototype.onLayerColorChange=function(a){};b.prototype.onLayerRenamed=function(a){};b.prototype.onActiveLayerChanged=function(a){};b.prototype.onLayerUndoChange=function(a){if(goog.isDefAndNotNull(this.layerPickerView_))this.layerPickerView_.onLayerUndoChange(a)};b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};return b}(d.SidebarBrowser);b.LayersBrowser=a;var g=function(){function a(b){var c=this;this.sortIndex_=
0;this.layerPickerView_=b;this.sortActions_=[{sort:function(){return c.layerPickerView_.sortLayersAtoZ()},icon:"/static/images/web/srt_az.svg",title:$t("Layers sorted in alphabetical order")},{sort:function(){return c.layerPickerView_.sortLayersZtoA()},icon:"/static/images/web/srt_za.svg",title:$t("Layers sorted in reverse alphabetical order")}];this.isPurging=e.observable(!1);this.sortIconSrc=e.observable(this.sortActions_[0].icon);this.sortTitle=e.observable(this.sortActions_[0].title)}a.prototype.addLayer=
function(){this.layerPickerView_.addLayer()};a.prototype.addSelectionToLayer=function(){this.layerPickerView_.addSelectionToLayer()};a.prototype.colorByLayer=function(){this.layerPickerView_.colorByLayer()};a.prototype.purgeUnusedLayers=function(){var a=this;this.isPurging(!0);f.default(function(){a.layerPickerView_.purgeUnusedLayers()},10);f.default(function(){a.isPurging(!1)},2E3)};a.prototype.sortByNextOrdering=function(){this.sortIndex_=goog.math.modulo(this.sortIndex_+1,this.sortActions_.length);
this.sortActions_[this.sortIndex_].sort();this.sortIconSrc(this.sortActions_[this.sortIndex_].icon);this.sortTitle(this.sortActions_[this.sortIndex_].title)};return a}()});
define("UpgradeMask",["require","exports","knockout","Entitlements","EntitlementsFeatures"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,d,f,y,K,L,R){this.isDestroyed_=!1;this.title=K;this.message=L;this.onCancel_=R;d=e.canAccess(d);this.trigger_=f;d?(y(),this.destroy()):(this.maskElement_=goog.soy.renderAsFragment(SketchUpTemplates.upgradeMask,{}),c.applyBindings(this,this.maskElement_),b.appendChild(this.maskElement_))}a.prototype.onUpgrade=function(){d.upgrade(this.trigger_)};
a.prototype.cancel=function(){if(goog.isDefAndNotNull(this.onCancel_))this.onCancel_()};a.prototype.shouldShowCancel=function(){return goog.isDefAndNotNull(this.onCancel_)};a.prototype.destroy=function(){this.isDestroyed_||(goog.isDefAndNotNull(this.maskElement_)&&(c.cleanNode(this.maskElement_),goog.dom.removeNode(this.maskElement_)),this.isDestroyed_=!0)};return a}();b.UpgradeMask=a});
define("MaterialEditor","require exports knockout ApplicationFeatures Bindings/index GlobalConstants UpgradeMask UserTracking".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){this.cleanedUp_=!1;this.editor_=e.CreateMaterialEditorInstance(b);this.onCompleteAction_=c}a.prototype.render=function(){var a=this;this.container_=goog.soy.renderAsFragment(SketchUpTemplates.editMaterial,{},f.INJECTED_SOY_DATA);this.upgradeMask_=new g.UpgradeMask(this.container_,
d.default.MaterialEditing,h.UpsellTriggers.MATERIAL_EDIT,function(){var b=a.container_.querySelector(".js-edit-material");a.viewModel_=new m(function(){return a.destroy()},a.editor_);c.applyBindings(a.viewModel_,b);return b},$t("Let's make it look good"),$t("Custom materials breathe life into your 3D models. Upgrade to import and edit textures."),function(){return a.destroy()});return this.container_};a.prototype.destroy=function(){this.cleanedUp_||(this.cleanedUp_=!0,c.cleanNode(this.container_),
this.editor_.delete(),this.upgradeMask_&&this.upgradeMask_.destroy(),this.onCompleteAction_())};a.prototype.update=function(){goog.isDefAndNotNull(this.viewModel_)&&this.viewModel_.updateViewModelFromModel()};return a}();b.default=a;var m=function(){function a(b,d){var e=this;this.onDone_=b;this.materialEditor_=d;this.name=c.observable(void 0);this.name.subscribe(function(a){a!==e.materialEditor_.getName()?(a=e.materialEditor_.isNameValid(a),e.nameError(!a)):e.nameError(!1)});this.width=c.observable(void 0);
this.height=c.observable(void 0);this.opacity=c.observable(1);this.hasTexture=c.observable(!1);this.nameError=c.observable(!1);this.thumbnailUrl=c.observable(void 0);this.isAspectRatioLocked=c.observable(!0);this.lockedAspectRatioIcon=c.computed(function(){return e.isAspectRatioLocked()?"#u_link":"#u_unlink"});this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){var a=this.materialEditor_;this.name(a.getName());this.width(e.lengthToString(a.getXScale()));this.height(e.lengthToString(a.getYScale()));
this.opacity(100-100*a.getTransparency());this.hasTexture(a.isTextured());this.thumbnailUrl(a.getThumbnail())};a.prototype.onDone=function(){this.onDone_()};a.prototype.setName=function(){this.materialEditor_.setName(this.name());this.updateViewModelFromModel()};a.prototype.setWidth=function(){var a=e.parseLength(this.width(),0);0!==a&&this.materialEditor_.setXScale(a,this.isAspectRatioLocked());this.updateViewModelFromModel()};a.prototype.setHeight=function(){var a=e.parseLength(this.height(),0);
0!==a&&this.materialEditor_.setYScale(a,this.isAspectRatioLocked());this.updateViewModelFromModel()};a.prototype.setOpacity=function(){var a=(100-this.opacity())/100;this.materialEditor_.setTransparency(a);this.updateViewModelFromModel()};a.prototype.toggleLockAspectRatio=function(){this.isAspectRatioLocked(!this.isAspectRatioLocked())};a.prototype.onKeyDown=function(a,b){switch(b.keyCode){case goog.events.KeyCodes.ESC:this.updateViewModelFromModel();case goog.events.KeyCodes.ENTER:return b.target.blur(),
b.stopPropagation(),!1;default:return!0}};return a}()});
define("MaterialsBrowser","require exports knockout ApplicationFeatures Bindings/index GlobalConstants MaterialPicker MaterialEditor MaterialsLoader ProgramMode SidebarBrowser Debouncer Delay".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var c=a.call(this)||this;c.materialsBrowser_=e.CreateMaterialBrowserInstance();var d=!1,g=L.default.debounce(function(){if(goog.isDefAndNotNull(c.selectedMaterialData_))if(d)c.setSelectedMaterialForEdit({browserData:null,thumbnailSrc:""}),
d=!1;else{var a=c.selectedMaterialData_.getMaterialId(),b=c.materialsBrowser_.getInModelMaterial(a);goog.isDefAndNotNull(b)&&(b.getMaterialId()==a&&c.setSelectedMaterialForEdit({browserData:b,thumbnailSrc:f.THUMBNAIL_DATA_URL+b.getThumbnail()}),b.delete())}});m.Loader.getInstance().getMaterialsChangeEvent().listen(function(a){goog.isDefAndNotNull(c.selectedMaterialData_)&&c.selectedMaterialData_.getMaterialId()===a.id&&(a.notificationType===e.MaterialNotificationType.DELETION&&(d=!0),g())});return c}
__extends(b,a);b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};b.prototype.renderContents=function(){var a=this;goog.isDefAndNotNull(this.picker_)||(this.picker_=new g.MaterialPicker(this.browserContent_,function(b){a.setSelectedMaterialForEdit(b);b.browserData.handleClick()}),this.renderMaterialActionsBar());return goog.Promise.resolve()};b.prototype.initialize=function(a){var b=this,c=a.querySelector(".browser-top-actions");y.currentProgramMode.featureIsAvailable(d.default.MaterialEditing)?
(this.editButton_=c.querySelector(".edit-button"),this.editButton_.addEventListener("click",function(){b.onEditMaterial()}),this.setEditable(!1)):goog.dom.classlist.add(c,"invisible");this.browserContent_=a.querySelector(".browser-content")};b.prototype.onFileNewOrOpen=function(){this.setSelectedMaterialForEdit({browserData:null,thumbnailSrc:""});goog.isDefAndNotNull(this.picker_)&&this.picker_.refreshInModelContents()};b.prototype.hasTabs=function(){return!0};b.prototype.setSelectedMaterialForEdit=
function(a){goog.isDefAndNotNull(this.selectedMaterialData_)&&(this.selectedMaterialData_.delete(),this.selectedMaterialData_=null);var b=document.querySelector(".materials.browser .selected-name"),c=document.querySelector(".materials.browser .edit .square-thumbnail img"),d=!1;goog.isDefAndNotNull(a.browserData)?(this.selectedMaterialData_=a.browserData.copy(),b.innerText=this.selectedMaterialData_.getName(),c.src=a.thumbnailSrc,d=a.browserData.isInModel()):(b.innerText="",c.src="/static/images/web/pnl_mtl_unselected.svg");
this.setEditable(d)};b.prototype.onEditMaterial=function(){var a=this;if(goog.isDefAndNotNull(this.selectedMaterialData_)&&this.selectedMaterialData_.isInModel()){var b=function(a){a.notificationType!=e.MaterialNotificationType.DELETION&&a.notificationType!=e.MaterialNotificationType.MODIFICATION||d.update()},c=m.Loader.getInstance(),d=new h.default(this.selectedMaterialData_,function(){c.getMaterialsChangeEvent().remove(b);a.parentCallbacks_.closeSlideout()});c.getMaterialsChangeEvent().listen(b);
this.parentCallbacks_.showSlideout($t("Edit Material"),d.render(),function(){return d.destroy()})}};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"materials-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"materials-browser-top"},enumerable:!0,configurable:!0});b.prototype.selectHomeTab=function(){this.picker_.switchToInModelTab()};b.prototype.selectBrowseTab=function(){this.picker_.switchToBrowseTab()};Object.defineProperty(b.prototype,
"template",{get:function(){return SketchUpTemplates.materialsBrowser},enumerable:!0,configurable:!0});b.prototype.onInModelMaterialMatched=function(){var a=e.GetWebMaterialMatcherInstance(),a=this.picker_.findAndHighlightMaterial(a);goog.isDefAndNotNull(a)&&this.setSelectedMaterialForEdit(a);this.selectHomeTab()};b.prototype.setEditable=function(a){goog.isDefAndNotNull(this.editButton_)&&(a?(this.editButton_.classList.remove("disabled"),this.editButton_.removeAttribute("title")):(this.editButton_.classList.add("disabled"),
this.editButton_.setAttribute("title",$t("Only in model materials may be edited."))))};b.prototype.renderMaterialActionsBar=function(){this.pinDivToBottomOfBrowser(goog.soy.renderAsFragment(SketchUpTemplates.materialsBottomActionsBar,{},f.INJECTED_SOY_DATA));this.materialActionsViewModel_=new W(this.materialsBrowser_);c.applyBindings(this.materialActionsViewModel_,this.bottomBar_);this.browserContent_.appendChild(this.bottomBar_)};return b}(K.SidebarBrowser);b.default=a;var W=function(){function a(b){this.model_=
b;this.isPurging=c.observable(!1)}a.prototype.purge=function(){var a=this;this.isPurging(!0);R.default(function(){a.model_.purge()},10);R.default(function(){a.isPurging(!1)},2E3)};return a}()});
define("ModelInfoText",["require","exports","knockout","Bindings/index","DimensionDetailsWidget"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.render=function(){if(!goog.isDefAndNotNull(this.contents_)){this.contents_=goog.soy.renderAsFragment(SketchUpTemplates.modelInfoText,{});c.applyBindings(this,this.contents_);var a=d.GetGlobalDimensionOptions();this.dimensionsDetailsWidget_=new e.DimensionDetailsWidget(a,!0);this.contents_.querySelector(".dimension-options-wrapper").appendChild(this.dimensionsDetailsWidget_.render())}return this.contents_};
a.prototype.destroy=function(){this.dimensionsDetailsWidget_.destroy()};a.prototype.applyDefaultStyleToAllDimensions=function(){d.ApplyDefaultStyleToAllDimensions()};return a}();b.default=a});
define("ModelInfoUnits",["require","exports","knockout","Bindings/index"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(){}a.FRACTIONAL_INCHES={display:'1/2"',lengthFormat:d.LengthFormat.Fractional,lengthUnit:d.LengthUnit.Inches};a.DECIMAL_INCHES={display:'0.0"',lengthFormat:d.LengthFormat.Decimal,lengthUnit:d.LengthUnit.Inches};a.DECIMAL_FEET={display:"0.0'",lengthFormat:d.LengthFormat.Decimal,lengthUnit:d.LengthUnit.Feet};a.DECIMAL_MILLIMETERS={display:"0.0mm",
lengthFormat:d.LengthFormat.Decimal,lengthUnit:d.LengthUnit.Millimeter};a.DECIMAL_CENTIMETERS={display:"0.0cm",lengthFormat:d.LengthFormat.Decimal,lengthUnit:d.LengthUnit.Centimeter};a.DECIMAL_METERS={display:"0.0m",lengthFormat:d.LengthFormat.Decimal,lengthUnit:d.LengthUnit.Meter};a.PRECISION_ZERO={display:"0",fractionalDisplay:'0"',precision:0};a.PRECISION_ONE={display:"0.0",fractionalDisplay:'1/2"',precision:1};a.PRECISION_TWO={display:"0.00",fractionalDisplay:'1/4"',precision:2};a.PRECISION_THREE=
{display:"0.000",fractionalDisplay:'1/8"',precision:3};a.PRECISION_FOUR={display:"0.0000",fractionalDisplay:'1/16"',precision:4};a.PRECISION_FIVE={display:"0.00000",fractionalDisplay:'1/32"',precision:5};a.PRECISION_SIX={display:"0.000000",fractionalDisplay:'1/64"',precision:6};return a}();a=function(){function a(){this.webUnitsOptions_=d.CreateWebUnitsOptionsInstance()}a.prototype.render=function(){goog.isDefAndNotNull(this.contents_)||(this.contents_=goog.soy.renderAsFragment(SketchUpTemplates.modelInfoUnits,
{}),this.unitsViewModel_=new f(this.webUnitsOptions_),c.applyBindings(this.unitsViewModel_,this.contents_));return this.contents_};return a}();b.default=a;var f=function(){function a(b){var e=this;this.webUnitsOptions_=b;this.imperialFormats=this.getImperialFormats();this.metricFormats=this.getMetricFormats();this.selectedFormat=c.observable(this.getSelectedFormat());this.isDecimalFormat=c.computed(function(){return e.selectedFormat().lengthFormat!==d.LengthFormat.Fractional});this.lengthPrecisions=
this.getLengthPrecisions();this.selectedLengthPrecision=c.observable(this.getSelectedLengthPrecision());this.anglePrecisions=this.getAnglePrecisions();this.selectedAnglePrecision=c.observable(this.getSelectedAnglePrecision());this.angleSnappingEnabled=c.observable(this.getAngleSnappingEnabled());this.snapAnglePoints=[1,5,10,15,30,45];this.selectedSnapAngle=c.observable(this.getSelectedSnapAngle());this.lengthSectionShown=c.observable(!0);this.angleSectionShown=c.observable(!1)}a.prototype.formatSelected=
function(a){this.selectedFormat()!==a&&(this.selectedFormat(a),this.webUnitsOptions_.setLengthFormat(a.lengthFormat),this.webUnitsOptions_.setLengthUnit(a.lengthUnit))};a.prototype.getSelectedFormat=function(){var a=this.webUnitsOptions_.getLengthFormat(),b=this.webUnitsOptions_.getLengthUnit();if(a==d.LengthFormat.Architectural||a==d.LengthFormat.Fractional)return e.FRACTIONAL_INCHES;switch(b){case d.LengthUnit.Inches:return e.DECIMAL_INCHES;case d.LengthUnit.Feet:return e.DECIMAL_FEET;case d.LengthUnit.Millimeter:return e.DECIMAL_MILLIMETERS;
case d.LengthUnit.Centimeter:return e.DECIMAL_CENTIMETERS;case d.LengthUnit.Meter:return e.DECIMAL_METERS}return e.FRACTIONAL_INCHES};a.prototype.anglePrecisionSelected=function(a){this.selectedAnglePrecision()!==a&&(this.selectedAnglePrecision(a),this.webUnitsOptions_.setAnglePrecision(a.precision))};a.prototype.getSelectedAnglePrecision=function(){var a=this.webUnitsOptions_.getAnglePrecision();return this.getAnglePrecisions()[a]};a.prototype.toggleAngleSnapping=function(){this.angleSnappingEnabled(!this.angleSnappingEnabled());
this.webUnitsOptions_.setAngleSnapEnabled(this.angleSnappingEnabled())};a.prototype.getAngleSnappingEnabled=function(){return this.webUnitsOptions_.getAngleSnapEnabled()};a.prototype.angleSnapSelected=function(a){this.selectedSnapAngle()!==a&&(this.selectedSnapAngle(a),this.webUnitsOptions_.setSnapAngle(a))};a.prototype.getSelectedSnapAngle=function(){return this.webUnitsOptions_.getSnapAngle()};a.prototype.lengthPrecisionSelected=function(a){this.selectedLengthPrecision()!==a&&(this.selectedLengthPrecision(a),
this.webUnitsOptions_.setLengthPrecision(a.precision))};a.prototype.getSelectedLengthPrecision=function(){var a=this.webUnitsOptions_.getLengthPrecision();return this.getLengthPrecisions()[a]};a.prototype.toggleLengthSection=function(){this.lengthSectionShown(!this.lengthSectionShown());this.angleSectionShown(!1)};a.prototype.toggleAngleSection=function(){this.angleSectionShown(!this.angleSectionShown());this.lengthSectionShown(!1)};a.prototype.getImperialFormats=function(){return[e.FRACTIONAL_INCHES,
e.DECIMAL_INCHES,e.DECIMAL_FEET]};a.prototype.getMetricFormats=function(){return[e.DECIMAL_MILLIMETERS,e.DECIMAL_CENTIMETERS,e.DECIMAL_METERS]};a.prototype.getAnglePrecisions=function(){return[e.PRECISION_ZERO,e.PRECISION_ONE,e.PRECISION_TWO,e.PRECISION_THREE]};a.prototype.getLengthPrecisions=function(){return[e.PRECISION_ZERO,e.PRECISION_ONE,e.PRECISION_TWO,e.PRECISION_THREE,e.PRECISION_FOUR,e.PRECISION_FIVE,e.PRECISION_SIX]};return a}()});
define("ModelInfoBrowser","require exports ModelInfoText ModelInfoUnits SidebarBrowser TabsWidget".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype.initialize=function(a){var b=new d.default,e;this.tabs=new f.TabsWidget([{title:"Units",imageSrc:"/static/images/web/mi_units.svg",getContents:function(){return b.render()}},{title:"Text",imageSrc:"/static/images/web/mi_text.svg",
getContents:function(){goog.isDefAndNotNull(e)&&e.destroy();e=new c.default;return e.render()}}]);return goog.Promise.resolve()};b.prototype.renderContents=function(){this.browserContentElement_.appendChild(this.tabs.render());return goog.Promise.resolve()};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"model-info-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"model-info-browser-top"},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.modelInfoBrowser},enumerable:!0,configurable:!0});b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};return b}(e.SidebarBrowser);b.default=a});
define("EntityIcon",["require","exports","EntityType"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=(e={},e[c.EntityType.Component]="pnl-ol-component",e[c.EntityType.ComponentInstance]="pnl-ol-component",e[c.EntityType.Group]="pnl-ol-group",e[c.EntityType.Model]="pnl-ol-model-root",e[c.EntityType.SectionPlane]="pnl-ol-section-plane-active",e[c.EntityType.SolidGroup]="pnl-ol-group",e);b.getSvgSymbolId=function(a){return d[a]||""};var e});
define("OutlinerSelectionBehavior",["require","exports","Bindings/index","Bindings/View","OutlinerNodeViewModel"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.lastSelectedPath_=[]}a.prototype.updateRoot=function(a){this.rootNode_=a};a.prototype.click=function(a,b){a.isRoot()?this.selectChildren(a):(b.metaKey||b.ctrlKey?a.isSelected()?this.removeFromSelection(a):(this.addToSelection(a),this.lastSelectedPath_=this.getInstancePath(a),this.lastRangePaths_=
void 0):b.shiftKey?(b=this.getNodeFromInstancePath(this.lastSelectedPath_),goog.isDefAndNotNull(b)?this.selectRange(b,a):(this.select(a),this.lastSelectedPath_=this.getInstancePath(a),this.lastRangePaths_=void 0)):(this.select(a),this.lastSelectedPath_=this.getInstancePath(a),this.lastRangePaths_=void 0),d.Draw())};a.prototype.select=function(a){c.clearSelectionSet();a.setSelected(!0)};a.prototype.addToSelection=function(a){e.OutlinerNodeViewModel.deselectNodes(this.getSelectedAncestors(a).concat(this.getSelectedDescendants(a)));
a.setSelected(!0)};a.prototype.removeFromSelection=function(a){a.setSelected(!1)};a.prototype.selectChildren=function(a){var b=this;a.getChildren().forEach(function(a){b.addToSelection(a)})};a.prototype.selectRange=function(a,b){var c=this,d=[];e.OutlinerNodeViewModel.visitRange(a,b,function(a){d.push(a)});if(0!=d.length){var f=[];goog.isDefAndNotNull(this.lastRangePaths_)&&(f=f.concat(this.lastRangePaths_.map(function(a){return c.getNodeFromInstancePath(a)}).filter(function(a){return void 0!==a})));
f=f.concat(this.getSelectedAncestors(d[0]));d.forEach(function(a){f=f.concat(c.getSelectedDescendants(a))});e.OutlinerNodeViewModel.deselectNodes(f);this.lastRangePaths_=d.map(function(a){return c.getInstancePath(a)});e.OutlinerNodeViewModel.selectNodes(d)}};a.prototype.getInstancePath=function(a){var b=[a.id()];a.visitAncestors(function(a){b.unshift(a.id())});return b};a.prototype.getNodeFromInstancePath=function(a){for(var b=this.rootNode_,c=function(c){b=b.getChildren().find(function(b){return b.id()==
a[c]});if(void 0==b)return{value:void 0}},d=1;d<a.length;d++){var e=c(d);if("object"===typeof e)return e.value}return b};a.prototype.getSelectedAncestors=function(a){var b=[];a.visitAncestors(function(a){a.isSelected()&&b.push(a)});return b};a.prototype.getSelectedDescendants=function(a){var b=[];a.visit(function(c){a!==c&&c.isSelected()&&b.push(c);return!1});return b};return a}();b.OutlinerSelectionBehavior=a});
define("OutlinerNodeViewModel","require exports knockout Bindings/index EntityIcon EntityType ModelUtils".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,d,e,f,g){this.isVisible=c.observable(!0);this.isFiltered=c.observable(!1);this.isHighlighted=c.observable(!1);this.isCurrentTarget=c.observable(!1);this.isCurrentSource=c.observable(!1);this.isDragging=c.observable(!1);this.isSelected=c.observable(!1);this.isOnActivePath=c.observable(!1);
this.displayText=c.observable("");this.iconSrc=c.observable("");this.id=c.observable("");this.numChildren=c.observable(0);this.children=c.observableArray([]);this.INDENT=32;this.dragBehavior_=d;this.selectionBehavior_=e;this.uiState=f;this.depth=c.observable(g);this.update(b);this.areChildrenStale_=!0;f.expanded()&&this.loadChildren()}a.selectNodes=function(a){d.addToSelectionSet(a.map(function(a){return a.entity_}))};a.deselectNodes=function(a){d.removeFromSelectionSet(a.map(function(a){return a.entity_}))};
a.prototype.update=function(a){this.entity_=a;this.id(a.elementId.toString());a.type===f.EntityType.Model?this.displayText(g.getPresentableModelTitle()):this.displayText(this.formatDisplayText(a));this.iconSrc("#"+e.getSvgSymbolId(a.type));this.numChildren(a.numChildren);this.isSelected(a.selected);this.isOnActivePath(a.onActivePath);0===this.numChildren()&&a.type!==f.EntityType.Model&&this.uiState.expanded(!1);this.areChildrenStale_=!0;this.uiState.expanded()&&this.loadChildren()};a.comparator=function(a,
b){return a.displayText().localeCompare(b.displayText())};a.visitRange=function(a,b,c){var d=a.parent;if(goog.isDefAndNotNull(b.parent)&&b.parent===d){a=d.getChildren().indexOf(a);b=d.getChildren().indexOf(b);if(a>b){var e=b;b=a;a=e}for(;a<=b;a++)c(d.getChildren()[a])}};a.prototype.getChildren=function(){this.loadChildren();return this.children()};a.prototype.setSelected=function(a){this.entity_.setSelected(a)&&this.isSelected(a)};a.prototype.canBeParentOf=function(a){return this.entity_.canBeParentOf(a.entity_)};
a.prototype.setAsParentOf=function(a){this.entity_.setAsParentOf(a.entity_)};a.prototype.dragStart=function(a,b){this.dragBehavior_.setSource(this);return!0};a.prototype.dragEnter=function(a,b){b.preventDefault&&(b.preventDefault(),b.stopPropagation());this.dragBehavior_.setTarget(this);return!0};a.prototype.dragEnd=function(a,b){b.preventDefault&&b.preventDefault();this.isCurrentTarget(!1);this.dragBehavior_.drop();return!0};a.prototype.formatDisplayText=function(a){return goog.isDefAndNotNull(a.name)&&
a.name.length&&goog.isDefAndNotNull(a.definition)&&a.definition.length?a.name+": <"+a.definition+">":goog.isDefAndNotNull(a.name)?a.name:goog.isDefAndNotNull(a.definition)?"<"+a.definition+">":""};a.prototype.find=function(a){return this.visit(function(b){return b.id()===a})};a.prototype.loadChildren=function(){var b=this;if(this.areChildrenStale_||0<this.numChildren()&&0===this.children().length)this.children(this.entity_.getChildren().map(function(c){var d=b.uiState.children.get(c.elementId);goog.isDefAndNotNull(d)||
(d=new h,b.uiState.children.set(c.elementId,d));var e=b.children().find(function(a){return a.id()==c.elementId.toString()});goog.isDefAndNotNull(e)?e.update(c):e=new a(c,b.dragBehavior_,b.selectionBehavior_,d,b.depth()+1);e.parent=b;return e})),this.areChildrenStale_=!1};a.prototype.isDescendantOf=function(a){for(var b=this;goog.isDef(b);){if(b===a)return!0;b=b.parent}return!1};a.prototype.isParentOf=function(a){return this===a.parent};a.prototype.visitAncestors=function(a){for(var b=this.parent;goog.isDef(b);)a(b),
b=b.parent};a.prototype.hasUnfilteredDescendant=function(){var a=this;return goog.isDefAndNotNull(this.visit(function(b){return a===b||b.isFiltered()?!1:!0}))};a.prototype.visit=function(a){for(var b=[this],c;0<b.length;){c=b.shift();if(a(c))return c;c.getChildren().forEach(function(a){b.push(a)})}};a.prototype.isRoot=function(){return!goog.isDef(this.parent)};a.prototype.hide=function(){this.isVisible(!1)};a.prototype.show=function(){this.isVisible(!0)};a.prototype.click=function(a,b){this.selectionBehavior_.click(this,
b);return!0};a.prototype.toggleExpanded=function(a,b){0<this.numChildren()&&(this.setExpanded(!this.uiState.expanded()),b.stopPropagation())};a.prototype.setExpanded=function(a){a&&this.loadChildren();this.uiState.expanded(a)};return a}();b.OutlinerNodeViewModel=a;var h=function(){return function(){this.expanded=c.observable(!1);this.children=new Map}}();b.OutlinerNodeUiState=h});
define("OutlinerDragBehavior",["require","exports"],function(a,b){function c(a,b){return goog.isDef(a)&&goog.isDef(b)?b.canBeParentOf(a):!1}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.setSource=function(a){goog.isDef(this.source_)&&(this.source_.isCurrentSource(!1),this.dragSourceSubtree(!1));a.isRoot()||(this.source_=a,this.source_.isCurrentSource(!0),this.dragSourceSubtree(!0))};a.prototype.setTarget=function(a){goog.isDef(this.target_)&&this.target_.isCurrentTarget(!1);
if(a==this.source_||c(this.source_,a))this.target_=a,this.target_.isCurrentTarget(!0)};a.prototype.drop=function(){c(this.source_,this.target_)&&this.target_.setAsParentOf(this.source_);this.reset()};a.prototype.reset=function(){goog.isDef(this.source_)&&(this.source_.isCurrentSource(!1),this.dragSourceSubtree(!1));goog.isDef(this.target_)&&this.target_.isCurrentTarget(!1);this.source_=this.target_=void 0};a.prototype.dragSourceSubtree=function(a){this.source_.visit(function(b){b.isDragging(a);return!1})};
return a}();b.OutlinerDragBehavior=a});
define("OutlinerViewModel","require exports knockout OutlinerDragBehavior OutlinerNodeViewModel OutlinerSelectionBehavior".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,g){this.tree=c.observable(null);this.dragBehavior_=new d.OutlinerDragBehavior;this.selectionBehavior_=new f.OutlinerSelectionBehavior;this.scrollTo_=g;this.rootState_=new e.OutlinerNodeUiState;this.rootState_.expanded(!0);this.rootEntity_=b;b=new e.OutlinerNodeViewModel(this.rootEntity_,
this.dragBehavior_,this.selectionBehavior_,this.rootState_,0);this.tree(b);this.selectionBehavior_.updateRoot(b)}a.prototype.update=function(a){goog.isDefAndNotNull(this.rootEntity_)&&this.rootEntity_.cleanUp();this.rootEntity_=a;this.tree().update(this.rootEntity_)};a.prototype.expandAll=function(){var a=this;this.tree().visit(function(b){b!==a.tree()&&(b.uiState.expanded(!0),b.isFiltered(!1));return!1})};a.prototype.collapseAll=function(){this.rootState_=new e.OutlinerNodeUiState;this.rootState_.expanded(!0);
this.tree(new e.OutlinerNodeViewModel(this.rootEntity_,this.dragBehavior_,this.selectionBehavior_,this.rootState_,0));this.scrollTo_()};return a}();b.OutlinerViewModel=a});
define("Outliner","require exports knockout ApplicationFeatures Bindings/index OutlinerViewModel UpgradeMask UserTracking".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,m){var L=this,R=b.querySelector(".outliner-tree-container");this.viewModel_=new f.OutlinerViewModel(e.getRootOutlinerNode(),m);new g.UpgradeMask(R,d.default.Outliner,h.UpsellTriggers.OUTLINER,function(){document.body.appendChild(goog.soy.renderAsFragment(SketchUpTemplates.outlineDefinitions));
var a=goog.soy.renderAsFragment(SketchUpTemplates.outlineTree);R.appendChild(a);c.applyBindings(L.viewModel_,a);return a},$t("We like the way your brain works"),$t("If you're like us, you like to keep your work organized. Outliner structures projects so that they're neater than your sock drawer."))}a.prototype.update=function(){this.viewModel_.update(e.getRootOutlinerNode())};return a}();b.OutlinerView=a});
define("OutlinerBrowser","require exports Bindings/index Debouncer Outliner SidebarBrowser".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};b.prototype.initialize=function(a){var b=this;this.outlinerView_=new e.OutlinerView(a,function(){b.parentCallbacks_.scrollTo(b)});this.debouncedUpdate_=
new d.default(function(){return b.outlinerView_.update()});c.registerOutlinerListener()};b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){c=document.body.querySelector(".outliner-tree-controls");a.pinDivToBottomOfBrowser(c);b()})};b.prototype.update=function(){goog.isDefAndNotNull(this.outlinerView_)&&this.debouncedUpdate_.execute()};Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.outlinerBrowser},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"outliner-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"outliner-browser-top"},enumerable:!0,configurable:!0});return b}(f.SidebarBrowser);b.default=a});
define("SceneDragAndDropHandler",["require","exports","knockout"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.isDragging=c.observable(!1);this.previousDragOverScene=null;this.dragToSceneIndex=this.draggedSceneIndex=0}a.prototype.handleDragStart=function(a,b,c){this.isDragging(!0);b.isBeingDragged(!0);c.originalEvent.dataTransfer.setData("Text","");this.draggedSceneIndex=a();this.previousDragOverScene=null;return!0};a.prototype.handleDragOver=function(a,
b,c,d){d.preventDefault&&d.preventDefault();d.stopPropagation&&d.stopPropagation();d=d.originalEvent;d.dataTransfer.dropEffect="move";this.previousDragOverScene!==c&&(this.removePreviousDragOverGaps(),this.previousDragOverScene=c);this.dragToSceneIndex=b();if(this.dragToSceneIndex===this.draggedSceneIndex)return!1;d.clientY<(a.top+a.bottom)/2?(this.dragToSceneIndex!==this.draggedSceneIndex+1?c.hasDragOverAbove(!0):c.hasDragOverAbove(!1),c.hasDragOverBelow(!1)):(this.dragToSceneIndex!==this.draggedSceneIndex-
1?c.hasDragOverBelow(!0):c.hasDragOverBelow(!1),c.hasDragOverAbove(!1),this.dragToSceneIndex++);return!1};a.prototype.handleDragOverInContainer=function(a){a.preventDefault&&a.preventDefault();a.originalEvent.dataTransfer.dropEffect="move";return!1};a.prototype.removePreviousDragOverGaps=function(){goog.isDefAndNotNull(this.previousDragOverScene)&&(this.previousDragOverScene.hasDragOverAbove(!1),this.previousDragOverScene.hasDragOverBelow(!1),this.previousDragOverScene=null)};a.prototype.handleDragEnd=
function(a,b){this.removePreviousDragOverGaps();this.isDragging(!1);a=b[this.draggedSceneIndex];goog.isDefAndNotNull(a)&&a.isBeingDragged(!1);return!1};a.prototype.handleDrop=function(a,b){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this.removePreviousDragOverGaps();this.isDragging(!1);a=b[this.draggedSceneIndex];return goog.isDefAndNotNull(a)?(a.isBeingDragged(!1),this.draggedSceneIndex<this.dragToSceneIndex&&this.dragToSceneIndex--,!0):!1};return a}();b.DragAndDropHandler=
a});
define("Scenes","require exports knockout Bindings/index DialogPrompts GenericDialog GlobalConstants ListFilter SceneDragAndDropHandler TextInput".split(" "),function(a,b,c,d,e,f,g,h,m,y){function K(a){return{useCamera:c.observable(a.useCamera()),useHiddenGeometry:c.observable(a.useHiddenGeometry()),useLayerVisibility:c.observable(a.useLayerVisibility()),useSectionPlanes:c.observable(a.useSectionPlanes()),useRenderingOptions:c.observable(a.useRenderingOptions()),useShadowInfo:c.observable(a.useShadowInfo()),useAxes:c.observable(a.useAxes())}}
Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){this.parentContainer_=b;this.isReadOnlyMode_=c;this.model_=new ga;this.viewModel_=new L(this.model_,this.isReadOnlyMode_)}a.prototype.render=function(){this.scenesContainer_=this.parentContainer_.querySelector(".scenes-container");goog.isDefAndNotNull(this.scenesContainer_)||(this.scenesContainer_=goog.soy.renderAsFragment(SketchUpTemplates.scenesContainer,{}),this.isReadOnlyMode_||this.scenesContainer_.classList.add("editable"),
this.parentContainer_.appendChild(this.scenesContainer_),this.setupFilter(),this.isReadOnlyMode_||this.renderActionBar(),c.applyBindings(this.viewModel_,this.scenesContainer_));this.viewModel_.updateObservables();this.searchFilter_.clear();this.searchFilter_.setFilterItems(this.viewModel_.getSceneFilterItems())};a.prototype.setupFilter=function(){var a=this,b=this.scenesContainer_.querySelector(".scenes-filter");this.searchFilter_=new h.ListFilter(b,[],$t("Search scenes"));this.searchFilter_.setOnFilterCalback(function(b,
c){for(var d=!1,e=0;e<b.length;e++){var f=b[e];f.isFiltered(!1)}for(e=0;e<c.length;e++)f=c[e],f.isFiltered(!0),d=!0;a.viewModel_.isFiltering(d);a.viewModel_.allFiltered(0===b.length);a.viewModel_.updateHasExpandedOrSelectedScene()});this.searchFilter_.render()};a.prototype.onFileNewOrOpen=function(){this.model_.onFileNewOrOpen()};a.prototype.activeSceneChanged=function(){this.viewModel_.activeSceneChanged()};a.prototype.onSceneUpdated=function(a){this.viewModel_.onSceneUpdated(a)};Object.defineProperty(a.prototype,
"bottomBarDiv",{get:function(){return this.bottomBarDiv_},enumerable:!0,configurable:!0});a.prototype.renderActionBar=function(){this.bottomBarDiv_=goog.soy.renderAsFragment(SketchUpTemplates.scenesBottomActionsBar,{});this.scenesContainer_.appendChild(this.bottomBarDiv_)};return a}();b.ScenesView=a;var L=function(){function a(b,d){this.model_=b;this.isReadOnlyMode=d;this.scenes=c.observableArray();this.hasExpandedOrSelectedScene=c.observable(!1);this.isPlayingAnimation=c.observable(!1);this.allFiltered=
c.observable(!1);this.isFiltering=c.observable(!1);this.dragAndDropHandler_=new m.DragAndDropHandler}a.prototype.updateObservables=function(){this.scenes.removeAll();for(var a=function(a){var d=b.getThumbnail(a),e={name:c.observable(a.getName()),description:c.observable(a.description),thumbnail:c.observable(d),coreScene:a,isSelected:c.observable(a.isSelected()),isExpanded:c.observable(!1),includeInAnimation:c.observable(a.includeInSlideshow),isFiltered:c.observable(!1),useCamera:c.observable(a.useCamera),
useHiddenGeometry:c.observable(a.useHiddenGeometry),useLayerVisibility:c.observable(a.useLayerVisibility),useSectionPlanes:c.observable(a.useSectionPlanes),useRenderingOptions:c.observable(a.useRenderingOptions),useShadowInfo:c.observable(a.useShadowInfo),useAxes:c.observable(a.useAxes),isDraggable:c.observable(!0),isBeingDragged:c.observable(!1),hasDragOverAbove:c.observable(!1),hasDragOverBelow:c.observable(!1)};e.description.subscribe(function(a){e.coreScene.description=a});b.scenes.push(e)},b=
this,d=0,e=this.model_.getCoreScenes();d<e.length;d++)a(e[d]);this.isPlayingAnimation(this.model_.isPlayingAnimation());this.updateHasExpandedOrSelectedScene();this.allFiltered(!1)};a.prototype.updateHasExpandedOrSelectedScene=function(){var a=!1;null!==this.getExpandedOrSelectedScene()&&(a=!0);this.hasExpandedOrSelectedScene(a)};a.prototype.getThumbnail=function(a){a=a.getThumbnail().trim();return a=goog.string.isEmptyOrWhitespaceSafe(a)?"/static/images/web/wi_Scenes_refresh_web.svg":g.THUMBNAIL_DATA_URL+
a};a.prototype.addScene=function(){var a=this,b,c=!0,e=this.getExpandedOrSelectedScene();null!==e?(b=e.coreScene.getProperties(),c=e.includeInAnimation()):b=d.CreateWebSceneProperties();this.checkStyleUpdateAndPerformAction(b,function(){a.model_.addScene(b,c)})};a.prototype.selectScene=function(a){goog.isDefAndNotNull(a)&&(a.coreScene.activate(),this.hasExpandedOrSelectedScene(!0))};a.prototype.deleteScene=function(){var a=this.getExpandedOrSelectedScene();if(null!==a){var b=goog.string.format($t("Do you want to delete %s?"),
a.name());e.ShowQuestionDialog(b).then(function(b){b&&a.coreScene.remove()})}};a.prototype.getSelectedScene=function(){for(var a=0,b=this.scenes();a<b.length;a++){var c=b[a];if(c.isSelected())return c}return null};a.prototype.getExpandedScene=function(){for(var a=0,b=this.scenes();a<b.length;a++){var c=b[a];if(c.isExpanded())return c}return null};a.prototype.getSceneByName=function(a){for(var b=0,c=this.scenes();b<c.length;b++){var d=c[b];if(d.name()===a)return d}return null};a.prototype.activeSceneChanged=
function(){for(var a=!1,b=0,c=this.scenes();b<c.length;b++){var d=c[b],e=d.coreScene.isSelected();d.isSelected(e);a=a||e}this.hasExpandedOrSelectedScene(a)};a.prototype.onSceneUpdated=function(a){a=this.getSceneByName(a);null!==a&&(a.coreScene.regenerateThumbnail(),a.thumbnail(this.getThumbnail(a.coreScene)))};a.prototype.onClickSceneExpander=function(a){for(var b=0,c=this.scenes();b<c.length;b++){var d=c[b];d===a?d.isExpanded(!d.isExpanded()):d.isExpanded(!1)}this.updateHasExpandedOrSelectedScene()};
a.prototype.onClickSceneName=function(a,b){if(!this.isReadOnlyMode){a.isDraggable(!1);var c=b.target;this.handleSceneRenameUI(c).then(function(b){a.isDraggable(!0);if(a.name()!==b){var d=a.name();a.coreScene.rename(b)?a.name(a.coreScene.getName()):(c.textContent=d,window.setTimeout(function(){e.ShowInfoDialog("SketchUp",$t("Scene name must be unique."))}))}})}};a.prototype.isEditable=function(){return!this.isReadOnlyMode};a.prototype.handleSceneRenameUI=function(a){var b=a.textContent;return y.EditField(a,
!0).then(function(c){c=c.trim();goog.string.isEmptyOrWhitespace(c)&&(c=a.textContent=b);return c}).thenCatch(function(){return b})};a.prototype.handleDragStart=function(a,b,c){return this.dragAndDropHandler_.handleDragStart(a,b,c)};a.prototype.handleDragOver=function(a,b,c,d){return this.dragAndDropHandler_.handleDragOver(a,b,c,d)};a.prototype.handleDragOverInContainer=function(a,b){return this.dragAndDropHandler_.handleDragOverInContainer(b)};a.prototype.handleDragEnd=function(a,b){return this.dragAndDropHandler_.handleDragEnd(b,
this.scenes())};a.prototype.handleDrop=function(a,b){a=this.scenes();this.dragAndDropHandler_.handleDrop(b,a)&&(b=a[this.dragAndDropHandler_.draggedSceneIndex],goog.isDefAndNotNull(b)&&(this.model_.moveSceneToIndex(b,this.dragAndDropHandler_.dragToSceneIndex),this.dragAndDropHandler_.draggedSceneIndex=0));return!1};a.prototype.onIncludeInAnimation=function(a){a.includeInAnimation(!a.includeInAnimation());a.coreScene.includeInSlideshow=a.includeInAnimation()};a.prototype.onUseCamera=function(a){a.useCamera(!a.useCamera());
a.coreScene.useCamera=a.useCamera()};a.prototype.onUseHiddenGeometry=function(a){a.useHiddenGeometry(!a.useHiddenGeometry());a.coreScene.useHiddenGeometry=a.useHiddenGeometry()};a.prototype.onUseLayerVisibility=function(a){a.useLayerVisibility(!a.useLayerVisibility());a.coreScene.useLayerVisibility=a.useLayerVisibility()};a.prototype.onUseSectionPlanes=function(a){a.useSectionPlanes(!a.useSectionPlanes());a.coreScene.useSectionPlanes=a.useSectionPlanes()};a.prototype.onUseRenderingOptions=function(a){a.useRenderingOptions(!a.useRenderingOptions());
a.coreScene.useRenderingOptions=a.useRenderingOptions()};a.prototype.onUseShadowInfo=function(a){a.useShadowInfo(!a.useShadowInfo());a.coreScene.useShadowInfo=a.useShadowInfo()};a.prototype.onUseAxes=function(a){a.useAxes(!a.useAxes());a.coreScene.useAxes=a.useAxes()};a.prototype.playAnimation=function(){this.model_.playAnimation();this.isPlayingAnimation(this.model_.isPlayingAnimation())};a.prototype.getExpandedOrSelectedScene=function(){var a=this.getExpandedScene();if(null===a||a.isFiltered())a=
this.getSelectedScene(),null!==a&&a.isFiltered()&&(a=null);return a};a.prototype.updateScene=function(){var a=this,b=this.getExpandedOrSelectedScene();if(null!==b){var c=K(b),d=new R(c),e=goog.soy.renderAsFragment(SketchUpTemplates.updateScenesDialog,{}),d=f.show(e,$t("Scene Update"),d),d=d.then(function(){var d=b.coreScene.getProperties();d.useCamera=c.useCamera();d.useHiddenGeometry=c.useHiddenGeometry();d.useLayerVisibility=c.useLayerVisibility();d.useSectionPlanes=c.useSectionPlanes();d.useRenderingOptions=
c.useRenderingOptions();d.useShadowInfo=c.useShadowInfo();d.useAxes=c.useAxes();a.checkStyleUpdateAndPerformAction(d,function(){b.coreScene.update(d)})});d.thenCatch(function(){})}};a.prototype.checkStyleUpdateAndPerformAction=function(a,b){var c=this;if(this.model_.shouldShowStyleUpdateWarning(a)){a=goog.soy.renderAsFragment(SketchUpTemplates.styleUpdateWarning,{});var d=new la;a=f.show(a,$t("Warning - Scenes and Styles"),d);a=a.then(function(){var a=d.getStyleUpdateTask();c.model_.processStyleUpdateWarningDialogResponse(a);
b()});a.thenCatch(function(){})}else b()};a.prototype.onSettings=function(){var a=this,b=goog.soy.renderAsFragment(SketchUpTemplates.sceneSettings,{}),c=new W(this.model_.getSettings()),b=f.show(b,$t("Edit Animation Settings"),c);c.initialize();b=b.then(function(){a.model_.setSettings(c.settings)});b.thenCatch(function(){})};a.prototype.getSceneFilterItems=function(){for(var a=[],b=0,c=this.scenes();b<c.length;b++)a.push(c[b]);return a};return a}(),R=function(){function a(b){this.sceneProperties=
c.observableArray();this.sceneProperties.push(b)}a.prototype.onUseCamera=function(a){a.useCamera(!a.useCamera())};a.prototype.onUseHiddenGeometry=function(a){a.useHiddenGeometry(!a.useHiddenGeometry())};a.prototype.onUseLayerVisibility=function(a){a.useLayerVisibility(!a.useLayerVisibility())};a.prototype.onUseSectionPlanes=function(a){a.useSectionPlanes(!a.useSectionPlanes())};a.prototype.onUseRenderingOptions=function(a){a.useRenderingOptions(!a.useRenderingOptions())};a.prototype.onUseShadowInfo=
function(a){a.useShadowInfo(!a.useShadowInfo())};a.prototype.onUseAxes=function(a){a.useAxes(!a.useAxes())};return a}(),W=function(){function a(b){this.settings=b;this.initialized_=!1;this.enableTransitions=c.observable(!1);this.transitionTime=c.observable("");this.delayTime=c.observable("");this.enableTransitions(this.settings.showTransitions);this.transitionTime(b.transitionTime.toString());this.delayTime(b.delayTime.toString())}a.prototype.initialize=function(){var a=this;this.transitionTime.subscribe(function(b){a.onTransitionTime(parseFloat(b))});
this.delayTime.subscribe(function(b){a.onDelayTime(parseFloat(b))});this.initialized_=!0};a.prototype.onTransitionTime=function(a){this.initialized_&&(this.transitionTime(a.toString()),this.settings.transitionTime=a)};a.prototype.onDelayTime=function(a){this.initialized_&&(this.delayTime(a.toString()),this.settings.delayTime=a)};a.prototype.onEnableTransitions=function(){this.enableTransitions(!this.enableTransitions());this.settings.showTransitions=this.enableTransitions()};return a}(),la=function(){function a(){this.actionNew=
"new";this.actionUpdate="update";this.actionDoNothing="nothing";this.action=c.observable(this.actionNew)}a.prototype.onClick=function(a){this.action(a)};a.prototype.getStyleUpdateTask=function(){return this.action()===this.actionNew?d.StyleUpdateTask.NEW_STYLE:this.action()===this.actionUpdate?d.StyleUpdateTask.UPDATE_STYLE:d.StyleUpdateTask.DO_NOTHING};return a}(),ga=function(){function a(){this.coreScenes_=[];this.coreBrowser_=d.CreateSceneBrowserInstance()}a.prototype.onFileNewOrOpen=function(){this.coreBrowser_.resetSceneData()};
a.prototype.getCoreScenes=function(){this.clearScenes();for(var a=this.coreBrowser_.getScenes(),b=0;b<a.size();++b){var c=a.get(b);this.coreScenes_.push(c)}a.delete();return this.coreScenes_};a.prototype.addScene=function(a,b){this.coreBrowser_.addScene(a,b)};a.prototype.shouldShowStyleUpdateWarning=function(a){return this.coreBrowser_.shouldShowStyleUpdateWarning(a)};a.prototype.processStyleUpdateWarningDialogResponse=function(a){return this.coreBrowser_.processStyleUpdateWarningDialogResponse(a,
!0)};a.prototype.playAnimation=function(){this.coreBrowser_.startStopSlideshow()};a.prototype.isPlayingAnimation=function(){return this.coreBrowser_.isInSlideshow()};a.prototype.getSettings=function(){return this.coreBrowser_.settings};a.prototype.setSettings=function(a){this.coreBrowser_.settings=a};a.prototype.moveSceneToIndex=function(a,b){this.coreBrowser_.moveSceneToIndex(a.coreScene,b)};a.prototype.clearScenes=function(){for(var a=0,b=this.coreScenes_;a<b.length;a++)b[a].delete();this.coreScenes_=
[]};return a}()});
define("StandardViews",["require","exports","knockout","Bindings/index"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.parentContainer_=b;this.viewModel_=new e}a.prototype.render=function(){var a=this.parentContainer_.querySelector(".standard-views-container");goog.isDefAndNotNull(a)||(a=goog.soy.renderAsFragment(SketchUpTemplates.standardViewsContainer,{}),this.parentContainer_.appendChild(a),c.applyBindings(this.viewModel_,a),this.viewModel_.initialize())};
a.prototype.onFileNewOrOpen=function(){this.viewModel_.onFileNewOrOpen()};return a}();b.StandardViewsView=a;var e=function(){function a(){this.initialized_=!1;this.tabTitle=c.observable();this.isPerspective=c.observable(!0);this.isParallel=c.observable(!1);this.perspectiveTitle=$t("Perspective");this.parallelTitle=$t("Parallel Projection");this.isPerspectiveControlsVisible=c.observable(!1);this.isPerspectiveControlsExpanded=c.observable(!1);this.fieldOfViewAngle=c.observable("")}a.prototype.initialize=
function(){var a=this;this.fieldOfViewAngle.subscribe(function(b){a.onSlideFieldOfView(parseFloat(b))});this.updateViewTypeObservables();this.initialized_=!0};a.prototype.onFileNewOrOpen=function(){this.updateViewTypeObservables()};a.prototype.onPerspective=function(){d.RunCommand(d.CommandIds.PERSPECTIVE_PROJECTION);this.updateViewTypeObservables()};a.prototype.onParallel=function(){d.RunCommand(d.CommandIds.PARALLEL_PROJECTION);this.updateViewTypeObservables()};a.prototype.updateTitle=function(){this.tabTitle(this.isPerspective()?
this.perspectiveTitle:this.parallelTitle)};a.prototype.updateViewTypeObservables=function(){var a=d.GetCommandState(d.CommandIds.PERSPECTIVE_PROJECTION)===d.CommandStates.MF_CHECKED;this.isPerspective(a);this.isParallel(!a);this.isPerspectiveControlsVisible(a);this.updateTitle();this.fieldOfViewAngle(d.GetFieldOfView().toString())};a.prototype.onFrontLeftView=function(){d.SetIsoViewDirection(1,1);d.RunCommand(d.CommandIds.VIEW_ISO)};a.prototype.onTopView=function(){d.RunCommand(d.CommandIds.VIEW_TOP)};
a.prototype.onFrontRightView=function(){d.SetIsoViewDirection(-1,1);d.RunCommand(d.CommandIds.VIEW_ISO)};a.prototype.onLeftView=function(){d.RunCommand(d.CommandIds.VIEW_LEFT)};a.prototype.onFrontView=function(){d.RunCommand(d.CommandIds.VIEW_FRONT)};a.prototype.onRightView=function(){d.RunCommand(d.CommandIds.VIEW_RIGHT)};a.prototype.onBackLeftView=function(){d.SetIsoViewDirection(1,-1);d.RunCommand(d.CommandIds.VIEW_ISO)};a.prototype.onBackView=function(){d.RunCommand(d.CommandIds.VIEW_BACK)};a.prototype.onBackRightView=
function(){d.SetIsoViewDirection(-1,-1);d.RunCommand(d.CommandIds.VIEW_ISO)};a.prototype.onClickPerspectiveControls=function(){this.isPerspectiveControlsExpanded(!this.isPerspectiveControlsExpanded())};a.prototype.onTwoPtPerspective=function(){d.RunCommand(d.CommandIds.TWO_PT_PERSPECTIVE_PROJECTION)};a.prototype.onSlideFieldOfView=function(a){this.initialized_&&(this.fieldOfViewAngle(a.toString()),d.SetFieldOfView(a))};return a}()});
define("SceneBrowser","require exports ProgramMode Scenes SidebarBrowser StandardViews".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return a.call(this)||this}__extends(b,a);b.prototype.renderContents=function(){var a=this;return new goog.Promise(function(b,c){a.standardViewsView_.render();a.scenesView_.render();a.pinDivToBottomOfBrowser(a.scenesView_.bottomBarDiv);a.contentsRendered_=!0;b()})};b.prototype.activeSceneChanged=function(){this.scenesView_.activeSceneChanged()};
b.prototype.scenesChanged=function(){this.scenesView_.render()};b.prototype.onSceneUpdated=function(a){this.scenesView_.onSceneUpdated(a)};b.prototype.onFileNewOrOpen=function(){this.standardViewsView_.onFileNewOrOpen();this.scenesView_.onFileNewOrOpen();this.contentsRendered_&&this.scenesView_.render()};b.prototype.initialize=function(a){this.browserContent_=a.querySelector(".browser-content");this.standardViewsView_=new f.StandardViewsView(this.browserContent_);this.scenesView_=new d.ScenesView(this.browserContent_,
c.currentProgramMode.isViewer())};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"scenes-tab"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"scenes-browser-top"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.sceneBrowser},enumerable:!0,configurable:!0});b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};
return b}(e.SidebarBrowser);b.default=a});define("StyleEditViewModel",["require","exports","knockout"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.onDone_=b;this.name=c.observable("My Style");this.imageUrl="/static/images/web/tb_SketchupIcon.svg";this.updateViewModelFromModel()}a.prototype.updateViewModelFromModel=function(){};a.prototype.onDone=function(){this.onDone_()};a.prototype.setName=function(){};return a}();b.default=a});
define("StylesBrowser","require exports knockout ApplicationFeatures Bindings/index EntitlementsFeatures FileUtils GlobalConstants ProgramMode Repromise SidebarBrowser StyleEditViewModel UpgradeMask XhrUtils UserTracking".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var c=a.call(this)||this;c.categoryMap_={};c.haveUnpackedZipFile_=!1;c.renderedCategories_={};c.styleDataToDelete_=[];c.styleDataVectorToDelete_=null;c.stylesBrowser_=
e.CreateStylesBrowserInstance();b.STYLES_PATH="/Styles";return c}__extends(b,a);b.prototype.renderContents=function(){this.isHomeTabSelected()?this.renderHomeContents():this.renderBrowseContents();return goog.Promise.resolve()};b.prototype.onFileNewOrOpen=function(){this.contentsRendered_&&this.isHomeTabSelected()&&this.selectBrowseTab()};b.prototype.onStylesNotification=function(){if(this.isHomeTabSelected())this.onHomeTabSelected()};b.prototype.renderHomeContents=function(){var a=this;this.clearTab();
var b=goog.soy.renderAsFragment(SketchUpTemplates.browserContentContainer,{},h.INJECTED_SOY_DATA);this.browserContent_.appendChild(b);var c=this.stylesBrowser_.getInModelStyles();this.styleDataVectorToDelete_=c;for(var e=0;e<c.size();++e){var g=c.get(e);this.renderIndividualStyle(g,b)}m.currentProgramMode.featureIsAvailable(d.default.RemoveWatermark)&&!f.canAccess(d.default.RemoveWatermark)&&(c=goog.soy.renderAsFragment(SketchUpTemplates.removeWatermarkButton,{}),c.addEventListener("click",function(){var b=
document.createElement("div"),c=new R.UpgradeMask(b,d.default.RemoveWatermark,la.UpsellTriggers.REMOVE_WATERMARK,function(){},$t("It's easier than removing a tattoo"),$t("Pesky watermark! We are partial to it, but that doesn't mean you have to be. Upgrade to remove it, and make your models all yours."),function(){return a.parentCallbacks_.closeSlideout()});a.parentCallbacks_.showSlideout($t("Remove Watermark"),b,function(){return c.destroy()})}),b.appendChild(c));this.contentsRendered_=!0;this.renderActionsBar()};
b.prototype.renderBrowseContents=function(){var a=this;this.clearTab();if(this.haveUnpackedZipFile_){for(var b=Object.keys(this.categoryMap_),c=0;c<b.length;++c){var d=b[c],e=this.stylesBrowser_.loadStyleFromPath(this.categoryMap_[d][0]),d={title:d,thumbnail:e.getThumbnail()};e.delete();e=goog.soy.renderAsFragment(SketchUpTemplates.styleCategory,{styleCategory:d},h.INJECTED_SOY_DATA);e.addEventListener("click",this.toggleCategory.bind(this,d,e));this.browserContent_.appendChild(e)}this.contentsRendered_=
!0}else b=goog.soy.renderAsFragment(SketchUpTemplates.loadingSpinner,{}),this.browserContent_.appendChild(b),goog.isDefAndNotNull(this.zipRetry_)&&this.zipRetry_.abort(),this.zipRetry_=new y.default(function(){return new goog.Promise(function(a,b){W.fetchBinary("/static/resources/styles.zip",function(b){a(b)},void 0,function(a){b(a)})})}),this.zipRetry_.promise().then(function(b){a.unpackZip(h.LOCAL_RESOURCES_PATH+"styles.zip",b);a.zipRetry_=void 0;a.isHomeTabSelected()||a.renderBrowseContents()}).thenCatch(function(a){})};
b.prototype.unpackZip=function(a,c){this.haveUnpackedZipFile_||(this.haveUnpackedZipFile_=!0,c=new Uint8Array(c),FS.writeFile(a,c,{encoding:"binary"}),FS.mkdir(b.STYLES_PATH),e.UnzipFile(a,b.STYLES_PATH),a=g.GetDirectoryContents(b.STYLES_PATH,!0),this.initStyleCategories(a))};b.prototype.initialize=function(a){var b=this;this.browserContent_=a.querySelector(".browser-content");a=a.querySelector(".styles.browser .browser-top-actions");m.currentProgramMode.featureIsAvailable(d.default.StyleEditing)?
a.querySelector(".edit-button").addEventListener("click",function(){b.onEditStyle()}):goog.dom.classlist.add(a,"invisible")};b.prototype.hasTabs=function(){return!0};b.prototype.initStyleCategories=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.isDirectory){var d=this.stylesBrowser_.translateCategoryName(c.name);this.categoryMap_[d]=[];for(var e=0,c=c.children;e<c.length;e++){var f=c[e];f.isDirectory||this.categoryMap_[d].push(f.fullPath)}}}};b.prototype.onHomeTabSelected=function(){this.renderHomeContents()};
b.prototype.onBrowseTabSelected=function(){this.renderBrowseContents()};b.prototype.clearTab=function(){this.removeActionsBar();goog.dom.removeChildren(this.browserContent_);this.renderedCategories_={};goog.isDefAndNotNull(this.styleDataVectorToDelete_)&&(this.styleDataVectorToDelete_.delete(),this.styleDataVectorToDelete_=null);for(var a=0,b=this.styleDataToDelete_;a<b.length;a++)b[a].delete();this.styleDataToDelete_=[];this.contentsRendered_=!1};b.prototype.toggleCategory=function(a,b,c){b.classList.toggle("expanded");
b=b.querySelector(".category-contents");this.renderStyleCategory(a.title,b)};b.prototype.renderStyleCategory=function(a,b){if(!this.renderedCategories_[a]){this.renderedCategories_[a]=!0;a=this.categoryMap_[a];for(var c=0;c<a.length;++c){var d=this.stylesBrowser_.loadStyleFromPath(a[c]);this.renderIndividualStyle(d,b)}}};b.prototype.renderIndividualStyle=function(a,b){var c=a.getThumbnail(),c={name:a.getName(),hasThumbnail:!goog.string.isEmptyOrWhitespaceSafe(c),thumbnail:c},c=goog.soy.renderAsFragment(SketchUpTemplates.style,
{style:c},h.INJECTED_SOY_DATA);b.appendChild(c);c.addEventListener("click",this.handleStyleClick.bind(this,a,c));a.isSelected()&&this.setSelectedStyleDiv(c);this.styleDataToDelete_.push(a)};b.prototype.handleStyleClick=function(a,b,c){a.handleClick();this.setSelectedStyleForEdit(a);this.setSelectedStyleDiv(b);c.stopPropagation()};b.prototype.setSelectedStyleDiv=function(a){goog.isDefAndNotNull(this.selectedStyleDiv_)&&this.selectedStyleDiv_.classList.remove("selected-material");this.selectedStyleDiv_=
a;a.classList.toggle("selected-material")};b.prototype.setSelectedStyleForEdit=function(a){this.selectedStyleData_=a;document.querySelector(".styles.browser .selected-name").innerText=this.selectedStyleData_.getName();a=document.querySelector(".styles.browser .edit .square-thumbnail img");var b=h.THUMBNAIL_DATA_URL+this.selectedStyleData_.getThumbnail();a.src=b};b.prototype.onEditStyle=function(){var a=this;if(goog.isDefAndNotNull(this.selectedStyleData_)){var b=goog.soy.renderAsFragment(SketchUpTemplates.editStyle,
{}),e=new R.UpgradeMask(b,d.default.StyleEditing,la.UpsellTriggers.STYLE_EDIT,function(){var d=b.querySelector(".js-edit-style"),e=new L.default(function(){a.parentCallbacks_.closeSlideout()});c.applyBindings(e,d);return d},"",$t("Editing styles is an advanced feature. Please login or upgrade to edit styles."),function(){a.parentCallbacks_.closeSlideout()});this.parentCallbacks_.showSlideout($t("Edit Style"),b,function(){e.destroy()})}};Object.defineProperty(b.prototype,"mainButtonClass",{get:function(){return"styles-tab"},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topElementId",{get:function(){return"styles-browser-top"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return SketchUpTemplates.stylesBrowser},enumerable:!0,configurable:!0});b.getInstance=function(){b.staticInstance_||(b.staticInstance_=new b);return b.staticInstance_};b.prototype.renderActionsBar=function(){this.pinDivToBottomOfBrowser(goog.soy.renderAsFragment(SketchUpTemplates.stylesBottomActionsBar,
{}));this.actionsViewModel_=new ga(this.stylesBrowser_);c.applyBindings(this.actionsViewModel_,this.bottomBar_);this.browserContent_.appendChild(this.bottomBar_)};b.prototype.removeActionsBar=function(){goog.isDefAndNotNull(this.bottomBar_)&&(c.cleanNode(this.bottomBar_),c.removeNode(this.bottomBar_),this.bottomBar_=null)};return b}(K.SidebarBrowser);b.default=a;var ga=function(){function a(b){this.model_=b;this.canPurge=c.observable(!1);this.update()}a.prototype.purge=function(){this.canPurge()&&
this.model_.purge()};a.prototype.update=function(){this.canPurge(this.model_.canPurge())};return a}()});
define("BrowserManager","require exports knockout ApplicationFeatures ComponentBrowser CrashReporter Delay DisplayBrowser EntityInfoBrowser InstructorBrowser LayersBrowser MaterialsBrowser ModelInfoBrowser OutlinerBrowser ProgramMode SceneBrowser StylesBrowser".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.browsers_=[]}a.prototype.render=function(){var a=this,b=goog.soy.renderAsFragment(SketchUpTemplates.sidebar,
{outlinerAvailable:la.currentProgramMode.featureIsAvailable(d.default.Outliner)});document.body.appendChild(b);this.sidebarContainer_=b.querySelector(".right-sidebar-container");this.sidebarContainer_.addEventListener("scroll",function(){return a.onViewportChange()});this.resizableBrowserViewModel_=new Mg;c.applyBindings(this.resizableBrowserViewModel_,b);this.slideout_=b.querySelector(".right-sidebar-slideout");this.tabContainer_=b.querySelector(".right-sidebar-tabs-container");b.querySelector(".hide-sidebar-tab").addEventListener("click",
function(b){a.onHideSidebarButtonClick(b)});this.browsers_.push(m.default.getInstance());la.currentProgramMode.featureIsAvailable(d.default.Outliner)&&this.browsers_.push(W.default.getInstance());this.browsers_.push(y.default.getInstance());this.browsers_.push(e.default.getInstance());this.browsers_.push(L.default.getInstance());this.browsers_.push(xh.default.getInstance());this.browsers_.push(K.LayersBrowser.getInstance());this.browsers_.push(ga.default.getInstance());this.browsers_.push(h.default.getInstance());
this.browsers_.push(R.default.getInstance());for(var b=function(b){var c=g.tabContainer_.querySelector("."+b.mainButtonClass);c.addEventListener("click",function(){f.RecordBreadcrumb({message:b.mainButtonClass,category:"browser-click",level:"info"});a.closeSlideout();b.show()});b.setContainerInteractions({onActiveChange:function(a){a?c.classList.add("active"):c.classList.remove("active")},onExpandedChange:function(a){a?c.classList.add("expanded"):c.classList.remove("expanded")},onOpenChange:function(b){b?
c.classList.add("opened"):(c.classList.remove("opened"),0===a.browsers_.filter(function(a){return a.isVisible}).length&&a.showSidebar(!1))},onViewportChange:function(){return a.onViewportChange()},isVisible:function(){return a.resizableBrowserViewModel_.isOpen()},getViewportHeight:function(){return a.sidebarContainer_.offsetHeight},getViewportTop:function(){return a.sidebarContainer_.scrollTop},scrollTo:function(b){return a.scrollToBrowser(b)},showSlideout:function(b,c,d){return a.showSlideout(b,
c,d)},closeSlideout:function(){return a.closeSlideout()}});g.sidebarContainer_.appendChild(b.render())},g=this,zh=0,yh=this.browsers_;zh<yh.length;zh++)b(yh[zh]);this.registerGlobalListeners()};a.prototype.showSidebar=function(a){this.resizableBrowserViewModel_.isOpen(a)};a.prototype.showSlideout=function(a,b,c){if(this.resizableBrowserViewModel_.isSlideoutOpen())return!1;this.onSlideoutClosed_=c;this.slideout_.querySelector(".title").innerHTML=a;a=this.slideout_.querySelector(".content");goog.dom.removeChildren(a);
a.appendChild(b);this.resizableBrowserViewModel_.isSlideoutOpen(!0);return!0};a.prototype.closeSlideout=function(){this.resizableBrowserViewModel_.isSlideoutOpen(!1);goog.isDefAndNotNull(this.onSlideoutClosed_)&&g.default(this.onSlideoutClosed_,250)};a.prototype.onFileNewOrOpen=function(){for(var a=0,b=this.browsers_;a<b.length;a++)b[a].onFileNewOrOpen()};a.prototype.registerGlobalListeners=function(){var a=this;window.addEventListener("resize",function(){a.onViewportChange()});document.addEventListener("keydown",
function(b){b.keyCode===goog.events.KeyCodes.ESC&&(a.resizableBrowserViewModel_.isSlideoutOpen()?a.closeSlideout():a.showSidebar(!1),goog.isDefAndNotNull(b.target)&&b.target instanceof HTMLElement&&b.target.blur())});document.addEventListener("mousedown",function(b){b.target instanceof Node&&(a.slideout_===b.target||a.slideout_.contains(b.target)||a.sidebarContainer_===b.target||a.tabContainer_.contains(b.target))||!a.resizableBrowserViewModel_.isResizing()&&a.resizableBrowserViewModel_.isSlideoutOpen()&&
a.closeSlideout()})};a.prototype.onHideSidebarButtonClick=function(a){this.resizableBrowserViewModel_.isSlideoutOpen()?this.closeSlideout():this.showSidebar(!1)};a.prototype.onViewportChange=function(){for(var a=0;a<this.browsers_.length;++a)this.browsers_[a].onViewportChange()};a.prototype.scrollToBrowser=function(a){this.browsers_.filter(function(b){return b!==a}).forEach(function(a){return a.blur()});if(a){this.showSidebar(!0);var b=a.getOffset();$(this.sidebarContainer_).animate({scrollTop:b},
100)}};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};return a}();b.default=a;var Mg=function(){function a(){var b=this;this.resizableContainerWidth=c.observable(300);this.isOpen=c.observable(!1);this.isSlideoutOpen=c.observable(!1);this.isResizing=c.observable(!1);document.addEventListener("mouseup",function(a){b.resizeEnd()});window.addEventListener("resize",function(){b.resizeForWindow()})}a.prototype.resizeStart=function(a,b){this.boundMouseHandler_=
this.handleMouseMove.bind(this);document.addEventListener("mousemove",this.boundMouseHandler_,!0);this.isResizing(!0);return!1};a.prototype.resizeEnd=function(){document.removeEventListener("mousemove",this.boundMouseHandler_);this.boundMouseHandler_=void 0;this.isResizing(!1)};a.prototype.handleMouseMove=function(a){this.isResizing()&&(this.resizeUpdate(a),a.stopPropagation())};a.prototype.resizeForWindow=function(){var a=window.innerWidth-this.resizableContainerWidth()-36,a=this.clampLeftEdgePosition(a);
this.resizableContainerWidth(window.innerWidth-a-36)};a.prototype.resizeUpdate=function(a){if(0!==a.clientX||0!==a.clientY)a=this.clampLeftEdgePosition(a.x),this.resizableContainerWidth(window.innerWidth-a-36)};a.prototype.clampLeftEdgePosition=function(a){return Math.max(.3*window.innerWidth,Math.min(window.innerWidth-300-36,a))};return a}()});
define("Host",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=/(?:^.+\.|^)(?:sketchup|tekla|trimble)\.com$/i;b.isEmbeddedSafely=function(){return window===window.top||c.test(document.referrer)}});
define("LabelEditor",["require","exports","knockout","Bindings/index","Canvas"],function(a,b,c,d,e){function f(a,b){b=b.getBoundingClientRect();var c=e.getBoundingBox();return b.right+35>c.right?d.TextAlignment.Right:b.left-35<c.left?d.TextAlignment.Left:a}function g(a){a=a.getBoundingClientRect();var b=e.getBoundingBox(),c=0,d=0;a.left<b.left+35?c=35+b.left-a.left:a.right>b.right-35&&(c=-(35+a.right-b.right));a.top<b.top+35?d=35+b.top-a.top:a.bottom>b.bottom-35&&(d=-(35+a.bottom-b.bottom));return[c,
d]}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(b,d,e,f,g,h,m){var xh=this;this.isFocused=c.observable(!1);this.isVisible_=!1;this.xRatio=c.observable(b);this.yRatio=c.observable(d);this.text=c.observable(e);this.done_=h;this.cancel_=m;this.fontSize=c.observable(g);this.leftOffset=c.observable(0);this.isFocused.subscribe(function(a){a?xh.isVisible_=!0:xh.isVisible_&&xh.done_(xh.text().trim())})}a.prototype.onKeydown=function(a,b){return this.isVisible_&&b.keyCode===
goog.events.KeyCodes.ESC?(this.cancel_(),!1):!0};return a}();b.showTextbox=function(a,b,K,L){var R=goog.soy.renderAsFragment(SketchUpTemplates.label,{}),W=function(){};K=new h(a/e.getRenderWidth(),b/e.getRenderHeight(),K,L===d.TextAlignment.Left,12,function(a){d.endLabelEditing(a);W()},function(){d.cancelLabelEditing();W()});c.applyBindings(K,R);W=function(){c.cleanNode(R);R.remove()};document.body.appendChild(R);var la=R.querySelector("textarea");f(L,la)===d.TextAlignment.Right&&K.leftOffset(-R.offsetWidth);
la=g(la);L=la[0];la=la[1];K.xRatio((a+L)/e.getRenderWidth());K.yRatio((b+la)/e.getRenderHeight());K.isFocused(!0)}});
define("MeasureBox",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.GetContainer=function(){return document.getElementById("measure-box-container")};b.SetLabel=function(a){var b=document.getElementById("measurements-box-label");a||(a=$t("Measurements"));b&&(b.textContent=a)};b.SetValue=function(a){var b=document.getElementById("measurements-box");b&&(b.value=a)}});
define("ToolBar",["require","exports","knockout","Bindings/index","ToolGroup"],function(a,b,c,d,e){function f(a){return{toolData:a,doToolCommand:function(){a.command.run()}}}Object.defineProperty(b,"__esModule",{value:!0});b.makeToolViewModel=f;b.createCutCopyPasteToolbar=function(a){var b=new m,b=[e.Tools.makeToolData(d.CommandIds.EDIT_CUT,$t("Cut"),"/static/images/web/tb_cut.svg",b.CanCut()),e.Tools.makeToolData(d.CommandIds.EDIT_COPY,$t("Copy"),"/static/images/web/tb_copy.svg",b.CanCopy()),e.Tools.makeToolData(d.CommandIds.EDIT_PASTE,
$t("Paste"),"/static/images/web/tb_paste.svg",b.CanPaste()),e.Tools.makeToolData(d.CommandIds.EDIT_PASTE_IN_PLACE,$t("Paste in place"),"/static/images/web/tb_paste_in_place.svg",b.CanPasteInPlace()),e.Tools.makeToolData(d.CommandIds.EDIT_DELETE,$t("Delete"),"/static/images/web/wi_delete.svg",b.CanDelete())];(new g(a,b)).render()};var g=function(){function a(b,c){this.container_=b;this.tools_=c}a.prototype.render=function(){var a=goog.soy.renderAsFragment(SketchUpTemplates.toolbar,{});this.container_.appendChild(a);
this.toolBarViewModel_=new h(this.makeMenuItemViewModels());c.applyBindings(this.toolBarViewModel_,a)};a.prototype.makeMenuItemViewModels=function(){for(var a=[],b=0,c=this.tools_;b<c.length;b++)a.push(f(c[b]));return a};return a}(),h=function(){return function(a){this.toolViewModels=a;this.isExpanded=c.observable(!1)}}();b.ToolbarViewModel=h;var m=function(){function a(){}a.prototype.CanCut=function(){return d.IsCommandEnabled(d.CommandIds.EDIT_CUT)};a.prototype.CanCopy=function(){return d.IsCommandEnabled(d.CommandIds.EDIT_COPY)};
a.prototype.CanPaste=function(){return d.IsCommandEnabled(d.CommandIds.EDIT_PASTE)};a.prototype.CanPasteInPlace=function(){return d.IsCommandEnabled(d.CommandIds.EDIT_PASTE_IN_PLACE)};a.prototype.CanDelete=function(){return d.IsCommandEnabled(d.CommandIds.EDIT_DELETE)};return a}()});
define("MenuManager",["require","exports","Bindings/index","ProgramMode","ToolBar"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.resetControl=function(){};a.prototype.updateState=function(){};a.prototype.isSeparator=function(){return!1};return a}();var f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"control",{get:function(){var a=goog.dom.createDom("DIV");e.createCutCopyPasteToolbar(a);
return new goog.ui.Control(a)},enumerable:!0,configurable:!0});return b}(a);b.MenuToolBar=f;var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"control",{get:function(){return new goog.ui.MenuSeparator},enumerable:!0,configurable:!0});b.prototype.isSeparator=function(){return!0};return b}(a);b.MenuSeparator=g;var h=function(a){function b(c,d,e){var f=a.call(this)||this;f.title_=c;f.state_=d;f.commandId_=e;return f}__extends(b,
a);Object.defineProperty(b.prototype,"commandFunction",{set:function(a){this.commandFunction_=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stateUpdaterFunction",{set:function(a){this.stateUpdaterFunction_=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{set:function(a){this.state_=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"commandId",{get:function(){return this.commandId_},enumerable:!0,configurable:!0});b.prototype.updateState=
function(){goog.isDefAndNotNull(this.stateUpdaterFunction_)&&this.stateUpdaterFunction_(this);this.applyState()};b.prototype.applyState=function(){this.state_&(c.CommandStates.MF_DISABLED|c.CommandStates.MF_GRAYED)?this.menu_.setEnabled(!1):this.menu_.setEnabled(!0);this.state_&c.CommandStates.MF_CHECKED?(this.menu_.setCheckable(!0),this.menu_.setChecked(!0)):this.menu_.setChecked(!1)};b.prototype.resetControl=function(){this.menu_=null};Object.defineProperty(b.prototype,"control",{get:function(){var a=
this;if(goog.isDefAndNotNull(this.menu_))return this.menu_;var b=this.title_.replace("&","");this.menu_=new goog.ui.MenuItem(b);this.applyState();b=this.commandFunction_;goog.isDefAndNotNull(b)||(b=function(b){c.RunCommand(a.commandId_)});goog.events.listen(this.menu_,"action",b);return this.menu_},enumerable:!0,configurable:!0});return b}(a);b.MenuCommand=h;a=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;c.items_=[];return c}__extends(b,a);b.prototype.addItem=function(a){this.items_.push(a)};
b.prototype.getItem=function(a){return this.items_[a]};Object.defineProperty(b.prototype,"itemCount",{get:function(){return this.items_.length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"control",{get:function(){return null},enumerable:!0,configurable:!0});b.prototype.updateState=function(){for(var a=0;a<this.items_.length;++a)this.items_[a].updateState()};b.prototype.isLastItemSeparator=function(){return 0<this.items_.length&&this.items_[this.items_.length-1].isSeparator()?
!0:!1};return b}(a);b.MenuItemContainer=a;var m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"defaultMenuItems",{set:function(a){this.defaultMenuItems_=a},enumerable:!0,configurable:!0});b.prototype.popUp=function(){this.menu_=new goog.ui.PopupMenu;if(goog.isDefAndNotNull(this.defaultMenuItems_))for(var a=0,b=this.defaultMenuItems_;a<b.length;a++){var c=b[a];c.resetControl();this.menu_.addChild(c.control,!0)}0<this.items_.length&&
this.menu_.addChild((new g).control,!0);for(a=0;a<this.items_.length;++a)this.menu_.addChild(this.items_[a].control,!0);this.menu_.render(document.body);this.menu_.attach(document.getElementById("canvas"),void 0,goog.positioning.Corner.TOP_START,!0)};b.prototype.clear=function(){goog.isDefAndNotNull(this.menu_)&&(this.menu_.detachAll(),this.menu_.dispose(),this.menu_=null)};Object.defineProperty(b.prototype,"control",{get:function(){return null},enumerable:!0,configurable:!0});return b}(a);b.PopupMenu=
m;var y=function(a){function b(c){var d=a.call(this)||this;d.title_=c;return d}__extends(b,a);Object.defineProperty(b.prototype,"control",{get:function(){for(var a=this.title_.replace("&",""),a=new goog.ui.SubMenu(a),b=0;b<this.items_.length;++b)a.addItem(this.items_[b].control);return a},enumerable:!0,configurable:!0});return b}(a);b.SubMenu=y;a=function(a){function b(c){var d=a.call(this)||this;d.title_=c;return d}__extends(b,a);Object.defineProperty(b.prototype,"title",{get:function(){return this.title_},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"control",{get:function(){for(var a=this,b=new goog.ui.Menu,c=0;c<this.items_.length;++c)b.addItem(this.items_[c].control);goog.events.listen(b,"show",function(b){a.updateState()});return new goog.ui.MenuButton(this.title_,b)},enumerable:!0,configurable:!0});return b}(a);b.Menu=a;a=function(){function a(){this.defaultMenuItems_=[];this.defaultMenuItems_.push(new f)}a.prototype.addDefaultMenuItem=function(a){this.defaultMenuItems_.push(a)};
a.prototype.initContextMenu=function(){this.contextMenu_=new m;this.contextMenu_.defaultMenuItems=this.defaultMenuItems_;this.currentSubMenu_=null};a.prototype.clearContextMenu=function(){goog.isDefAndNotNull(this.contextMenu_)&&(this.contextMenu_.clear(),this.currentSubMenu_=null)};a.prototype.addContextMenuCommand=function(a,b,c){this.contextMenu_.addItem(new h(a,b,c))};a.prototype.addContextSubMenu=function(a){this.currentSubMenu_=new y(a);this.contextMenu_.addItem(this.currentSubMenu_)};a.prototype.addContextSubMenuCommand=
function(a,b,c){goog.isDefAndNotNull(this.currentSubMenu_)&&this.currentSubMenu_.addItem(new h(a,b,c))};a.prototype.addContextMenuSeparator=function(){this.contextMenu_.isLastItemSeparator()||this.contextMenu_.addItem(new g)};a.prototype.addContextSubMenuSeparator=function(){this.currentSubMenu_&&this.currentSubMenu_.addItem(new g)};a.prototype.popUpContextMenu=function(){d.currentProgramMode.handlesContextMenus()&&this.contextMenu_.popUp()};a.prototype.popUpContextMenuDefault=function(){d.currentProgramMode.handlesContextMenus()&&
(this.initContextMenu(),this.contextMenu_.popUp())};Object.defineProperty(a.prototype,"container",{get:function(){return this.container_},enumerable:!0,configurable:!0});a.getInstance=function(){goog.isDefAndNotNull(a.staticInstance_)||(a.staticInstance_=new a);return a.staticInstance_};return a}();b.MenuManager=a});
define("TouchHandler",["require","exports"],function(a,b){function c(a){var b=a.changedTouches[0],c;switch(a.type){case "touchstart":c="mousedown";break;case "touchmove":c="mousemove";break;case "touchend":c="mouseup";break;default:return}var g=document.createEvent("MouseEvent");g.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(g);a.preventDefault()}Object.defineProperty(b,"__esModule",{value:!0});b.setupTouchEvents=function(){var a=
Module.canvas;a.addEventListener("touchstart",c,!0);a.addEventListener("touchmove",c,!0);a.addEventListener("touchend",c,!0);a.addEventListener("touchcancel",c,!0)}});
define("MobileHandler",["require","exports","Bindings/index","TouchHandler"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});b.setupMobile=function(){if(goog.userAgent.MOBILE){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();d.setupTouchEvents();c.RunCommand(c.CommandIds.ACTIVATE_ORBIT)}}});
define("NewComponentDialog",["require","exports","Bindings/index","ComponentEditor","DialogPrompts"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.componentMaker_=b;this.componentMaker_.Start();this.dialog_=new goog.ui.Dialog(null,!0);this.dialog_.setDisposeOnHide(!0);goog.events.listen(this.dialog_,goog.ui.Dialog.EventType.SELECT,this.handleButtonClick.bind(this));this.setupDialog()}a.prototype.setupDialog=function(){this.dialog_.setTitle($t("Make a Component"));
var a={name:this.componentMaker_.GetUniqueName()},b=SketchUpTemplates.newComponentDialog({componentInfo:a,behaviorTypes:c.ComponentBehaviorTypes}),a=this.dialog_.getContentElement();a.innerHTML=b;b=this.componentMaker_.Is2d()?c.ComponentBehaviorTypes.GLUE_TO_ANY:c.ComponentBehaviorTypes.GLUE_TO_NONE;this.editor_=new d.default(a,{selectedGlueTo:b});this.editor_.onChange.listen(this.handleEditorChange.bind(this));this.dialog_.setButtonSet(e.CreateOkCancel());this.dialog_.setVisible(!0)};a.prototype.handleEditorChange=
function(a){"glue"==a&&this.componentMaker_.OnAlignmentChanged(this.editor_.glueToText)};a.prototype.handleButtonClick=function(a){a.key==goog.ui.Dialog.DefaultButtonKeys.CANCEL?this.cancelSelected():a.key==goog.ui.Dialog.DefaultButtonKeys.OK&&this.okSelected()};a.prototype.cancelSelected=function(){this.componentMaker_.CleanUp();this.componentMaker_.delete()};a.prototype.okSelected=function(){this.componentMaker_.Finish(this.editor_.name,this.editor_.description,this.editor_.glueToText,this.editor_.cutOpening,
this.editor_.alwaysFaceCamera,this.editor_.shadowsFaceSun);this.componentMaker_.delete()};return a}();b.default=a});
define("TooltipManager",["require","exports","Bindings/index"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=function(a,b,c){goog.ui.Tooltip.call(this,a,b,c);this.allowedToShow_=!1};goog.inherits(d,goog.ui.Tooltip);d.prototype.setAllowedToShow=function(a){this.allowedToShow_=a};d.prototype.onBeforeShow=function(){return this.allowedToShow_?goog.ui.Tooltip.prototype.onBeforeShow.call(this):!1};a=function(){function a(){this.canvasTooltip_=new d(c.GetCanvas());this.canvasTooltipTimeoutId_=
0}a.prototype.showInfoToolTip=function(a,b,c,d,e){this.showCanvasToolTip(a,b)};a.prototype.hideInfoToolTip=function(a){this.hideCanvasToolTip()};a.prototype.showCanvasToolTip=function(a,b){var d=this;b==c.TooltipTypes.INFO?this.canvasTooltip_.setShowDelayMs(0):this.canvasTooltip_.setShowDelayMs(250);this.canvasTooltipTimeoutId_&&this.hideCanvasToolTip();this.canvasTooltipTimeoutId_=window.setTimeout(function(a,b){d.canvasTooltip_.setAllowedToShow(!0);d.canvasTooltip_.setText(a);d.canvasTooltip_.showForElement(c.GetCanvas());
d.canvasTooltip_.showPopupElement();a=d.canvasTooltip_.getElement();b==c.TooltipTypes.ERROR?a.classList.add("goog-tooltip-error"):a.classList.remove("goog-tooltip-error");d.canvasTooltipTimeoutId_=0;d.canvasTooltip_.setAllowedToShow(!1)},this.canvasTooltip_.getShowDelayMs(),a,b)};a.prototype.hideCanvasToolTip=function(){this.canvasTooltipTimeoutId_&&(window.clearTimeout(this.canvasTooltipTimeoutId_),this.canvasTooltipTimeoutId_=0);this.canvasTooltip_.isVisible()&&(this.canvasTooltip_.setAllowedToShow(!1),
this.canvasTooltip_.hidePopupElement())};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};a.initializeToolTipForElement=function(a){var b=a.dataset.tooltip;b&&new goog.ui.Tooltip(a,b)};a.initializeIconTooltips=function(){for(var b=document.querySelectorAll("[data-tooltip]"),c=0;c<b.length;++c)a.initializeToolTipForElement(b[c])};return a}();b.default=a});
define("UndoManager",["require","exports","Bindings/index","SaveHandler","SketchUpEvent"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.onUndoRedoStateEvent_=e.SketchUpEvents.Create()}a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};a.prototype.listenToUndoRedoStateEvent=function(a){this.onUndoRedoStateEvent_.listen(a)};a.prototype.onTransactionEnd=function(a,b,c){this.onUndoRedoStateEvent_.trigger()};
a.prototype.onEraseAll=function(){this.onUndoRedoStateEvent_.trigger(!0)};a.prototype.canUndo=function(){return c.IsCommandEnabled(c.CommandIds.UNDO)};a.prototype.canRedo=function(){return c.IsCommandEnabled(c.CommandIds.REDO)};a.prototype.undo=function(){d.default.getInstance().isSaving()||c.RunCommand(c.CommandIds.UNDO)};a.prototype.redo=function(){d.default.getInstance().isSaving()||c.RunCommand(c.CommandIds.REDO)};return a}();b.default=a});
define("JSBindings","require exports Bindings/index BrowserManager Canvas ComponentBrowser CrashReporter Cursor DialogPrompts DisplayBrowser Entitlements EntityInfoBrowser EnvironmentSettings GoogleAnalytics Host InstructorBrowser LabelEditor LayersBrowser Log Login Main MaterialsBrowser MaterialsLoader MeasureBox MenuManager MobileHandler ModelingToolbarManager NewComponentDialog OutlinerBrowser ProgramMode SaveHandler SceneBrowser leftsidebar/Sidebar StylesBrowser TooltipManager UndoManager XhrUtils".split(" "),function(a,
b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh,Ch,Ah,Bh,Eh,yh,Fh,Gh,Dh,Hh,Rh,Ih,Jh,Kh,Lh,Sh,Mh,Th,Zh){function Ph(a){return Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_NORMAL,null)}Object.defineProperty(b,"__esModule",{value:!0});b.IsPro=function(){var a=K.getInfo();return goog.isDefAndNotNull(a)?a.sketchUpWebFeatureId===K.ExternalFeatureId.SketchUpWebPaid:!1};b.IsViewer=function(){return Ih.currentProgramMode.isViewer()};b.IsEdu=function(){return Ih.currentProgramMode.isEdu()};b.DoPostMainInit=
function(){Ah.PostMainInit()};b.StartMainLoop=function(){e.MainLoop()};b.FailedBrowserChecks=function(){return Ah.FailedBrowserChecks()};b.RedrawTheCanvas=function(){e.PostRedisplay()};b.SetStatusBarMeasureLabel=function(a){yh.SetLabel(a)};b.SetStatusBarMeasureValue=function(a){yh.SetValue(a)};b.SetStatusBarPrompt=function(a){var b=document.getElementById("prompt");b&&(goog.string.isEmptySafe(a)?b.style.visibility="hidden":(b.style.visibility="visible",b.textContent=a))};b.OnEdgeRenderingChanged=
function(){y.default.getInstance().onUpdateEdgeSettings()};b.OnEntityInfoChanged=function(){L.default.getInstance().updateEntityInfo()};b.OnOutlinerChanged=function(){Rh.default.getInstance().update()};b.OnUpdateFogSettings=function(){y.default.getInstance().onUpdateFogSettings()};b.OnUpdateFogStartEnd=function(){y.default.getInstance().onUpdateFogStartEnd()};b.OnUpdateDisplaySettings=function(){y.default.getInstance().onUpdateDisplaySettings()};b.OnActiveLayerChanged=function(a){Mg.LayersBrowser.getInstance().onActiveLayerChanged(a)};
b.OnLayerAdded=function(a){Mg.LayersBrowser.getInstance().addLayerToUI(a)};b.OnLayerRemoved=function(a){Mg.LayersBrowser.getInstance().removeLayerFromUI(a)};b.OnLayerRenamed=function(a){Mg.LayersBrowser.getInstance().onLayerRenamed(a)};b.OnLayerUndoChange=function(a){Mg.LayersBrowser.getInstance().onLayerUndoChange(a)};b.OnLayerHideChange=function(a){Mg.LayersBrowser.getInstance().onLayerVisibilityChange(a)};b.CreateOffScreenContext=function(a,b,c,d,f){return e.CreateOffScreenContext(a,b,c,d,f)};
b.ActivateOnScreenContext=function(){e.ActivateMainContext()};b.ActivateOffScreenContext=function(a){e.ActivateOffScreenContext(a)};b.DeleteOffScreenContext=function(a){e.DeleteOffScreenContext(a)};b.ResizeOffScreenContext=function(a,b,c){return e.ResizeOffScreenContext(a,b,c)};b.GetOffScreenContextWidth=function(a){return e.getOffScreenContextWidth(a)};b.GetOffScreenContextHeight=function(a){return e.getOffScreenContextHeight(a)};b.OnActiveToolChanged=function(a){Ih.currentProgramMode.handlesActiveToolChange()&&
(ga.default.getInstance().activeToolChanged(a),Dh.default.getInstance().activeToolChanged(a))};b.OnTransactionEnd=function(a,b,c){setTimeout(function(){Th.default.getInstance().onTransactionEnd(a,b,c);Jh.default.getInstance().updateSaveButtonState()},0)};b.OnComponentDefinitionNotification=function(){f.default.getInstance().onComponentDefinitionNotification()};b.OnMaterialNotification=function(a,b){Eh.onMaterialNotification(a,b)};b.OnStylesNotification=function(){Sh.default.getInstance().onStylesNotification()};
b.OnComponentInstanceNotification=function(){f.default.getInstance().onComponentInstanceNotification()};b.OnEraseAll=function(){Ih.currentProgramMode.handlesEraseAll()&&(Th.default.getInstance().onEraseAll(),f.default.getInstance().clearComponentsContent())};b.ShowNewComponentDialog=function(a){a=c.CreateComponentMakerInstance(a);new Hh.default(a)};b.OnFileNewOrOpen=function(){d.default.getInstance().onFileNewOrOpen();Jh.default.getInstance().onFileNewOrOpen();Gh.setupMobile()};b.OnActiveSceneChanged=
function(){Kh.default.getInstance().activeSceneChanged()};b.OnScenesChanged=function(){Kh.default.getInstance().scenesChanged()};b.OnSceneUpdated=function(a){Kh.default.getInstance().onSceneUpdated(a)};b.ShowEntityInfoPanel=function(){L.default.getInstance().show()};b.ShowMaterialsPanel=function(){Bh.default.getInstance().show()};b.OnInModelMaterialMatched=function(){Bh.default.getInstance().onInModelMaterialMatched()};b.GetPixelsPerInch=function(){return 72*window.devicePixelRatio};b.ShowInfoToolTip=
function(a,b,c,d,e){void 0===c&&(c=!1);void 0===d&&(d=0);void 0===e&&(e=0);Mh.default.getInstance().showInfoToolTip(a,b,c,d,e)};b.HideInfoToolTip=function(a){Mh.default.getInstance().hideInfoToolTip(a)};b.NotifyCommandRun=function(a){W.fireToolChangeEvent(a);g.RecordBreadcrumb({message:a,category:"tool-change",level:"info"})};b.AutoSave=function(){Jh.default.getInstance().autoSave().thenCatch(function(a){zh.error("Autosave failed: "+a)})};b.CreateCursor=function(a,b,c,d){return h.createCursor(a,b,
c,d)};b.SetCursor=function(a){h.setCanvasCursor(a)};b.ShowAddLocationDialog=function(a,b,c){Lh.Sidebar.getInstance().renderAddLocationDialog(a,b,c)};b.DoAddLocationXHR=function(a,b){Zh.DoAddLocationXHR(a,b)};b.LookupEnvironmentSetting=function(a){var b=R.Get();return a in b?Ph(b[a]):0};b.GetLanguageCode=function(){return Ph(SketchUp.getCurrentLanguage())};b.ShowInfoDialog=function(a,b){m.ShowInfoDialog(a,b)};b.InitContextMenu=function(){Fh.MenuManager.getInstance().initContextMenu()};b.ClearContextMenu=
function(){Fh.MenuManager.getInstance().clearContextMenu()};b.AddContextSubMenu=function(a){Fh.MenuManager.getInstance().addContextSubMenu(a)};b.AddContextMenuCommand=function(a,b,c){Fh.MenuManager.getInstance().addContextMenuCommand(a,b,c)};b.AddContextSubMenuCommand=function(a,b,c){Fh.MenuManager.getInstance().addContextSubMenuCommand(a,b,c)};b.AddContextMenuSeparator=function(){Fh.MenuManager.getInstance().addContextMenuSeparator()};b.AddContextSubMenuSeparator=function(){Fh.MenuManager.getInstance().addContextSubMenuSeparator()};
b.PopUpContextMenu=function(){Fh.MenuManager.getInstance().popUpContextMenu()};b.PopUpContextMenuDefault=function(){Fh.MenuManager.getInstance().popUpContextMenuDefault()};b.UpdateSaveButtonState=function(){Jh.default.getInstance().updateSaveButtonState()};b.GetWarehouseUserId=function(){var a=Ch.getCachedInfo();return goog.isDefAndNotNull(a)&&a.loggedIn&&goog.isDefAndNotNull(a.warehouseUserId)?Ph(a.warehouseUserId):0};b.IsEmbeddedSafely=function(){return la.isEmbeddedSafely()};b.PromptForUserText=
function(a,b,c,d){xh.showTextbox(a,b,c,d)}});
define("MemoryManager",["require","exports"],function(a,b){function c(a){var b=d[a];return b?b:(b=parseInt(a))?1E6*b:0}Object.defineProperty(b,"__esModule",{value:!0});var d={100:100663296,200:201326592,300:301989888,400:402653184,500:503316480,600:603979776,700:704643072,800:805306368,900:905969664,1E3:1006632960};b.SetupMemory=function(){var a=(new goog.Uri(window.location.href)).getQueryData().get("memory");a?Module.TOTAL_MEMORY=c(a):(a=0,goog.userAgent.MOBILE?a=c("200"):goog.userAgent.IE&&(a=
c("300")),0===a&&(a=c("700")),Module.TOTAL_MEMORY=a)}});define("OnBeforeUnload",["require","exports","Bindings/index","ProgramMode","SaveHandler"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){if(goog.isDefAndNotNull(d.currentProgramMode)&&d.currentProgramMode.handlesPageUnload()){var a=e.default.getInstance();if(c.IsSaveNeeded()||a.isSavingOrPushing()||a.isPushFailedAfterSaving())return $t("Are you sure you want to navigate away?")}}});
define("StartupScreen",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.endLoadingAnimation=function(){var a=document.getElementById("loading-container");a.style.zIndex="-1";for(var b=document.body.querySelectorAll(".loading-container .animation, .loading-animation-message"),e=0;e<b.length;++e){var f=b[e];f.classList.remove("animation");f.classList.add("animation-end")}a.style.zIndex="-1"}});
define("Main","require exports Bindings/index Canvas CrashReporter DialogPrompts FileManager FilePickerUtils JSBindings leftsidebar/Sidebar Log Look MemoryManager ModelStorageProviderFactory NetworkStatus OnBeforeUnload ProgramMode ResourceFetcher StartupScreen".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh){function Ch(){var a=xh.currentProgramMode.getProgramTitle();document.querySelector("title").innerHTML=a}function Ah(){if(goog.isDefAndNotNull(Module.ctx)&&c.HasLoaded()){var a=
$("canvas").offset(),b=$(window),e=b.width(),b=b.height()-a.top,a=Module.canvas;a.style.width=e+"px";a.style.height=b+"px";var f=window.devicePixelRatio||1,e=Math.round(e*f),b=Math.round(b*f);a.setAttribute("width",e.toString());a.setAttribute("height",b.toString());c.Resize(e,b);d.PostRedisplay()}}function Bh(){if(!d.IsInitialized())return L.error($t("Sorry. We encountered a problem with your web browser's WebGL support."),86400),e.ReportBrowserCheckError("WebGL"),!1;if(xh.currentProgramMode.isViewer())return!0;
if(!Eh())return e.ReportBrowserCheckError("IDB"),!1;goog.userAgent.EDGE_OR_IE?L.warning($t("Whoa there, cowboy. {APP_TITLE} has not been optimized for the Internet Explorer or Edge browsers, yet. You can give it a try if you want, but just know that we really haven't done anything special to make it work right yet.").replace("{APP_TITLE}",xh.currentProgramMode.getProgramTitle())):goog.userAgent.MOBILE&&L.warning($t("Whoa there, cowboy. {APP_TITLE} has not been optimized for mobile browsers with their fancy multi-touch user interfaces. You can give it a try if you want, but just know that we really haven't done anything special to make it work right yet.").replace("{APP_TITLE}",
xh.currentProgramMode.getProgramTitle()));return!0}function Eh(){if(!window.indexedDB)return L.error($t("Sorry. We encountered a problem with your web browser's storage support.")),!1;var a=window.indexedDB.open("TestSupport",1);a.onerror=function(a){L.warning($t("We encountered a problem with your web browser's storage support. To prevent loss of data, please save your work frequently and make sure you remain connected to the internet."));a.preventDefault()};a.onsuccess=function(a){window.indexedDB.deleteDatabase("TestSupport")};
return!0}Object.defineProperty(b,"__esModule",{value:!0});JSBindings=m;LogMetadata=y.Sidebar.logMetadata;R.SetupMemory();var yh=!1;b.FailedBrowserChecks=function(){return yh};Module.canvas=$("#canvas")[0];Module.preRun=[function(){Module.addRunDependency("Program mode initialization.");var a=function(){Module.removeRunDependency("Program mode initialization.")};xh.initialize().then(a,a);Mg.initClientResources();h.setBaseDir(g.FileManager.OFFLINE_DIR);h.setDefaultFolderImageURL("/static/images/web/tb_FolderOpen.svg");
d.Init();Module.canvas.style.backgroundColor="";(yh=!Bh())&&zh.endLoadingAnimation()}];b.PostMainInit=function(){goog.Promise.setUnhandledRejectionHandler(function(a){e.ReportUncaughtPromiseRejection(a);console.error(a)});window.addEventListener("unhandledrejection",function(a){e.ReportUncaughtPromiseRejection(a)});c.HasGraphicsError()?(e.ReportGraphicsError(),xh.currentProgramMode.fallbackOnGraphicsFailure(),f.ShowInfoDialog($t("Error"),$t("Sorry, SketchUp appears to have a graphics incompatibility with your browser."))):
(c.SetAutoSaveDirectories(g.FileManager.SAVE_DIR,g.FileManager.AUTOSAVE_SUBDIR),c.CommandIds.init(),c.CommandStates.init(),c.ComponentBehaviorTypes.init(),c.DimensionArrow.init(),c.DimensionTextAlignment.init(),c.DimensionTextPosition.init(),c.KeyCodes.init(),c.LabelLeader.init(),c.MaterialNotificationType.init(),c.MouseStates.init(),c.RefModelImportResult.init(),c.StlUnits.init(),c.StyleUpdateTask.init(),c.TextAlignment.init(),c.TooltipTypes.init(),c.Version.init(),W.Init("my.sketchup"),Module.canvas.style.backgroundColor=
"black",Ah(),xh.currentProgramMode.postMainInit(),Ch(),la.pollConnection(function(){L.warning($t("Please check your internet connection."))}),K.info("Launched with "+(goog.isDef(Module.usingWasm)?"wasm":"asm.js")),goog.isDefAndNotNull(Module.ctx)&&K.info("Using WebGL "+(0<=Module.ctx.toString().indexOf("WebGL2RenderingContext")?"2":"1")))};$(window).resize(function(){Ah()});window.onbeforeunload=function(){return yh?void 0:ga.default()};b.getAppVersion=function(){return window.VERSION||"Unknown"};
goog.ui.Dialog.ButtonSet.DefaultButtons.OK.caption=$t("OK");goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL.caption=$t("Cancel");goog.ui.Dialog.ButtonSet.DefaultButtons.YES.caption=$t("Yes");goog.ui.Dialog.ButtonSet.DefaultButtons.NO.caption=$t("No");goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE.caption=$t("Save");goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE.caption=$t("Continue")});
define("leftsidebar/SidebarAboutTab","require exports knockout EnvironmentSettings Main ProgramMode SidebarTabBar XhrUtils leftsidebar/SidebarTab".split(" "),function(a,b,c,d,e,f,g,h,m){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=a.call(this,c)||this;c.render();return c}__extends(b,a);b.prototype.open=function(a){this.makeVisible(!0);return goog.Promise.resolve()};b.prototype.render=function(){goog.isDefAndNotNull(this.container)&&document.body.removeChild(this.container);
this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarAboutTab,{version:e.getAppVersion(),programTitle:f.currentProgramMode.getProgramTitle()});document.body.appendChild(this.container);this.content_=this.container.querySelector(".about-content");this.tabControl_=new g.SidebarTabBar;this.tabControl_.add(new y);this.tabControl_.add(new K);this.tabControl_.add(new L);this.tabControl_.render(this.content_,!1)};return b}(m.SidebarTab);b.default=a;var y=function(){function a(){}Object.defineProperty(a.prototype,
"name",{get:function(){return $t("Changelog")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tabImage",{get:function(){return"/static/images/web/tb_changelog.svg"},enumerable:!0,configurable:!0});a.prototype.render=function(a){var b=this,d=goog.Promise.resolve(this.changeLogViewModel);goog.isDefAndNotNull(this.changeLogViewModel)||(d=this.getChangeLogViewModel());d.then(function(d){b.changeLogViewModel=d;d=goog.soy.renderAsFragment(SketchUpTemplates.changeLog,{});a.appendChild(d);
c.applyBindings(b.changeLogViewModel,d)})};a.prototype.getChangeLogViewModel=function(){var a=d.Get().baseUrl+"/static/changelog.json";return h.doRequest(a).promise.then(function(a){return JSON.parse(a)})};return a}(),K=function(){function a(){}Object.defineProperty(a.prototype,"name",{get:function(){return $t("{APP_TITLE} Team").replace("{APP_TITLE}",f.currentProgramMode.getProgramTitle())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tabImage",{get:function(){return"/static/images/web/tb_team_icon.svg"},
enumerable:!0,configurable:!0});a.prototype.render=function(a){var b=goog.soy.renderAsFragment(SketchUpTemplates.aboutTheTeam,{programTitle:f.currentProgramMode.getProgramTitle()});a.appendChild(b)};return a}(),L=function(){function a(){}Object.defineProperty(a.prototype,"name",{get:function(){return $t("Terms of Service")},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tabImage",{get:function(){return"/static/images/web/tb_terms_of_service.svg"},enumerable:!0,configurable:!0});
a.prototype.render=function(a){var b=goog.soy.renderAsFragment(SketchUpTemplates.termsOfService,{eulaUrl:f.currentProgramMode.eulaUrl()});a.appendChild(b)};return a}()});
define("PostMessageManager",["require","exports","EnvironmentSettings"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.handlers_={}}a.prototype.setHandler=function(a,b){this.handlers_[a]=b};a.prototype.post=function(a,b,c){a.postMessage({key:b,data:c},"*")};a.prototype.messageHandler=function(a){if(c.CheckOrigin(a.origin)){var b=a.data.key||a.data;if(b&&this.handlers_[b])this.handlers_[b](a.data.data)}};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=
new a,window.addEventListener("message",a.staticInstance_.messageHandler.bind(a.staticInstance_)));return a.staticInstance_};return a}();b.PostMessageManager=a});
define("leftsidebar/SidebarCurriculumTab","require exports EnvironmentSettings InstructorBrowser PostMessageManager leftsidebar/Sidebar leftsidebar/SidebarTab".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=a.call(this,c)||this;c.render();e.PostMessageManager.getInstance().setHandler("play_lesson_video",function(a){f.Sidebar.getInstance().close();var b=d.default.getInstance();b.show().then(function(){b.playVideo(a.videoUrl,!0)})});
return c}__extends(b,a);b.prototype.open=function(a){this.makeVisible(!0);return goog.Promise.resolve()};b.prototype.render=function(){goog.isDefAndNotNull(this.container)&&document.body.removeChild(this.container);this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarCurriculumTab,{curriculumUrl:c.GetSketchUpURL()+"/education/sketchup-for-schools/curriculum/app"});document.body.appendChild(this.container)};return b}(g.SidebarTab);b.default=a});
define("Bulletin",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.Application=0]="Application";a[a.TrimbleConnectProvider=1]="TrimbleConnectProvider";a[a.WarehouseProvider=2]="WarehouseProvider";a[a.GoogleDriveProvider=3]="GoogleDriveProvider"})(a=b.Behavior||(b.Behavior={}));var c=[{message:$t("Hang tight! On Thursday Oct 13, 5:00 pm - 10:00 pm Pacific Time Trimble Connect is performing scheduled maintenance."),start:Date.UTC(2016,9,14,0),end:Date.UTC(2016,
9,14,5),affects:a.TrimbleConnectProvider}];b.getRelevantNotifications=function(){var a=(new Date).getTime(),b=c.filter(function(b){b=[b.start,b.end];return b[0]<a&&a<b[1]});return goog.Promise.resolve(b)}});
define("FileDragDropControl",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.dropHandler_=b;this.isEnabled_=!0;this.create()}a.prototype.remove=function(){goog.dom.removeNode(this.dropTarget_);this.dropTarget_=null;document.body.removeEventListener("dragover",this.dragOverFunc_)};Object.defineProperty(a.prototype,"enabled",{set:function(a){this.isEnabled_=a},enumerable:!0,configurable:!0});a.prototype.create=function(){var a=this;
this.dropTarget_=goog.soy.renderAsFragment(SketchUpTemplates.dragArea,{});this.dragOverFunc_=function(b){a.handleDragOver(b)};document.body.addEventListener("dragover",this.dragOverFunc_);this.dropTarget_.addEventListener("dragleave",this.handleDragLeave.bind(this));this.dropTarget_.addEventListener("drop",this.handleDrop.bind(this));document.body.appendChild(this.dropTarget_)};a.prototype.handleDragLeave=function(a){this.isEnabled_&&(goog.isDefAndNotNull(this.dropTarget_)&&this.dropTarget_.classList.add("visibility-none"),
a.preventDefault())};a.prototype.handleDragOver=function(a){this.isEnabled_&&(goog.isDefAndNotNull(this.dropTarget_)&&this.dropTarget_.classList.remove("visibility-none"),a.preventDefault())};a.prototype.handleDrop=function(a){this.isEnabled_&&(a.preventDefault(),goog.isDefAndNotNull(this.dropTarget_)&&this.dropTarget_.classList.add("visibility-none"),a=a.dataTransfer.files[0],goog.isDefAndNotNull(a)&&this.dropHandler_(a))};return a}();b.FileDragDropControl=a});
define("portoptions/PortOptions",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a[a.Export=0]="Export";a[a.Import=1]="Import"})(b.FileConversionType||(b.FileConversionType={}));b.PROFILE_LINE_TYPE_NONE="none";(function(a){a.TWOD="2d";a.THREED="3d";a.SECTION="section"})(b.ExportType||(b.ExportType={}));(function(a){a.COLLADA="dae";a.DWG="dwg";a.DXF="dxf";a.FBX="fbx";a.KMZ="kmz";a.OBJ="obj";a.THREEDS="3ds";a.VRML="wrl";a.XSI="xsi"})(b.ExportFormat||
(b.ExportFormat={}))});
define("FileInsert",["require","exports","Bindings/index","BusyScreen","FileUtils"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.showInsertOptionsElement=function(a,b){b?a.classList.remove("insert-options-hidden"):a.classList.add("insert-options-hidden")};b.loadImageFileIntoModel=function(a,b){var e=new d.default;window.setTimeout(function(){c.LoadImageFileIntoModel(a,b);e.restore()},100)};b.loadSkpFileIntoModel=function(a,b,e){var m=new d.default;window.setTimeout(function(){c.LoadSkpFileIntoModel(a,
b,e);m.restore()},100)};b.loadStlFileIntoModel=function(a,b){var h=new d.default,m=!1;try{var y=c.GetTempFilename(e.TEMP_DIR,"tmp"),m=c.ImportSTL(a,y,b.units,!1,b.preserveOrigin,b.swapYZ);c.LoadSkpFileIntoModel(y,!1);e.DeleteFile(y)}catch(K){m=!1,console.log("An error occured while importing the STL file.",K)}finally{h.restore()}return m}});
define("LoadingGif",["require","exports"],function(a,b){function c(a){return goog.array.find(d,function(b){return b.container===a})}Object.defineProperty(b,"__esModule",{value:!0});var d=[];b.Show=function(a){var b=c(a);goog.isDefAndNotNull(b)||(b=goog.soy.renderAsFragment(SketchUpTemplates.loadingGif,{}),a.appendChild(b),d.push({container:a,loadingImage:b}))};b.Hide=function(a){a=c(a);goog.isDefAndNotNull(a)&&(a.loadingImage.parentElement.removeChild(a.loadingImage),goog.array.remove(d,a))}});
define("ModelStorageUI",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0})});
define("custompicker/FileDetailsPage",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c,f){var g=this;this.folderItemView_=b;this.container_=c;this.openCallback_=f;c=goog.soy.renderAsFragment(SketchUpTemplates.fileDetailsPage,{fileEntry:this.folderItemView_});this.container_.appendChild(c);this.container_.querySelector(".bottom-button").addEventListener("click",function(a){g.openCallback_(b)})}a.prototype.close=function(){};return a}();
b.default=a});
define("custompicker/ImportFromLocalView",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c){this.container_=b;this.importCallback_=c}a.prototype.close=function(){};a.prototype.render=function(){var a=this,b=goog.soy.renderAsFragment(SketchUpTemplates.importLocal,{});this.container_.appendChild(b);this.textArea_=b.querySelector(".import-text");this.thumbnailContainer_=b.querySelector(".preview-thumbnail");b.querySelector(".upload-button").addEventListener("click",this.handleBrowseClick.bind(this));
this.fileInput_=document.getElementById("system-file-browser");this.fileInput_.addEventListener("change",function(b){a.fileSelected(a.fileInput_.files[0])})};a.prototype.handleBrowseClick=function(a){this.fileInput_.value="";this.fileInput_.click()};a.prototype.fileSelected=function(a){this.textArea_.textContent=a.name;this.importCallback_(a)};return a}();b.default=a});
define("custompicker/ImportDetailsPage",["require","exports","custompicker/ImportFromLocalView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,d){this.container_=b;this.importCallback_=d;b=goog.soy.renderAsFragment(SketchUpTemplates.importPage,{});this.container_.appendChild(b);this.content_=this.container_.querySelector(".left-details-content");this.importView_=new c.default(this.content_,this.importCallback_);this.importView_.render()}a.prototype.close=
function(){this.importView_&&this.importView_.close()};return a}();b.default=a});
define("custompicker/DetailsView",["require","exports","custompicker/FileDetailsPage","custompicker/ImportDetailsPage"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b,c,d){this.relativeContainer_=b;this.importCallback_=c;this.openCallback_=d;b=goog.soy.renderAsFragment(SketchUpTemplates.detailsView,{});document.body.appendChild(b);this.content_=b;window.addEventListener("resize",this.handleResize.bind(this));this.position()}a.prototype.clear=function(){this.closePages();
this.content_.innerHTML=""};a.prototype.activateFileDetails=function(a){this.clear();this.makeVisible();this.fileDetailsPage_=new c.default(a,this.content_,this.openCallback_)};a.prototype.activateImportPage=function(){this.clear();this.importPage_=new d.default(this.content_,this.importCallback_)};a.prototype.handleResize=function(){this.position()};a.prototype.position=function(){var a=this.relativeContainer_;this.content_.style.left=a.offsetWidth+a.offsetLeft+"px"};a.prototype.closePages=function(){this.importPage_&&
this.importPage_.close();this.fileDetailsPage_&&this.fileDetailsPage_.close()};a.prototype.close=function(){this.content_.style.display="none";this.closePages()};a.prototype.makeVisible=function(){this.content_.style.display="";this.position()};return a}();b.default=a});
define("custompicker/CustomPicker","require exports CrashReporter DialogPrompts FileDragDropControl FileInsert FilePickerUtils FileUtils GlobalConstants LoadingGif Login Look ModelStorageProvider TextInput custompicker/DetailsView".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la){Object.defineProperty(b,"__esModule",{value:!0});var ga;(function(a){a[a.FileOpen=0]="FileOpen";a[a.FileSave=1]="FileSave";a[a.FileInsert=2]="FileInsert"})(ga||(ga={}));a=function(){function a(b,c){var d=this;this.modelStorageProviderKey_=
b;this.modelStorageProvider_=c;this.renderFolderRequestId_=0;this.isVisible_=this.insertFileEventsRegistered_=!1;this.onSaveInputKeyDownHandler_=null;this.onUploadProgressFunction_=this.onUploadProgress.bind(this);this.onSyncInProgressFunction_=null;this.render();K.onChange(function(a){d.reset()})}a.prototype.setCallbackHandler=function(a){this.callbacks_=a};a.prototype.setStartupFolder=function(a,b){this.startupRegion_=a;this.startupFolderId_=b};a.prototype.launchForFileOpen=function(){this.launchMode_=
ga.FileOpen;this.launch()};a.prototype.launchForFileSave=function(a){this.launchMode_=ga.FileSave;this.initalNameForFileSave_=a;this.launch()};a.prototype.launchForFileInsert=function(){this.launchMode_=ga.FileInsert;this.launch()};a.prototype.reRenderCurrentFolderView=function(){goog.isDefAndNotNull(this.currentRegion_)&&goog.isDefAndNotNull(this.currentFolderId_)&&this.renderFolderView(this.currentRegion_,this.currentFolderId_)};a.prototype.getContainer=function(){return this.container_};a.prototype.close=
function(){this.isVisible_=!1;this.callbacks_.addRemoveUploadProgressEventListener(this.onUploadProgressFunction_,!1);this.closeDetailsView();this.deselectSelected();this.dragDropControl_.remove()};a.prototype.getCurrentFolderFullPath=function(){return g.getOfflineModelPath(this.modelStorageProviderKey_)};a.prototype.render=function(){this.container_=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarFilesTab,{});this.container_.classList.add("left-sidebar-container-custom-picker");document.body.appendChild(this.container_);
this.renderHeader();y.Show(this.container_);this.content_=this.container_.querySelector(".files-tab-content");this.detailsView_=new la.default(this.container_,this.importFile.bind(this),this.openFolderOrFile.bind(this));this.insertFileOptionsContainer_=this.container_.querySelector(".insert-options-container");this.saveNewModelInputContainer_=this.container_.querySelector(".save-new-model-container");this.saveNewModelInput_=this.saveNewModelInputContainer_.querySelector(".save-new-model-input");this.saveNewModelButton_=
this.saveNewModelInputContainer_.querySelector(".save-here-button");this.saveNewModelButton_.addEventListener("click",this.handleSave.bind(this))};a.prototype.renderHeader=function(){this.container_.querySelector(".files-tab-header").appendChild(goog.soy.renderAsFragment(SketchUpTemplates.filesTabHeader,{baseURL:this.modelStorageProvider_.baseURL,logoURL:this.modelStorageProvider_.logoURL}))};a.prototype.launch=function(){var a=this;this.isVisible_=!0;var b=this.content_.querySelector(".files-tab-scrollable-content");
goog.isDefAndNotNull(b)&&goog.dom.removeChildren(b);this.saveNewModelInputContainer_.classList.add("invisible");this.insertFileOptionsContainer_.classList.add("invisible");this.callbacks_.addRemoveUploadProgressEventListener(this.onUploadProgressFunction_,!0);this.launchMode_===ga.FileSave?(this.saveNewModelInputContainer_.classList.remove("invisible"),this.setModelTitleInputFieldContents(this.initalNameForFileSave_)):this.launchMode_===ga.FileInsert&&(this.insertFileOptionsContainer_.classList.remove("invisible"),
this.initInsertFileEvents());this.adjustStyleForScrollableContent();goog.isDefAndNotNull(this.dragDropControl_)?this.dragDropControl_.create():this.dragDropControl_=new e.FileDragDropControl(this.importFile.bind(this));this.modelStorageProvider_.initialize().then(function(){goog.isDefAndNotNull(a.currentRegion_)&&goog.isDefAndNotNull(a.currentFolderId_)?a.reRenderCurrentFolderView():goog.isDefAndNotNull(a.startupRegion_)&&goog.isDefAndNotNull(a.startupFolderId_)?a.renderStartupFolder():a.renderProjectsView()},
function(a){console.log("Model storage provider initialization failed");console.log(a);c.ReportStorageProviderInitError(a);L.error($t("Sorry, we seem to be having problems looking up your models. Our team has been notified."))})};a.prototype.importFile=function(a){a={file:a,folderFileItemViews:this.currentFolderFileItemViews_,folderPath:this.getCurrentFolderFullPath(),folderId:this.currentFolderId_,storageProviderRegion:this.currentRegion_};this.callbacks_.importFile(a)};a.prototype.updateAfterFileImport=
function(a){var b=this.fileNameElementMap_[a.name];this.removeFolderMessage();this.currentFolderFileItemViews_.push(a);this.renderFileTree([a]);var c=this.fileNameElementMap_[a.name];goog.isDefAndNotNull(b)&&goog.dom.replaceNode(c,b);this.selectFile(a,c);this.ensureFileIsVisible(c)};a.prototype.openFolderOrFile=function(a){if(!a.isActionInProgress)if(a.isFolder)this.renderFolderView(this.currentRegion_,a.remoteId);else if(this.launchMode_!==ga.FileSave){var b=g.lookupFolderItemForView(a);goog.isDefAndNotNull(b)?
g.setFolderItemFileSystemName(b,a):goog.asserts.assert(a.isLocal);a={fileItemView:a,folderItem:b,folderPath:this.getCurrentFolderFullPath()};this.callbacks_.openFile(a)}};a.prototype.handleSave=function(){var a=this;if(goog.isDefAndNotNull(this.currentFolderId_)&&goog.isDefAndNotNull(this.currentFolderFileItemViews_)){var b=this.saveNewModelInput_.value;if(0!==b.length){for(var b=h.addSkpModelExtensionIfMissing(b),c=h.StripExtension(b),e,b=0,f=this.currentFolderFileItemViews_;b<f.length;b++){var g=
f[b],m=h.StripExtension(g.name);if(0==goog.string.caseInsensitiveCompare(c,m)){e=g;break}}b=goog.Promise.resolve(!0);goog.isDefAndNotNull(e)&&(b=d.ShowQuestionDialog($t("A model with the same name already exists.")+"\n"+$t("Overwrite it?")));b=b.then(function(b){b&&(b=void 0,goog.isDefAndNotNull(e)&&e.isLocal&&(b=goog.string.path.baseName(e.localPath)),b={fileSystemName:b,folderPath:a.getCurrentFolderFullPath(),folderId:a.currentFolderId_,storageProviderRegion:a.currentRegion_,modelTitle:c},a.callbacks_.saveFile(b));
return!0});b.thenCatch(function(){})}}};a.prototype.renderStartupFolder=function(){var a=this;this.currentRegion_=this.startupRegion_;var b=g.addAncestorFoldersToCache(this.modelStorageProvider_,this.startupRegion_,this.startupFolderId_),b=b.then(function(b){y.Hide(a.container_);a.renderFolderView(a.startupRegion_,a.startupFolderId_)});b.thenCatch(function(){console.log("Error rendering the startup folder.");a.renderProjectsView()})};a.prototype.closeDetailsView=function(){this.detailsView_&&this.detailsView_.close()};
a.prototype.renderProjectsView=function(){var a=this;this.currentFolderId_=this.currentRegion_=null;this.unregisterOnSyncInProgressFunction();goog.dom.removeChildren(this.content_);y.Show(this.container_);this.closeDetailsView();this.fileNameElementMap_={};this.enableSaveModelButtonIfVisible(!1);this.dragDropControl_.enabled=!1;var b=goog.soy.renderAsFragment(SketchUpTemplates.projectsView,{});this.content_.appendChild(b);this.adjustStyleForScrollableContent();this.registerProjectsLinkClickHandler(b);
this.setupSyncButton(b);this.projectsList_=b.querySelector(".projects-section");var d=++this.renderFolderRequestId_,b=this.modelStorageProvider_.getProjectsOrCreateDefault(),e=[],f=[];g.clearMaps();for(var h=0;h<b.length;h++){var m=b[h].promise.then(function(b){return a.handleProjectResponse(b,d)}).thenCatch(function(b){console.log("Error loading projects from region. "+b);b=a.modelStorageProvider_.getErrorTypeFromErrorString(b);f.push(b)});e.push(m)}goog.Promise.allSettled(e).thenAlways(function(){if(d===
a.renderFolderRequestId_&&0==g.getProjectCount()){0<=f.indexOf(R.ErrorType.CouldNotCreateProject)?(L.error($t("Sorry, we seem to be having problems creating a project. Our team has been notified.")),c.ReportStorageProviderInitError(R.ErrorType.CouldNotCreateProject)):0<=f.indexOf(R.ErrorType.UnauthorizedLicense)&&L.error($t("No projects were found in your account and we could not create a default project. You might have exceeded the number of projects allowed in your subscription."));y.Hide(a.container_);
var b=a.content_.querySelector(".files-tab-scrollable-content");a.renderFolderMessage(b,$t("No projects were found."))}})};a.prototype.renderFolderView=function(a,b){var c=this;goog.asserts.assert(!goog.string.isEmptyOrWhitespaceSafe(b),"No folder id or local folder path");this.unregisterOnSyncInProgressFunction();goog.dom.removeChildren(this.content_);this.closeDetailsView();this.fileNameElementMap_={};this.currentFolderFileItemViews_=[];this.enableSaveModelButtonIfVisible(!1);var d={ancestorList:void 0};
d.ancestorList=g.getFolderAncestorList(b);this.currentFolderId_!==b&&this.deselectSelected();this.currentFolderId_=b;var e=goog.soy.renderAsFragment(SketchUpTemplates.projectFileView,d);this.registerProjectsLinkClickHandler(e);var f=e.querySelectorAll(".folder-link");if(f.length!==d.ancestorList.length)throw"Mismatching breadcrumb sizes";for(var d=function(a){a=f[a];var b=a.dataset.folderid;a.addEventListener("click",function(){c.renderFolderView(c.currentRegion_,b)})},m=0;m<f.length;++m)d(m);this.fileContainer_=
e.querySelector(".file-tree");this.setupActionsBar(e);this.enableAddFileFolderSyncButtons(!1);var y=this.getCurrentFolderFullPath();this.showLoadingMessage();var L=++this.renderFolderRequestId_;g.getRemoteFileViewsForFolder(y,this.modelStorageProvider_,a,b).then(function(a){a=a||[];return c.callbacks_.getLocalFileViewsInFolder(y,b).then(function(b){return g.combineFileViewsForFolder(b,a,c.modelStorageProvider_.requiresUniqueFileNames())})}).then(function(a){if(L===c.renderFolderRequestId_){var b=
c.launchMode_===ga.FileInsert;a=a.filter(function(a){return a.isFolder||h.hasSkpModelExtension(a.name)||b&&h.isImageFile(a.name)});c.currentFolderFileItemViews_=a;c.enableSaveModelButtonIfVisible(!0);c.renderFileTree(a)}}).thenAlways(function(){L===c.renderFolderRequestId_&&c.enableAddFileFolderSyncButtons(!0)});this.content_.appendChild(e);this.adjustStyleForScrollableContent()};a.prototype.enableAddFileFolderSyncButtons=function(a){var b=(this.dragDropControl_.enabled=a)&&this.launchMode_!==ga.FileSave&&
this.launchMode_!==ga.FileInsert;a&&this.launchMode_!==ga.FileInsert?this.addFolderButton_.classList.remove("disabled-button"):this.addFolderButton_.classList.add("disabled-button");b?(this.addFileButton_.classList.remove("disabled-button"),this.syncButton_.classList.remove("disabled-button")):(this.addFileButton_.classList.add("disabled-button"),this.syncButton_.classList.add("disabled-button"))};a.prototype.renderFileTree=function(a){this.removeFolderMessage();for(var b=0;b<a.length;++b)this.renderSingleFileOrFolder(a[b]);
this.showMessageIfEmptyFolder();this.restorePreviousSelection()};a.prototype.renderSingleFileOrFolder=function(a,b,c){var d=this;void 0===b&&(b=!0);void 0===c&&(c=!1);var e=a.versionState===R.FileVersionState.HasConflict,f=goog.soy.renderAsFragment(SketchUpTemplates.fileEntry,{fileEntry:a,hasConflict:e},m.INJECTED_SOY_DATA);f.addEventListener("click",this.selectFile.bind(this,a,f));this.launchMode_!==ga.FileInsert&&f.addEventListener("dblclick",this.openFolderOrFile.bind(this,a));a.isFolder&&goog.dom.getElementByClass("foldername",
f).addEventListener("click",function(b){b.stopPropagation();d.openFolderOrFile(a)});if(this.launchMode_!==ga.FileInsert&&this.launchMode_!==ga.FileSave&&a.versionState!==R.FileVersionState.UpToDate){var g=goog.dom.getElementByClass("file-sync-actions-div",f);g.classList.remove("invisible");var h=a.versionState===R.FileVersionState.ModifiedAtRemoteStorage||a.versionState===R.FileVersionState.HasConflict;this.showDownloadUploadButton(a,g,"download-cloud",!0,h,e);h=a.versionState===R.FileVersionState.ModifiedLocally||
a.versionState===R.FileVersionState.HasConflict;this.showDownloadUploadButton(a,g,"upload-cloud",!1,h,e)}e=goog.dom.getElementByClass("close-button",f);this.launchMode_===ga.FileInsert?e.classList.add("invisible"):e.addEventListener("click",this.onClickDeleteButton.bind(this,a));b?this.fileContainer_.appendChild(f):this.fileContainer_.insertBefore(f,this.fileContainer_.firstChild);c||(this.fileNameElementMap_[a.name]=f);return f};a.prototype.selectFile=function(a,b){a.isActionInProgress||(this.deselectSelected(),
this.selectedFileItemView_=a,this.selectedFile_=b,this.selectedFile_.classList.add("selected-file"),this.launchMode_===ga.FileSave?a.isFolder||this.setModelTitleInputFieldContents(a.name):this.launchMode_===ga.FileInsert?this.processFileForInsert(a):this.detailsView_.activateFileDetails(a))};a.prototype.setupActionsBar=function(a){this.addFileButton_=a.querySelector(".add-file-button");this.addFolderButton_=a.querySelector(".add-folder-button");this.syncButton_=a.querySelector(".sync-button");this.launchMode_!==
ga.FileInsert&&this.addFolderButton_.addEventListener("click",this.onAddFolder.bind(this));this.launchMode_!==ga.FileSave&&this.launchMode_!==ga.FileInsert&&(this.addFileButton_.addEventListener("click",this.onAddFile.bind(this)),this.setupSyncButton(a))};a.prototype.enableSaveModelButtonIfVisible=function(a){var b=this;this.launchMode_===ga.FileSave&&(a?(this.saveNewModelButton_.classList.remove("disabled-button"),goog.isNull(this.onSaveInputKeyDownHandler_)&&(this.onSaveInputKeyDownHandler_=function(a){(a.keyCode||
a.which)===goog.events.KeyCodes.ENTER&&(a.stopPropagation(),a.preventDefault(),b.handleSave())},this.saveNewModelInput_.addEventListener("keydown",this.onSaveInputKeyDownHandler_))):(this.saveNewModelButton_.classList.add("disabled-button"),goog.isNull(this.onSaveInputKeyDownHandler_)||(this.saveNewModelInput_.removeEventListener("keydown",this.onSaveInputKeyDownHandler_),this.onSaveInputKeyDownHandler_=null)))};a.prototype.adjustStyleForScrollableContent=function(){var a=this.content_.querySelector(".files-tab-scrollable-content");
a&&(this.launchMode_===ga.FileSave||this.launchMode_===ga.FileInsert?a.classList.add("files-tab-scrollable-content-short"):a.classList.remove("files-tab-scrollable-content-short"))};a.prototype.registerProjectsLinkClickHandler=function(a){a.querySelector(".projects-link").addEventListener("click",this.renderProjectsView.bind(this))};a.prototype.setupSyncButton=function(a){var b=this,c=a.querySelector(".sync-button");c.addEventListener("click",function(){b.callbacks_.startFileSync()});a=c.querySelector(".static-image");
c=c.querySelector(".spinny-image");this.onSyncInProgressFunction_=this.onSyncInProgress.bind(this,a,c);this.callbacks_.addRemoveSyncInProgressEventListener(this.onSyncInProgressFunction_,!0)};a.prototype.onUploadProgress=function(a){if(goog.isDefAndNotNull(this.currentFolderId_)){var b=goog.array.find(this.currentFolderFileItemViews_,function(b){return b.localPath===a.filePath});goog.isDefAndNotNull(b)&&(b=this.fileNameElementMap_[b.name],goog.isDefAndNotNull(b)&&(b=goog.dom.getElementByClass("file-sync-progress-div",
b),goog.isDefAndNotNull(b)&&(100>a.progressPercentage?(b.classList.remove("invisible"),goog.dom.getElementByClass("file-sync-progress",b).value=a.progressPercentage):b.classList.add("invisible"))))}};a.prototype.renderSingleProject=function(a,b){b===this.renderFolderRequestId_&&(a=goog.soy.renderAsFragment(SketchUpTemplates.projectInstance,{project:a},m.INJECTED_SOY_DATA),a.addEventListener("click",this.handleProjectClick.bind(this,a)),y.Hide(this.container_),this.projectsList_.appendChild(a))};a.prototype.projectThumbnailDownloadDone=
function(a,b,c){a.thumbnailData=h.ArrayBufferToBase64(b);this.renderSingleProject(a,c)};a.prototype.handleProjectResponse=function(a,b){var c=this;if(!a.length)return goog.Promise.resolve();g.addRemoteProjects(a);for(var d=[],e=function(e){var g=a[e];if("svg"==goog.string.path.extension(g.thumbnailURL))return f.renderSingleProject(g,b),"continue";e=f.modelStorageProvider_.downloadThumbnail(g.thumbnailURL).then(function(a){return c.projectThumbnailDownloadDone(g,a,b)}).thenCatch(function(){});d.push(e)},
f=this,h=0;h<a.length;++h)e(h);return goog.Promise.allSettled(d)};a.prototype.handleProjectClick=function(a,b){b=a.dataset.projectregion;a=a.dataset.projectfolder;this.currentRegion_=b;this.renderFolderView(b,a)};a.prototype.onSyncInProgress=function(a,b,c){c?(a.classList.add("invisible"),b.classList.remove("invisible")):(b.classList.add("invisible"),a.classList.remove("invisible"),this.isVisible_&&this.reRenderCurrentFolderView())};a.prototype.unregisterOnSyncInProgressFunction=function(){goog.isDefAndNotNull(this.onSyncInProgressFunction_)&&
(this.callbacks_.addRemoveSyncInProgressEventListener(this.onSyncInProgressFunction_,!1),this.onSyncInProgressFunction_=null)};a.prototype.deselectSelected=function(){this.selectedFile_&&this.selectedFile_.classList.remove("selected-file");this.selectedFileItemView_=this.selectedFile_=null};a.prototype.restorePreviousSelection=function(){var a=this;if(goog.isDefAndNotNull(this.selectedFileItemView_)){var b=goog.array.find(this.currentFolderFileItemViews_,function(b){return a.selectedFileItemView_.isLocal!=
b.isLocal?!1:goog.string.isEmptyOrWhitespaceSafe(b.remoteId)||goog.string.isEmptyOrWhitespaceSafe(a.selectedFileItemView_.remoteId)?a.selectedFileItemView_.isLocal&&b.isLocal?b.localPath===a.selectedFileItemView_.localPath:!1:b.remoteId===a.selectedFileItemView_.remoteId});if(goog.isDefAndNotNull(b)){var c=this.fileNameElementMap_[b.name];goog.isDefAndNotNull(c)&&(this.selectFile(b,c),this.ensureFileIsVisible(c))}}};a.prototype.ensureFileIsVisible=function(a){$(".left-sidebar-container .files-tab-scrollable-content").animate({scrollTop:a.offsetTop},
100)};a.prototype.showMessageIfEmptyFolder=function(){this.removeFolderMessage();this.showFolderMessage($t("This folder is empty."))};a.prototype.showLoadingMessage=function(){this.removeFolderMessage();this.showFolderMessage($t("Loading..."))};a.prototype.showFolderMessage=function(a){!goog.isDefAndNotNull(this.fileContainer_)||0<this.currentFolderFileItemViews_.length||this.renderFolderMessage(this.fileContainer_,a)};a.prototype.renderFolderMessage=function(a,b){b=goog.soy.renderAsFragment(SketchUpTemplates.fileTreeMessage,
{message:b});a.appendChild(b)};a.prototype.removeFolderMessage=function(){if(goog.isDefAndNotNull(this.fileContainer_)){var a=this.fileContainer_.querySelector(".file-tree-message");goog.isDefAndNotNull(a)&&this.fileContainer_.removeChild(a)}};a.prototype.showDownloadUploadButton=function(a,b,c,d,e,f){b=goog.dom.getElementByClass(c,b);e?d?b.addEventListener("click",this.onClickDownloadButton.bind(this,a,f)):b.addEventListener("click",this.onClickUploadButton.bind(this,a)):b.classList.add("invisible")};
a.prototype.onClickDownloadButton=function(a,b,c){var e=this,f=goog.Promise.resolve(!0);b&&(f=d.ShowQuestionDialog($t("This will overwrite your local model. Continue?")));f.then(function(b){b&&(b=g.lookupFolderItemForView(a),g.setFolderItemFileSystemName(b,a),b={fileItemView:a,folderItem:b,folderPath:e.getCurrentFolderFullPath()},e.callbacks_.downloadFile(b))});c.stopPropagation()};a.prototype.onClickUploadButton=function(a,b){b.stopPropagation();this.callbacks_.uploadFile({localFilePath:a.localPath})};
a.prototype.onClickDeleteButton=function(a,b){this.callbacks_.deleteItem({fileItemView:a,storageProviderRegion:this.currentRegion_});b.stopPropagation()};a.prototype.setModelTitleInputFieldContents=function(a){this.saveNewModelInput_.value=a;this.saveNewModelInput_.focus();this.saveNewModelInput_.select()};a.prototype.onAddFile=function(a){this.deselectSelected();this.detailsView_.makeVisible();this.detailsView_.activateImportPage()};a.prototype.onAddFolder=function(a){var b=this;this.removeFolderMessage();
a=this.createUniqueFilename($t("New Folder"));a=g.makeFileViewForLocalDirectory(a);a.isActionInProgress=!0;var c=this.renderSingleFileOrFolder(a,!1,!0);a=goog.dom.getElementByClass("foldername",c);a=W.EditField(a,!0).then(function(a){if(b.isFileNameAvailable(a))return g.createRemoteFolder(b.modelStorageProvider_,b.currentRegion_,a,b.currentFolderId_);window.setTimeout(function(){d.ShowInfoDialog($t("Error"),$t("A file or folder with same name already exists."))},0);return goog.Promise.reject(null)});
a=a.then(function(a){if(b.fileContainer_.contains(c)){b.currentFolderFileItemViews_.push(a);var d=b.renderSingleFileOrFolder(a,!1);b.fileContainer_.replaceChild(d,c);b.selectFile(a,d)}});a=a.thenCatch(function(a){b.fileContainer_.contains(c)&&b.fileContainer_.removeChild(c);b.showMessageIfEmptyFolder();goog.isDefAndNotNull(a)&&d.ShowInfoDialog($t("Error"),$t("Sorry, this folder could not be created."))})};a.prototype.initInsertFileEvents=function(){var a=this;if(!this.insertFileEventsRegistered_){var b=
this.insertFileOptionsContainer_.querySelector(".image-insert-as-image"),c=this.insertFileOptionsContainer_.querySelector(".image-insert-as-material");b.addEventListener("click",function(){a.insertImageFileIntoModel(!1)});c.addEventListener("click",function(){a.insertImageFileIntoModel(!0)});b=this.insertFileOptionsContainer_.querySelector(".skp-insert-as-comp");c=this.insertFileOptionsContainer_.querySelector(".skp-insert-as-ref");b.addEventListener("click",function(){a.insertSkpFileIntoModel(!1)});
c.addEventListener("click",function(){a.insertSkpFileIntoModel(!0)});this.insertFileEventsRegistered_=!0}};a.prototype.processFileForInsert=function(a){var b=a.name,c=$t("Insert {fileName}"),c=c.replace("{fileName}",b);h.isImageFile(a.name)?(this.showFileInsertPlaceholder(!1),this.showSkpFileInsertOptions(c,!1),this.showImageFileInsertOptions(c,!0)):h.hasSkpModelExtension(a.name)?(this.showImageFileInsertOptions(c,!1),this.showFileInsertPlaceholder(!1),this.showSkpFileInsertOptions(c,!0)):this.resetInsertOptions()};
a.prototype.resetInsertOptions=function(){this.showSkpFileInsertOptions("",!1);this.showImageFileInsertOptions("",!1);this.showFileInsertPlaceholder(!0)};a.prototype.insertImageFileIntoModel=function(a){this.insertFileIntoModel(!0,a,!1)};a.prototype.insertSkpFileIntoModel=function(a){this.insertFileIntoModel(!1,!1,a)};a.prototype.insertFileIntoModel=function(a,b,c){var d=null;if(goog.isDefAndNotNull(this.selectedFileItemView_.remoteId))d=g.lookupFolderItemForView(this.selectedFileItemView_),g.setFolderItemFileSystemName(d,
this.selectedFileItemView_);else if(!this.selectedFileItemView_.isLocal){goog.asserts.assert(!1,"Unexpected error during file insersion.");return}a={isImage:a,asMaterial:b,asReference:c,fileItemView:this.selectedFileItemView_,folderItem:d,folderPath:this.getCurrentFolderFullPath()};this.callbacks_.insertFile(a);this.resetInsertOptions()};a.prototype.showFileInsertPlaceholder=function(a){var b=this.insertFileOptionsContainer_.querySelector(".insert-options-container-placeholder");a?b.classList.remove("invisible"):
b.classList.add("invisible")};a.prototype.showImageFileInsertOptions=function(a,b){var c=this.insertFileOptionsContainer_.querySelector(".image-insert-options");f.showInsertOptionsElement(c,b);b&&(c.querySelector(".image-insert-options-image-name").innerHTML=a)};a.prototype.showSkpFileInsertOptions=function(a,b){var c=this.insertFileOptionsContainer_.querySelector(".skp-insert-options");f.showInsertOptionsElement(c,b);b&&(c.querySelector(".skp-insert-options-skp-name").innerHTML=a)};a.prototype.createUniqueFilename=
function(a){for(var b=a,c=0;!this.isFileNameAvailable(b);)b=a+(++c).toString();return b};a.prototype.isFileNameAvailable=function(a){for(var b in this.fileNameElementMap_)if(0===goog.string.caseInsensitiveCompare(b,a))return!1;return!0};a.prototype.reset=function(){this.currentFolderFileItemViews_=this.currentRegion_=this.currentFolderId_=null};return a}();b.CustomPicker=a});
define("GoogleDrivePicker","require exports BusyScreen DialogPrompts FilePickerUtils FileUtils FolderMetadata Login ModelStorageProvider ModelStorageProviderFactory ModelStorageProviderFactory ResizeObserver".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L){Object.defineProperty(b,"__esModule",{value:!0});var R;(function(a){a[a.FileOpen=0]="FileOpen";a[a.FileSave=1]="FileSave";a[a.FileInsert=2]="FileInsert"})(R||(R={}));a=function(){function a(){this.onSyncBeginEndFunction_=this.resizeObserver_=this.picker_=
null;this.syncInProgressPromise_=goog.Promise.resolve();this.syncInProgressPromiseResolver_=function(){};this.modelStorageProvider_=y.Providers[K.ProviderKey.Google_Drive];this.launchMode_=R.FileOpen;this.onSyncBeginEndFunction_=this.onSyncBeginEnd.bind(this)}a.prototype.setCallbackHandler=function(a){this.callbacks_=a};a.prototype.setStartupFolder=function(a,b){goog.asserts.assert(!1,"Not implemented: setStartupFolder")};a.prototype.launchForFileOpen=function(){this.launch(R.FileOpen)};a.prototype.launchForFileSave=
function(a){this.launch(R.FileSave,a)};a.prototype.launchForFileInsert=function(){this.launch(R.FileInsert)};a.prototype.reRenderCurrentFolderView=function(){goog.asserts.assert(!1,"Not implemented: reRenderCurrentFolderView")};a.prototype.getContainer=function(){return null};a.prototype.close=function(){this.disposeThePicker()};a.prototype.getCurrentFolderFullPath=function(){return e.getOfflineModelPath(K.ProviderKey.Google_Drive)};a.prototype.updateAfterFileImport=function(a){goog.asserts.assert(!1,
"Not implemented: updateAfterFileImport")};a.prototype.getAuthToken=function(){return h.getInfo().then(function(a){if(a.loggedIn)return a.oauthToken;goog.asserts.assert(!1)})};a.prototype.launch=function(a,b){var c=this;this.launchMode_=a;this.callbacks_.addRemoveSyncInProgressEventListener(this.onSyncBeginEndFunction_,!0);this.callbacks_.startFileSync();var d=this.modelStorageProvider_.initialize();d.then(function(){d=c.getAuthToken();d.then(function(a){gapi.load("picker",{callback:c.pickerLoaded.bind(c,
a,b)})})})};a.prototype.pickerLoaded=function(a,b){this.launchMode_==R.FileOpen?this.doFilePicker(a,$t("Select a SketchUp model"),this.openFile.bind(this)):this.launchMode_==R.FileSave?this.doFileSave(a,b):this.launchMode_==R.FileInsert&&this.doFilePicker(a,$t("Select a file to insert"),this.insertFile.bind(this))};a.prototype.makePickerBuilder=function(a,b){return(new google.picker.PickerBuilder).setOAuthToken(a).setDeveloperKey("AIzaSyC2ZA3tmi-jg0oNEYWKCqwQvzwFz25DFCg").setOrigin(window.location.protocol+
"//"+window.location.host).setTitle(b)};a.prototype.doFilePicker=function(a,b,d){var e=this,g=f.getSkpMimeTypes();this.launchMode_==R.FileInsert&&(g=g.concat(f.getImageMimeTypes()));var h=(new google.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(!1).setOwnedByMe(!0).setMimeTypes(g.join(","));this.picker_=this.makePickerBuilder(a,b).addView(h).setSelectableMimeTypes(g.join(",")).setCallback(function(a){var b=a[google.picker.Response.ACTION];if(b===google.picker.Action.PICKED||b===google.picker.Action.CANCEL){e.disposeThePicker();
if(b===google.picker.Action.PICKED){var f=new c.default;e.syncInProgressPromise_.then(function(){d(a);f.restore()})}e.callbacks_.closeSidebar()}}).disableFeature(google.picker.Feature.MULTISELECT_ENABLED).build();this.picker_.setVisible(!0);this.adjustPicker()};a.prototype.getFileOpenInfo=function(a){a=a[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID];var b=this.getCurrentFolderFullPath(),c=g.FolderMetadata.lookupRemoteModelMetadataById(b,a),d=goog.isDef(c)?c.metadata:void 0;return this.modelStorageProvider_.getFileDetails("",
a).then(function(a){var f=e.convertFolderItemToFileItemView(a);f.localVersionId=goog.isDef(d)?d.versionId:"";f.versionState=e.determineVersionState(f,d);f.isLocal=goog.isDef(d);f.isLocal&&(f.localPath=goog.string.path.join(b,c.fileName));e.setFolderItemFileSystemName(a,f);return{folderItem:a,fileItemView:f,folderPath:b,fileNameAndMetadata:c}})};a.prototype.openFile=function(a){var b=this;this.getFileOpenInfo(a).then(function(a){var c=a.folderItem,e=a.fileItemView,f=goog.Promise.resolve();e.versionState===
m.FileVersionState.HasConflict&&(f=d.ShowQuestionDialog($t("There is a newer version of this model in your Google Drive.")+"\n\n"+$t("Do you want to keep your changes?")),f=f.then(function(a){return a?!1:d.ShowQuestionDialog($t("You will lose your local changes. Are you sure?"))}));f.then(function(d){goog.isDef(d)&&(e.versionState=d?m.FileVersionState.ModifiedAtRemoteStorage:m.FileVersionState.ModifiedLocally);b.callbacks_.openFile({fileItemView:e,folderItem:c,folderPath:a.folderPath})})},function(){d.ShowInfoDialog($t("Error"),
$t("An error occurred while opening this model."))})};a.prototype.doFileSave=function(a,b){var e=this,f=goog.isDefAndNotNull(b)?b:"";d.GetModelNameFromUser(f).then(function(a){f=a}).then(this.createFolderIfNone.bind(this)).then(function(){var b=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setSelectFolderEnabled(!0).setOwnedByMe(!0);e.picker_=e.makePickerBuilder(a,$t("Select a folder to save your model")).addView(b).setSelectableMimeTypes("application/vnd.google-apps.folder").setCallback(function(b){var d=
b[google.picker.Response.ACTION];if(d===google.picker.Action.PICKED||d===google.picker.Action.CANCEL)if(e.disposeThePicker(),d===google.picker.Action.PICKED){var g=new c.default;e.syncInProgressPromise_.then(function(){e.saveFile(b,f,a);g.restore()})}else e.callbacks_.closeSidebar()}).build();e.picker_.setVisible(!0);e.adjustPicker()}).thenCatch(function(a){if(a)throw a;e.callbacks_.closeSidebar()})};a.prototype.saveFile=function(a,b,c){var e=this,g=a[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID],
h=f.addSkpModelExtensionIfMissing(b).toLowerCase();this.modelStorageProvider_.getContents("",g).then(function(a){a=goog.array.find(a,function(a){return a.name.toLowerCase()===h});goog.isDefAndNotNull(a)?d.ShowInfoDialog($t("Error"),$t("A file with the same name already exists in the selected folder.\nPlease select a different name or folder.")).then(function(){e.doFileSave(c)}):(a={folderPath:e.getCurrentFolderFullPath(),folderId:g,storageProviderRegion:"",modelTitle:b,fileSystemName:void 0},e.callbacks_.saveFile(a))})};
a.prototype.insertFile=function(a){var b=this;this.getFileOpenInfo(a).then(function(a){f.isImageFile(a.folderItem.name)?d.showCustomButtonDialog($t("Insert {FILE_NAME} as an image or a material?").replace("{FILE_NAME}",a.folderItem.name),$t("Insert Image"),1,$t("Cancel"),$t("Image"),$t("Material")).then(function(a){if(1===a)return!1;if(2===a)return!0;throw void 0;}).then(function(c){b.callbacks_.insertFile({isImage:!0,asMaterial:c,asReference:!1,fileItemView:a.fileItemView,folderItem:a.folderItem,
folderPath:a.folderPath})}).thenCatch(function(){}):b.callbacks_.insertFile({isImage:!1,asMaterial:!1,asReference:!1,fileItemView:a.fileItemView,folderItem:a.folderItem,folderPath:a.folderPath})},function(){d.ShowInfoDialog($t("Error"),$t("An error occurred while inserting this file."))})};a.prototype.disposeThePicker=function(){goog.isDefAndNotNull(this.resizeObserver_)&&(this.resizeObserver_.disconnect(),this.resizeObserver_=null);if(null!==this.picker_){var a=this.picker_;this.picker_=null;a.setVisible(!1);
window.setTimeout(function(){a.dispose()},500)}};a.prototype.onSyncBeginEnd=function(a){var b=this;a?this.syncInProgressPromise_=new goog.Promise(function(a,c){b.syncInProgressPromiseResolver_=a}):(this.syncInProgressPromiseResolver_(),this.callbacks_.addRemoveSyncInProgressEventListener(this.onSyncBeginEndFunction_,!1))};a.prototype.createFolderIfNone=function(){var a=this;return this.modelStorageProvider_.getContents("","root").then(function(b){return b.some(function(a){return a.type===m.FolderItemType.Folder})?
goog.Promise.resolve():a.modelStorageProvider_.createFolder("",$t("SketchUp Models"),"root")})};a.prototype.adjustPicker=function(){var a=document.body.querySelector(".picker-dialog"),b=document.body.querySelector(".picker-dialog-content"),c=document.body.querySelector(".left-sidebar");if(goog.isDefAndNotNull(a)&&goog.isDefAndNotNull(b)){var d=function(){var d=a.getBoundingClientRect(),e=c.getBoundingClientRect(),f=document.body.getBoundingClientRect();a.style.left=Math.max(e.right+25,d.left)+"px";
d=b.getBoundingClientRect();b.style.width=d.width-Math.max(0,d.right+25-f.right)+"px"};d();this.resizeObserver_=new L.default(a,d)}};return a}();b.GoogleDrivePicker=a});
define("ModelDownloader","require exports DialogPrompts FileManager ModelStorageProvider ModelStorageProviderFactory ModelUtils".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.providerKey_=b}a.prototype.downloadFileOrFindLocal=function(a,b,c){if(a.isLocal&&a.versionState!==e.FileVersionState.ModifiedAtRemoteStorage)return goog.Promise.resolve(a.localPath);if(goog.isDefAndNotNull(b)&&goog.isDefAndNotNull(c))return this.downloadFile(b,
c);goog.asserts.assert(!1);return goog.Promise.reject()};a.prototype.downloadAndOpenModel=function(a,b,d){return this.downloadFileOrFindLocal(a,b,d).then(function(a){g.OpenOfflineModel(a)}).thenCatch(function(){c.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while opening this model."))})};a.prototype.downloadFile=function(a,b){var c=this;return this.doDownload(a).then(function(e){var f={fileNameInUI:a.name,fileId:a.id,projectId:a.projectId,parentFolderId:a.parentFolderId,versionId:a.versionId,
providerKey:c.providerKey_,region:a.region,isModified:!1};return d.FileManager.getInstance().saveDownloadedRemoteFile(e,b,a.fileSystemName,f)})};a.prototype.doDownload=function(a){var b=f.Providers[this.providerKey_],d=c.ShowProgressDialog($t("Loading..."),a.size,!1);return b.downloadFile(a.region,a.id,a.versionId,d.onProgress).promise.thenAlways(function(){d.close()})};return a}();b.default=a});
define("leftsidebar/SidebarFilesTab","require exports Bindings/index Bulletin BusyScreen custompicker/CustomPicker DialogPrompts FileInsert FileManager FilePickerUtils FileUtils FolderMetadata GoogleDrivePicker Look ModelDownloader ModelStorageProviderFactory ModelStorageProviderFactory ModelSynchronizer ModelUtils ProgramMode leftsidebar/SidebarTab".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh,Ch,Ah){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=
a.call(this,c)||this;c.filesTabInitialized_=!1;c.launchMode_=Ah.LaunchMode.Default;return c}__extends(b,a);b.prototype.setProviderAndRender=function(a){this.modelStorageProviderKey_=a;this.modelStorageProvider_=ga.Providers[this.modelStorageProviderKey_];this.modelDownloader_=new la.default(this.modelStorageProviderKey_);switch(this.modelStorageProviderKey_){case xh.ProviderKey.Trimble_Connect:case xh.ProviderKey.Sketchup_Warehouse:this.storageUI_=new f.CustomPicker(this.modelStorageProviderKey_,
this.modelStorageProvider_);break;case xh.ProviderKey.Google_Drive:this.storageUI_=new R.GoogleDrivePicker;break;default:goog.asserts.assert(!1)}this.storageUI_.setCallbackHandler(this);this.container=this.storageUI_.getContainer()};b.prototype.requiresLogin=function(){return!0};b.prototype.open=function(a){var b=this,c=y.getOfflineModelPath(this.modelStorageProviderKey_);return Mg.ModelSynchronizer.getInstance().ensureMetadataInSync(c).then(function(){return b.actuallyOpen(a)})};b.prototype.actuallyOpen=
function(a){var b=this;this.launchMode_=a;switch(this.launchMode_){case Ah.LaunchMode.Default:this.storageUI_.launchForFileOpen();break;case Ah.LaunchMode.ModelSave:this.storageUI_.launchForFileSave(zh.getPresentableModelTitle());break;case Ah.LaunchMode.InsertFile:this.storageUI_.launchForFileInsert();break;default:goog.asserts.assert(!1)}this.showProviderNotifications();this.makeVisible(!0);this.filesTabInitialized_=!0;return new goog.Promise(function(a,c){b.tabOpenPromiseResolver_=a;b.tabOpenPromiseRejector_=
c;b.promiseResolved_=!1})};b.prototype.showProviderNotifications=function(){var a=null;switch(this.modelStorageProviderKey_){case xh.ProviderKey.Trimble_Connect:a=d.Behavior.TrimbleConnectProvider;break;case xh.ProviderKey.Sketchup_Warehouse:a=d.Behavior.WarehouseProvider;break;case xh.ProviderKey.Google_Drive:a=d.Behavior.GoogleDriveProvider}d.getRelevantNotifications().then(function(b){b.forEach(function(b){b.affects===a&&(W.cancelAll(),W.info(b.message))})})};b.prototype.close=function(){this.filesTabInitialized_&&
(this.storageUI_.close(),this.promiseResolved_||this.tabOpenPromiseResolver_(),a.prototype.close.call(this))};b.prototype.setStartupFolder=function(a,b){this.storageUI_.setStartupFolder(a,b)};b.prototype.logMetadata=function(){m.FileManager.getInstance().logMetadata(this.storageUI_.getCurrentFolderFullPath())};b.prototype.openFile=function(a){this.modelDownloader_.downloadAndOpenModel(a.fileItemView,a.folderItem,a.folderPath);this.doCloseEvent.trigger()};b.prototype.saveFile=function(a){this.tabOpenPromiseResolver_({parentFolderPath:a.folderPath,
parentFolderId:a.folderId,storageProviderKey:this.modelStorageProviderKey_,storageProviderRegion:a.storageProviderRegion,modelTitle:a.modelTitle,fileSystemName:a.fileSystemName});this.promiseResolved_=!0;this.doCloseEvent.trigger()};b.prototype.importFile=function(a){var b=this;goog.asserts.assert(this.modelStorageProviderKey_===xh.ProviderKey.Trimble_Connect||this.modelStorageProviderKey_===xh.ProviderKey.Sketchup_Warehouse);var d=c.GetModelFilePath();if(0<d.length&&(d=L.FolderMetadata.lookupRemoteModelMetadata(d),
d.parentFolderId===a.folderId&&goog.string.caseInsensitiveEquals(d.fileNameInUI,a.file.name))){d=$t("Cannot overwrite the currently open model.");g.ShowInfoDialog($t("Error"),d);return}var d=goog.array.find(a.folderFileItemViews,function(b){return!b.isFolder&&goog.string.caseInsensitiveEquals(b.name,a.file.name)}),e=goog.Promise.resolve(!0);goog.isDefAndNotNull(d)&&(e=g.ShowQuestionDialog($t("This will overwrite an existing file. Continue?")));e.then(function(c){if(c){var d=m.FileManager.getInstance();
d.importNewLocalFile(a.file,a.folderPath,a.folderId,b.modelStorageProviderKey_,a.storageProviderRegion).then(function(a){b.storageUI_.updateAfterFileImport(a);Ch.currentProgramMode.uploadsModelsAfterSave()&&d.uploadModel(a.localPath).thenCatch(function(a){zh.showFileUploadErrorMessage(a)})}).thenCatch(function(a){switch(a){case m.Reason.NoSkpExtension:g.ShowInfoDialog($t("Warning"),$t("Please choose a file with a .skp extension."));break;default:g.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while importing this model."))}})}})};
b.prototype.getLocalFileViewsInFolder=function(a,b){return m.FileManager.getInstance().getLocalFileViewsInFolder(a,b)};b.prototype.downloadFile=function(a){var b=this;this.modelDownloader_.downloadFile(a.folderItem,a.folderPath).then(function(){c.GetModelFilePath()===a.fileItemView.localPath?(c.OpenModel(a.fileItemView.localPath),b.doCloseEvent.trigger()):b.storageUI_.reRenderCurrentFolderView()}).thenCatch(function(a){g.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while downloading this model."))})};
b.prototype.uploadFile=function(a){m.FileManager.getInstance().uploadModel(a.localFilePath).thenCatch(function(a){zh.showFileUploadErrorMessage(a)})};b.prototype.insertFile=function(a){var b=this;this.modelDownloader_.downloadFileOrFindLocal(a.fileItemView,a.folderItem,a.folderPath).then(function(b){a.isImage?h.loadImageFileIntoModel(b,a.asMaterial):h.loadSkpFileIntoModel(b,a.asReference,K.StripExtension(a.fileItemView.name))}).thenCatch(function(){g.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while inserting this file."))}).thenAlways(function(){b.doCloseEvent.trigger()})};
b.prototype.deleteItem=function(a){var b=this;if(a.fileItemView.isFolder){var d=c.GetModelFilePath();if(0<d.length&&(d=L.FolderMetadata.lookupRemoteModelMetadata(d),d=y.getFolderAncestorList(d.parentFolderId),d=goog.array.find(d,function(b){return b.id===a.fileItemView.remoteId}),goog.isDefAndNotNull(d))){d=$t("This folder contains the currently open model and it cannot be deleted.");g.ShowInfoDialog($t("Error"),d);return}}else if(a.fileItemView.isLocal&&zh.isCurrentModelPath(a.fileItemView.localPath)){d=
$t("This model is currently open and it cannot be deleted.");g.ShowInfoDialog($t("Error"),d);return}d=a.fileItemView.isFolder?$t("Are you sure you want to delete this folder?"):$t("Are you sure you want to delete this file?");d+="\n"+$t("Note that you cannot undo this.");g.ShowQuestionDialog(d).then(function(c){if(c){var d=new e.default;m.FileManager.getInstance().deleteFileOrFolder(a.fileItemView,b.modelStorageProviderKey_,a.storageProviderRegion,b.storageUI_.getCurrentFolderFullPath()).then(function(a){a&&
b.storageUI_.reRenderCurrentFolderView()}).thenAlways(function(){d.restore()}).thenCatch(function(){g.ShowInfoDialog($t("Error"),$t("An error occurred while deleting this item."))})}})};b.prototype.addRemoveUploadProgressEventListener=function(a,b){var c=Mg.ModelSynchronizer.getInstance();b?c.progressEvent.listen(a):c.progressEvent.remove(a)};b.prototype.addRemoveSyncInProgressEventListener=function(a,b){var c=Mg.ModelSynchronizer.getInstance();b?c.syncInProgressEvent.listen(a):c.syncInProgressEvent.remove(a)};
b.prototype.startFileSync=function(){Mg.ModelSynchronizer.getInstance().startFullSync()};b.prototype.closeSidebar=function(){this.doCloseEvent.trigger()};return b}(Ah.SidebarTab);b.default=a});
define("leftsidebar/SidebarGeolocationTab",["require","exports","Bindings/index","PostMessageManager","leftsidebar/SidebarTab"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=a.call(this,c)||this;c.addLocationServicesMessage_="al_services";c.addLocationInitMessage_="al_init";c.addLocationGrabMessage_="al_grab";return c}__extends(b,a);b.prototype.open=function(a){this.render();this.makeVisible(!0);return goog.Promise.resolve()};b.prototype.close=
function(){var b=d.PostMessageManager.getInstance();b.setHandler(this.addLocationInitMessage_,void 0);b.setHandler(this.addLocationGrabMessage_,void 0);a.prototype.close.call(this)};b.prototype.render=function(){goog.isDefAndNotNull(this.container)&&document.body.removeChild(this.container);this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarGeolocationTab,{});document.body.appendChild(this.container);this.content_=this.container.querySelector(".geolocation-content");c.LaunchAddLocation()};
b.prototype.finishRendering=function(a,b,e){var f=this;goog.dom.removeChildren(this.content_);var g=goog.soy.renderAsFragment(SketchUpTemplates.addLocationFrame,{url:a}),R=d.PostMessageManager.getInstance();R.setHandler(this.addLocationInitMessage_,function(){R.post(g.contentWindow,f.addLocationServicesMessage_,b)});R.setHandler(this.addLocationGrabMessage_,function(a){c.DoAddLocationImport(a,e);f.doCloseEvent.trigger()});this.content_.appendChild(g)};return b}(e.SidebarTab);b.default=a});
define("Cookies",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.DEFAULT_EULA_AGE=31536E3;b.BOOKMARK_PROMPT={name:"20171114_P11_BOOKMARK_PROMPT",value:"1",maxAge:31536E5};b.COOKIE_CONSENT={name:"20180524_P11_COOKIE_CONSENT",value:"1",maxAge:31536E5};b.FREE_EULA={name:"20160915_P11_EULA",value:"1",maxAge:b.DEFAULT_EULA_AGE};b.SHOP_EULA={name:"20180326_P11_EULA_SHOP",value:"1",maxAge:b.DEFAULT_EULA_AGE};b.FILE_CONVERSION_DIALOG={name:"20180223_P11_FILE_CONVERSION_DIALOG",
value:"0",maxAge:31536E5};b.ONBOARD={name:"20160921_P11_ONBOARD",value:"1",maxAge:31536E5};b.RAN_BEFORE={name:"su_web_run",value:"1",maxAge:31536E5}});
define("CookieManager",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.document_=b||{cookie:""}}a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a(document||null));return a.staticInstance_};a.prototype.isValidName=function(a){return!/[;=\s]/.test(a)};a.prototype.isValidValue=function(a){return!/[;\r\n]/.test(a)};a.prototype.set=function(a,b,c,g,h,m){if(!this.isValidName(a))throw Error('Invalid cookie name "'+a+
'"');if(!this.isValidValue(b))throw Error('Invalid cookie value "'+b+'"');goog.isDef(c)||(c=-1);h=h?";domain="+h:"";g=g?";path="+g:"";m=m?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(goog.now()+1E3*c)).toUTCString();this.setCookie(a+"="+b+h+g+c+m)};a.prototype.get=function(a,b){for(var c=a+"=",g=this.getParts(),h=0,m;m=g[h];h++){if(0==m.lastIndexOf(c,0))return m.substr(c.length);if(m==a)return""}return b};a.prototype.remove=function(a,b,c){var g=
this.containsKey(a);this.set(a,"",0,b,c);return g};a.prototype.containsKey=function(a){return goog.isDef(this.get(a))};a.prototype.setCookie=function(a){this.document_.cookie=a};a.prototype.getParts=function(){return(this.getCookie()||"").split(a.SPLIT_REGEX_)};a.prototype.getCookie=function(){return this.document_.cookie};a.MAX_COOKIE_LENGTH=3950;a.SPLIT_REGEX_=/\s*;\s*/;return a}();b.default=a});
define("ImportExportProcessUI","require exports knockout GenericDialog Cookies CookieManager portoptions/PortOptions DialogPrompts Look leftsidebar/Sidebar".split(" "),function(a,b,c,d,e,f,g,h,m,y){function K(){var a=goog.soy.renderAsFragment(SketchUpTemplates.importExportStartedDialog,{}),b=a.querySelector(".port-explanation"),c=b.innerHTML,c=c.replace("START_LINK",'<a href="#" data-bind="click: showTab">'),c=c.replace("END_LINK","</a>");b.innerHTML=c;var g=new d.GenericDialog,h=new L(function(){return g.hide()});
g.show(a,$t("Conversion Started"),h,d.ButtonSetType.Ok);g.dialogClosed.then(function(){var a=e.FILE_CONVERSION_DIALOG,b=h.dontShowAgain()?"0":"1";f.default.getInstance().set(a.name,b,a.maxAge)})}Object.defineProperty(b,"__esModule",{value:!0});b.notifyUserOfJobStart=function(a){"1"===f.default.getInstance().get(e.FILE_CONVERSION_DIALOG.name,"1")?K():a===g.FileConversionType.Export?m.info($t("Your export has been started.")):m.info($t("Your import has been started."))};b.showDownloadError=function(a){h.ShowInfoDialog($t("Download Error"),
$t('There was a problem downloading "{FILE_NAME}." Please try again.').replace("{FILE_NAME}",a))};b.showInsertError=function(a){h.ShowInfoDialog($t("Insert Error"),$t('There was a problem inserting "{FILE_NAME}." Please try again.').replace("{FILE_NAME}",a))};var L=function(){function a(b){this.dontShowAgain=c.observable(!1);this.closeDialog_=b}a.prototype.showTab=function(){y.Sidebar.getInstance().launchTab(y.SidebarTabs.ImportExportTab);this.closeDialog_()};return a}()});
define("LockQueue",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){var b=this;this.promise_=new Promise(function(a,c){b.resolver_=a})}Object.defineProperty(a.prototype,"promise",{get:function(){return this.promise_},enumerable:!0,configurable:!0});a.prototype.release=function(){this.resolver_()};return a}();a=function(){function a(){this.queue_=[]}a.prototype.acquireLock=function(){var a;0<this.queue_.length&&(a=this.queue_[this.queue_.length-
1]);var b=new c;this.queue_.push(b);return goog.isDef(a)?a.promise:Promise.resolve()};a.prototype.releaseLock=function(){0<this.queue_.length&&this.queue_.shift().release()};return a}();b.LockQueue=a});
define("ImportExportEngine","require exports Bindings/index DialogPrompts DownloadBlob EnvironmentSettings portoptions/PortOptions FileUtils ImportExportProcessUI FileInsert LockQueue Log Login ModelStorageProviderFactory SketchUpEvent Delay PromiseUtils XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg){function zh(){$h=Wh=Nh=Qh=ai=Uh=void 0;Oh=new K.LockQueue;Th()}function Ch(a,b,c,e,f,y){return __awaiter(this,void 0,void 0,function(){var K,R,W,la,ga,Mg,Ch,xh,zh,Ah,Bh,Fh;return __generator(this,
function(Gh){switch(Gh.label){case 0:return[4,Oh.acquireLock()];case 1:Gh.sent(),K=d.ShowProgressDialog($t("Packaging Geometry..."),0,!0),W=R=!1,K.setCancelCallback(function(){W=!0}),Gh.label=2;case 2:return Gh.trys.push([2,8,9,10]),[4,yh()];case 3:Gh.sent();if(W)return[2];K.setMessage($t("Sending Model..."));la=goog.string.path.extension(b);ga=a===g.FileConversionType.Export?y:b;Mg=h.replaceExtension(ga,la);Mg=h.buildSanitizedFilePath("",Mg);return[4,Jh(Mg,c,K.onProgress)];case 4:Ch=Gh.sent();if(W)return[2];
K.setMessage($t("Starting Conversion..."));xh=a===g.FileConversionType.Export?f:"skp";return[4,Sh(Ch,xh,e)];case 5:return zh=Gh.sent(),Ah={type:a,format:a===g.FileConversionType.Export?xh:"skp",executionInfo:{id:zh,status:Vh.Executing,startTime:new Date,finishTime:null},inputFileName:Mg,sourceFileName:b,inputFileId:Ch,outputFileId:void 0,outputFileName:void 0,outputFileUrl:void 0},goog.isDefAndNotNull(y)&&(Ah.modelTitle=y),li(Ah),[4,ci()];case 6:return Bh=Gh.sent(),Bh.push(Ah),[4,di(Bh)];case 7:return Gh.sent(),
Mh(Bh),[3,10];case 8:return Fh=Gh.sent(),R=!0,L.error("Export error: "+Fh),K.close(),d.ShowInfoDialog($t("Error"),$t("We encountered a problem during this operation.")),[3,10];case 9:return Oh.releaseLock(),null!==K&&(K.close(),W||R||m.notifyUserOfJobStart(a)),[7];case 10:return[2]}})})}function Ah(){return __awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f,g,h,m,y,K,R;return __generator(this,function(W){switch(W.label){case 0:return W.trys.push([0,3,,4]),[4,yh()];case 1:return W.sent(),[4,ci()];
case 2:return a=W.sent(),[3,4];case 3:return b=W.sent(),L.error("Error in getAllJobs: "+b),[3,4];case 4:c=[];if(!goog.isDefAndNotNull(a))return[3,10];d=[];e=[];f=new Date(Date.now()-6048E5);g=0;for(h=a;g<h.length;g++)m=h[g],null!==m.executionInfo.finishTime&&m.executionInfo.finishTime<f?e.push(m):d.push(m);c=d.map(ji);return 0<e.length?[4,di(d)]:[3,9];case 5:W.sent(),y=0,K=e,W.label=6;case 6:if(!(y<K.length))return[3,9];R=K[y];return[4,Bh(R)];case 7:W.sent(),W.label=8;case 8:return y++,[3,6];case 9:Mh(d),
W.label=10;case 10:return[2,c]}})})}function Bh(a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){switch(b.label){case 0:try{mi(a.inputFileId)}catch(c){L.error("Could not delete the input file for a deleted job.")}if(!goog.isDef(a.outputFileId))return[3,4];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,mi(a.outputFileId)];case 2:return b.sent(),[3,4];case 3:return b.sent(),L.error("Could not delete the output file for a deleted job."),[3,4];case 4:return[2]}})})}
function Eh(a){return Mg.doGet(a,void 0,!0).promise.then(function(a){return new Uint8Array(a)})}function yh(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:R.onChange(zh);goog.isDef(Xh)||(Xh=f.Get().tdsFileServiceUrl);a=R.getCachedInfo();if(!goog.isDefAndNotNull(a))throw Error("Not logged in during export");return[4,Fh()];case 1:return b.sent(),[4,Gh()];case 2:return b.sent(),[4,Dh(a.userId)];case 3:return b.sent(),[2]}})})}function Fh(){return __awaiter(this,
void 0,void 0,function(){var a,b,c;return __generator(this,function(d){switch(d.label){case 0:if(goog.isDefAndNotNull(ei)&&!(3E5>ei.exp-Date.now()))return[3,2];a="/api/fstoken?"+f.getStackQueryString();c=(b=JSON).parse;return[4,xh.toEs6Promise(Mg.doRequest(a).promise)];case 1:return ei=c.apply(b,[d.sent()]),[3,3];case 2:return[2,Promise.resolve()];case 3:return[2]}})})}function Gh(){return __awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:if(!goog.string.isEmptyOrWhitespaceSafe(Yh))return[2,
Promise.resolve()];a="api/profiles";g.label=1;case 1:return g.trys.push([1,3,,4]),[4,bi(a)];case 2:return b=g.sent(),goog.isDefAndNotNull(b.profiles)&&(c=b.profiles.find(function(a){return"Share with processing"===a.name}),goog.isDefAndNotNull(c)&&(Yh=c.id)),[3,4];case 3:return d=g.sent(),L.error("Could not list FS profiles: "+d),[3,4];case 4:if(!goog.string.isEmptyOrWhitespaceSafe(Yh))return[3,8];e={profile:{name:"Share with processing",shared_with:["processing"]}};g.label=5;case 5:return g.trys.push([5,
7,,8]),[4,hi(a,e)];case 6:return b=g.sent(),Yh=b.profile.id,[3,8];case 7:throw f=g.sent(),L.error("Could not create a FS profile: "+f),f;case 8:return[2]}})})}function Dh(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e;return __generator(this,function(f){switch(f.label){case 0:if(goog.isDef(Qh)&&goog.isDef(Uh)&&goog.isDef(ai))return[2,Promise.resolve()];b=W.defaultProviderKey.toString();c="su_fc/p11";return[4,Hh("users",void 0,c,"Base dir - DO NOT DELETE")];case 1:return d=f.sent(),
[4,Hh(b,d,c,"Provider dir - DO NOT DELETE")];case 2:return e=f.sent(),Qh="su_fc/"+b+"/"+a,[4,Hh(a,e,Qh,"User dir")];case 3:return Uh=f.sent(),[4,Hh("output",Uh,Qh,"Output dir")];case 4:return ai=f.sent(),[2]}})})}function Hh(a,b,c,d){return __awaiter(this,void 0,void 0,function(){var e,f,g,h,m;return __generator(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,Rh(a,b,c)];case 1:return e=y.sent(),[3,3];case 2:return f=y.sent(),L.error("Could not list FS profiles: "+f),[3,3];
case 3:if(!goog.string.isEmptyOrWhitespaceSafe(e))return[3,7];g={directory:{name:a,profile_id:Yh,public:!1,storage_identity:c,metadata:{info:d}}};goog.isDefAndNotNull(b)&&(g.directory.parent_id=b);y.label=4;case 4:return y.trys.push([4,6,,7]),[4,hi("api/directories",g)];case 5:return h=y.sent(),e=h.directory.id,[3,7];case 6:throw m=y.sent(),L.error("Could not create FS base dir: "+m),m;case 7:return[2,e]}})})}function Rh(a,b,c){return __awaiter(this,void 0,void 0,function(){var d,e,f;return __generator(this,
function(g){switch(g.label){case 0:return d="api/browse/directories?",goog.isDefAndNotNull(b)&&(d+="parent_id="+b+"&"),d+="storage_identity="+c,[4,bi(d)];case 1:return e=g.sent(),f=e.directories.find(function(b){return b.name===a}),[2,f?f.id:void 0]}})})}function Ih(a,b,c){return __awaiter(this,void 0,void 0,function(){var d,e;return __generator(this,function(f){switch(f.label){case 0:d="api/browse/files?name="+a,d+="&parent_id="+b+"&storage_identity="+c,f.label=1;case 1:return f.trys.push([1,3,,
4]),[4,bi(d)];case 2:return e=f.sent(),0<e.files.length?[2,e.files[0]]:[3,4];case 3:return f.sent(),[3,4];case 4:return[2,void 0]}})})}function Jh(a,b,c){return __awaiter(this,void 0,void 0,function(){var d,e;return __generator(this,function(f){switch(f.label){case 0:return[4,Kh(a,b.byteLength,Uh)];case 1:return d=f.sent(),[4,ni(d.upload.url,b,c)];case 2:return f.sent(),[4,Lh(d.id)];case 3:e=f.sent();if(!e)throw Error("Uploaded file is not available for processing");return[2,d.id]}})})}function Kh(a,
b,c,d){return __awaiter(this,void 0,void 0,function(){var e,f;return __generator(this,function(g){switch(g.label){case 0:return e={file:{upload:{size:b,parts:1,archive:!1},storage_identity:Qh,name:a,parent_id:c,profile_id:Yh,region_preference:["us1"]}},goog.isDef(d)&&(e.file.group=d),[4,hi("api/files",e)];case 1:return f=g.sent(),[2,f.file]}})})}function Lh(a,b){return __awaiter(this,void 0,void 0,function(){var c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:c=!1,d=goog.string.path.join("api/files",
a),e=0,g.label=1;case 1:return!c&&10>=++e?[4,bi(d)]:[3,5];case 2:return f=g.sent(),(c="AVAILABLE"===f.file.status&&(!goog.isDef(b)||b===f.file.revision))?[3,4]:[4,ga.sleep(1E3)];case 3:g.sent(),g.label=4;case 4:return[3,1];case 5:return[2,c]}})})}function Sh(a,b,c){return __awaiter(this,void 0,void 0,function(){var d,e,g,h;return __generator(this,function(m){switch(m.label){case 0:return d={output_type:b,options:JSON.stringify(c),file_service_ids:a,file_service_target_id:ai},e="/api/fcbegin?"+f.getStackQueryString(),
[4,Mg.doPost(e,d).promise];case 1:return g=m.sent(),h=JSON.parse(g),[2,h.executionId]}})})}function Mh(a){Th();fi=new ri(a,Zh)}function Th(){goog.isDef(fi)&&(fi.stop(),fi=void 0)}function Zh(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e,f,g,h,m;return __generator(this,function(y){switch(y.label){case 0:return[4,Oh.acquireLock()];case 1:y.sent(),b=[],y.label=2;case 2:return y.trys.push([2,10,11,12]),[4,ci()];case 3:c=y.sent(),d=0,e=a,y.label=4;case 4:if(!(d<e.length))return[3,8];f=
e[d];g=oi(c,f.id);if(!goog.isDef(g))return[3,6];g.executionInfo=f;return[4,pi(g)];case 5:return h=y.sent(),goog.isDefAndNotNull(h)?(g.outputFileId=h.id,g.outputFileName=h.name,g.outputFileUrl=h.download.url):L.error("Poll handler could not find outFileInfo."),b.push(ji(g)),[3,7];case 6:L.error("Poll handler could not find an ExecutionInfo."),y.label=7;case 7:return d++,[3,4];case 8:return[4,di(c)];case 9:return y.sent(),ii.trigger(b),[3,12];case 10:return m=y.sent(),L.error("Poll handler crashed: "+
m),[3,12];case 11:return Oh.releaseLock(),[7];case 12:return[2]}})})}function Ph(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e;return __generator(this,function(g){switch(g.label){case 0:return b="/api/fcpoll/"+a+"?"+f.getStackQueryString(),[4,Mg.doGet(b).promise];case 1:c=g.sent();d=JSON.parse(c);e={id:d.executionId,status:null,startTime:new Date(d.startTime),finishTime:d.finishTime?new Date(d.finishTime):null};switch(d.status){case "FINISHED":e.status=Vh.Finished;break;case "FAILED":e.status=
Vh.Failed;break;default:e.status=Vh.Executing}return[2,e]}})})}function oi(a,b){return a.find(function(a){return a.executionInfo.id===b})}function pi(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e;return __generator(this,function(f){switch(f.label){case 0:b=h.replaceExtension(a.inputFileName,a.format),c=!1,d=0,f.label=1;case 1:return!c&&10>=++d?[4,Ih(b,ai,Qh)]:[3,6];case 2:return e=f.sent(),(c=goog.isDef(e)&&"AVAILABLE"===e.status)?[2,e]:[3,3];case 3:return[4,ga.sleep(1E3)];case 4:f.sent(),
f.label=5;case 5:return[3,1];case 6:return L.error("findOutputFile failed."),[2,void 0]}})})}function ji(a){return{type:a.type,fileName:a.type===g.FileConversionType.Export?a.outputFileName:a.sourceFileName,executionInfo:a.executionInfo,expirationDate:null!==a.executionInfo.finishTime?new Date(a.executionInfo.finishTime.getTime()+6048E5):null,outputFileUrl:a.outputFileUrl}}function qi(a,b){return!goog.isDefAndNotNull(b)||"startTime"!==a&&"finishTime"!==a?b:new Date(b)}function ki(){return __awaiter(this,
void 0,void 0,function(){var a,b,c;return __generator(this,function(d){switch(d.label){case 0:return goog.isDef(Nh)?[3,2]:[4,Ih("fcmeta.json",Uh,Qh)];case 1:return a=d.sent(),goog.isDef(a)&&(Nh=a.id,Wh=a.download.url,$h=a.revision),[3,4];case 2:return b=goog.string.path.join("api/files",Nh),[4,bi(b)];case 3:c=d.sent(),Wh=c.file.download.url,$h=c.file.revision,d.label=4;case 4:return[2]}})})}function ci(){return __awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:return[4,
ki()];case 1:g.sent();if(!goog.isDef(Wh))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,Mg.doGet(Wh).promise];case 3:a=g.sent();b=JSON.parse(a,qi);c=0;for(d=b;c<d.length;c++)e=d[c],li(e);return[2,b];case 4:throw f=g.sent(),L.error("Cannot download the metadata file"),f;case 5:return[2,[]]}})})}function di(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:return[4,ki()];case 1:return g.sent(),b=JSON.stringify(a),
[4,Kh("fcmeta.json",b.length,Uh,Nh)];case 2:c=g.sent();if(goog.isDef(Nh)&&c.id!==Nh)throw Error("Error creating metadata file revision");g.label=3;case 3:return g.trys.push([3,5,,6]),[4,ni(c.upload.url,b)];case 4:return g.sent(),[3,6];case 5:throw d=g.sent(),L.error("Created metadata file but could not upload it."),d;case 6:return[4,Lh(c.id,c.revision)];case 7:e=g.sent();if(!e)throw Error("Uploaded metadata file is not available.");f=$h;Nh=c.id;Wh=c.download.url;$h=c.revision;if(!goog.isDef(f))return[3,
11];g.label=8;case 8:g.trys.push([8,10,,11]);g=goog.string.path.join(Xh,"api/files",Nh,"revisions",f);var h=gi();return[4,xh.toEs6Promise(Mg.doRequest(g,"DELETE",void 0,h).promise)];case 9:return g.sent(),[3,11];case 10:return g.sent(),L.error("Could not delete the previous metadata file."),[3,11];case 11:return[2]}})})}function li(a){if(!goog.isDef(a.outputFileName))if(a.type===g.FileConversionType.Export){var b=h.replaceExtension(a.modelTitle,a.format);a.outputFileName=b}else a.outputFileName=a.sourceFileName}
function gi(){var a={};a.Authorization="Bearer "+ei.jwt;return a}function bi(a){return __awaiter(this,void 0,void 0,function(){var b,c,d;return __generator(this,function(e){switch(e.label){case 0:return b=goog.string.path.join(Xh,a),c=gi(),[4,Mg.doGet(b,c).promise];case 1:return d=e.sent(),[2,JSON.parse(d)]}})})}function hi(a,b){return __awaiter(this,void 0,void 0,function(){var c,d,e;return __generator(this,function(f){switch(f.label){case 0:return c=goog.string.path.join(Xh,a),d=gi(),[4,Mg.doPost(c,
b,d).promise];case 1:return e=f.sent(),[2,JSON.parse(e)]}})})}function ni(a,b,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){switch(d.label){case 0:return[4,xh.toEs6Promise(Mg.doRequest(a,"PUT",b,void 0,void 0,void 0,c).promise)];case 1:return d.sent(),[2]}})})}function mi(a){a=goog.string.path.join(Xh,"api/files",a);var b=gi();return xh.toEs6Promise(Mg.doRequest(a,"DELETE",void 0,b).promise)}Object.defineProperty(b,"__esModule",{value:!0});var Vh;(function(a){a[a.Executing=
0]="Executing";a[a.Failed=1]="Failed";a[a.Finished=2]="Finished"})(Vh=b.ExecutionStatus||(b.ExecutionStatus={}));var Xh,ei,Yh,Uh,ai,Qh,Nh,$h,Wh,Oh=new K.LockQueue,ii=la.SketchUpEvents.Create();b.registerToFinishEvents=function(a){ii.listen(a)};b.unregisterFromFinishEvents=function(a){ii.remove(a)};var ri=function(){function a(b,c){this.INTERVAL=1E4;this.finishedCallback_=c;this.runningConversions_=b.filter(function(a){return a.executionInfo.status===Vh.Executing});0<this.runningConversions_.length&&
this.schedulePoll()}a.prototype.stop=function(){this.isRunning()&&(window.clearTimeout(this.timerId_),this.runningConversions_=this.timerId_=void 0)};a.prototype.isRunning=function(){return goog.isDef(this.timerId_)};a.prototype.schedulePoll=function(){var a=this;this.timerId_=window.setTimeout(function(){a.doPoll()},this.INTERVAL)};a.prototype.doPoll=function(){return __awaiter(this,void 0,void 0,function(){var a,b,c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:a=[],b=[],c=0,
d=this.runningConversions_,g.label=1;case 1:if(!(c<d.length))return[3,4];e=d[c];return this.isRunning()?[4,Ph(e.executionInfo.id)]:[3,4];case 2:f=g.sent(),f.status===Vh.Executing?a.push(e):b.push(f),g.label=3;case 3:return c++,[3,1];case 4:return 0<b.length?[4,this.finishedCallback_(b)]:[3,6];case 5:g.sent(),g.label=6;case 6:return 0===a.length?this.stop():this.isRunning()&&(this.runningConversions_=a,this.schedulePoll()),[2]}})})};return a}(),fi;b.beginImport=function(a,b,c){return __awaiter(this,
void 0,void 0,function(){return __generator(this,function(d){switch(d.label){case 0:return[4,Ch(g.FileConversionType.Import,a,b,c)];case 1:return d.sent(),[2]}})})};b.beginExport=function(a,b,c,d,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(f){switch(f.label){case 0:return[4,Ch(g.FileConversionType.Export,c,d,e,a,b)];case 1:return f.sent(),[2]}})})};b.getAllJobs=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return[4,
Oh.acquireLock()];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,4,5,6]),[4,Ah()];case 3:return[2,b.sent()];case 4:return a=b.sent(),L.error("Error in getAllJobs: "+a),[2,Promise.resolve([])];case 5:return Oh.releaseLock(),[7];case 6:return[2]}})})};b.performDownload=function(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Eh(a.outputFileUrl)];case 1:return b=c.sent(),e.default(new Blob([b]),
a.fileName),[3,3];case 2:return c.sent(),m.showDownloadError(a.fileName),[3,3];case 3:return[2]}})})};b.performInsert=function(a){return __awaiter(this,void 0,void 0,function(){var b,d;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Eh(a.outputFileUrl)];case 1:return b=e.sent(),d=goog.string.path.join(h.TEMP_DIR,a.fileName),d=c.FixPathString(d),FS.writeFile(d,b,{encoding:"binary"}),y.loadSkpFileIntoModel(d,!1),[3,3];case 2:return e.sent(),m.showInsertError(a.fileName),
[3,3];case 3:return[2]}})})};b.performDelete=function(a){return __awaiter(this,void 0,void 0,function(){var b,c,d,e,f,g,h;return __generator(this,function(m){switch(m.label){case 0:return[4,Oh.acquireLock()];case 1:m.sent(),m.label=2;case 2:return m.trys.push([2,8,9,10]),[4,yh()];case 3:return m.sent(),[4,ci()];case 4:b=m.sent();c=null;if(!goog.isDefAndNotNull(b))return[3,7];d=[];e=0;for(f=b;e<f.length;e++)g=f[e],g.executionInfo.id!==a.executionInfo.id?d.push(g):c=g;return[4,di(d)];case 5:return m.sent(),
[4,Bh(c)];case 6:m.sent(),m.label=7;case 7:return[3,10];case 8:return h=m.sent(),L.error("Error in performDelete: "+h),[3,10];case 9:return Oh.releaseLock(),[7];case 10:return[2]}})})}});
define("DateTimeUtils",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.timespanToHumanReadable=function(a){if(12E4>a)return a=Math.floor(a/1E3),1===a?$t("1 second"):$t("{SECONDS} seconds").replace("{SECONDS}",a.toString());if(36E5>a)return a=Math.floor(a/6E4),1===a?$t("1 minute"):$t("{MINUTES} minutes").replace("{MINUTES}",a.toString());if(864E5>a)return a=Math.floor(a/36E5),1===a?$t("1 hour"):$t("{HOURS} hours").replace("{HOURS}",a.toString());a=Math.floor(a/
864E5);return 1===a?$t("1 day"):$t("{DAYS} days").replace("{DAYS}",a.toString())}});
define("leftsidebar/SidebarImportExportTab","require exports knockout DialogPrompts portoptions/PortOptions ImportExportEngine leftsidebar/SidebarTab Login leftsidebar/Sidebar DateTimeUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=a.call(this,c)||this;c.rendered_=!1;return c}__extends(b,a);b.prototype.requiresLogin=function(){return!0};b.prototype.open=function(a){var b=this;return h.getInfo().then(function(a){b.render(a);
b.makeVisible(!0)})};b.prototype.render=function(a){var b=this;this.rendered_?this.updateJobsTable():(this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarImportExportTab),document.body.appendChild(this.container),this.content_=this.container.querySelector(".import-export-content"),this.viewModel_=new K,c.applyBindings(this.viewModel_,this.content_),f.registerToFinishEvents(function(){return b.updateJobsTable()}),this.updateJobsTable(),this.rendered_=!0)};b.prototype.updateJobsTable=
function(){return __awaiter(this,void 0,void 0,function(){var a,b;return __generator(this,function(c){switch(c.label){case 0:if(!goog.isDefAndNotNull(this.viewModel_))return[3,2];this.viewModel_.showLoadingState();b=(a=this.viewModel_).updateJobs;return[4,f.getAllJobs()];case 1:b.apply(a,[c.sent()]),c.label=2;case 2:return[2]}})})};return b}(g.SidebarTab);b.default=a;var K=function(){function a(){this.jobs=c.observableArray([]);this.loading=c.observable(!0)}a.prototype.showLoadingState=function(){this.loading(!0);
this.jobs.removeAll()};a.prototype.updateJobs=function(a){this.loading(!1);this.jobs(a.map(function(a){return new L(a)}));this.jobs.sort(function(a,b){return a.startTime()<b.startTime()?1:-1})};a.prototype.performDelete=function(a){var b=this;d.ShowQuestionDialog($t("Are you sure you want to delete this file?")).then(function(c){c&&(a.isBeingDeleted(!0),f.performDelete(a.jobInfo).then(function(){b.jobs.remove(a)}))})};return a}(),L=function(){function a(b){var d=this;this.ExecutionStatus=f.ExecutionStatus;
this.id=b.executionInfo.id;this.type=b.type;this.typeText=this.type===e.FileConversionType.Export?$t("Export"):this.type===e.FileConversionType.Import?$t("Import"):$t("Unknown");this.fileName=b.fileName;this.startTime=c.observable(b.executionInfo.startTime);this.finishTime=c.observable(b.executionInfo.finishTime);this.startText=c.computed(function(){return goog.isDefAndNotNull(d.startTime())?y.timespanToHumanReadable((new Date).valueOf()-d.startTime().valueOf())+" "+$t("ago"):$t("Unknown")});this.startTimeText=
c.computed(function(){return goog.isDefAndNotNull(d.startTime())?d.startTime().toLocaleString():$t("We really don't know.")});this.expireTime=c.observable(b.expirationDate);this.expireSoon=c.computed(function(){return goog.isDefAndNotNull(d.expireTime())?864E5>d.expireTime().valueOf()-(new Date).valueOf():!1});this.expireText=c.computed(function(){return goog.isDefAndNotNull(d.expireTime())?y.timespanToHumanReadable(d.expireTime().valueOf()-(new Date).valueOf()):$t("Unknown")});this.expireTimeText=
c.computed(function(){return goog.isDefAndNotNull(d.expireTime())?d.expireTime().toLocaleString():$t("We really don't know.")});this.elapsedText=c.computed(function(){if(goog.isDefAndNotNull(d.finishTime())){var a=d.finishTime().valueOf()-d.startTime().valueOf();if(6E4>a)return $t("({SECONDS} seconds)").replace("{SECONDS}",Math.floor(a/1E3).toString());a=Math.floor(a/6E4);return 1===a?$t("1 minute"):$t("({MINUTES} minutes)").replace("{MINUTES}",a.toString())}});this.status=c.observable(b.executionInfo.status);
this.isBeingDeleted=c.observable(!1);this.statusText=c.computed(function(){return d.isBeingDeleted()?$t("Deleting..."):d.status()===f.ExecutionStatus.Executing?$t("In Progress"):d.status()===f.ExecutionStatus.Finished?$t("Complete"):d.status()===f.ExecutionStatus.Failed?$t("Error"):$t("Unknown")});this.jobInfo=b}a.prototype.canDownload=function(){return this.type===e.FileConversionType.Export&&this.status()===f.ExecutionStatus.Finished};a.prototype.canDelete=function(){return this.status()!==f.ExecutionStatus.Executing};
a.prototype.performDownload=function(){f.performDownload(this.jobInfo)};a.prototype.canInsert=function(){return this.type===e.FileConversionType.Import&&this.status()===f.ExecutionStatus.Finished};a.prototype.performInsert=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,f.performInsert(this.jobInfo)];case 1:return a.sent(),m.Sidebar.getInstance().close(),[2]}})})};return a}()});
define("leftsidebar/SidebarNewModelTab","require exports Bindings/index BusyScreen FileUtils GlobalConstants LoadingGif ModelUtils ProgramMode XhrUtils leftsidebar/SidebarTab".split(" "),function(a,b,c,d,e,f,g,h,m,y,K){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){c=a.call(this,c)||this;b.TEMPLATES_DIR="/templates";c.render();return c}__extends(b,a);b.prototype.open=function(a){this.makeVisible(!0);return goog.Promise.resolve()};b.prototype.close=function(){this.selectedRow_&&
(this.selectedRow_.classList.remove("selected-template"),this.selectedRow_=null);a.prototype.close.call(this)};b.prototype.render=function(){var a=this;this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarNewModelTab,{});document.body.appendChild(this.container);this.content_=this.container.querySelector(".new-model-content");if(b.zipFileFetched_)this.renderFileInfos(this.content_);else{b.zipFileFetched_=!0;g.Show(this.content_);var c=m.currentProgramMode.getLocalResourcesSubdirectory();
window.setTimeout(function(){var b=goog.string.path.join("/static/resources/",SketchUp.getCurrentLanguage(),c,"templates.zip");y.fetchBinary(b,a.onTemplatesDownloaded.bind(a,"templates.zip"))},150)}};b.prototype.onTemplatesDownloaded=function(a,d){d=new Uint8Array(d);FS.writeFile(a,d,{encoding:"binary"});FS.mkdir(b.TEMPLATES_DIR);g.Hide(this.content_);c.UnzipFile(a,b.TEMPLATES_DIR);this.renderFileInfos(this.content_)};b.prototype.renderFileInfos=function(a){for(var d=e.BuildFileListRecursive(FS.lookupPath(b.TEMPLATES_DIR).node),
g=[],h=0;h<d.length;++h){var m=b.TEMPLATES_DIR+"/"+d[h],y=c.GetModelMetadataFromSkpFile(m),m={name:y.getName(),description:y.getDescription(),thumbnail:y.getThumbnail(),units:y.getUnits(),path:m};g.push(m)}h=goog.soy.renderAsFragment(SketchUpTemplates.importTemplates,{skpFiles:g},f.INJECTED_SOY_DATA);a.appendChild(h);a=h.querySelectorAll("li");for(h=0;h<a.length;++h)d=a[h],d.addEventListener("click",this.handleClickToCreateModel.bind(this,d))};b.prototype.handleClickToCreateModel=function(a,b){this.doCloseEvent.trigger();
var c=new d.default;window.setTimeout(function(){h.NewModel(a.dataset.filepath);c.restore()},120)};return b}(K.SidebarTab);b.default=a});
define("leftsidebar/SidebarUserAccountTab","require exports ApplicationFeatures DialogPrompts Entitlements EntitlementsFeatures EnvironmentSettings Log Login ModelUtils ProgramMode leftsidebar/SidebarTab UserTracking".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){return a.call(this,c)||this}__extends(b,a);b.prototype.requiresLogin=function(){return!0};b.prototype.open=function(a){var b=this;return m.getInfo().then(function(a){b.render(a);
b.makeVisible(!0)})};b.prototype.render=function(a){var b=this;goog.isDefAndNotNull(this.container)&&document.body.removeChild(this.container);this.container=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebarUserAccountTab,{loginInfo:a});document.body.appendChild(this.container);this.content_=this.container.querySelector(".user-account-content");a=this.content_.querySelector(".js-account-button");a.addEventListener("click",function(){window.open(g.Get().ecomAccountPage)});K.currentProgramMode.featureIsAvailable(c.default.AdvancedFeatures)||
a.classList.add("invisible");a=this.content_.querySelector(".logout-button");var m=this.content_.querySelector(".upgrade-button"),L=this.content_.querySelector(".save-before-sign-out-message");K.currentProgramMode.canSignOut()?(L.classList.add("invisible"),a.classList.remove("button-disabled")):(a.classList.add("button-disabled"),L.classList.remove("invisible"));a.addEventListener("click",function(){var a=$t("Are you sure you want to sign out?");d.ShowQuestionDialog(a).then(function(a){a&&(y.NewModel(),
K.currentProgramMode.signOutUser().thenCatch(function(a){h.error("Sign out failure: "+a)}).thenAlways(function(){b.doCloseEvent.trigger()}))})});K.currentProgramMode.featureIsAvailable(c.default.AdvancedFeatures)&&!f.canAccess(c.default.AdvancedFeatures)&&(m.classList.remove("invisible"),m.addEventListener("click",function(){e.upgrade(R.UpsellTriggers.UPGRADE_ACCOUNT)}))};return b}(L.SidebarTab);b.default=a});
define("leftsidebar/Sidebar","require exports ApplicationFeatures BackgroundMask CrashReporter DialogPrompts EntitlementsFeatures Login LoginPrompt ModelingToolbarManager ModelStorageProviderFactory ModelStorageProviderFactory ProgramMode SketchUpEvent leftsidebar/Sidebar3DWUploadTab leftsidebar/SidebarAboutTab leftsidebar/SidebarCurriculumTab leftsidebar/SidebarFilesTab leftsidebar/SidebarGeolocationTab leftsidebar/SidebarImportExportTab leftsidebar/SidebarNewModelTab leftsidebar/SidebarTab leftsidebar/SidebarUserAccountTab".split(" "),function(a,
b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh,Ch,Ah,Bh,Eh){Object.defineProperty(b,"__esModule",{value:!0});var yh;(function(a){a[a.MainOpenClose=0]="MainOpenClose";a[a.AboutTab=1]="AboutTab";a[a.UserAccountTab=2]="UserAccountTab";a[a.NewModelTab=3]="NewModelTab";a[a.ImportExportTab=4]="ImportExportTab";a[a.FilesTab=5]="FilesTab";a[a.GeolocationTab=6]="GeolocationTab";a[a.WarehouseUploadTab=7]="WarehouseUploadTab";a[a.CurriculumTab=8]="CurriculumTab"})(yh=b.SidebarTabs||(b.SidebarTabs={}));a=function(){function a(){var b=
this;this.tabs_={};this.tabLaunchers_={};this.keyDownHandler_=null;this.render();this.opened_=!1;this.doCloseEvent_=W.SketchUpEvents.Create();this.doCloseEvent_.listen(this.close.bind(this));this.userAccountTab_=new Eh.default(this.doCloseEvent_);this.tabs_[yh.UserAccountTab]=this.userAccountTab_;this.filesTab_=new Mg.default(this.doCloseEvent_);this.filesTab_.setProviderAndRender(K.defaultProviderKey);this.tabs_[yh.FilesTab]=this.filesTab_;h.onChange(function(a){a.loggedIn?b.launchTab(yh.UserAccountTab):
b.close()})}a.prototype.launchTab=function(a,b){void 0===b&&(b=Bh.LaunchMode.Default);return this.tabLaunchers_[a].call(this,null,b)};a.prototype.render=function(){var a=this,b=K.Providers[K.defaultProviderKey],e=g.canAccess(c.default.ImportFile)||g.canAccess(c.default.ExportFile);this.leftSidebar_=b=goog.soy.renderAsFragment(SketchUpTemplates.leftSidebar,{storageProviderLabel:b.name,storageProviderIconURL:b.iconURL,storageProviderTabTooltip:$t("Open a model from {NAME}").replace("{NAME}",b.name),
allow3DWUpload:R.currentProgramMode.allows3DWUpload(),hasCurriculum:R.currentProgramMode.featureIsAvailable(c.default.EduCurriculum),hasPorts:e,programTitle:R.currentProgramMode.getProgramTitle(),hasAppDownloads:!R.currentProgramMode.isEdu()});var f=b.querySelector(".connect-tab");this.tabLaunchers_[yh.FilesTab]=this.tabClickHandler.bind(this,yh.FilesTab,f);f.addEventListener("click",this.tabLaunchers_[yh.FilesTab]);this.selectedTabButton_=f;this.selectedTab_=yh.FilesTab;this.tabLaunchers_[yh.MainOpenClose]=
this.tabClickHandler.bind(this,yh.MainOpenClose,null);b.querySelector(".close-tab").addEventListener("click",this.tabLaunchers_[yh.MainOpenClose]);f=b.querySelector(".about-tab");this.tabLaunchers_[yh.AboutTab]=this.tabClickHandler.bind(this,yh.AboutTab,f);f.addEventListener("click",this.tabLaunchers_[yh.AboutTab]);f=b.querySelector(".user-account-tab");this.tabLaunchers_[yh.UserAccountTab]=this.tabClickHandler.bind(this,yh.UserAccountTab,f);f.addEventListener("click",this.tabLaunchers_[yh.UserAccountTab]);
if(e){var h=b.querySelector(".import-export-tab");this.tabLaunchers_[yh.ImportExportTab]=function(){return a.tabClickHandler(yh.ImportExportTab,h)};h.addEventListener("click",this.tabLaunchers_[yh.ImportExportTab])}e=b.querySelector(".new-model-tab");this.tabLaunchers_[yh.NewModelTab]=this.tabClickHandler.bind(this,yh.NewModelTab,e);e.addEventListener("click",this.tabLaunchers_[yh.NewModelTab]);e=b.querySelector(".geolocation-tab");this.tabLaunchers_[yh.GeolocationTab]=this.tabClickHandler.bind(this,
yh.GeolocationTab,e);e.addEventListener("click",this.tabLaunchers_[yh.GeolocationTab]);R.currentProgramMode.allows3DWUpload()&&(e=b.querySelector(".warehouse-upload-tab"),goog.isDefAndNotNull(e)&&(this.tabLaunchers_[yh.WarehouseUploadTab]=this.warehouseUploadTabClickHandler.bind(this,yh.WarehouseUploadTab,e),e.addEventListener("click",this.tabLaunchers_[yh.WarehouseUploadTab])));e=b.querySelector(".curriculum-tab");goog.isDefAndNotNull(e)&&(this.tabLaunchers_[yh.CurriculumTab]=this.tabClickHandler.bind(this,
yh.CurriculumTab,e),e.addEventListener("click",this.tabLaunchers_[yh.CurriculumTab]));R.currentProgramMode.isEdu()||(e=b.querySelector(".downloads-button"),goog.isDefAndNotNull(e)&&e.addEventListener("click",function(){window.open("https://www.sketchup.com/download/all","_blank")}));document.body.appendChild(b);goog.isDefAndNotNull(this.backgroundMask_)||(this.backgroundMask_=d.createAtZIndex(500));this.backgroundMask_.setClickHandler(this.tabLaunchers_[yh.MainOpenClose])};a.prototype.warehouseUploadTabClickHandler=
function(a,b,c,d){var e=this;void 0===d&&(d=Bh.LaunchMode.Default);var f=goog.isDefAndNotNull(this.tabs_[yh.WarehouseUploadTab]);a=this.tabClickHandler(a,b,c,d);f||(a=a.then(function(){e.tabs_[yh.WarehouseUploadTab].openTabEvent.listen(function(){e.launchTab(yh.WarehouseUploadTab)})}));return a};a.prototype.tabClickHandler=function(a,b,c,d){void 0===d&&(d=Bh.LaunchMode.Default);if(a===yh.MainOpenClose){if(this.opened_)return this.close(),goog.Promise.resolve();a=this.selectedTab_;b=this.selectedTabButton_}b!==
this.selectedTabButton_&&(this.selectedTabButton_.classList.remove("selected-left-tab"),b.classList.add("selected-left-tab"));if(this.opened_&&a===this.selectedTab_)return goog.Promise.resolve();this.selectedTab_=a;this.selectedTabButton_=b;this.closeAllTabs(a);switch(a){case yh.NewModelTab:return this.openTab(Ah.default,a,d);case yh.UserAccountTab:return this.openTab(Eh.default,a,d);case yh.FilesTab:return this.openTab(Mg.default,a,d);case yh.ImportExportTab:return this.openTab(Ch.default,a,d);case yh.GeolocationTab:return this.openTab(zh.default,
a,d);case yh.WarehouseUploadTab:return this.openTab(la.default,a,d);case yh.AboutTab:return this.openTab(ga.default,a,d);case yh.CurriculumTab:return this.openTab(xh.default,a,d);default:return goog.asserts.assert(!1),goog.Promise.resolve()}};a.prototype.openTheSideBar=function(){var a=this;this.opened_=!0;y.default.getInstance().hide();this.leftSidebar_.classList.add("left-expanded-sidebar");this.backgroundMask_.show();goog.isNull(this.keyDownHandler_)&&(this.keyDownHandler_=function(b){(b.keyCode||
b.which)===goog.events.KeyCodes.ESC&&a.close()},document.addEventListener("keydown",this.keyDownHandler_))};a.prototype.openTab=function(a,b,c){var d=this,g=this.tabs_[b];goog.isDefAndNotNull(g)||(g=new a(this.doCloseEvent_),this.tabs_[b]=g);this.opened_&&g.allowTransition(!1);a=goog.Promise.resolve(!0);g.requiresLogin()&&(a=h.getInfoRefreshingToken().then(function(a){if(a.loggedIn)return!0;e.ReportNotLoggedInError();throw void 0;}).thenCatch(function(){return R.currentProgramMode.signInUser().then(function(a){return a.loggedIn}).thenCatch(function(a){a===
m.LoginError.WINDOW_BLOCKED?f.ShowInfoDialog($t("Login Error"),$t("Our login window was blocked by your browser.")+"\n"+$t("Please allow SketchUp to show pop-up windows.")):f.ShowInfoDialog($t("Login Error"),$t("There was an error logging you in.")+"\n"+$t("Make sure SketchUp is allowed to show pop-up windows and try again."));return goog.Promise.resolve(!1)})}));return a=a.then(function(a){if(a)return d.openTheSideBar(),g.open(c);d.isOpen()&&d.close();return goog.Promise.resolve(void 0)})};a.prototype.close=
function(){var a=this.getOpenTab();goog.isDefAndNotNull(a)&&a.allowTransition(!0);this.closeAllTabs();this.opened_=!1;this.leftSidebar_.classList.remove("left-expanded-sidebar");y.default.getInstance().show();this.backgroundMask_.hide();goog.isNull(this.keyDownHandler_)||(document.removeEventListener("keydown",this.keyDownHandler_),this.keyDownHandler_=null)};a.prototype.getOpenTab=function(){for(var a in this.tabs_){var b=parseInt(a,10);if(this.tabs_[b].isVisible)return this.tabs_[b]}};a.prototype.closeAllTabs=
function(a){for(var b in this.tabs_){var c=parseInt(b,10);goog.isDef(a)&&a==c||this.tabs_[c].close()}};a.prototype.isOpen=function(){return this.leftSidebar_.classList.contains("left-expanded-sidebar")};a.logMetadata=function(){a.getInstance().tabs_[yh.FilesTab].logMetadata()};a.prototype.setStartupFolderForProvider=function(a,b,c){a===L.ProviderKey.Trimble_Connect&&this.filesTab_.setStartupFolder(b,c)};a.prototype.renderAddLocationDialog=function(a,b,c){var d=this.tabs_[yh.GeolocationTab];goog.isDefAndNotNull(d)?
d.finishRendering(a,b,c):goog.asserts.assert(!1,"Geolocation tab not found.")};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};return a}();b.Sidebar=a});
define("SaveHandler","require exports Bindings/index Cursor DialogPrompts FileManager FileUtils leftsidebar/Sidebar leftsidebar/SidebarTab Log ModelStorageProviderFactory ModelUtils ProgramMode SketchUpEvent PromiseUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la){Object.defineProperty(b,"__esModule",{value:!0});var ga;(function(a){a[a.NeedsSave=0]="NeedsSave";a[a.Saving=1]="Saving";a[a.Saved=2]="Saved";a[a.PushFailed=3]="PushFailed"})(ga=b.SaveState||(b.SaveState={}));a=function(){function a(){this.saveState_=
ga.Saved;this.saveStateChangedEvent_=W.SketchUpEvents.Create()}a.prototype.isSavingOrPushing=function(){return this.saveState_===ga.Saving};a.prototype.isSaving=function(){return this.isLockAcquired_};a.prototype.isPushFailedAfterSaving=function(){return this.saveState_===ga.PushFailed};a.prototype.acquireSaveLock=function(){return this.isLockAcquired_?!1:this.isLockAcquired_=!0};a.prototype.releaseSaveLock=function(){this.isLockAcquired_=!1};a.prototype.onFileNewOrOpen=function(){this.setSaveState(ga.Saved)};
a.prototype.updateSaveButtonState=function(){this.saveState_!==ga.PushFailed&&this.saveState_!==ga.Saving&&this.setSaveState(c.IsSaveNeeded()?ga.NeedsSave:ga.Saved)};a.prototype.listenToSaveStateChangedEvent=function(a){this.saveStateChangedEvent_.listen(a)};a.prototype.removeFromSaveStateChangedEvent=function(a){this.saveStateChangedEvent_.remove(a)};a.prototype.setSaveState=function(a){this.saveState_=a;this.saveStateChangedEvent_.trigger(a)};a.prototype.setStatusbarMsg=function(){var a;this.saveState_===
ga.Saving?a=$t("Saving..."):this.saveState_===ga.Saved?a=$t("Save completed."):this.saveState_===ga.PushFailed&&(a=$t("Save could not be completed."));goog.isDef(a)&&JSBindings.SetStatusBarPrompt(a)};a.prototype.save=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);return this.saveOrSaveAs(a,!1,b)};a.prototype.saveAs=function(){return this.saveOrSaveAs(!0,!0,!0)};a.prototype.saveOrSaveAs=function(a,b,d){var e=this;y.info("saveOrSaveAs - forceSave: "+a+", saveAs: "+b);var f=c.IsModelUntitled();
if(!this.acquireSaveLock())return goog.Promise.resolve(!1);this.saveState_===ga.PushFailed&&(a=!0);var K=this.saveState_;this.setSaveState(ga.Saving);this.setStatusbarMsg();if(f||b){var W;a=h.Sidebar.getInstance().launchTab(h.SidebarTabs.FilesTab,m.LaunchMode.ModelSave).then(function(a){W=a;if(goog.isDefAndNotNull(a)){var b;b=goog.string.isEmptyOrWhitespaceSafe(a.fileSystemName)?g.generateFileSystemName():g.StripExtension(a.fileSystemName);c.SetModelTitleAndPath(a.parentFolderPath,b);c.CloseAutoSaveFile();
return e.doSave(!1,!0,W)}f&&c.SetModelUntitled();return!1});a=a.then(function(a){return a?(L.ClearTitleOverride(),L.UpdateModelTitleUI(),!0):!1})}else a=this.doSave(!1,a);a=a.then(function(a){y.info("saved: "+a);if(a&&d){if(R.currentProgramMode.uploadsModelsAfterSave())return e.performPushAfterSave().then(function(){return a});e.setSaveState(ga.Saved)}else e.setSaveState(K);e.setStatusbarMsg();return a});return a=a.thenAlways(function(){e.releaseSaveLock()})};a.prototype.ensureSavedAndTitled=function(a){return c.IsModelUntitled()||
c.IsSaveNeeded()?this.promptForSave_(a):Promise.resolve(!0)};a.prototype.ensureSaved=function(a){return c.IsSaveNeeded()?this.promptForSave_(a):Promise.resolve(!0)};a.prototype.promptForSave_=function(a){var b=this;return la.toEs6Promise(e.ShowQuestionDialog(a)).then(function(a){return a?new Promise(function(a,c){b.save().then(function(d){if(d){var e=function(d){b.removeFromSaveStateChangedEvent(e);d===ga.Saved?a(!0):c()};b.listenToSaveStateChangedEvent(e)}else c()})}):Promise.resolve(!1)})};a.prototype.performPushAfterSave=
function(){var a=this,b=c.GetModelFilePath(),d=f.FileManager.getInstance(),g=d.hasVersionConflict(b),g=g.then(function(a){return a?e.ShowQuestionDialog($t("There is a newer version of this model in your account.")+"\n"+$t("Do you want to overwrite it with your current changes?")):!0});return g.then(function(e){e&&d.uploadModel(b).then(function(){a.setSaveState(c.IsSaveNeeded()?ga.NeedsSave:ga.Saved);a.setStatusbarMsg()}).thenCatch(function(b){a.setSaveState(ga.PushFailed);a.setStatusbarMsg();L.showFileUploadErrorMessage(b)})})};
a.prototype.autoSave=function(){var a=this;if(!R.currentProgramMode.canAutoSave()||!this.acquireSaveLock())return goog.Promise.resolve(!1);JSBindings.SetStatusBarPrompt($t("Auto-saving..."));return this.doSave(!0).thenAlways(function(){JSBindings.SetStatusBarPrompt($t("Auto-save completed. Please make sure to click the Save button to send your changes to your account."));a.releaseSaveLock()})};a.prototype.checkUnsavedModel=function(){return f.FileManager.mountAndReadOfflineDirectory().then(function(){var a=
f.FileManager.FindUntitledAutoSaveModel();return goog.string.isEmptyOrWhitespace(a)?goog.Promise.resolve(!1):e.ShowQuestionDialog($t("An unsaved model was found from your last session.")+"\n"+$t("Do you want to open it?")).then(function(b){b&&L.RecoverUntitledModel(a);g.DeleteFile(a);return g.syncFileSystem().then(function(){return b})})})};a.prototype.doSave=function(a,b,e){var g=this;void 0===b&&(b=!1);y.info("doSave - isAuto: "+a+", forceSave: "+b);if(!b&&!c.IsSaveNeeded())return goog.Promise.resolve(!1);
d.override("wait");return f.FileManager.mountAndReadOfflineDirectory().then(function(){return g.finishSave(a,e)}).thenAlways(function(){d.restore();y.info("doSave - end")})};a.prototype.finishSave=function(a,b){var d=null,e=null;if(a){c.FinishAutoSave();d=c.GetAutoSaveFilename();if(goog.string.isEmptyOrWhitespaceSafe(d))return goog.asserts.assert(!c.IsSaveNeeded()),goog.Promise.resolve(!1);e=goog.string.path.dirname(d)}else K.Providers[K.defaultProviderKey].handlePreModelSave(),d=c.GetModelFilePath(),
e=goog.string.path.dirname(d),g.MkdirRecursive(e),c.SaveModel(d),a=f.FileManager.getInstance(),goog.isDefAndNotNull(b)?a.saveMetadataForNewLocalModel(d,b.modelTitle,b.storageProviderKey,b.parentFolderId,b.storageProviderRegion):a.setModelMetadataModified(d);if(!goog.string.startsWith(e,f.FileManager.SAVE_DIR))throw"Saving to invalid directory: "+e;return g.syncFileSystem().then(function(){return!0})};a.prototype.closeCurrentModel=function(){var a=this,b=goog.Promise.resolve();c.IsSaveNeeded()&&(b=
e.showYesNoCancelQuestionDialog($t("Save changes to the current model?")),b=b.then(function(b){if(b)return a.save()}));return b};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);return a.staticInstance_};return a}();b.default=a});
define("Entitlements","require exports CrashReporter Login EnvironmentSettings SaveHandler SketchUpEvent UserTracking XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m){function y(a){return __awaiter(this,void 0,void 0,function(){var d,f,g,h,y,R,Ah,Bh;return __generator(this,function(Eh){switch(Eh.label){case 0:d={sketchUpWebFeatureId:K.SketchUpWebFree,sku:"SKP-FREE-YR-WEB"};if(!goog.isDefAndNotNull(a)||!a.loggedIn)return[2,d];f=e.Get();g=f.entitlementsBaseUrl+f.entitlementsApiBase;g+="/activations?featureFilter=FEA-SKP-SUWEB";
h={Authorization:a.oauthToken};y=goog.string.endsWith(a.email.toLowerCase(),"sketchup.com")&&(e.IsLocal()||e.IsSandbox());Eh.label=1;case 1:return Eh.trys.push([1,3,,4]),[4,m.doGet(g,h,void 0,void 0,void 0,6E4).promise];case 2:Ah=Eh.sent();var yh=R=JSON.parse(Ah);Eh=K.SketchUpWebFree;var Fh="SKP-FREE-YR-WEB";if(!goog.isDefAndNotNull(yh.activations)||0===yh.activations.length)throw Error("Activation response contains no activations.");yh=yh.activations[0];yh.authorized?(Eh=yh.featureId,Fh=yh.sku):
b.activationEvent.trigger({activation:yh,type:L.ActivationExpired});d={sketchUpWebFeatureId:Eh,sku:Fh};y&&(d.sketchUpWebFeatureId=K.SketchUpWebPaid,d.sku="SKP-SHOP-YR-WEB-01");return[2,d];case 3:return Bh=Eh.sent(),c.ReportEntitlementActivationError(R,Bh),b.activationEvent.trigger({activation:null,type:L.ActivationRetrievalError}),y&&(d.sketchUpWebFeatureId=K.SketchUpWebPaid),[2,d];case 4:return[2]}})})}Object.defineProperty(b,"__esModule",{value:!0});var K;(function(a){a.SketchUpWebFree="FEA-SKP-SUWEB-FREE";
a.SketchUpWebPaid="FEA-SKP-SUWEB-PAID"})(K=b.ExternalFeatureId||(b.ExternalFeatureId={}));var L;(function(a){a.ActivationExpired="ACTIVATION-EXPIRED";a.ActivationRetrievalError="ACTIVATION-RETRIEVAL-ERROR"})(L=b.ActivationEventType||(b.ActivationEventType={}));b.activationEvent=g.SketchUpEvents.Create();var R;b.init=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return[4,d.getInfo()];case 1:return a=b.sent(),[4,y(a)];case 2:return R=
b.sent(),[2]}})})};b.initForEduK12=function(){R={sketchUpWebFeatureId:K.SketchUpWebFree,sku:"SKP-EDUK12-YR-WEB"}};b.getInfo=function(){return R};b.upgrade=function(a){var b=$t("Your model must be saved before you can upgrade. Would you like to continue?");f.default.getInstance().ensureSaved(b).then(function(b){b&&h.recordUpgradeInteraction(a).then(function(){window.location.href="https://www.sketchup.com/buy/pricing"},void 0)},function(){})}});
define("EntitlementsFeatures",["require","exports","Entitlements","Entitlements","ApplicationFeatures"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.canAccess=function(a){var b=d.getInfo().sketchUpWebFeatureId,b=f[b]||null,c=!1;null!==b&&(c=-1<b.indexOf(a));return c};var f=new Map;f[c.ExternalFeatureId.SketchUpWebFree]=[];f[c.ExternalFeatureId.SketchUpWebPaid]=[e.default.AdvancedFeatures,e.default.ExportFile,e.default.ImportFile,e.default.MaterialEditing,e.default.Outliner,
e.default.SolidTools,e.default.StyleEditing,e.default.RemoveWatermark]});
define("portoptions/PortOptionsViewModel",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){var b=this;this.getOptionsPromise_=new Promise(function(a,c){b.promiseResolve_=a;b.promiseReject_=c})}a.getTranslatedUnitsMap=function(){var a={};a[$t("In model")]="model";a[$t("Inches")]="inch";a[$t("Feet")]="foot";a[$t("Yards")]="yard";a[$t("Miles")]="mile";a.mm="mm";a.cm="cm";a.m="m";a.km="km";return a};a.getTranslatedGeometryMap=function(){var a=
{};a[$t("Full hierarchy")]="full_hierarchy";a[$t("By layer")]="by_layer";a[$t("By material")]="by_material";a[$t("Single object")]="single_object";return a};a.getAcadVersionsMap=function(){return{"Release 12":"acad_12","Release 13":"acad_13","Release 14":"acad_14","AutoCAD 2000":"acad_2000","AutoCAD 2004":"acad_2004","AutoCAD 2007":"acad_2007","AutoCAD 2010":"acad_2010","AutoCAD 2013":"acad_2013"}};a.prototype.cancel=function(){goog.isDefAndNotNull(this.promiseReject_)&&this.promiseReject_()};a.prototype.performPort=
function(){if(goog.isDefAndNotNull(this.promiseResolve_)){var a=this.getOptions();goog.isDefAndNotNull(a)&&this.promiseResolve_(a)}};a.prototype.scalesAreEqual=function(a,b){return a.toFixed(3)===b.toFixed(3)};a.prototype.getOptionsPromise=function(){return this.getOptionsPromise_};return a}();b.PortOptionsViewModel=a});
define("portoptions/PortOptionsView",["require","exports","GenericDialog"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.show=function(){var a=new c.GenericDialog,b=this.getViewModel(),d=this.renderContent();a.show(d,this.getDialogTitle(),b,c.ButtonSetType.None,"port-options-dialog");b.getOptionsPromise().then(function(){return a.hide()},function(){return a.hide()});return d};return a}();b.default=a});
define("portoptions/ColladaExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportTriangulatedFaces:!0,ExportDoubleSidedFaces:!1,ExportEdges:!1,ExportAuthorAttribution:!1,ExportHiddenGeometry:!1,ExportPreserveHierarchies:!0,ExportTextureMaps:!0};a=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;d.exportTriangulatedFaces=c.observable(e.ExportTriangulatedFaces);d.exportDoubleSidedFaces=
c.observable(e.ExportDoubleSidedFaces);d.exportEdges=c.observable(e.ExportEdges);d.exportAuthorAttribution=c.observable(e.ExportAuthorAttribution);d.exportHiddenGeometry=c.observable(e.ExportHiddenGeometry);d.exportPreserveHierarchies=c.observable(e.ExportPreserveHierarchies);d.exportTextureMaps=c.observable(e.ExportTextureMaps);return d}__extends(b,a);b.prototype.getOptions=function(){return e={ExportTriangulatedFaces:this.exportTriangulatedFaces(),ExportDoubleSidedFaces:this.exportDoubleSidedFaces(),
ExportEdges:this.exportEdges(),ExportAuthorAttribution:this.exportAuthorAttribution(),ExportHiddenGeometry:this.exportHiddenGeometry(),ExportPreserveHierarchies:this.exportPreserveHierarchies(),ExportTextureMaps:this.exportTextureMaps()}};return b}(d.PortOptionsViewModel);b.ColladaExportViewModel=a});
define("portoptions/ColladaExportView",["require","exports","portoptions/PortOptionsView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var e=a.call(this)||this;e.viewModel_=c;return e}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Export as Collada")};b.prototype.renderContent=function(){return goog.soy.renderAsFragment(SketchUpTemplates.colladaExportOptions)};return b}(c.default);
b.ColladaExportView=a});
define("portoptions/DwgDxfExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportAcadVersion:"acad_2013",ExportConstructionGeometry:!1,ExportDimensions:!0,ExportEdges:!0,ExportFacesFlag:!0,ExportText:!0,ExportType:"3d"};a=function(a){function b(){var g=null!==a&&a.apply(this,arguments)||this;g.acadVersionsMap=d.PortOptionsViewModel.getAcadVersionsMap();g.acadVersionDefault=e.ExportAcadVersion;
g.exportAcadVersion=c.observable(void 0);g.exportConstructionGeometry=c.observable(e.ExportConstructionGeometry);g.exportDimensions=c.observable(e.ExportDimensions);g.exportEdges=c.observable(e.ExportEdges);g.exportFacesFlag=c.observable(e.ExportFacesFlag);g.exportText=c.observable(e.ExportText);return g}__extends(b,a);b.prototype.getOptions=function(){return e={ExportAcadVersion:this.exportAcadVersion(),ExportConstructionGeometry:this.exportConstructionGeometry(),ExportDimensions:this.exportDimensions(),
ExportEdges:this.exportEdges(),ExportFacesFlag:this.exportFacesFlag(),ExportText:this.exportText(),ExportType:"3d"}};return b}(d.PortOptionsViewModel);b.DwgDxfExportViewModel=a});
define("portoptions/DwgDxfExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d){var f=a.call(this)||this;f.viewModel_=c;f.title_=d;return f}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.acadVersionsMap,void 0,this.viewModel_.acadVersionDefault);
b.onChange(function(b){return a.viewModel_.exportAcadVersion(b)});this.viewModel_.exportAcadVersion(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.dwgDxfExportOptions);d.querySelector(".acad-selector").appendChild(b.render());return d};return b}(d.default);b.DwgDxfExportView=a});
define("portoptions/DwgDxf2dExportViewModel","require exports knockout portoptions/PortOptions Bindings/index portoptions/PortOptionsViewModel".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});var g={ExportAcadVersion:"acad_2013",ExportSectionLineType:"polyline_with_width",ExportType:"2d",ExtensionAutomatic:!0,ExtensionLength:0,FullScale:!1,Height:0,InDrawing:0,InModel:0,ProfileAutomatic:!0,ProfileOnLayer:!0,ProfileType:"polyline_with_width",ProfileWidth:0,SectionAutomatic:!0,
SectionOnLayer:!0,SectionWidth:0,ShowExtensions:!0,Width:0};a=function(a){function b(){var y=a.call(this)||this;y.acadVersionsMap=f.PortOptionsViewModel.getAcadVersionsMap();y.acadVersionDefault=g.ExportAcadVersion;y.hlrClipWindow=e.getHlrClipWindow();y.scaleAdjustment=e.getScaleAdjustment();y.viewportDimensions=e.getViewportDimensions();y.defaultHeight=y.hlrClipWindow.maxY-y.hlrClipWindow.minY;y.defaultWidth=y.hlrClipWindow.maxX-y.hlrClipWindow.minX;y.aspectRatio=y.defaultWidth/y.defaultHeight;y.isPerspective=
e.GetCommandState(e.CommandIds.PERSPECTIVE_PROJECTION)===e.CommandStates.MF_CHECKED;y.defaultExtensionLength=g.ExtensionLength;y.defaultProfileWidth=g.ProfileWidth;y.defaultSectionWidth=g.SectionWidth;y.defaultInDrawing=g.InDrawing;y.defaultInModel=g.InModel;y.scale=1;y.exportAcadVersion=c.observable(void 0);y.exportSectionLineType=c.observable(g.ExportSectionLineType);y.extensionAutomatic=c.observable(g.ExtensionAutomatic);y.fullScale=c.observable(g.FullScale);y.profileAutomatic=c.observable(g.ProfileAutomatic);
y.profileOnLayer=c.observable(g.ProfileOnLayer);y.profileType=c.observable(g.ProfileType);y.sectionAutomatic=c.observable(g.SectionAutomatic);y.sectionOnLayer=c.observable(g.SectionOnLayer);y.showExtensions=c.observable(g.ShowExtensions);y.extensionLengthString=c.observable(e.lengthToString(y.defaultExtensionLength));y.heightString=c.observable(e.lengthToString(y.defaultHeight));y.inDrawingString=c.observable(e.lengthToString(y.defaultInDrawing));y.inModelString=c.observable(e.lengthToString(y.defaultInModel));
y.profileWidthString=c.observable(e.lengthToString(y.defaultProfileWidth));y.sectionWidthString=c.observable(e.lengthToString(y.defaultSectionWidth));y.widthString=c.observable(e.lengthToString(y.defaultWidth));y.extensionLength=c.computed(function(){return y.validateAndSetLength(y.extensionLengthString,y.defaultExtensionLength)});y.height=c.computed(function(){return y.validateAndSetLength(y.heightString,y.defaultHeight)});y.inDrawing=c.computed(function(){return y.validateAndSetLength(y.inDrawingString,
y.defaultInDrawing)});y.inModel=c.computed(function(){return y.validateAndSetLength(y.inModelString,y.defaultInModel)});y.profileWidth=c.computed(function(){return y.validateAndSetLength(y.profileWidthString,y.defaultProfileWidth)});y.sectionWidth=c.computed(function(){return y.validateAndSetLength(y.sectionWidthString,y.defaultSectionWidth)});y.width=c.computed(function(){return y.validateAndSetLength(y.widthString,y.defaultWidth)});y.showWideLineEntities=c.computed(function(){return!("acad_12"===
y.exportAcadVersion()||"acad_13"===y.exportAcadVersion()||"acad_14"===y.exportAcadVersion())});y.enableFullScaleCheckbox=c.computed(function(){return!y.isPerspective});y.profileLinesSelected=c.computed(function(){return y.profileType()!==d.PROFILE_LINE_TYPE_NONE});y.sectionLinesSelected=c.computed(function(){return y.exportSectionLineType()!==d.PROFILE_LINE_TYPE_NONE});y.fullScale.subscribe(y.onFullScaleChanged,y);y.profileAutomatic.subscribe(y.onProfileAutomaticChanged,y);y.sectionAutomatic.subscribe(y.onSectionAutomaticChanged,
y);y.extensionAutomatic.subscribe(y.onExtensionAutomaticChanged,y);y.isPerspective&&(y.defaultHeight*=y.hlrClipWindow.far/y.hlrClipWindow.near);var m=e.unitLengthInInches();y.fullScale()?(y.setInDrawing(m),y.setInModel(m),y.scale=1,y.setHeight(y.defaultHeight)):y.scaleAdjustment.isOrtho?(y.scale=y.inDrawing()/y.inModel(),y.setHeight(y.scale*y.defaultHeight)):(y.setHeight(y.defaultHeight),y.scale=y.height()/y.defaultHeight,y.setInDrawing(m),y.setInModel(y.inDrawing()/y.scale));y.setWidth(y.height()*
y.aspectRatio);y.onScaleChanged();y.defaultInDrawing=y.inDrawing();y.defaultInModel=y.inModel();m=0;e.getRenderingOptionInt("DrawSilhouettes")&&(m=e.getRenderingOptionInt("SilhouetteWidth"));y.defaultProfileWidth=y.defaultHeight*m/y.viewportDimensions.height;y.setProfileWidth(y.defaultProfileWidth);m=e.getRenderingOptionInt("SectionCutWidth");y.defaultSectionWidth=y.defaultHeight*m/y.viewportDimensions.height;y.setSectionWidth(y.defaultSectionWidth);m=0;e.getRenderingOptionInt("ExtendLines")&&(m=
e.getRenderingOptionInt("LineExtension"));y.defaultExtensionLength=y.defaultHeight*m/y.viewportDimensions.height;y.setExtensionLength(y.defaultExtensionLength);return y}__extends(b,a);b.prototype.validateAndSetLength=function(a,b){if(goog.string.isEmptySafe(a()))return b||0;var c=e.parseLength(a())||b||0;0>c&&(c=b||0);a(e.lengthToString(c));return c};b.prototype.onFullScaleChanged=function(){if(this.fullScale()){this.setHeight(this.defaultHeight);this.setWidth(this.height()*this.aspectRatio);var a=
e.unitLengthInInches();this.setInDrawing(a);this.setInModel(a);this.scale=1;this.onScaleChanged()}};b.prototype.onWidthChanged=function(){var a=this.scale;this.setHeight(this.width()/this.aspectRatio);this.scale=this.height()/this.defaultHeight;var b=e.unitLengthInInches();this.setInDrawing(b);this.scalesAreEqual(this.scale,a)||(this.setInModel(this.inDrawing()/this.scale),this.onScaleChanged())};b.prototype.onHeightChanged=function(){var a=this.scale;this.setWidth(this.height()*this.aspectRatio);
this.scale=this.height()/this.defaultHeight;var b=e.unitLengthInInches();this.setInDrawing(b);this.scalesAreEqual(this.scale,a)||(this.setInModel(this.inDrawing()/this.scale),this.onScaleChanged())};b.prototype.onInDrawingOrInModelChanged=function(){var a=this.scale;this.scale=this.inDrawing()/this.inModel();this.scalesAreEqual(this.scale,a)||(this.setHeight(this.defaultHeight*this.scale),this.setWidth(this.height()*this.aspectRatio),this.onScaleChanged())};b.prototype.onExtensionAutomaticChanged=
function(){this.extensionAutomatic()&&this.setExtensionLength(this.defaultExtensionLength)};b.prototype.onProfileAutomaticChanged=function(){this.profileAutomatic()&&this.setProfileWidth(this.defaultProfileWidth)};b.prototype.onSectionAutomaticChanged=function(){this.sectionAutomatic()&&this.setSectionWidth(this.defaultSectionWidth)};b.prototype.onScaleChanged=function(){this.setProfileWidth(this.profileWidth()*this.scale);this.setSectionWidth(this.sectionWidth()*this.scale);this.setExtensionLength(this.extensionLength()*
this.scale)};b.prototype.getOptions=function(){return g={ExportAcadVersion:this.exportAcadVersion(),ExportSectionLineType:this.exportSectionLineType(),ExportType:"2d",ExtensionAutomatic:this.extensionAutomatic(),ExtensionLength:this.extensionLength(),FullScale:this.fullScale(),Height:this.height(),InDrawing:this.inDrawing(),InModel:this.inModel(),ProfileAutomatic:this.profileAutomatic(),ProfileOnLayer:this.profileOnLayer(),ProfileType:this.profileType(),ProfileWidth:this.profileWidth(),SectionAutomatic:this.sectionAutomatic(),
SectionOnLayer:this.sectionOnLayer(),SectionWidth:this.sectionWidth(),ShowExtensions:this.showExtensions(),Width:this.width()}};b.prototype.setExtensionLength=function(a){this.extensionLengthString(e.lengthToString(a))};b.prototype.setHeight=function(a){this.heightString(e.lengthToString(a))};b.prototype.setInDrawing=function(a){this.inDrawingString(e.lengthToString(a))};b.prototype.setInModel=function(a){this.inModelString(e.lengthToString(a))};b.prototype.setProfileWidth=function(a){this.profileWidthString(e.lengthToString(a))};
b.prototype.setSectionWidth=function(a){this.sectionWidthString(e.lengthToString(a))};b.prototype.setWidth=function(a){this.widthString(e.lengthToString(a))};return b}(f.PortOptionsViewModel);b.DwgDxf2dExportViewModel=a});
define("portoptions/DwgDxf2dExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d){var f=a.call(this)||this;f.viewModel_=c;f.title_=d;return f}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.acadVersionsMap,void 0,this.viewModel_.acadVersionDefault);
b.onChange(function(b){a.viewModel_.exportAcadVersion(b);a.viewModel_.exportSectionLineType("polyline_with_width");a.viewModel_.profileType("polyline_with_width")});this.viewModel_.exportAcadVersion(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.dwgDxf2dExportOptions);d.querySelector(".acad-selector").appendChild(b.render());return d};b.prototype.show=function(){var b=a.prototype.show.call(this);b.classList.add("wide");return b};return b}(d.default);b.DwgDxf2dExportView=a});
define("portoptions/FbxExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportDoubleSidedFaces:!1,ExportSeparateDisconnectedFaces:!1,ExportTextureMaps:!0,ExportTriangulatedFaces:!1,ExportUnits:"model",SwapYZ:!0};a=function(a){function b(){var g=null!==a&&a.apply(this,arguments)||this;g.unitsMap=d.PortOptionsViewModel.getTranslatedUnitsMap();g.units=c.observable(void 0);g.unitsDefault=e.ExportUnits;
g.exportDoubleSidedFaces=c.observable(e.ExportDoubleSidedFaces);g.exportSeparateDisconnectedFaces=c.observable(e.ExportSeparateDisconnectedFaces);g.exportTextureMaps=c.observable(e.ExportTextureMaps);g.exportTriangulatedFaces=c.observable(e.ExportTriangulatedFaces);g.swapYZ=c.observable(e.SwapYZ);return g}__extends(b,a);b.prototype.getOptions=function(){return e={ExportUnits:this.units(),ExportTriangulatedFaces:this.exportTriangulatedFaces(),ExportDoubleSidedFaces:this.exportDoubleSidedFaces(),ExportTextureMaps:this.exportTextureMaps(),
ExportSeparateDisconnectedFaces:this.exportSeparateDisconnectedFaces(),SwapYZ:this.swapYZ()}};return b}(d.PortOptionsViewModel);b.FbxExportViewModel=a});
define("portoptions/FbxExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this)||this;d.viewModel_=c;return d}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Export as FBX")};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.unitsMap,void 0,this.viewModel_.unitsDefault);
b.onChange(function(b){return a.viewModel_.units(b)});this.viewModel_.units(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.fbxExportOptions);d.querySelector(".units-selector").appendChild(b.render());return d};return b}(d.default);b.FbxExportView=a});
define("portoptions/KmzExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportAuthorAttribution:!1,ExportHiddenGeometry:!1};a=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;d.exportAuthorAttribution=c.observable(e.ExportAuthorAttribution);d.exportHiddenGeometry=c.observable(e.ExportHiddenGeometry);return d}__extends(b,a);b.prototype.getOptions=function(){return e={ExportAuthorAttribution:this.exportAuthorAttribution(),
ExportHiddenGeometry:this.exportHiddenGeometry()}};return b}(d.PortOptionsViewModel);b.KmzExportViewModel=a});
define("portoptions/KmzExportView",["require","exports","portoptions/PortOptionsView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var e=a.call(this)||this;e.viewModel_=c;return e}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Export as KMZ")};b.prototype.renderContent=function(){return goog.soy.renderAsFragment(SketchUpTemplates.kmzExportOptions)};return b}(c.default);b.KmzExportView=
a});
define("portoptions/ObjXsiExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportEdges:!1,ExportDoubleSidedFaces:!1,ExportTextureMaps:!0,ExportTriangulatedFaces:!1,ExportUnits:"model",SwapYZ:!0};a=function(a){function b(){var g=null!==a&&a.apply(this,arguments)||this;g.unitsMap=d.PortOptionsViewModel.getTranslatedUnitsMap();g.unitsDefault=e.ExportUnits;g.exportEdges=c.observable(e.ExportEdges);g.exportDoubleSidedFaces=
c.observable(e.ExportDoubleSidedFaces);g.exportTextureMaps=c.observable(e.ExportTextureMaps);g.exportTriangulatedFaces=c.observable(e.ExportTriangulatedFaces);g.swapYZ=c.observable(e.SwapYZ);g.units=c.observable(void 0);return g}__extends(b,a);b.prototype.getOptions=function(){return e={ExportUnits:this.units(),ExportTriangulatedFaces:this.exportTriangulatedFaces(),ExportDoubleSidedFaces:this.exportDoubleSidedFaces(),ExportTextureMaps:this.exportTextureMaps(),ExportEdges:this.exportEdges(),SwapYZ:this.swapYZ()}};
return b}(d.PortOptionsViewModel);b.ObjXsiExportViewModel=a});
define("portoptions/ObjXsiExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d){var f=a.call(this)||this;f.viewModel_=c;f.title_=d;return f}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.unitsMap,void 0,this.viewModel_.unitsDefault);
b.onChange(function(b){return a.viewModel_.units(b)});this.viewModel_.units(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.objExportOptions);d.querySelector(".units-selector").appendChild(b.render());return d};return b}(d.default);b.ObjXsiExportView=a});
define("portoptions/ThreeDsExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportCameras:!0,ExportDoubleSidedFaces:!1,ExportEdges:!0,ExportFaces:"not_two_sided",ExportGeometry:"full_hierarchy",ExportTextureMaps:!0,ExportUnits:"model",PreserveTextureCoords:!0};a=function(a){function b(){var g=a.call(this)||this;g.geometryMap=d.PortOptionsViewModel.getTranslatedGeometryMap();g.geometryDefault=
e.ExportGeometry;g.unitsMap=d.PortOptionsViewModel.getTranslatedUnitsMap();g.unitsDefault=e.ExportUnits;g.exportDoubleSidedFaces=c.observable(e.ExportDoubleSidedFaces);g.exportCameras=c.observable(e.ExportCameras);g.exportEdges=c.observable(e.ExportEdges);g.exportTextureMaps=c.observable(e.ExportTextureMaps);g.faces=c.observable(e.ExportFaces);g.geometry=c.observable(void 0);g.units=c.observable(void 0);g.preserveTextureCoords=c.observable(e.PreserveTextureCoords);g.exportDoubleSidedFaces.subscribe(g.onExportDoubleSidedFacesChanged,
g);return g}__extends(b,a);b.prototype.onExportDoubleSidedFacesChanged=function(){this.exportDoubleSidedFaces()?this.faces("two_sided_as_material"):this.faces("not_two_sided")};b.prototype.getOptions=function(){return e={ExportUnits:this.units(),ExportGeometry:this.geometry(),ExportDoubleSidedFaces:this.exportDoubleSidedFaces(),ExportFaces:this.faces(),ExportEdges:this.exportEdges(),ExportTextureMaps:this.exportTextureMaps(),PreserveTextureCoords:this.preserveTextureCoords(),ExportCameras:this.exportCameras()}};
return b}(d.PortOptionsViewModel);b.ThreeDsExportViewModel=a});
define("portoptions/ThreeDsExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this)||this;d.viewModel_=c;return d}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Export as 3DS")};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.unitsMap,void 0,this.viewModel_.unitsDefault),
d=new c.default(this.viewModel_.geometryMap,void 0,this.viewModel_.geometryDefault);b.onChange(function(b){return a.viewModel_.units(b)});this.viewModel_.units(b.getValue());d.onChange(function(b){return a.viewModel_.geometry(b)});this.viewModel_.geometry(d.getValue());var e=goog.soy.renderAsFragment(SketchUpTemplates.threeDsExportOptions);e.querySelector(".units-selector").appendChild(b.render());e.querySelector(".geometry-selector").appendChild(d.render());return e};return b}(d.default);b.ThreeDsExportView=
a});
define("portoptions/VrmlExportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ExportAllowMirroredComponents:!1,ExportCameras:!0,ExportDoubleSidedFaces:!1,ExportEdges:!0,ExportMaterialOverrides:!0,ExportTextureMaps:!0,ExportUseVRMLOrientation:!1};a=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;d.exportAllowMirroredComponents=c.observable(e.ExportAllowMirroredComponents);d.exportCameras=
c.observable(e.ExportCameras);d.exportDoubleSidedFaces=c.observable(e.ExportDoubleSidedFaces);d.exportEdges=c.observable(e.ExportEdges);d.exportMaterialOverrides=c.observable(e.ExportMaterialOverrides);d.exportTextureMaps=c.observable(e.ExportTextureMaps);d.exportUseVRMLOrientation=c.observable(e.ExportUseVRMLOrientation);return d}__extends(b,a);b.prototype.getOptions=function(){return e={ExportAllowMirroredComponents:this.exportAllowMirroredComponents(),ExportDoubleSidedFaces:this.exportDoubleSidedFaces(),
ExportCameras:this.exportCameras(),ExportEdges:this.exportEdges(),ExportMaterialOverrides:this.exportMaterialOverrides(),ExportTextureMaps:this.exportTextureMaps(),ExportUseVRMLOrientation:this.exportUseVRMLOrientation()}};return b}(d.PortOptionsViewModel);b.VrmlExportViewModel=a});
define("portoptions/VrmlExportView",["require","exports","portoptions/PortOptionsView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var e=a.call(this)||this;e.viewModel_=c;return e}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Export as VRML")};b.prototype.renderContent=function(){return goog.soy.renderAsFragment(SketchUpTemplates.vrmlExportOptions)};return b}(c.default);
b.VrmlExportView=a});
define("portoptions/DwgDxfSectionExportViewModel","require exports knockout portoptions/PortOptions Bindings/index portoptions/PortOptionsViewModel".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});var g={ExportAcadVersion:"acad_2013",ExportSectionLineType:"polyline_with_width",ExportSectionType:"screen_projection",ExportType:"section",FullScale:!1,Height:0,InDrawing:0,InModel:0,SectionAutomatic:!0,SectionOnLayer:!0,SectionWidth:0,Width:0};a=function(a){function b(){var m=a.call(this)||
this;m.acadVersionsMap=f.PortOptionsViewModel.getAcadVersionsMap();m.acadVersionDefault=g.ExportAcadVersion;m.hlrClipWindow=e.getHlrClipWindow();m.scaleAdjustment=e.getScaleAdjustment();m.viewportDimensions=e.getViewportDimensions();m.defaultHeight=m.hlrClipWindow.maxY-m.hlrClipWindow.minY;m.defaultWidth=m.hlrClipWindow.maxX-m.hlrClipWindow.minX;m.aspectRatio=m.defaultWidth/m.defaultHeight;m.isPerspective=e.GetCommandState(e.CommandIds.PERSPECTIVE_PROJECTION)===e.CommandStates.MF_CHECKED;m.defaultSectionWidth=
g.SectionWidth;m.defaultInDrawing=g.InDrawing;m.defaultInModel=g.InModel;m.scale=1;m.exportAcadVersion=c.observable(void 0);m.exportSectionLineType=c.observable(g.ExportSectionLineType);m.exportSectionType=c.observable(g.ExportSectionType);m.fullScale=c.observable(g.FullScale);m.sectionAutomatic=c.observable(g.SectionAutomatic);m.sectionOnLayer=c.observable(g.SectionOnLayer);m.heightString=c.observable(e.lengthToString(m.defaultHeight));m.inDrawingString=c.observable(e.lengthToString(m.defaultInDrawing));
m.inModelString=c.observable(e.lengthToString(m.defaultInModel));m.sectionWidthString=c.observable(e.lengthToString(m.defaultSectionWidth));m.widthString=c.observable(e.lengthToString(m.defaultWidth));m.height=c.computed(function(){return m.validateAndSetLength(m.heightString,m.defaultHeight)});m.inDrawing=c.computed(function(){return m.validateAndSetLength(m.inDrawingString,m.defaultInDrawing)});m.inModel=c.computed(function(){return m.validateAndSetLength(m.inModelString,m.defaultInModel)});m.sectionWidth=
c.computed(function(){return m.validateAndSetLength(m.sectionWidthString,m.defaultSectionWidth)});m.width=c.computed(function(){return m.validateAndSetLength(m.widthString,m.defaultWidth)});m.showWideLineEntities=c.computed(function(){return!("acad_12"===m.exportAcadVersion()||"acad_13"===m.exportAcadVersion()||"acad_14"===m.exportAcadVersion())});m.enableFullScaleCheckbox=c.computed(function(){return!m.isPerspective});m.sectionLinesSelected=c.computed(function(){return m.exportSectionLineType()!==
d.PROFILE_LINE_TYPE_NONE});m.fullScale.subscribe(m.onFullScaleChanged,m);m.sectionAutomatic.subscribe(m.onSectionAutomaticChanged,m);m.isPerspective&&(m.defaultHeight*=m.hlrClipWindow.far/m.hlrClipWindow.near);var K=e.unitLengthInInches();m.fullScale()?(m.setInDrawing(K),m.setInModel(K),m.scale=1,m.setHeight(m.defaultHeight)):m.scaleAdjustment.isOrtho?(m.scale=m.inDrawing()/m.inModel(),m.setHeight(m.scale*m.defaultHeight)):(m.setHeight(m.defaultHeight),m.scale=m.height()/m.defaultHeight,m.setInDrawing(K),
m.setInModel(m.inDrawing()/m.scale));m.setWidth(m.height()*m.aspectRatio);m.onScaleChanged();m.defaultInDrawing=m.inDrawing();m.defaultInModel=m.inModel();K=e.getRenderingOptionInt("SectionCutWidth");m.defaultSectionWidth=m.defaultHeight*K/m.viewportDimensions.height;m.setSectionWidth(m.defaultSectionWidth);return m}__extends(b,a);b.prototype.validateAndSetLength=function(a,b){if(goog.string.isEmptySafe(a()))return b||0;var c=e.parseLength(a())||b||0;0>c&&(c=b||0);a(e.lengthToString(c));return c};
b.prototype.onFullScaleChanged=function(){if(this.fullScale()){this.setHeight(this.defaultHeight);this.setWidth(this.height()*this.aspectRatio);var a=e.unitLengthInInches();this.setInDrawing(a);this.setInModel(a);this.scale=1;this.onScaleChanged()}};b.prototype.onWidthChanged=function(){var a=this.scale;this.setHeight(this.width()/this.aspectRatio);this.scale=this.height()/this.defaultHeight;var b=e.unitLengthInInches();this.setInDrawing(b);this.scalesAreEqual(this.scale,a)||(this.setInModel(this.inDrawing()/
this.scale),this.onScaleChanged())};b.prototype.onHeightChanged=function(){var a=this.scale;this.setWidth(this.height()*this.aspectRatio);this.scale=this.height()/this.defaultHeight;var b=e.unitLengthInInches();this.setInDrawing(b);this.scalesAreEqual(this.scale,a)||(this.setInModel(this.inDrawing()/this.scale),this.onScaleChanged())};b.prototype.onInDrawingOrInModelChanged=function(){var a=this.scale;this.scale=this.inDrawing()/this.inModel();this.scalesAreEqual(this.scale,a)||(this.setHeight(this.defaultHeight*
this.scale),this.setWidth(this.height()*this.aspectRatio),this.onScaleChanged())};b.prototype.onSectionAutomaticChanged=function(){this.sectionAutomatic()&&this.setSectionWidth(this.defaultSectionWidth)};b.prototype.onScaleChanged=function(){this.setSectionWidth(this.sectionWidth()*this.scale)};b.prototype.getOptions=function(){return g={ExportAcadVersion:this.exportAcadVersion(),ExportSectionLineType:this.exportSectionLineType(),ExportSectionType:this.exportSectionType(),ExportType:"section",FullScale:this.fullScale(),
Height:this.height(),InDrawing:this.inDrawing(),InModel:this.inModel(),SectionAutomatic:this.sectionAutomatic(),SectionOnLayer:this.sectionOnLayer(),SectionWidth:this.sectionWidth(),Width:this.width()}};b.prototype.setHeight=function(a){this.heightString(e.lengthToString(a))};b.prototype.setInDrawing=function(a){this.inDrawingString(e.lengthToString(a))};b.prototype.setInModel=function(a){this.inModelString(e.lengthToString(a))};b.prototype.setSectionWidth=function(a){this.sectionWidthString(e.lengthToString(a))};
b.prototype.setWidth=function(a){this.widthString(e.lengthToString(a))};return b}(f.PortOptionsViewModel);b.DwgDxfSectionExportViewModel=a});
define("portoptions/DwgDxfSectionExportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d){var f=a.call(this)||this;f.viewModel_=c;f.title_=d;return f}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.acadVersionsMap,void 0,
this.viewModel_.acadVersionDefault);b.onChange(function(b){a.viewModel_.exportAcadVersion(b);a.viewModel_.exportSectionLineType("polyline_with_width")});this.viewModel_.exportAcadVersion(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.dwgDxfSectionExportOptions);d.querySelector(".acad-selector").appendChild(b.render());return d};b.prototype.show=function(){var b=a.prototype.show.call(this);b.classList.add("wide");return b};return b}(d.default);b.DwgDxfSectionExportView=a});
define("Export","require exports ApplicationFeatures Bindings/index EntitlementsFeatures portoptions/PortOptions FileUtils ImportExportEngine Look ModelUtils SaveHandler UpgradeDialog leftsidebar/Sidebar portoptions/ColladaExportView portoptions/ColladaExportViewModel portoptions/DwgDxfExportView portoptions/DwgDxfExportViewModel portoptions/DwgDxf2dExportView portoptions/DwgDxf2dExportViewModel portoptions/FbxExportView portoptions/FbxExportViewModel portoptions/KmzExportView portoptions/KmzExportViewModel portoptions/ObjXsiExportView portoptions/ObjXsiExportViewModel portoptions/ThreeDsExportView portoptions/ThreeDsExportViewModel portoptions/VrmlExportView portoptions/VrmlExportViewModel portoptions/DwgDxfSectionExportViewModel portoptions/DwgDxfSectionExportView UserTracking".split(" "),
function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh,Ch,Ah,Bh,Eh,yh,Fh,Gh,Dh,Hh,Rh,Ih,Jh,Kh){function Lh(a,b){return __awaiter(this,void 0,void 0,function(){var c,e,f;return __generator(this,function(m){switch(m.label){case 0:return h.registerToFinishEvents(Sh),c=d.GetModelFilePath(),e=g.ReadFileToUint8Array(c),f=goog.string.path.baseName(c),[4,h.beginExport(a,y.getPresentableModelTitle(),f,e,b)];case 1:return m.sent(),[2]}})})}function Sh(a){a.filter(function(a){return a.type===f.FileConversionType.Export}).forEach(function(a){var b=
function(){R.Sidebar.getInstance().launchTab(R.SidebarTabs.ImportExportTab)};if(a.executionInfo.status===h.ExecutionStatus.Finished){var c=$t('Your export of "{FILE_NAME}" is complete!'),b=[{text:$t("Download"),action:function(){return h.performDownload(a)}},{text:$t("View Exports"),action:b}];m.success(c.replace("{FILE_NAME}",a.fileName),10,b)}else c=$t('Your export of "{FILE_NAME}" failed.'),b=[{text:$t("View Exports"),action:b}],m.error(c.replace("{FILE_NAME}",a.fileName),10,b)});return Promise.resolve()}
function Mh(){return __awaiter(this,void 0,void 0,function(){var a,b,d;return __generator(this,function(f){if(a=e.canAccess(c.default.ExportFile))return[2,void 0];b=$t("Don't keep this to yourself");d=$t("Sharing your model with a friend? Maybe with a CNC router? SketchUp Shop plays well with others. Upgrade today to access our full set of exporters, including .dwg, .dxf, .3ds, .dae, and more.");return[2,L.showUpgradeDialog(b,d,Kh.UpsellTriggers.EXPORT).then(function(){throw Error("User not entitled.");
})]})})}Object.defineProperty(b,"__esModule",{value:!0});b.startExport=function(a,b){var c=$t("Your model must be saved before it can be exported. Would you like to continue?");Mh().then(function(){return K.default.getInstance().ensureSavedAndTitled(c)}).then(function(c){if(!c)return Promise.resolve(null);switch(a){case f.ExportFormat.COLLADA:return c=new la.ColladaExportViewModel,(new W.ColladaExportView(c)).show(),c.getOptionsPromise();case f.ExportFormat.DWG:switch(b){case f.ExportType.THREED:return c=
new xh.DwgDxfExportViewModel,(new ga.DwgDxfExportView(c,$t("Export as DWG"))).show(),c.getOptionsPromise();case f.ExportType.TWOD:return c=new zh.DwgDxf2dExportViewModel,(new Mg.DwgDxf2dExportView(c,$t("Export as 2D DWG"))).show(),c.getOptionsPromise();case f.ExportType.SECTION:return c=new Ih.DwgDxfSectionExportViewModel,(new Jh.DwgDxfSectionExportView(c,$t("Export as DWG (Section Slice)"))).show(),c.getOptionsPromise()}case f.ExportFormat.DXF:switch(b){case f.ExportType.THREED:return c=new xh.DwgDxfExportViewModel,
(new ga.DwgDxfExportView(c,$t("Export as DXF"))).show(),c.getOptionsPromise();case f.ExportType.TWOD:return c=new zh.DwgDxf2dExportViewModel,(new Mg.DwgDxf2dExportView(c,$t("Export as 2D DXF"))).show(),c.getOptionsPromise();case f.ExportType.SECTION:return c=new Ih.DwgDxfSectionExportViewModel,(new Jh.DwgDxfSectionExportView(c,$t("Export as DXF (Section Slice)"))).show(),c.getOptionsPromise()}case f.ExportFormat.FBX:return c=new Ah.FbxExportViewModel,(new Ch.FbxExportView(c)).show(),c.getOptionsPromise();
case f.ExportFormat.KMZ:return c=new Eh.KmzExportViewModel,(new Bh.KmzExportView(c)).show(),c.getOptionsPromise();case f.ExportFormat.OBJ:return c=new Fh.ObjXsiExportViewModel,(new yh.ObjXsiExportView(c,$t("Export as OBJ"))).show(),c.getOptionsPromise();case f.ExportFormat.THREEDS:return c=new Dh.ThreeDsExportViewModel,(new Gh.ThreeDsExportView(c)).show(),c.getOptionsPromise();case f.ExportFormat.VRML:return c=new Rh.VrmlExportViewModel,(new Hh.VrmlExportView(c)).show(),c.getOptionsPromise();case f.ExportFormat.XSI:return c=
new Fh.ObjXsiExportViewModel,(new yh.ObjXsiExportView(c,$t("Export as XSI"))).show(),c.getOptionsPromise();default:throw Error("Unrecognized export format!");}}).then(function(b){null!==b&&Lh(a,b)}).catch(function(){})}});
define("portoptions/ColladaKmzImportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ImportMergeCoplanarFaces:!0,ImportValidateDAE:!0};a=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;d.importValidateDAE=c.observable(e.ImportValidateDAE);d.importMergeCoplanarFaces=c.observable(e.ImportMergeCoplanarFaces);return d}__extends(b,a);b.prototype.getOptions=function(){return e=
{ImportMergeCoplanarFaces:this.importMergeCoplanarFaces(),ImportValidateDAE:this.importValidateDAE()}};return b}(d.PortOptionsViewModel);b.ColladaKmzImportViewModel=a});
define("portoptions/ColladaKmzImportView",["require","exports","portoptions/PortOptionsView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,e){var h=a.call(this)||this;h.viewModel_=c;h.title_=e;return h}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){return goog.soy.renderAsFragment(SketchUpTemplates.colladaKmzImportOptions)};return b}(c.default);
b.ColladaKmzImportView=a});
define("portoptions/DemImportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ImportGenerateTexture:!0,ImportMaxPoints:250};a=function(a){function b(){var d=null!==a&&a.apply(this,arguments)||this;d.importGenerateTexture=c.observable(e.ImportGenerateTexture);d.importMaxPoints=c.observable(e.ImportMaxPoints);d.importMaxFaces=c.computed({read:function(){return 2*d.importMaxPoints()-6}});return d}
__extends(b,a);b.prototype.getOptions=function(){return e={ImportGenerateTexture:this.importGenerateTexture(),ImportMaxPoints:this.importMaxPoints()}};return b}(d.PortOptionsViewModel);b.DemImportViewModel=a});
define("portoptions/DemImportView",["require","exports","portoptions/PortOptionsView"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var e=a.call(this)||this;e.viewModel_=c;return e}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Import DEM")};b.prototype.renderContent=function(){return goog.soy.renderAsFragment(SketchUpTemplates.demImportOptions)};return b}(c.default);b.DemImportView=
a});
define("portoptions/DwgDxfImportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ImportMergeCoplanarFaces:!1,ImportOrientFaces:!1,ImportPreserveOrigin:!1,ImportUnits:"model"};a=function(a){function b(){var g=null!==a&&a.apply(this,arguments)||this;g.unitsMap=d.PortOptionsViewModel.getTranslatedUnitsMap();g.unitsDefault=e.ImportUnits;g.importMergeCoplanarFaces=c.observable(e.ImportMergeCoplanarFaces);g.importOrientFaces=
c.observable(e.ImportOrientFaces);g.importPreserveOrigin=c.observable(e.ImportPreserveOrigin);g.importUnits=c.observable(void 0);return g}__extends(b,a);b.prototype.getOptions=function(){return e={ImportMergeCoplanarFaces:this.importMergeCoplanarFaces(),ImportOrientFaces:this.importOrientFaces(),ImportPreserveOrigin:this.importPreserveOrigin(),ImportUnits:this.importUnits()}};return b}(d.PortOptionsViewModel);b.DwgDxfImportViewModel=a});
define("portoptions/DwgDxfImportView",["require","exports","portoptions/PortOptionsView","SelectWidget"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c,d){var f=a.call(this)||this;f.viewModel_=c;f.title_=d;return f}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return this.title_};b.prototype.renderContent=function(){var a=this,b=new d.default(this.viewModel_.unitsMap,void 0,this.viewModel_.unitsDefault);
b.onChange(function(b){return a.viewModel_.importUnits(b)});this.viewModel_.importUnits(b.getValue());var c=goog.soy.renderAsFragment(SketchUpTemplates.dwgDxfImportOptions);c.querySelector(".units-selector").appendChild(b.render());return c};return b}(c.default);b.DwgDxfImportView=a});
define("portoptions/ThreeDsImportViewModel",["require","exports","knockout","portoptions/PortOptionsViewModel"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});var e={ImportMergeCoplanarFaces:!1,ImportUnits:"model"};a=function(a){function b(){var g=null!==a&&a.apply(this,arguments)||this;g.unitsList=d.PortOptionsViewModel.getTranslatedUnitsMap();g.unitsDefault=e.ImportUnits;g.importMergeCoplanarFaces=c.observable(!1);g.units=c.observable(void 0);return g}__extends(b,a);b.prototype.getOptions=
function(){return e={ImportMergeCoplanarFaces:this.importMergeCoplanarFaces(),ImportUnits:this.units()}};return b}(d.PortOptionsViewModel);b.ThreeDsImportViewModel=a});
define("portoptions/ThreeDsImportView",["require","exports","SelectWidget","portoptions/PortOptionsView"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this)||this;d.viewModel_=c;return d}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Import 3DS")};b.prototype.renderContent=function(){var a=this,b=new c.default(this.viewModel_.unitsList,void 0,this.viewModel_.unitsDefault);
b.onChange(function(b){return a.viewModel_.units(b)});this.viewModel_.units(b.getValue());var d=goog.soy.renderAsFragment(SketchUpTemplates.threeDsImportOptions);d.querySelector(".units-selector").appendChild(b.render());return d};return b}(d.default);b.ThreeDsImportView=a});
define("Import","require exports ApplicationFeatures Bindings/index portoptions/ColladaKmzImportView portoptions/ColladaKmzImportViewModel portoptions/DemImportView portoptions/DemImportViewModel portoptions/DwgDxfImportViewModel portoptions/DwgDxfImportView EntitlementsFeatures FileUtils ImportExportEngine portoptions/PortOptions Look UpgradeDialog leftsidebar/Sidebar portoptions/ThreeDsImportViewModel portoptions/ThreeDsImportView UserTracking".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,
ga,xh,Mg,zh,Ch){function Ah(a){for(var b in Fh)if(L.isSameExtension(a,b))return!0;return!1}function Bh(a){return L.isSameExtension(a,"zip")||Ah(a)}function Eh(a){a.filter(function(a){return a.type===W.FileConversionType.Import}).forEach(function(a){var b=function(){xh.Sidebar.getInstance().launchTab(xh.SidebarTabs.ImportExportTab)};if(a.executionInfo.status===R.ExecutionStatus.Finished){var c=$t('Your import of "{FILE_NAME}" is complete!'),b=[{text:$t("Insert"),action:function(){return R.performInsert(a)}},
{text:$t("View Imports"),action:b}];la.success(c.replace("{FILE_NAME}",a.fileName),10,b)}else c=$t('Your import of "{FILE_NAME}" failed.'),b=[{text:$t("View Imports"),action:b}],la.error(c.replace("{FILE_NAME}",a.fileName),10,b)});return Promise.resolve()}function yh(){return __awaiter(this,void 0,void 0,function(){var a,b,d;return __generator(this,function(e){if(a=K.canAccess(c.default.ImportFile))return[2,void 0];b=$t("Bring all your files to the party!");d=$t("No 3D modeling application should be an island unto itself. Upgrade to add importers and exporters that open your SketchUp models to the world.");
return[2,ga.showUpgradeDialog(b,d,Ch.UpsellTriggers.INSERT).then(function(){throw Error("User not entitled.");})]})})}Object.defineProperty(b,"__esModule",{value:!0});var Fh={"3ds":function(){var a=new Mg.ThreeDsImportViewModel;(new zh.ThreeDsImportView(a)).show();return a.getOptionsPromise()},dae:function(){var a=new f.ColladaKmzImportViewModel;(new e.ColladaKmzImportView(a,$t("Import Collada"))).show();return a.getOptionsPromise()},dem:function(){var a=new h.DemImportViewModel;(new g.DemImportView(a)).show();
return a.getOptionsPromise()},dwg:function(){var a=new m.DwgDxfImportViewModel;(new y.DwgDxfImportView(a,$t("Import DWG"))).show();return a.getOptionsPromise()},dxf:function(){var a=new m.DwgDxfImportViewModel;(new y.DwgDxfImportView(a,$t("Import DXF"))).show();return a.getOptionsPromise()},kmz:function(){var a=new f.ColladaKmzImportViewModel;(new e.ColladaKmzImportView(a,$t("Import KMZ"))).show();return a.getOptionsPromise()}};b.formatSupported=function(a){a=goog.string.path.extension(a.name);return Bh(a)};
b.startImport=function(a){return __awaiter(this,void 0,void 0,function(){var b,c,e,f;return __generator(this,function(g){switch(g.label){case 0:g.trys.push([0,4,,5]);b=goog.string.path.extension(a.name);if(!Bh(b))throw Error("Unsupported format");return[4,yh()];case 1:return g.sent(),[4,L.readFileContents(a)];case 2:c=g.sent();if(L.isSameExtension(b,"zip")){var m=c;g=goog.string.path.join(L.TEMP_DIR,L.generateFileSystemName("zip"));L.saveFileFromUint8Array(m,g);for(var m=d.getImportTypeCandidates(g),
h,y=0;y<m.size();++y){var K=m.get(y);if(Ah(K)){h=K;break}}m.delete();L.DeleteFile(g);e=h;if(!goog.isDefAndNotNull(e))throw la.error($t("Sorry, this zip archive does not appear to contain a file that can be converted to a SketchUp model.")),Error("Unsupported format");b=e}return[4,Fh[b]()];case 3:return f=g.sent(),R.registerToFinishEvents(Eh),R.beginImport(a.name,c,f),[3,5];case 4:return g.sent(),[3,5];case 5:return[2]}})})}});
define("portoptions/StlImportViewModel",["require","exports","knockout","Bindings/index","portoptions/PortOptionsViewModel"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});var f=null;a=function(a){function b(){var e=null!==a&&a.apply(this,arguments)||this;e.unitsMap=b.getTranslatedStlUnitsMap();goog.isNull(f)&&(f={preserveOrigin:!0,swapYZ:!1,units:d.StlUnits.MILLIMETERS});e.stlImportOptions=f;e.unitsDefault=f.units;e.preserveOrigin=c.observable(f.preserveOrigin);e.swapYZ=c.observable(f.swapYZ);
e.units=c.observable(void 0);return e}__extends(b,a);b.getTranslatedStlUnitsMap=function(){var a={};a[$t("Meters")]=d.StlUnits.METERS;a[$t("Centimeters")]=d.StlUnits.CENTIMETERS;a[$t("Millimeters")]=d.StlUnits.MILLIMETERS;a[$t("Inches")]=d.StlUnits.INCHES;a[$t("Feet")]=d.StlUnits.FEET;return a};b.prototype.getOptions=function(){return f={preserveOrigin:this.preserveOrigin(),swapYZ:this.swapYZ(),units:this.units()}};return b}(e.PortOptionsViewModel);b.StlImportViewModel=a});
define("portoptions/StlImportView",["require","exports","portoptions/PortOptionsView","SelectWidget"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this)||this;d.viewModel_=c;return d}__extends(b,a);b.prototype.getViewModel=function(){return this.viewModel_};b.prototype.getDialogTitle=function(){return $t("Insert STL")};b.prototype.renderContent=function(){var a=this,b=new d.default(this.viewModel_.unitsMap,void 0,this.viewModel_.unitsDefault);
b.onChange(function(b){return a.viewModel_.units(b)});this.viewModel_.units(b.getValue());var c=goog.soy.renderAsFragment(SketchUpTemplates.stlInsertOptions);c.querySelector(".units-selector").appendChild(b.render());return c};return b}(c.default);b.StlImportView=a});
define("FileInsertCoordinator","require exports ApplicationFeatures Entitlements EntitlementsFeatures FileDragDropControl Import FileInsert FileUtils GenericDialog leftsidebar/Sidebar leftsidebar/SidebarTab Look ProgramMode portoptions/StlImportViewModel portoptions/StlImportView UserTracking".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh){Object.defineProperty(b,"__esModule",{value:!0});b.launchInsertDialog=function(){(new Mg).doInsert()};var Mg=function(){function a(){}a.prototype.doInsert=
function(){var a=this;this.insertDialogContent_=goog.soy.renderAsFragment(SketchUpTemplates.fileInsertDialog,{storageIconId:W.currentProgramMode.getStorageProviderIconId(),showAdvancedImporters:W.currentProgramMode.featureIsAvailable(c.default.ImportFile),enableAdvancedImporters:e.canAccess(c.default.ImportFile)});this.setUpEventHandlers();this.setUpDragAndDrop();this.insertDialog_.dialogClosed.then(function(){a.selectedFile_=null;a.dragDropControl_.enabled=!1;a.dragDropControl_.remove()})};a.prototype.setUpEventHandlers=
function(){var a=this;this.insertDialogContent_.querySelector(".file-insert-dlg-option #image-file-input").addEventListener("change",function(b){a.onImageFileChanged(b)});this.insertDialogContent_.querySelector(".js-insert-from-storage-btn").addEventListener("click",function(b){a.insertDialog_.hide();K.Sidebar.getInstance().launchTab(K.SidebarTabs.FilesTab,L.LaunchMode.InsertFile)});var b=this.insertDialogContent_.querySelector(".file-insert-dlg .image-insert-as-image"),c=this.insertDialogContent_.querySelector(".file-insert-dlg .image-insert-as-material");
b.addEventListener("click",function(){a.finishImageInsert(!1)});c.addEventListener("click",function(){a.finishImageInsert(!0)});b=this.insertDialogContent_.querySelector(".file-insert-dlg .skp-insert-as-comp");c=this.insertDialogContent_.querySelector(".file-insert-dlg .skp-insert-as-ref");b.addEventListener("click",function(){a.finishSkpInsert(!1)});c.addEventListener("click",function(){a.finishSkpInsert(!0)});b=this.insertDialogContent_.querySelector(".upgrade-button");goog.isDefAndNotNull(b)&&
b.addEventListener("click",function(){a.insertDialog_.hide();d.upgrade(xh.UpsellTriggers.INSERT)})};a.prototype.setUpDragAndDrop=function(){var a=this;goog.isDefAndNotNull(this.dragDropControl_)?this.dragDropControl_.create():this.dragDropControl_=new f.FileDragDropControl(function(b){a.onFileChanged(b)});this.dragDropControl_.enabled=!0;this.insertDialog_=new y.GenericDialog;this.insertDialog_.show(this.insertDialogContent_,"",null,y.ButtonSetType.None)};a.prototype.finishImageInsert=function(a){var b=
this;goog.isDefAndNotNull(this.selectedFile_)&&this.saveSelectedFile(this.selectedFile_).then(function(){b.insertDialog_.hide();h.loadImageFileIntoModel(b.selectedFilePath_,a)})};a.prototype.finishSkpInsert=function(a){var b=this;goog.isDefAndNotNull(this.selectedFile_)&&this.saveSelectedFile(this.selectedFile_).then(function(){b.insertDialog_.hide();h.loadSkpFileIntoModel(b.selectedFilePath_,a)})};a.prototype.finishStlInsert=function(a){var b=this;goog.isDefAndNotNull(this.selectedFile_)&&this.saveSelectedFile(this.selectedFile_).then(function(){h.loadStlFileIntoModel(b.selectedFilePath_,
a)||R.error($t("An error occured while importing the STL file. Please ensure the file is properly formatted."))})};a.prototype.onImageFileChanged=function(a){this.onFileChanged(a.target.files[0])};a.prototype.onFileChanged=function(a){goog.isDefAndNotNull(a)?this.isImage(a)?this.processImageFile(a):this.isSkp(a)?this.processSkpFile(a):this.isStl(a)?this.processStlFile(a):g.formatSupported(a)&&W.currentProgramMode.featureIsAvailable(c.default.ImportFile)?(g.startImport(a),this.insertDialog_.hide()):
R.warning($t("Unsupported file type.")):R.error($t("An error occured while reading the chosen file."))};a.prototype.isImage=function(a){return m.isImageFile(a.name)};a.prototype.isSkp=function(a){return m.hasSkpModelExtension(a.name)};a.prototype.isStl=function(a){return m.hasStlExtension(a.name)};a.prototype.processImageFile=function(a){this.showSkpFileInsertOptions(!1);this.showImageFileInsertOptions(!0);this.insertDialogContent_.querySelector(".image-insert-options .image-insert-options-image-name").innerHTML=
a.name;this.selectedFile_=a};a.prototype.showImageFileInsertOptions=function(a){var b=this.insertDialogContent_.querySelector(".image-insert-options");h.showInsertOptionsElement(b,a)};a.prototype.processSkpFile=function(a){this.showImageFileInsertOptions(!1);this.showSkpFileInsertOptions(!0);this.insertDialogContent_.querySelector(".skp-insert-options .skp-insert-options-skp-name").innerHTML=a.name;this.selectedFile_=a};a.prototype.processStlFile=function(a){var b=this;this.insertDialog_.hide();var c=
new la.StlImportViewModel;(new ga.StlImportView(c)).show();c.getOptionsPromise().then(function(c){b.selectedFile_=a;b.finishStlInsert(c)})};a.prototype.showSkpFileInsertOptions=function(a){var b=this.insertDialogContent_.querySelector(".skp-insert-options");h.showInsertOptionsElement(b,a)};a.prototype.saveSelectedFile=function(a){var b=this;return this.writeDataToFile(a).then(function(a){b.selectedFilePath_=a})};a.prototype.writeDataToFile=function(a){return new goog.Promise(function(b,c){var d=goog.string.path.join(m.TEMP_DIR,
a.name);c=new FileReader;c.onload=function(a){a=new Uint8Array(a.target.result);FS.writeFile(d,a,{encoding:"binary"});b(d)};c.readAsArrayBuffer(a)})};return a}()});
define("SaveCommand",["require","exports","DialogPrompts","SaveHandler","ToolGroup"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return a.call(this,b.ID,$t("Save"),!1)||this}__extends(b,a);b.prototype.run=function(){d.default.getInstance().save().thenCatch(function(){c.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while saving this model."))})};b.GetCommandId=function(){return b.ID};b.getInstance=function(){b.staticInstance_||
(b.staticInstance_=new b);return b.staticInstance_};b.ID=1337;return b}(e.Tools.Command);b.default=a});
define("FeatureToggle",["require","exports","EnvironmentSettings"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.enableFeaturesBasedOnDomain=function(){if(c.IsLocalOrDev())for(var b=0;b<a.FEATURES.length;++b)a.FEATURES[b].enabled=!0};a.parseQueryParam=function(){var b=(new goog.Uri(window.location)).getQueryData();if(b.containsKey(a.QUERY_PARAM_NAME))for(var b=b.get(a.QUERY_PARAM_NAME).split(","),c=0;c<b.length;++c)a.enableFeature(b[c]);a.init=!0};a.enableFeature=
function(b){for(var c=0;c<a.FEATURES.length;++c){var g=a.FEATURES[c];if(g.canActivateWithQueryParam&&g.key==b){g.enabled=!0;break}}};a.isFeatureEnabled=function(b){a.init||(a.parseQueryParam(),a.enableFeaturesBasedOnDomain());for(var c=0;c<a.FEATURES.length;++c){var g=a.FEATURES[c];if(g.key==b)return g.enabled}return!1};a.QUERY_PARAM_NAME="features";a.FEATURES=[{key:"pro",enabled:!0,canActivateWithQueryParam:!0},{key:"dev",enabled:!1,canActivateWithQueryParam:!0}];a.init=!1;return a}();b.default=
a});
define("Screenshot","require exports knockout DownloadBlob GoogleAnalytics Log ModelUtils GenericDialog Canvas FeatureToggle".split(" "),function(a,b,c,d,e,f,g,h,m,y){function K(a,b,c){return new goog.Promise(function(d,e){if(HTMLCanvasElement.prototype.toBlob)a.toBlob(function(a){return d(a)},b,c);else{e=atob(a.toDataURL(b,1).split(",")[1]);for(var f=e.length,g=new Uint8Array(f),m=0;m<f;m++)g[m]=e.charCodeAt(m);d(new Blob([g]))}})}function L(){e.fireHomeBarButtonEvent("Screenshot");K(Module.canvas,"image/png",
1).then(function(a){d.default(a,g.getPresentableModelTitle()+".png")}).thenCatch(function(a){f.error("Screenshot error: "+a)})}Object.defineProperty(b,"__esModule",{value:!0});b.downloadScreenshot=function(){return __awaiter(this,void 0,void 0,function(){var a,b,c;return __generator(this,function(d){switch(d.label){case 0:if(!y.default.isFeatureEnabled("pro"))return[3,7];a=new R(m.getRenderWidth(),m.getRenderHeight());d.label=1;case 1:b=new h.GenericDialog,c=goog.soy.renderAsFragment(SketchUpTemplates.screenshotOptionsDialog,
{}),b.show(c,$t("Download Image"),a),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,b.dialogClosed];case 3:return d.sent(),[3,5];case 4:throw d.sent(),Error("User closed image download dialog.");case 5:if(a.heightError()||a.widthError())return[3,1];d.label=6;case 6:console.log("Screenshot: ",a.widthInput(),"x",a.heightInput()),d.label=7;case 7:return L(),[2]}})})};var R=function(){function a(b,d){var e=this;this.widthInput=c.observable(String(b));this.heightInput=c.observable(String(d));this.isAspectRatioLocked=
c.observable(!0);this.lockedAspectRatioIcon=c.computed(function(){return e.isAspectRatioLocked()?"#u_link":"#u_unlink"});this.lastGoodAspectRatio=b/d;this.aspectAlreadyChanged=!1;this.widthInput.subscribe(this.createDimensionSubscription(this.heightInput,function(a,b){return a/b},function(a,b){return a/b}));this.heightInput.subscribe(this.createDimensionSubscription(this.widthInput,function(a,b){return a*b},function(a,b){return b/a}));this.widthError=c.computed(function(){return!goog.isDefAndNotNull(e.toPixelValue(e.widthInput()))});
this.heightError=c.computed(function(){return!goog.isDefAndNotNull(e.toPixelValue(e.heightInput()))})}a.prototype.toggleAspectLock=function(){this.isAspectRatioLocked(!this.isAspectRatioLocked())};a.prototype.onKeyDown=function(a,b){switch(b.keyCode){case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.ENTER:return b.target.blur(),b.stopPropagation(),!1;default:return!0}};a.prototype.createDimensionSubscription=function(a,b,c){var d=this;return function(e){e=d.toPixelValue(e);if(goog.isDefAndNotNull(e))if(d.isAspectRatioLocked()){if(!d.aspectAlreadyChanged)try{d.aspectAlreadyChanged=
!0,a(String(Math.round(b(e,d.lastGoodAspectRatio))))}finally{d.aspectAlreadyChanged=!1}}else{var f=d.toPixelValue(a());goog.isDefAndNotNull(f)&&(d.lastGoodAspectRatio=c(e,f))}}};a.prototype.toPixelValue=function(a){a=parseInt(a,10);if(!isNaN(a)&&0<a)return a};return a}()});
define("HomebarView","require exports knockout ApplicationFeatures Bindings/index ProgramMode Download EntitlementsFeatures Export FileInsertCoordinator GoogleAnalytics portoptions/PortOptions leftsidebar/Sidebar ModelUtils SaveCommand SaveHandler Screenshot".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh){Object.defineProperty(b,"__esModule",{value:!0});var Mg;(function(a){a[a.NONE=0]="NONE";a[a.FILE_OPERATIONS=1]="FILE_OPERATIONS"})(Mg||(Mg={}));var zh=$t("Save"),Ch=$t("Saving"),Ah=$t("Saved"),
Bh=function(){function a(){var b=this;this.Dropdown=Mg;this.openDropdown=c.observable(Mg.NONE);this.isModelTitleEnabled=c.observable(!0);this.isSaveNeeded=c.observable(!1);this.saveMessage=c.observable(Ah);this.modelTitle=c.observable("");this.canExportSectionCuts=c.observable(!1);this.canUseAdvancedExporters=c.observable(!1);this.openDropdown.subscribe(function(){b.canExportSectionCuts(e.canExportSectionCuts())});e.GetCanvas().addEventListener("mousedown",function(){b.closeAllDropdowns()})}a.prototype.openSidebar=
function(){K.fireHomeBarButtonEvent("Open Left Sidebar");R.Sidebar.getInstance().launchTab(R.SidebarTabs.MainOpenClose);this.closeAllDropdowns()};a.prototype.modelRename=function(){W.SetOrChangeModelTitle();this.closeAllDropdowns()};a.prototype.newModel=function(){R.Sidebar.getInstance().launchTab(R.SidebarTabs.NewModelTab);this.closeAllDropdowns()};a.prototype.openModel=function(){R.Sidebar.getInstance().launchTab(R.SidebarTabs.FilesTab);this.closeAllDropdowns()};a.prototype.save=function(){K.fireHomeBarButtonEvent("Save");
la.default.getInstance().run();this.closeAllDropdowns()};a.prototype.saveAs=function(){ga.default.getInstance().saveAs();this.closeAllDropdowns()};a.prototype.downloadSkp=function(){g.downloadSkp(e.Version.SKETCHUP17_0);this.closeAllDropdowns()};a.prototype.downloadStl=function(){g.downloadStl();this.closeAllDropdowns()};a.prototype.downloadImage=function(){xh.downloadScreenshot().catch();this.closeAllDropdowns()};a.prototype.exportCollada=function(){m.startExport(L.ExportFormat.COLLADA);this.closeAllDropdowns()};
a.prototype.exportDwg=function(){m.startExport(L.ExportFormat.DWG,L.ExportType.THREED);this.closeAllDropdowns()};a.prototype.exportDwg2d=function(){m.startExport(L.ExportFormat.DWG,L.ExportType.TWOD);this.closeAllDropdowns()};a.prototype.exportDwgSection=function(){this.exportDwgDxfSection_(L.ExportFormat.DWG)};a.prototype.exportDxf=function(){m.startExport(L.ExportFormat.DXF,L.ExportType.THREED);this.closeAllDropdowns()};a.prototype.exportDxf2d=function(){m.startExport(L.ExportFormat.DXF,L.ExportType.TWOD);
this.closeAllDropdowns()};a.prototype.exportDxfSection=function(){this.exportDwgDxfSection_(L.ExportFormat.DXF)};a.prototype.exportDwgDxfSection_=function(a){this.canExportSectionCuts()&&(m.startExport(a,L.ExportType.SECTION),this.closeAllDropdowns())};a.prototype.exportFbx=function(){m.startExport(L.ExportFormat.FBX);this.closeAllDropdowns()};a.prototype.exportKmz=function(){m.startExport(L.ExportFormat.KMZ);this.closeAllDropdowns()};a.prototype.exportObj=function(){m.startExport(L.ExportFormat.OBJ);
this.closeAllDropdowns()};a.prototype.exportThreeDs=function(){m.startExport(L.ExportFormat.THREEDS);this.closeAllDropdowns()};a.prototype.exportVrml=function(){m.startExport(L.ExportFormat.VRML);this.closeAllDropdowns()};a.prototype.exportXsi=function(){m.startExport(L.ExportFormat.XSI);this.closeAllDropdowns()};a.prototype.insertFile=function(){y.launchInsertDialog();this.closeAllDropdowns()};a.prototype.toggleExpanded=function(a){a===this.openDropdown()?this.closeAllDropdowns():this.openDropdown(a)};
a.prototype.closeAllDropdowns=function(){this.openDropdown(Mg.NONE)};return a}();b.setModelTitle=function(a){K.fireHomeBarButtonEvent("Model Name");Eh.getInstance().setModelTitle(a)};var Eh=function(){function a(){var b=this;this.homebarViewModel_=new Bh;var e=goog.soy.renderAsFragment(SketchUpTemplates.homeBar,{showAdvancedExporters:f.currentProgramMode.featureIsAvailable(d.default.ExportFile)});c.applyBindings(this.homebarViewModel_,e);document.body.appendChild(e);ga.default.getInstance().listenToSaveStateChangedEvent(function(a){b.handleSaveStateChange(a)});
e=h.canAccess(d.default.AdvancedFeatures);this.homebarViewModel_.canUseAdvancedExporters(e)}a.initialize=function(){a.staticInstance_||(a.staticInstance_=new a)};a.getInstance=function(){this.initialize();return a.staticInstance_};a.prototype.setModelTitle=function(a){this.homebarViewModel_.modelTitle(a)};a.prototype.handleSaveStateChange=function(a){var b,c=!1,d=!1;switch(a){case ga.SaveState.NeedsSave:case ga.SaveState.PushFailed:b=zh;d=c=!0;break;case ga.SaveState.Saving:b=Ch;c=!0;d=!1;break;case ga.SaveState.Saved:b=
Ah;c=!1;d=!0;break;default:goog.asserts.assert(!1)}this.homebarViewModel_.isSaveNeeded(c);this.homebarViewModel_.saveMessage(b);this.homebarViewModel_.isModelTitleEnabled(d)};return a}();b.HomebarView=Eh});
define("ModelUtils","require exports Bindings/index BusyScreen DialogPrompts FileManager FileUtils FolderMetadata HomebarView Log ModelStorageProvider ModelStorageProviderFactory ModelSynchronizer ProgramMode SaveHandler".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la){function ga(){if(goog.isDefAndNotNull(zh))return zh;if(c.IsModelUntitled())return c.GetModelTitle();var a=c.GetModelFilePath(),a=h.FolderMetadata.lookupRemoteModelMetadata(a);if(goog.isDefAndNotNull(a))return a=a.fileNameInUI,g.hasSkpModelExtension(a)&&
(a=g.StripExtension(a)),a;goog.asserts.assert(!1,"No metadata found in getPresentableModelName")}function xh(){if(!W.currentProgramMode.isViewer()){var a=ga();m.setModelTitle(a)}}function Mg(){zh=void 0}Object.defineProperty(b,"__esModule",{value:!0});var zh;b.NewModel=function(a){y.info("ModelUtil.NewModel");var b=la.default.getInstance().closeCurrentModel(),b=b.then(function(b){Mg();c.NewModel(a);xh();y.info("ModelUtil.NewModel - end")});b.thenCatch(function(a){if(a)throw a;})};b.OpenModel=function(a){y.info("ModelUtil.OpenModel - fileName:"+
goog.string.path.baseName(a));Mg();c.OpenModel(a);xh();W.currentProgramMode.runCommandAfterOpeningModel();y.info("ModelUtil.OpenModel - end")};b.OpenReadOnlyModel=function(a,b){y.info("ModelUtil.OpenReadOnlyModel - fileName:"+goog.string.path.baseName(a));zh=g.StripExtension(b);c.OpenModel(a);c.SetModelUntitled();xh();W.currentProgramMode.runCommandAfterOpeningModel();y.info("ModelUtil.OpenReadOnlyModel - end")};b.RecoverUntitledModel=function(a){y.info("ModelUtil.RecoverUntitledModel");Mg();c.OpenModel(a);
c.SetModelUntitled();xh();c.SetModelModified(!0);y.info("ModelUtil.RecoverUntitledModel - end")};b.OpenOfflineModel=function(a){y.info("ModelUtil.OpenOfflineModel - fileName: "+goog.string.path.baseName(a));var b,m=la.default.getInstance().closeCurrentModel(),m=m.then(function(c){c=goog.Promise.resolve(!1);b=f.FileManager.FindAutoSaveFileForModel(a);if(goog.isDefAndNotNull(b)){var d=g.getTimestamp(a);g.getTimestamp(b)>d?c=e.ShowQuestionDialog($t("The auto saved version of this model is newer.")+"\n"+
$t("Open the auto saved version instead?")):g.DeleteFile(b)}return c}),m=m.then(function(e){var f=!1;e&&(g.CopyFile(b,a),f=!0);var m=new d.default;window.setTimeout(function(){Mg();c.OpenModel(a);xh();e&&c.SetModelModified(!0);m.restore();y.info("ModelUtil.OpenOfflineModel - end")},120);goog.isDefAndNotNull(b)&&(g.DeleteFile(b),f=!0);return f?g.syncFileSystem(!1):goog.Promise.resolve()});m.thenCatch(function(a){if(a)throw y.error("ModelUtil.OpenOfflineModel - "+a),a;})};b.getPresentableModelTitle=
ga;b.UpdateModelTitleUI=xh;b.ClearTitleOverride=Mg;b.SetOrChangeModelTitle=function(){var a=c.IsModelUntitled();if(a)return la.default.getInstance().save();if(!la.default.getInstance().acquireSaveLock())return goog.Promise.resolve(!1);y.info("SetOrChangeModelTitle");var b=c.GetModelTitle(),d=ga(),m=c.GetModelFilePath(),K=goog.string.path.dirname(m),W=f.FileManager.mountAndReadOfflineDirectory(),Mg=h.FolderMetadata.lookupRemoteModelMetadata(m);goog.asserts.assert(goog.isDefAndNotNull(Mg),"Could not find metadata for the original file.");
var Dh=L.Providers[Mg.providerKey],W=W.then(function(){return e.GetModelNameFromUser(a?"":d)}),Hh,W=W.then(function(a){Hh=g.addSkpModelExtensionIfMissing(a);return goog.string.isEmptyOrWhitespaceSafe(Mg.parentFolderId)?!1:Dh.getContents(Mg.region,Mg.parentFolderId).then(function(a){a=goog.array.find(a,function(a){return a.name===Hh});return goog.isDefAndNotNull(a)})}),W=W.then(function(a){if(a)return e.ShowInfoDialog($t("Error"),$t("A model with the same name already exists.\n")+"\n"+$t("Please save the model with a different name.")).then(function(){return!1});
a=goog.Promise.resolve(void 0);goog.string.isEmptyOrWhitespaceSafe(Mg.fileId)||(a=Dh.renameFile(Mg.region,Mg.fileId,Hh).then(function(a){return a.versionId}));return a.then(function(a){var b=g.generateFileSystemName();c.SetModelTitleAndPath(K,b);var d=c.GetModelFilePath();g.Exists(d)&&goog.asserts.assert(!1,"Unique name clash");g.rename(m,d);var b=h.FolderMetadata.read(K),e=goog.string.path.baseName(m),d=goog.string.path.baseName(d);b.renameFile(e,d,Hh,a);b.write();return g.syncFileSystem().then(function(){return!0})})}),
W=W.thenCatch(function(a){a&&(e.ShowInfoDialog($t("Error"),$t("We have encountered an error while renaming this model.")),console.log(a));return!1}),W=W.then(function(a){a||c.SetModelTitleAndPath(K,b);xh();return R.ModelSynchronizer.getInstance().ensureMetadataInSync(K)});return W=W.thenAlways(function(){la.default.getInstance().releaseSaveLock();zh=void 0})};b.isCurrentModelPath=function(a){var b=c.GetModelFilePath();return 0<b.length&&goog.isDefAndNotNull(a)&&0<a.length?goog.string.startsWith(b,
a):!1};b.generateThumbnail=function(a){a=c.GetModelFilePath();a=c.GetModelMetadataFromSkpFile(a);var b=a.getThumbnail();a.delete();a=g.encodeUrlSafeBase64(b);return goog.Promise.resolve(a)};b.hasModelTitleOverride=function(){return goog.isDefAndNotNull(zh)};b.createCopyTitle=function(a){return g.StripExtension(a)+" ("+$t("copy").toLocaleUpperCase()+")"};b.showFileUploadErrorMessage=function(a){a===K.ErrorType.InvalidName?e.ShowInfoDialog($t("Error"),$t("This model could not be uploaded to your account because it has an invalid name.")):
a===K.ErrorType.StorageLimitExceeded?e.ShowInfoDialog($t("Error"),$t("This model could not be uploaded to your account because you seem to have reached your storage limit.")):e.ShowInfoDialog($t("Error"),$t("This model could not be uploaded to your account."))}});
define("GoogleDriveProvider","require exports GlobalConstants Login ModelStorageProvider ModelUtils XhrUtils".split(" "),function(a,b,c,d,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.METADATA_BASE_URL=this.PERMISSION_BASE_URL=this.ABOUT_BASE_URL=this.DRIVE_BASE_URL="https://www.googleapis.com/drive/v3";this.UPLOAD_BASE_URL="https://www.googleapis.com/upload/drive/v3";this.PARENT_DELIMITER="||"}Object.defineProperty(a.prototype,"name",{get:function(){return"Google Drive"},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"iconURL",{get:function(){return"mnu_drive_solid"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"logoURL",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseURL",{get:function(){return""},enumerable:!0,configurable:!0});a.prototype.initialize=function(){return goog.Promise.resolve()};a.prototype.getProjectsOrCreateDefault=function(){return[]};a.prototype.getRegionForProject=
function(a){return goog.Promise.resolve("")};a.prototype.getLatestVersionId=function(a,b){return this.getFileDetails(a,b).then(function(a){return a.versionId})};a.prototype.getSingleFolderContentsPage=function(a,b,c){var d=this,e=a;goog.isDef(c)&&(e=a+"&pageToken="+c);return this.doRequest(this.DRIVE_BASE_URL,e,"GET").promise.then(function(c){var e=JSON.parse(c);c=e.nextPageToken;for(var f=0,e=e.files;f<e.length;f++)b.push(d.convertFilesResourceToFolderItem(e[f]));return goog.isDef(c)?d.getSingleFolderContentsPage(a,
b,c):b})};a.prototype.getSingleFolderContents=function(a,b){return this.getSingleFolderContentsPage("/files?fields=nextPageToken,files(name,id,version,mimeType,size,parents)&q='"+b+"' in parents",[])};a.prototype.getContents=function(a,b){var c=this,d=b.split(this.PARENT_DELIMITER);b=[];for(var e=0;e<d.length;e++)b.push(this.getFolderDetails(a,d[e]));return goog.Promise.allSettled(b).then(function(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.fulfilled)return goog.Promise.reject(c.reason)}return goog.Promise.resolve()}).then(function(){return c.doGetContents(a,
d)})};a.prototype.doGetContents=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(this.getSingleFolderContents(a,b[d]));return goog.Promise.allSettled(c).then(function(a){return a.reduce(function(a,b){b.fulfilled&&(a=a.concat(b.value));return a},[])})};a.prototype.getFolderDetails=function(a,b){return this.getFileDetails(a,b)};a.prototype.getFileDetails=function(a,b){var c=this;return this.doRequest(this.DRIVE_BASE_URL,"/files/"+b+"?fields=name,id,version,mimeType,size,parents","GET").promise.then(function(a){a=
JSON.parse(a);return c.convertFilesResourceToFolderItem(a)})};a.prototype.getFilePermission=function(a,b){var c=this;return this.getPermissionIdForUser().then(function(a){return c.getPermissionResourceById(b,a)}).then(function(a){switch(a.role){case "owner":case "writer":return e.Permission.WRITE;default:return e.Permission.READ_ONLY}}).thenCatch(function(a){return e.Permission.READ_ONLY})};a.prototype.getPermissionIdForUser=function(){return this.doRequest(this.ABOUT_BASE_URL,"/about?fields=user",
"GET").promise.then(function(a){return JSON.parse(a).user.permissionId})};a.prototype.getPermissionResourceById=function(a,b){return this.doRequest(this.PERMISSION_BASE_URL,"/files/"+a+"/permissions/"+b,"GET").promise.then(function(a){return JSON.parse(a)})};a.prototype.convertFilesResourceToFolderItem=function(a){var b="application/vnd.google-apps.folder"===a.mimeType;return{id:a.id,createdOn:a.createdTime,modifiedOn:a.modifiedTime,parentFolderId:goog.isDef(a.parents)?a.parents.join(this.PARENT_DELIMITER):
void 0,versionId:goog.isDef(a.version)?a.version.toString():void 0,name:a.name,fileSystemName:void 0,type:b?e.FolderItemType.Folder:e.FolderItemType.File,size:a.size,thumbnailURL:a.thumbnailLink,hasChildren:b,projectId:"",region:"",mimeType:a.mimeType}};a.prototype.downloadFile=function(a,b,c,d){return this.doRequest(this.DRIVE_BASE_URL,"/files/"+b+"?alt=media","GET",null,null,!1,!0,d)};a.prototype.uploadFile=function(a,b,c,d,e,f){var g=this;a=goog.string.isEmptyOrWhitespaceSafe(c);var h={promise:goog.Promise.resolve(),
cancel:null};a||(a=this.doRequest(this.DRIVE_BASE_URL,"/files/"+c,"GET"),h.promise=a.promise.then(function(){},function(){c=""}));h.promise=h.promise.then(function(){var a=g.doUploadFile(b,c,d,e,f);h.cancel=a.cancel;return a.promise});return h};a.prototype.doUploadFile=function(a,b,d,e,g){var h=this,la=goog.string.isEmptyOrWhitespaceSafe(b),ga="/files";la||(ga=ga+"/"+b);ga+="?uploadType=multipart&fields=id,version";return{promise:f.generateThumbnail(1600).then(function(b){var f={name:a,contentHints:{thumbnail:{image:b,
mimeType:"image/png"}},mimeType:c.SKP_MIME_TYPE};la&&!goog.string.isEmptyOrWhitespaceSafe(d)&&(f.parents=d.split(h.PARENT_DELIMITER));b="-------"+Date.now();for(var y="\r\n--"+b+"\r\n",Ch="\r\n--"+b+"--",f=y+"Content-Type: application/json\r\n\r\n"+JSON.stringify(f)+y+"Content-Type: "+c.SKP_MIME_TYPE+"\r\n\r\n",y=new Uint8Array(f.length+e.byteLength+Ch.length),Ah=0,Bh=0;Bh<f.length;++Bh,++Ah)y[Ah]=f.charCodeAt(Bh)&255;for(Bh=0;Bh<e.byteLength;++Bh,++Ah)y[Ah]=e[Bh];for(Bh=0;Bh<Ch.length;++Bh,++Ah)y[Ah]=
Ch.charCodeAt(Bh)&255;return h.doRequest(h.UPLOAD_BASE_URL,ga,la?"POST":"PATCH",y,{"Content-Type":'multipart/related; boundary="'+b+'"'},!1,!1,g).promise.then(function(a){a=JSON.parse(a);return{projectId:"",parentFolderId:d,fileId:a.id,versionId:a.version.toString()}})}),cancel:function(){}}};a.prototype.renameFile=function(a,b,c){var d=this;a=this.doRequest(this.DRIVE_BASE_URL,"/files/"+b+"?fields=name,id,version,mimeType,size,parents","PATCH",JSON.stringify({name:c}),void 0,!0).promise;return a=
a.then(function(a){a=JSON.parse(a);return d.convertFilesResourceToFolderItem(a)})};a.prototype.downloadThumbnail=function(a){return goog.Promise.resolve()};a.prototype.createFolder=function(a,b,c){var d=this;return this.doRequest(this.METADATA_BASE_URL,"/files","POST",JSON.stringify({name:b,mimeType:"application/vnd.google-apps.folder",parents:[c]}),void 0,!0,void 0).promise.then(function(a){return d.convertFilesResourceToFolderItem(a)})};a.prototype.deleteFile=function(a,b){return goog.Promise.resolve(!1)};
a.prototype.deleteFolder=function(a,b){return goog.Promise.resolve(!1)};a.prototype.getErrorTypeFromErrorString=function(a,b){return goog.isDefAndNotNull(a)&&0<=a.toString().indexOf("notFound")?e.ErrorType.ItemWasDeleted:e.ErrorType.UnknownError};a.prototype.doRequest=function(a,b,c,e,f,h,la,ga){void 0===c&&(c="GET");var xh=d.getInfo().then(function(a){if(a.loggedIn)return a.oauthToken;goog.asserts.assert(!1)}),Mg={promise:null,cancel:null};Mg.promise=xh.then(function(d){var xh=a+b;d={Authorization:"Bearer "+
d};if(f)for(var Ah in f)d[Ah]=f[Ah];xh=g.doRequest(xh,c,e,d,h,la,ga);Mg.cancel=xh.cancel;return xh.promise});return Mg};a.prototype.handlePreModelSave=function(){};a.prototype.requiresUniqueFileNames=function(){return!1};return a}();b.GoogleDrive=a});
define("TrimbleConnect","require exports EnvironmentSettings Login ModelStorageProvider XhrUtils".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});var g;(function(a){a[a.FULL_ACCESS=0]="FULL_ACCESS";a[a.NO_ACCESS=1]="NO_ACCESS";a[a.READ=2]="READ"})(g||(g={}));a=function(){function a(b){this.connectClientIdentifier_=b;b=c.Get();this.TOKEN_URL=b.loginServer+b.loginConnectTokenEndPoint;this.CONNECT_BASE_URL=b.connectBaseUrl;this.CONNECT_API_ENDPOINT=b.connectAPIEndPoint}
Object.defineProperty(a.prototype,"name",{get:function(){return"Trimble Connect"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"iconURL",{get:function(){return"mnu_connect"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"logoURL",{get:function(){return"/static/images/web/trimble_connect_logo_and_text.svg"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseURL",{get:function(){return this.CONNECT_BASE_URL},enumerable:!0,configurable:!0});
a.prototype.initialize=function(){var a=this;if(!goog.isDefAndNotNull(this.initializationPromise_)){var b=this.refreshToken(),b=b.then(function(){return a.getRegions()});this.initializationPromise_=b=b.thenCatch(function(b){a.initializationPromise_=void 0;throw b;})}d.onChange(function(b){a.initializationPromise_=void 0;a.token_=void 0;a.licenses_=void 0;a.regions_=void 0});return this.initializationPromise_};a.prototype.refreshToken=function(){var a=this;return f.crossDomainRequest(this.TOKEN_URL+
"?client="+this.connectClientIdentifier_).then(function(a){return JSON.parse(a)}).then(function(b){if(b.error)throw console.error("Problem fetching connect token: "+b.error),Error("Problem fetching connect token: "+b.error);a.token_=b.token})};a.prototype.getLicenses=function(){var a=this;if(goog.isDefAndNotNull(this.licenses_)&&0<this.licenses_.length)return goog.Promise.resolve();var b=this.doRequest(this.CONNECT_BASE_URL,"/users/licenses").promise,b=b.then(function(b){a.licenses_=JSON.parse(b)});
return b=b.thenCatch(function(b){a.licenses_=[];console.log("Licenses call failed: "+b)})};a.prototype.getProjectsOrCreateDefault=function(){var a=this;this.projectIdRegionIndexMap_={};for(var b=[],c=0;c<this.regions_.length;++c){var d=this.doRequest(this.regions_[c].origin,"/projects");b.push(d)}var e=[];b.forEach(function(b,c){var d=a.regions_[c],f={promise:b.promise.then(function(b){return a.parseProjectsArrayOrCreateDefault(b,d).then(function(b){return a.convertProjects(b,c)})}),cancel:function(){b.cancel()}};
e.push(f)});return e};a.prototype.parseProjectsArrayOrCreateDefault=function(a,b){var c=JSON.parse(a),c=c.filter(function(a){return a.access===g[g.FULL_ACCESS]});a=goog.Promise.resolve(c);b.isMaster&&0==c.length&&(a=this.createDefaultProject().then(function(a){a=JSON.parse(a);c.push(a);return c},void 0,this));return a};a.prototype.convertProjects=function(a,b){for(var c=[],d=this.regions_[b],e=0;e<a.length;e++){var f=a[e],f={region:d.location,id:f.id,name:f.name,thumbnailURL:f.thumbnail,rootFolderId:f.rootId,
hasChildren:!0};(new goog.Uri(f.thumbnailURL,!0)).hasDomain()||(f.thumbnailURL=this.CONNECT_BASE_URL+f.thumbnailURL);c.push(f);this.projectIdRegionIndexMap_[f.id]=b}return c};a.prototype.getProjectsSynchronous=function(){var a=this.getProjectsOrCreateDefault().map(function(a){return a.promise});return goog.Promise.all(a)};a.prototype.getRegionForProject=function(a){var b=this,c=goog.Promise.resolve();this.projectIdRegionIndexMap_&&void 0!==this.projectIdRegionIndexMap_[a]||(c=this.getProjectsSynchronous());
return c=c.then(function(){var c=b.projectIdRegionIndexMap_[a];return void 0!==c?b.regions_[c].location:goog.Promise.reject()},void 0,this)};a.prototype.getLatestVersionId=function(a,b){a=this.getRegionURLFromLocation(a);b=this.doRequest(a,"/files/"+b+"/versions","GET").promise;return b=b.then(function(a){a=JSON.parse(a);return 0<a.length?a[0].versionId:goog.Promise.reject()})};a.prototype.createDefaultProject=function(){var a=this;if(!goog.isDefAndNotNull(this.defaultProjectPromise_)){var b=this.regions_[this.masterRegionIndex_].origin,
c={name:"SketchUp"};return this.getLicenses().then(function(){goog.isDefAndNotNull(a.licenses_)&&0<a.licenses_.length&&(c.licenseId=a.licenses_[0].id);a.defaultProjectPromise_=a.doRequest(b,"/projects","POST",JSON.stringify(c),!0).promise;return a.defaultProjectPromise_}).thenAlways(function(){a.defaultProjectPromise_=void 0}).thenCatch(function(a){console.log(a);throw e.ErrorType[e.ErrorType.CouldNotCreateProject];})}return this.defaultProjectPromise_};a.prototype.getRegions=function(){var a=this;
if(goog.isDefAndNotNull(this.regions_)&&0<this.regions_.length)return goog.Promise.resolve();this.regions_=[];this.masterRegionIndex_=-1;var b=this.doRequest(this.CONNECT_BASE_URL,"/regions").promise;return b=b.then(function(b){b=JSON.parse(b);for(var c=0;c<b.length;++c){var d=b[c],e=d.origin;goog.string.startsWith(e,"//")&&(e="https:"+e);d.origin=e;d.isMaster&&(a.masterRegionIndex_=c);a.regions_.push(d)}},void 0,this)};a.prototype.getRegionURLFromLocation=function(a){for(var b=0;b<this.regions_.length;++b)if(this.regions_[b].location==
a)return this.regions_[b].origin;throw Error("Could not find the region for location "+a);};a.prototype.getContents=function(a,b){var c=this,d=this.getRegionURLFromLocation(a);b=this.doRequest(d,"/folders/"+b+"/items").promise;return b=b.then(function(b){var d=[];b=JSON.parse(b);for(var e=0;e<b.length;e++){var f=c.convertResponseToFolderItem(b[e],a);d.push(f)}return d},void 0,this)};a.prototype.getFolderDetails=function(a,b){var c=this,d=this.getRegionURLFromLocation(a);return this.doRequest(d,"/folders/"+
b).promise.then(function(b){b=JSON.parse(b);return c.convertResponseToFolderItem(b,a)})};a.prototype.getFileDetails=function(a,b){var c=this,d=this.getRegionURLFromLocation(a);return this.doRequest(d,"/files/"+b).promise.then(function(b){b=JSON.parse(b);return c.convertResponseToFolderItem(b,a)})};a.prototype.getFilePermission=function(a,b){return goog.Promise.resolve(e.Permission.WRITE)};a.prototype.convertResponseToFolderItem=function(a,b){b={id:a.id,createdOn:a.createdOn,modifiedOn:a.modifiedOn,
region:b,parentFolderId:a.parentId,projectId:a.projectId,versionId:a.versionId,name:a.name,fileSystemName:void 0,type:"FOLDER"===a.type?e.FolderItemType.Folder:e.FolderItemType.File,size:a.size,thumbnailURL:a.thumbnailUrl?a.thumbnailUrl[0]:void 0,hasChildren:"FOLDER"===a.type?!0:!1};a.createdBy&&(b.createdByEmail=a.createdBy.email,b.createdByFirstName=a.createdBy.firstName,b.createdByLastName=a.createdBy.lastName);a.modifiedBy&&(b.modifiedByEmail=a.modifiedBy.email,b.modifiedByFirstName=a.modifiedBy.firstName,
b.modifiedByLastName=a.modifiedBy.lastName);return b};a.prototype.downloadFile=function(a,b,c,d){a=this.getRegionURLFromLocation(a);return this.doRequest(a,"/files/"+b+"/content?versionId="+c,"GET",null,!1,!0,d)};a.prototype.uploadFile=function(a,b,c,d,e,f){a=this.getRegionURLFromLocation(a);c=new FormData;c.append(b,new Blob([e]),b);var g=this.doRequest(a,"/files?parentId="+d,"POST",c,!1,!1,f);return{promise:g.promise.then(function(a){a=JSON.parse(a)[0];return{projectId:a.projectId,parentFolderId:a.parentId,
fileId:a.id,versionId:a.versionId}}),cancel:function(){g.cancel()}}};a.prototype.renameFile=function(a,b,c){var d=this,e=this.getRegionURLFromLocation(a);return this.doRequest(e,"/files/"+b,"PATCH",JSON.stringify({name:c}),!0).promise.then(function(b){b=JSON.parse(b);return d.convertResponseToFolderItem(b,a)})};a.prototype.downloadThumbnail=function(a){return this.doRequest(a,"","GET",null,!1,!0).promise};a.prototype.createFolder=function(a,b,c){var d=this,e=this.getRegionURLFromLocation(a);return this.doRequest(e,
"/folders","POST",JSON.stringify({name:b,parentId:c}),!0).promise.then(function(b){b=JSON.parse(b);return d.convertResponseToFolderItem(b,a)})};a.prototype.deleteFile=function(a,b){a=this.getRegionURLFromLocation(a);return this.doRequest(a,"/files/"+b,"DELETE").promise.then(function(){return!0})};a.prototype.deleteFolder=function(a,b){a=this.getRegionURLFromLocation(a);return this.doRequest(a,"/folders/"+b,"DELETE").promise.then(function(){return!0})};a.prototype.getErrorTypeFromErrorString=function(a,
b){if("object"===typeof a)a=JSON.parse(a.message).errorcode;else if("string"!==typeof a)return e.ErrorType.UnknownError;return a in e.ErrorType?e.ErrorType[a]:"INVALID_OPERATION_DELETED"===a||"INVALID_OPERATION_FOLDER_DELETED"===a||"INVALID_OPERATION_FILE_DELETED"===a?e.ErrorType.ItemWasDeleted:"PROJECT_DELETED"===a?e.ErrorType.ProjectWasDeleted:"UNAUTHORIZED_LICENSE"===a?goog.isDef(b)&&b===e.ErrorContext.FileUpload?e.ErrorType.StorageLimitExceeded:e.ErrorType.UnauthorizedLicense:"INVALID_NAME"===
a?e.ErrorType.InvalidName:e.ErrorType.UnknownError};a.prototype.doRequest=function(a,b,c,d,e,g,h,ga){var xh=this;void 0===c&&(c="GET");void 0===ga&&(ga=5);var Mg=a;0<b.length&&(Mg+=this.CONNECT_API_ENDPOINT+b);Mg=f.doRequestWithRetries(Mg,c,d,{Authorization:"Bearer "+this.token_,"X-TrimbleConnect-Client":this.connectClientIdentifier_},e,g,h,void 0,void 0,ga);Mg.promise=Mg.promise.thenCatch(function(f){if(0>=ga)throw f;try{var Mg=JSON.parse(f.message);if("API_INVALID_ACCESS_TOKEN"===Mg.errorcode||
"API_ACCESS_TOKEN_EXPIRED"===Mg.errorcode||"INVALID_SESSION"===Mg.errorcode)return xh.refreshToken().then(function(){return xh.doRequest(a,b,c,d,e,g,h,ga-1).promise});throw f;}catch(Ah){throw f;}});return Mg};a.prototype.handlePreModelSave=function(){};a.prototype.requiresUniqueFileNames=function(){return!0};return a}();b.TrimbleConnect=a});
define("ModelStorageProviderFactory",["require","exports","GoogleDriveProvider","TrimbleConnect","WarehouseProvider"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.defaultProviderKey=null;b.setDefaultProviderKey=function(a){b.defaultProviderKey=a};var f;(function(a){a[a.Trimble_Connect=0]="Trimble_Connect";a[a.Sketchup_Warehouse=1]="Sketchup_Warehouse";a[a.Google_Drive=2]="Google_Drive";a[a.Tekla_Warehouse=3]="Tekla_Warehouse"})(f=b.ProviderKey||(b.ProviderKey={}));b.Init=
function(a){void 0===a&&(a="");b.Providers={};b.Providers[f.Trimble_Connect]=new d.TrimbleConnect(a);b.Providers[f.Sketchup_Warehouse]=new e.Warehouse;b.Providers[f.Google_Drive]=new c.GoogleDrive}});
define("BookmarkNotification","require exports CookieManager Cookies Delay Look".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(){goog.isDefAndNotNull(c.default.getInstance().get(d.BOOKMARK_PROMPT.name))||e.default(function(){f.info($t("Remember to bookmark this page for quick access!"));c.default.getInstance().set(d.BOOKMARK_PROMPT.name,d.BOOKMARK_PROMPT.value,d.BOOKMARK_PROMPT.maxAge)},1E4)}});
define("Onboarding","require exports knockout CookieManager Cookies GoogleAnalytics ProgramMode UserTracking".split(" "),function(a,b,c,d,e,f,g,h){function m(){goog.isDefAndNotNull(xh)&&(goog.dom.removeNode(xh),xh=null);if(ga>W.length-1)f.fireOnboardingCompletedEvent(),h.recordOnboardingCompletion(),ga=0,K(),la.setVisible(!1),zh();else{var a=W[ga];xh=a===SketchUpTemplates.onboardIntroduction?goog.soy.renderAsFragment(a,{videoUrl:g.currentProgramMode.startupVideoUrl()}):goog.soy.renderAsFragment(a);
Mg.appendChild(xh);a=new Ch;c.applyBindings(a,xh)}}function y(){la=new goog.ui.ModalPopup;la.render();la.setVisible(!0);m();return new goog.Promise(function(a,b){zh=a})}function K(){d.default.getInstance().set(e.ONBOARD.name,e.ONBOARD.value,e.ONBOARD.maxAge)}function L(){ga=0;m()}function R(){ga=0;K();goog.isDefAndNotNull(xh)&&(goog.dom.removeNode(xh),xh=null);goog.isDefAndNotNull(zh)&&zh();goog.isDefAndNotNull(la)&&la.dispose()}Object.defineProperty(b,"__esModule",{value:!0});var W=[SketchUpTemplates.onboardIntroduction,
SketchUpTemplates.onboardHome,SketchUpTemplates.onboardTools,SketchUpTemplates.onboardPanels,SketchUpTemplates.onboardStatus,SketchUpTemplates.onboardMeasurements,SketchUpTemplates.onboardConfirmation],la,ga=0,xh,Mg=document.body,zh,Ch=function(){function a(){}a.prototype.next=function(){ga++;m()};a.prototype.previous=function(){ga=Math.max(0,ga-1);m()};a.prototype.reset=function(){L()};a.prototype.cancel=function(){R()};return a}();b.startOnce=function(){return d.default.getInstance().get(e.ONBOARD.name)?
goog.Promise.resolve():y()};b.start=y;b.reset=L;b.cancel=R});
define("BottomBar","require exports knockout ApplicationFeatures Bindings/index DialogPrompts EntitlementsFeatures Onboarding ProgramMode UndoManager".split(" "),function(a,b,c,d,e,f,g,h,m,y){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){var b=this;this.undoManager_=y.default.getInstance();this.undoManager_.listenToUndoRedoStateEvent(this.undoRedoStateChanged.bind(this));var e=g.canAccess(d.default.AdvancedFeatures);this.bottomBarViewModel_=new K(function(){return b.undoManager_.undo()},
function(){return b.undoManager_.redo()},function(a){return b.setLanguage(a)},SketchUp.getCurrentLanguage(),SketchUp.getSupportedLanguages(),e);var e=goog.soy.renderAsFragment(SketchUpTemplates.bottomBar,{isEdu:m.currentProgramMode.isEdu()}),f=e.querySelector(".js-bottom-bar-menus-container");f&&document.addEventListener("mousedown",function(a){a=a.target;a===f||f.contains(a)||(b.bottomBarViewModel_.areLanguagesShown(!1),b.bottomBarViewModel_.isHelpShowing(!1))});document.body.appendChild(e);c.applyBindings(this.bottomBarViewModel_,
e)}a.initialize=function(){a.staticInstance_||(a.staticInstance_=new a)};a.getInstance=function(){a.initialize();return a.staticInstance_};a.prototype.undoRedoStateChanged=function(){this.bottomBarViewModel_.isUndoEnabled(this.undoManager_.canUndo());this.bottomBarViewModel_.isRedoEnabled(this.undoManager_.canRedo())};a.prototype.setLanguage=function(a){SketchUp.setReloadLanguage(a);a!==SketchUp.getCurrentLanguage()&&(e.IsSaveNeeded()?f.ShowInfoDialog($t("Language Change"),$t("You will need to reload {APP_TITLE} for the new language to take effect. Please save your work and reload the web page.").replace("{APP_TITLE}",
m.currentProgramMode.getProgramTitle())):(a=new goog.Uri(window.location),a.removeParameter(SketchUp.LANGUAGE_PARAM_NAME),window.location.replace(a.toString())))};return a}();b.BottomBar=a;var K=function(){function a(b,d,e,f,g,h){this.onUndo_=b;this.onRedo_=d;this.onLanguageChange_=e;this.currentLanguageCode_=f;this.isHelpShowing=c.observable(!1);this.isUndoEnabled=c.observable(!1);this.isRedoEnabled=c.observable(!1);this.areLanguagesShown=c.observable(!1);this.languages=c.observableArray(g);this.hasTechSupport=
c.observable(h)}a.prototype.undoClicked=function(){this.onUndo_()};a.prototype.redoClicked=function(){this.onRedo_()};a.prototype.getCurrentLanguage=function(){return this.currentLanguageCode_};a.prototype.setLanguage=function(a){this.areLanguagesShown(!1);this.onLanguageChange_(a)};a.prototype.toggleLanguageSelector=function(a,b){this.areLanguagesShown(!this.areLanguagesShown());this.isHelpShowing(!1)};a.prototype.toggleHelp=function(){this.isHelpShowing(!this.isHelpShowing());this.areLanguagesShown(!1)};
a.prototype.startOnboarding=function(){this.isHelpShowing(!1);var a=function(a){a.keyCode===goog.events.KeyCodes.ESC&&h.cancel()};document.addEventListener("keydown",a);h.start().thenAlways(function(){document.removeEventListener("keydown",a)})};return a}()});
define("CookieConsent","require exports CookieManager Cookies GenericDialog PromiseUtils".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});b.checkAndShowConsent=function(){if(c.default.getInstance().containsKey(d.COOKIE_CONSENT.name))return Promise.resolve();var a=goog.soy.renderAsFragment(SketchUpTemplates.cookieConsentDialog,{}),b=new e.GenericDialog;b.show(a,$t("Privacy Notice"),void 0,e.ButtonSetType.Ok);return f.toEs6Promise(b.dialogClosed).then(function(){c.default.getInstance().set(d.COOKIE_CONSENT.name,
d.COOKIE_CONSENT.value,d.COOKIE_CONSENT.maxAge)})}});define("StartupBehavior",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0})});
define("CreateModelBehavior","require exports leftsidebar/Sidebar ModelStorageProviderFactory ProgramMode SaveHandler".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.isApplicable=function(){if("/createmodel"===goog.string.path.dirname(e.urlPath)){var b=e.parseProviderKey();return(b===d.ProviderKey.Trimble_Connect||b===d.ProviderKey.Google_Drive)&&null!==a.getQueryData()}return!1};a.getQueryData=function(){var a=new goog.Uri(window.location.href);
if(!a.hasQuery())return null;var b=e.parseProviderKey(),c=a.getQueryData(),a={};if(b===d.ProviderKey.Google_Drive){b=c.get("state");if(!goog.isDefAndNotNull(b))return null;b=JSON.parse(b);if(goog.isDefAndNotNull(b)&&"create"===b.action&&goog.isDefAndNotNull(b.folderId))return a.folderId=b.folderId,a}else if(b===d.ProviderKey.Trimble_Connect&&(a.region=c.get("region"),a.folderId=c.get("folderId"),goog.isDefAndNotNull(a.region)&&goog.isDefAndNotNull(a.folderId)))return a;return null};a.prototype.startup=
function(){var b=this;return f.default.getInstance().checkUnsavedModel().then(function(e){b.queryData_=a.getQueryData();var f=c.Sidebar.getInstance();f.setStartupFolderForProvider(d.defaultProviderKey,b.queryData_.region,b.queryData_.folderId);return e?goog.Promise.resolve():f.launchTab(c.SidebarTabs.NewModelTab)})};return a}();b.default=a});
define("DefaultStartupBehavior",["require","exports","SaveHandler"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.startup=function(){return c.default.getInstance().checkUnsavedModel().then(function(){})};return a}();b.default=a});
define("ViewerModelLoader","require exports DialogPrompts EnvironmentSettings FileUtils ModelStorageProviderFactory ModelStorageProviderFactory ModelUtils StartupScreen XhrUtils".split(" "),function(a,b,c,d,e,f,g,h,m,y){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.provider_=b;0>document.referrer.indexOf("warehouse.tekla.com")?this.baseWarehouseUrl_=d.Get3dWarehouseURL():this.baseWarehouseUrl_=d.GetTeklaWarehouseURL();if(this.provider_===g.ProviderKey.Sketchup_Warehouse||
this.provider_===g.ProviderKey.Tekla_Warehouse)this.warehouseApi_=new warehouse.DataStore({useLocalStorage:!1,baseUrl:this.baseWarehouseUrl_});this.queryParams_=new K(this.provider_)}a.prototype.loadAndOpenModel=function(){this.queryParams_.hasExpectedParams?this.provider_===g.ProviderKey.Sketchup_Warehouse?this.loadSketchUpWarehouseModel():this.provider_===g.ProviderKey.Tekla_Warehouse?this.loadTeklaWarehouseModel():this.provider_!==g.ProviderKey.Google_Drive&&this.provider_!==g.ProviderKey.Trimble_Connect||
this.loadModel(this.provider_):c.ShowInfoDialog($t("Error"),$t("Invalid or missing arguments."))};a.prototype.downloadSuccess=function(a){var b=goog.string.path.join(e.TEMP_DIR,e.generateFileSystemName("skp"));e.SaveFileFromBuffer(a,b);window.setTimeout(function(){h.OpenModel(b);m.endLoadingAnimation()},0)};a.prototype.downloadError=function(){m.endLoadingAnimation();c.ShowInfoDialog($t("Error"),$t("The specified model could not be loaded."))};a.prototype.getEntitySuccess=function(a,b){b=b.getBinaries();
b=Object.keys(b);if(b=WarehouseUtil.File.getBestBinaryName(b))a=WarehouseUtil.UrlGenerator.generateGetBinaryUrl(a,warehouse.BackendClass.ENTITY,b,void 0,!1),a=this.baseWarehouseUrl_+a,b=goog.bind(this.downloadSuccess,this),y.fetchBinary(a,b,void 0,void 0,!0)};a.prototype.getCollectionSuccess=function(a){a=a.getTeklaThumbnail().url;var b=goog.bind(this.downloadSuccess,this);y.fetchBinary(a,b,void 0,void 0,!0)};a.prototype.loadSketchUpWarehouseModel=function(){var a=this;this.warehouseApi_.getEntity(this.queryParams_.fileId,
!1,!1).then(function(b){a.getEntitySuccess(a.queryParams_.fileId,b)},function(b){a.downloadError()})};a.prototype.loadTeklaWarehouseModel=function(){var a=this;this.warehouseApi_.getCollection(this.queryParams_.collectionId,!1).then(function(b){a.getCollectionSuccess(b)},function(b){a.downloadError()})};a.prototype.loadModel=function(a){var b=this,d=f.Providers[a];a=d.initialize();a=a.then(function(){d.downloadFile(b.queryParams_.region,b.queryParams_.fileId,b.queryParams_.versionId).promise.then(function(a){b.downloadSuccess(a)}).thenCatch(function(){b.downloadError()})});
a=a.thenCatch(function(){c.ShowInfoDialog($t("Error"),$t("Failed to communicate with the model provider."))})};a.prototype.getWarehouseModelPageUrl=function(){var a="";this.provider_===g.ProviderKey.Sketchup_Warehouse&&(a=this.baseWarehouseUrl_+"/model.html?id="+this.queryParams_.fileId);return a};return a}();b.ModelLoader=a;var K=function(){return function(a){this.WAREHOUSE_MODEL_PARAM="WarehouseModelId";this.WAREHOUSE_COLLECTION_PARAM="WarehouseCollectionId";this.REGION_PARAM="region";this.FILE_ID_PARAM=
"fileId";this.VERSION_ID_PARAM="versionId";var b=new goog.Uri(window.location.href);b.hasQuery()&&(b=b.getQueryData(),a===g.ProviderKey.Google_Drive?(a=b.get("state"),goog.isDefAndNotNull(a)?(a=JSON.parse(a),goog.isDefAndNotNull(a)&&"open"===a.action&&goog.isDefAndNotNull(a.ids)&&goog.isDefAndNotNull(a.ids[0])?(this.region="",this.fileId=a.ids[0],this.hasExpectedParams=!0):this.hasExpectedParams=!1):this.hasExpectedParams=!1):a===g.ProviderKey.Sketchup_Warehouse?(this.fileId=b.get(this.WAREHOUSE_MODEL_PARAM),
this.hasExpectedParams=goog.isDef(this.fileId),this.region=""):a===g.ProviderKey.Tekla_Warehouse?(this.collectionId=b.get(this.WAREHOUSE_COLLECTION_PARAM),this.hasExpectedParams=goog.isDef(this.collectionId),this.region=""):a===g.ProviderKey.Trimble_Connect&&(this.region=b.get(this.REGION_PARAM),this.fileId=b.get(this.FILE_ID_PARAM),a=b.get(this.VERSION_ID_PARAM),this.versionId="undefined"===a?void 0:a,this.hasExpectedParams=goog.isDef(this.region)&&goog.isDef(this.fileId)))}}();b.ModelLoaderQueryParams=
K});
define("EditModelBehavior","require exports Bindings/index Delay DialogPrompts FileManager FilePickerUtils FileUtils leftsidebar/Sidebar ModelDownloader ModelStorageProvider ModelStorageProviderFactory ModelUtils ProgramMode Uuid ViewerModelLoader".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.providerKey_=L.defaultProviderKey;goog.asserts.assert(goog.isDef(this.providerKey_))}a.isApplicable=function(){if("/edit"===goog.string.path.dirname(W.urlPath)){var a=
W.parseProviderKey();return goog.isDef(a)}return!1};a.prototype.startup=function(){this.loadRemoteModel();return goog.Promise.resolve()};a.prototype.loadRemoteModel=function(){var a=this,b=new ga.ModelLoaderQueryParams(this.providerKey_);if(b.hasExpectedParams){var c=L.Providers[this.providerKey_];c.initialize().then(function(){return c.getFilePermission(b.region,b.fileId)}).then(function(d){switch(d){case K.Permission.WRITE:a.locateAndLoadModel(c,b);break;case K.Permission.READ_ONLY:a.openReadOnlyModel(c,
b);break;default:goog.asserts.assert(!1,"Unexpected edit model permission.")}}).thenCatch(function(a){e.ShowInfoDialog($t("Error"),$t("Failed to communicate with the model provider."))})}else e.ShowInfoDialog($t("Error"),$t("Invalid or missing arguments."))};a.prototype.openReadOnlyModel=function(a,b){var f,g,m,y;a.getFileDetails(b.region,b.fileId).then(function(a){g=a.size;y=e.ShowProgressDialog($t("Loading..."),g,!1);m=R.createCopyTitle(a.name)}).then(function(){var e=a.downloadFile(b.region,b.fileId,
b.versionId,function(a){y.onProgress(a)});e.promise.then(function(a){f=goog.string.path.join(h.TEMP_DIR,b.fileId+"-"+la.create());f=c.FixPathString(f);d.default(function(){h.SaveFileFromBuffer(a,f);R.OpenReadOnlyModel(f,m)},0)});return e.promise}).thenCatch(function(a){e.ShowInfoDialog($t("Error"),$t("Failed to communicate with the model provider.")+"\n"+$t("You may not have permission to access this model."))}).thenAlways(function(){goog.isDefAndNotNull(y)&&y.close()})};a.prototype.locateAndLoadModel=
function(a,b){var c=this,d,h=a.getFileDetails(b.region,b.fileId).then(function(a){d=a;goog.isDefAndNotNull(b.versionId)&&(d.versionId=b.versionId)}),L=g.getOfflineModelPath(this.providerKey_),h=h.then(function(){m.Sidebar.getInstance().setStartupFolderForProvider(c.providerKey_,b.region,d.parentFolderId)}).then(function(){return f.FileManager.mountAndReadOfflineDirectory()}).then(function(){return f.FileManager.getInstance().getLocalFileViewsInFolder(L,d.parentFolderId)}),h=h.then(function(b){var e=
[g.convertFolderItemToFileItemView(d)];b=g.combineFileViewsForFolder(b,e,a.requiresUniqueFileNames()).find(function(a){return a.remoteId===d.id});if(goog.isDefAndNotNull(b))g.setFolderItemFileSystemName(d,b),(new y.default(c.providerKey_)).downloadAndOpenModel(b,d,L);else throw Error();}),h=h.thenCatch(function(a){e.ShowInfoDialog($t("Error"),$t("Failed to locate the requested model."))})};return a}();b.default=a});
define("EntitlementsEventsHandler",["require","exports","Entitlements","Look","UserTracking"],function(a,b,c,d,e){function f(a){d.error($t("Your subscription to SketchUp Shop has expired."),60,[{text:$t("Renew Subscription"),action:function(){return c.upgrade(e.UpsellTriggers.RENEW)}}])}Object.defineProperty(b,"__esModule",{value:!0});var g=!1;b.init=function(){g||(c.activationEvent.listen(function(a){switch(a.type){case c.ActivationEventType.ActivationExpired:f(a.activation)}}),g=!0)}});
define("EulaHandler","require exports CookieManager Cookies ProgramMode DialogPrompts EntitlementsFeatures ApplicationFeatures".split(" "),function(a,b,c,d,e,f,g,h){function m(){return g.canAccess(h.default.AdvancedFeatures)?d.SHOP_EULA.name:d.FREE_EULA.name}Object.defineProperty(b,"__esModule",{value:!0});b.check=function(){return(new y).checkEulaStatus()};var y=function(){function a(){}a.prototype.checkEulaStatus=function(){return this.maybeShowDialog()};a.prototype.maybeShowDialog=function(){var a=
this;return this.fetchEulaStatus().then(function(b){return b?Promise.resolve():a.showDialog()})};a.prototype.fetchEulaStatus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){return[2,c.default.getInstance().containsKey(m())]})})};a.prototype.showDialog=function(){var a=this;this.dialog_=new goog.ui.Dialog(null);this.dialog_.setDisposeOnHide(!0);this.dialog_.setTitle($t("Before you start"));this.dialog_.setHasTitleCloseButton(!1);this.dialog_.setButtonSet(goog.ui.Dialog.ButtonSet.createOk());
var b=this.dialog_.getButtonElement().getElementsByTagName("button")[0];goog.dom.classlist.add(b,"goog-buttonset-one-button");var b=goog.soy.renderAsFragment(SketchUpTemplates.eula,{eulaUrl:e.currentProgramMode.eulaUrl()}),c=this.dialog_.getContentElement();c.appendChild(b);this.dialog_.setVisible(!0);this.dialog_.setBackgroundElementOpacity(.7);this.dialog_.setEscapeToCancel(!1);this.checkbox_=c.querySelector("input");this.checkbox_.addEventListener("change",this.handleCheckboxChange.bind(this));
f.SetDefaultButtonEnabled(this.dialog_,!1);return new Promise(function(b){goog.events.listen(a.dialog_,goog.ui.Dialog.EventType.SELECT,function(){a.setAgreementsChecked(m());b()})})};a.prototype.setAgreementsChecked=function(a){c.default.getInstance().set(a,"1",d.DEFAULT_EULA_AGE)};a.prototype.handleCheckboxChange=function(a){this.checkbox_.checked?f.SetDefaultButtonEnabled(this.dialog_,!0):f.SetDefaultButtonEnabled(this.dialog_,!1)};return a}();b.currentTosCookieName=m});
define("ImagePreloader",["require","exports","Cursor"],function(a,b,c){function d(a){var b=goog.dom.createDom("IMG");b.src=a;document.body.appendChild(b);b.style.display="none"}Object.defineProperty(b,"__esModule",{value:!0});b.preloadImages=function(){d("/static/images/web/tb_fail.svg");d("/static/images/web/loading.gif");c.getAllCursorPaths().forEach(d)}});
define("MouseHandler",["require","exports","Bindings/index","EnvironmentSettings"],function(a,b,c,d){function e(a){goog.array.contains(L,a.target)&&(Browser.calculateMouseEvent(a),c.MouseMoveHandler(Browser.mouseX,Browser.mouseY))}function f(a){Browser.calculateMouseEvent(a);c.MouseButtonHandler(a.button,c.MouseStates.MOUSE_DOUBLE_CLICK,Browser.mouseX,Browser.mouseY)}function g(a){2!=a.detail&&(1==a.button&&a.preventDefault(),K=!0,c.GetCanvas().focus(),Browser.calculateMouseEvent(a),c.MouseButtonHandler(a.button,
c.MouseStates.MOUSE_DOWN,Browser.mouseX,Browser.mouseY),a.preventDefault())}function h(a){2!=a.detail&&(K=!1,Browser.calculateMouseEvent(a),c.MouseButtonHandler(a.button,c.MouseStates.MOUSE_UP,Browser.mouseX,Browser.mouseY))}function m(a){if(!a.ctrlKey){Browser.calculateMouseEvent(a);var b=window.event||a,d=-Browser.getMouseWheelDelta(a);0==d&&b.shiftKey&&0!=b.deltaX&&(d=-b.deltaX);d=0==d?0:0<d?Math.max(d,1):Math.min(d,-1);b=3;0>d&&(b=4);a.preventDefault();c.MouseButtonHandler(b,c.MouseStates.MOUSE_DOWN,
Browser.mouseX,Browser.mouseY)}}function y(a){c.OnMouseEnteredCanvas()}Object.defineProperty(b,"__esModule",{value:!0});var K,L=[];b.isDragActive=function(){return K};b.setupMouseEvents=function(){var a=Module.canvas;a.addEventListener(goog.events.EventType.MOUSEDOWN,g,!0);a.addEventListener(goog.events.EventType.DBLCLICK,f,!0);a.addEventListener(goog.events.EventType.MOUSEENTER,y,!0);a.addEventListener(goog.events.EventType.WHEEL,m,!0);document.addEventListener(goog.events.EventType.MOUSEUP,h);document.addEventListener(goog.events.EventType.MOUSEMOVE,
e);L.push(Module.canvas);L.push(document.querySelector(".top-bar-container"));L.push(document.querySelector(".bottom-bar-container .measure-bar-container"));L.push(document.querySelector(".bottom-bar-container #prompt"));document.addEventListener(goog.events.EventType.CONTEXTMENU,function(a){d.IsTest()||a.preventDefault()})}});
define("Keyboard",["require","exports","Bindings/index","MouseHandler","ProgramMode"],function(a,b,c,d,e){function f(){var a=document.activeElement;if(!a||"INPUT"!=a.tagName&&"TEXTAREA"!=a.tagName)a:{for(var a=document.querySelectorAll(".goog-modalpopup-bg"),b=0;b<a.length;b++)if("none"!==a[b].style.display){a=!0;break a}a=null!==document.querySelector(".modal-dialog-bg")?!0:!1}else a=!0;return a}Object.defineProperty(b,"__esModule",{value:!0});b.setupKeyboardEvents=function(){document.body.addEventListener("mouseleave",
function(a){if(a.target==document.body&&!d.isDragActive()){a=["ctrl","command","shift","alt"];for(var b=0;b<a.length;++b)c.OnModifierKey(a[b],!1)}},!0);document.addEventListener("keydown",function(a){if(!f()){var b;b=a.metaKey;var d=a.ctrlKey,y=a.shiftKey,K=a.altKey;if(b||d||y||K)b&&c.OnModifierKey("command",!0),d&&c.OnModifierKey("ctrl",!0),y&&c.OnModifierKey("shift",!0),K&&c.OnModifierKey("alt",!0);b=a.keyCode;if(96<=b&&105>=b)b-=48;else if(106<=b&&111>=b)b=b-106+42;else{d=b;switch(b){case 8:d=
c.KeyCodes.VK_BACK;break;case 46:d=c.KeyCodes.VK_DELETE;break;case 187:d=c.KeyCodes.VK_OEM_PLUS;break;case 173:case 189:d=c.KeyCodes.VK_OEM_MINUS;break;case 37:d=c.KeyCodes.VK_LEFT;break;case 38:d=c.KeyCodes.VK_UP;break;case 39:d=c.KeyCodes.VK_RIGHT;break;case 40:d=c.KeyCodes.VK_DOWN;break;case 33:d=c.KeyCodes.VK_PAGE_UP;break;case 34:d=c.KeyCodes.VK_PAGE_DOWN;break;case 36:d=c.KeyCodes.VK_HOME;break;case 35:d=c.KeyCodes.VK_END;break;case 45:d=c.KeyCodes.VK_INSERT}b=d}if(e.currentProgramMode.isKeyCodeApplicable(b)){a:{switch(b){case c.KeyCodes.VK_LEFT:case c.KeyCodes.VK_UP:case c.KeyCodes.VK_RIGHT:case c.KeyCodes.VK_DOWN:case c.KeyCodes.VK_PAGE_UP:case c.KeyCodes.VK_PAGE_DOWN:case c.KeyCodes.VK_HOME:case c.KeyCodes.VK_END:case c.KeyCodes.VK_INSERT:case c.KeyCodes.VK_BACK:case c.KeyCodes.VK_OEM_PLUS:case c.KeyCodes.VK_OEM_MINUS:case 13:case 27:d=
!0;break a}d=!1}if(d||c.KeyWillInvokeShortcut(b))c.OnKey(b),a.preventDefault()}else a.preventDefault()}},!0);document.addEventListener("keypress",function(a){if(!f()){var b=a.charCode;b&&(e.currentProgramMode.isKeyCodeApplicable(b)?c.OnKey(b)&&a.preventDefault():a.preventDefault())}},!0);document.addEventListener("keyup",function(a){var b=91==a.keyCode||93==a.keyCode||224==a.keyCode,d=17==a.keyCode,e=16==a.keyCode;a=18==a.keyCode;if(b||d||e||a)b&&c.OnModifierKey("command",!1),d&&c.OnModifierKey("ctrl",
!1),e&&c.OnModifierKey("shift",!1),a&&c.OnModifierKey("alt",!1)})}});define("SvgConverter",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.ConvertExternalSvgsToInline=function(){var a=this;jQuery(".needs-convert-to-inline-svg").each(function(){var b=jQuery(a),e=b.attr("src");jQuery.get(e,function(a){if(a=jQuery(a).find("svg")){var c=a[0].querySelector("title");c&&goog.dom.removeNode(c);b.replaceWith(a)}},"xml")})}});
define("SvgManifest",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.default="/static/images/web/apple_logo.svg /static/images/web/lock_on.svg /static/images/web/mnu_connect.svg /static/images/web/mnu_drive_solid.svg /static/images/web/pnl_ei_align_to_screen.svg /static/images/web/pnl_ei_dim_bottom.svg /static/images/web/pnl_ei_dim_centered.svg /static/images/web/pnl_ei_dim_closed.svg /static/images/web/pnl_ei_dim_dot.svg /static/images/web/pnl_ei_dim_end.svg /static/images/web/pnl_ei_dim_none.svg /static/images/web/pnl_ei_dim_open.svg /static/images/web/pnl_ei_dim_slash.svg /static/images/web/pnl_ei_dim_start.svg /static/images/web/pnl_ei_dim_top.svg /static/images/web/pnl_ol_component.svg /static/images/web/pnl_ol_group.svg /static/images/web/pnl_ol_model_root.svg /static/images/web/pnl_ol_section_plane_active.svg /static/images/web/pnl_scn_view_back.svg /static/images/web/pnl_scn_view_front.svg /static/images/web/pnl_scn_view_iso_back_left.svg /static/images/web/pnl_scn_view_iso_back_right.svg /static/images/web/pnl_scn_view_iso_front_left.svg /static/images/web/pnl_scn_view_iso_front_right.svg /static/images/web/pnl_scn_view_left.svg /static/images/web/pnl_scn_view_right.svg /static/images/web/pnl_scn_view_top.svg /static/images/web/srt_az.svg /static/images/web/srt_za.svg /static/images/web/stb_language.svg /static/images/web/tb_download.svg /static/images/web/tb_insert.svg /static/images/web/tb_modelinfo.svg /static/images/web/tb_right_arrow.svg /static/images/web/u_device.svg /static/images/web/u_edit.svg /static/images/web/u_link.svg /static/images/web/u_unlink.svg /static/images/web/wi_chevron.svg /static/images/web/wi_circle.svg /static/images/web/wi_close.svg /static/images/web/wi_Component.svg /static/images/web/wi_delete.svg /static/images/web/wi_display.svg /static/images/web/wi_EntityInfo.svg /static/images/web/wi_Instructor.svg /static/images/web/wi_Layers.svg /static/images/web/wi_Materials.svg /static/images/web/wi_minus.svg /static/images/web/wi_Outliner.svg /static/images/web/wi_pin.svg /static/images/web/wi_play.svg /static/images/web/wi_Scenes.svg /static/images/web/wi_Styles.svg /static/images/web/windows_logo.svg".split(" ")});
define("SvgLoader",["require","exports","Repromise","SvgManifest","XhrUtils"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.loadSvgs=function(){var a=document.createElement("div");a.id="svg-assets";a.style.display="none";d.default.forEach(function(b){(new c.default(function(){return e.doRequest(b).promise})).promise().then(function(b){a.innerHTML+=b}).thenCatch(function(a){console.error(a)})});document.body.appendChild(a)}});
define("StandardMode","require exports ApplicationFeatures Bindings/index BookmarkNotification BottomBar BrowserManager Bulletin Cookies CookieConsent CookieManager CreateModelBehavior DefaultStartupBehavior EditModelBehavior Entitlements EntitlementsEventsHandler EntitlementsFeatures EulaHandler FeatureToggle HomebarView ImagePreloader Keyboard leftsidebar/Sidebar UserTracking Login Look MobileHandler ModelingToolbarManager ModelStorageProviderFactory ModelStorageProviderFactory ModelUtils MouseHandler Onboarding ProgramMode StartupScreen SvgConverter SvgLoader TooltipManager".split(" "),function(a,
b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg,zh,Ch,Ah,Bh,Eh,yh,Fh,Gh,Dh,Hh,Rh,Ih,Jh,Kh,Lh,Sh,Mh,Th,Zh,Ph){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.appFeaturesForProgramMode_=[];zh.default.isFeatureEnabled("pro")&&(this.appFeaturesForProgramMode_=[c.default.AdvancedFeatures,c.default.ExportFile,c.default.ImportFile,c.default.MaterialEditing,c.default.Outliner,c.default.SolidTools,c.default.RemoveWatermark]);var b=Sh.parseProviderKey();goog.isDefAndNotNull(b)||(b=Ih.ProviderKey.Trimble_Connect);
Rh.setDefaultProviderKey(b)}a.prototype.getStorageProviderIconId=function(){return"mnu_connect"};a.prototype.preMainInit=function(){return this.initEntitlements()};a.prototype.postMainInit=function(){var a=this;this.isEdu()||yh.initialize();this.initializeUI();Mh.endLoadingAnimation();var b=function(a){a.keyCode===goog.events.KeyCodes.ESC&&Lh.cancel()};document.addEventListener("keydown",b);Lh.startOnce().then(function(){return a.requireContracts()?y.checkAndShowConsent().then(function(){return Mg.check()}):
null}).then(function(){var a=m.RAN_BEFORE;try{K.default.getInstance().set(a.name,a.value,a.maxAge,"/",".sketchup.com")}catch(b){console.warn('Failed to set "su_web_run" cookie!'),console.warn(b)}}).then(function(){return a.getStartupBehavior().startup()}).then(function(){h.getRelevantNotifications().then(function(a){a.forEach(function(a){a.affects===h.Behavior.Application&&Gh.info(a.message,30)})}).then(function(){a.isEdu()||e.default()})}).thenCatch(function(a){console.warn("Program Mode Error:",
a.toString())}).thenAlways(function(){document.removeEventListener("keydown",b)});return goog.Promise.resolve()};a.prototype.signInUser=function(){return Fh.signInUser()};a.prototype.signOutUser=function(){return Fh.signOutUser().then(function(){})};a.prototype.requireContracts=function(){return!0};a.prototype.allows3DWUpload=function(){return!0};a.prototype.eulaUrl=function(){return"/tos.html"};a.prototype.startupVideoUrl=function(){return"/static/images/web/sketchupfree.html"};a.prototype.isViewer=
function(){return!1};a.prototype.isEdu=function(){return!1};a.prototype.handlesActiveToolChange=function(){return!0};a.prototype.handlesEraseAll=function(){return!0};a.prototype.isKeyCodeApplicable=function(a){return!0};a.prototype.runCommandAfterOpeningModel=function(){};a.prototype.canAutoSave=function(){return!0};a.prototype.handlesPageUnload=function(){return!0};a.prototype.uploadsModelsAfterSave=function(){return!0};a.prototype.fallbackOnGraphicsFailure=function(){};a.prototype.handlesContextMenus=
function(){return!0};a.prototype.requiresGoogleAuthentication=function(){return!1};a.prototype.canSignOut=function(){return!d.IsSaveNeeded()};a.prototype.getLocalResourcesSubdirectory=function(){return"default"};a.prototype.getProgramTitle=function(){return"SketchUp"};a.prototype.featureIsAvailable=function(a){return-1<this.appFeaturesForProgramMode_.indexOf(a)};a.prototype.initializeUI=function(){Ch.HomebarView.initialize();f.BottomBar.initialize();Hh.default.getInstance().activeToolChanged(d.CommandIds.ACTIVATE_SELECTION);
g.default.getInstance().render();Jh.UpdateModelTitleUI();Th.ConvertExternalSvgsToInline();Eh.Sidebar.getInstance();Kh.setupMouseEvents();Dh.setupMobile();Bh.setupKeyboardEvents();Ph.default.getInstance();Ph.default.initializeIconTooltips();Ah.preloadImages();Zh.loadSvgs();var a=xh.canAccess(c.default.AdvancedFeatures);this.initializeAdvancedUI(a)};a.prototype.initializeAdvancedUI=function(a){if(zh.default.isFeatureEnabled("pro")){var b=document.querySelector(".upgrade-button-canvas");a?goog.isDefAndNotNull(b)&&
goog.dom.removeNode(b):goog.isDefAndNotNull(b)||(a={buttonText:$t("Upgrade Now"),className:"upgrade-button-canvas"},b=goog.soy.renderAsFragment(SketchUpTemplates.upgradeButton,a),document.body.appendChild(b),b.addEventListener("click",function(){la.upgrade(yh.UpsellTriggers.UPGRADE_CANVAS)}))}};a.prototype.initEntitlements=function(){ga.init();return la.init()};a.prototype.getStartupBehavior=function(){return W.default.isApplicable()?new W.default:L.default.isApplicable()?new L.default:new R.default};
return a}();b.default=a});
define("ViewerSidebar",["require","exports","Bindings/index","SceneBrowser"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){var b=this;document.querySelector(".hide-sidebar-tab").addEventListener("click",function(){b.operateSceneTool()});document.querySelector(".scenes-tab").addEventListener("click",function(){b.operateSceneTool()});document.querySelector(".orbit-tab").addEventListener("click",function(){b.setSidebarCommand(c.CommandIds.ACTIVATE_ORBIT,!0)});
document.querySelector(".pan-tab").addEventListener("click",function(){b.setSidebarCommand(c.CommandIds.ACTIVATE_PAN,!0)});document.querySelector(".zoom-tab").addEventListener("click",function(){b.setSidebarCommand(c.CommandIds.ACTIVATE_ZOOM,!0)});document.querySelector(".zoomextents-tab").addEventListener("click",function(){b.setSidebarCommand(c.CommandIds.ACTIVATE_ZOOM_EXTENTS,!0)});document.querySelector(".right-viewbar-expander").addEventListener("click",function(){b.showHideSidebar()});document.addEventListener("keyup",
function(b){b=c.GetActiveToolId();a.staticInstance_.setSidebarCommand(b,!1)});this.sidebarContainer_=document.querySelector(".right-viewbar-container");this.hideSidebarButton_=document.querySelector(".hide-sidebar-tab");this.rightViewbarContainer_=document.querySelector(".right-viewbar");this.rightViewbarChevron_=document.querySelector(".right-viewbar-expand-chevron");var g=d.default.getInstance();this.sidebarContainer_.appendChild(g.render());g.setContainerInteractions({onActiveChange:function(){},
onExpandedChange:function(){},onOpenChange:function(){},onViewportChange:function(){},isVisible:function(){return!b.rightViewbarContainer_.classList.contains("right-viewbar-hidden")},getViewportHeight:function(){return b.sidebarContainer_.offsetHeight},getViewportTop:function(){return b.sidebarContainer_.scrollTop},scrollTo:function(){},showSlideout:function(){return!1},closeSlideout:function(){}});this.TOOL_GROUP_SELECTED="tool-group-active-tool-selected"}a.prototype.showHideSidebar=function(){this.rightViewbarContainer_.classList.toggle("right-viewbar-hidden")?
(this.rightViewbarContainer_.style.transform="translateX(42px)",this.rightViewbarChevron_.src="/static/images/web/wi_chevron_left.svg"):(this.rightViewbarContainer_.style.transform="translateX(0px)",this.rightViewbarChevron_.src="/static/images/web/wi_chevron_right.svg")};a.prototype.setSidebarCommand=function(b,d){var h;switch(b){case c.CommandIds.ACTIVATE_ORBIT:a.staticInstance_.removeCurrentCommandHighlight();h=document.querySelector(".orbit-tab");break;case c.CommandIds.ACTIVATE_PAN:a.staticInstance_.removeCurrentCommandHighlight();
h=document.querySelector(".pan-tab");break;case c.CommandIds.ACTIVATE_ZOOM:a.staticInstance_.removeCurrentCommandHighlight(),h=document.querySelector(".zoom-tab")}h&&h.classList.add(this.TOOL_GROUP_SELECTED);d&&c.RunCommand(b)};a.prototype.removeCurrentCommandHighlight=function(){document.querySelector("."+this.TOOL_GROUP_SELECTED).classList.remove(this.TOOL_GROUP_SELECTED)};a.prototype.operateSceneTool=function(){var a=document.querySelector(".right-viewbar-container"),b=document.querySelector(".right-viewbar-expander");
if(a&&!a.classList.toggle("invisible")){this.rightViewbarContainer_.classList.add("right-expanded-viewbar");this.hideSidebarButton_.classList.remove("invisible");var c=d.default.getInstance();c.renderContents().then(function(){return c.show()});b.classList.add("invisible")}else this.rightViewbarContainer_.classList.remove("right-expanded-viewbar"),this.hideSidebarButton_.classList.add("invisible"),b.classList.remove("invisible")};a.getInstance=function(){a.staticInstance_||(a.staticInstance_=new a);
return a.staticInstance_};return a}();b.default=a});
define("ViewerMode","require exports Bindings/index Keyboard ModelStorageProviderFactory ModelStorageProviderFactory MouseHandler ProgramMode SvgLoader ViewerModelLoader ViewerSidebar".split(" "),function(a,b,c,d,e,f,g,h,m,y,K){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.providerKey_=void 0;this.FAILURE_URL_PARAM="failureURL";this.providerKey_=h.parseProviderKey();goog.asserts.assert(goog.isDef(this.providerKey_));e.setDefaultProviderKey(this.providerKey_)}a.isMode=
function(){if("/viewer"===goog.string.path.dirname(h.urlPath)){var a=h.parseProviderKey();return goog.isDef(a)}return!1};a.prototype.preMainInit=function(){return Promise.resolve()};a.prototype.postMainInit=function(){g.setupMouseEvents();d.setupKeyboardEvents();document.body.classList.add("viewer");m.loadSvgs();var b=goog.soy.renderAsFragment(SketchUpTemplates.fullscreen,{});document.body.appendChild(b);b.addEventListener("click",function(b){a.RequestFullScreen(b)});b=goog.soy.renderAsFragment(SketchUpTemplates.viewer,
{});document.body.appendChild(b);b=new y.ModelLoader(this.providerKey_);b.loadAndOpenModel();K.default.getInstance();this.providerKey_===f.ProviderKey.Sketchup_Warehouse&&(this.IsRunningInIframeOnSketchUpSite()||this.ShowWarehouseWatermark(b.getWarehouseModelPageUrl()));return goog.Promise.resolve()};a.prototype.getStorageProviderIconId=function(){goog.asserts.assert(!1);return""};a.prototype.signInUser=function(){goog.asserts.assert(!1);return goog.Promise.reject()};a.prototype.signOutUser=function(){goog.asserts.assert(!1,
"Tried to sign user out in viewer mode.");return goog.Promise.reject()};a.prototype.allows3DWUpload=function(){return!1};a.prototype.eulaUrl=function(){return"/tos.html"};a.prototype.startupVideoUrl=function(){};a.prototype.isViewer=function(){return!0};a.prototype.isEdu=function(){return!1};a.prototype.handlesActiveToolChange=function(){return!1};a.prototype.handlesEraseAll=function(){return!1};a.prototype.isKeyCodeApplicable=function(a){return!Module.IsNotViewerCommand(a)};a.prototype.runCommandAfterOpeningModel=
function(){c.RunCommand(c.CommandIds.ACTIVATE_ORBIT)};a.prototype.canAutoSave=function(){return!1};a.prototype.handlesPageUnload=function(){return!1};a.prototype.uploadsModelsAfterSave=function(){return!1};a.prototype.getLocalResourcesSubdirectory=function(){return"default"};a.prototype.featureIsAvailable=function(a){return!1};a.prototype.IsRunningInIframeOnSketchUpSite=function(){var a=!1;try{document.domain="sketchup.com",window.top.document.location.href!==window.self.document.location.href&&(a=
!0)}catch(b){}return a};a.prototype.ShowWarehouseWatermark=function(a){var b=goog.soy.renderAsFragment(SketchUpTemplates.viewerWatermark,{});document.body.appendChild(b);b.addEventListener("click",function(){window.open(a,"_blank")})};a.RequestFullScreen=function(a){var b=document.body;b.requestFullscreen?document.fullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen():b.requestFullscreen():b.msRequestFullscreen?document.msFullscreenElement?
document.msExitFullscreen():b.msRequestFullscreen():b.mozRequestFullScreen?document.mozFullScreenElement?document.mozCancelFullScreen():b.mozRequestFullScreen():b.webkitRequestFullscreen&&(document.webkitFullscreenElement?document.webkitCancelFullScreen():b.webkitRequestFullscreen());a.stopPropagation()};a.prototype.fallbackOnGraphicsFailure=function(){var a=new goog.Uri(window.location.href);a.hasQuery()&&(a=a.getQueryData().get(this.FAILURE_URL_PARAM),goog.isDef(a)&&(a=WarehouseUtil.UrlGenerator.decodeCustomBase64(a),
goog.isDef(a)&&(window.location.href=a)))};a.prototype.handlesContextMenus=function(){return!1};a.prototype.requiresGoogleAuthentication=function(){return!1};a.prototype.canSignOut=function(){return!1};a.prototype.proFeaturesAvailable=function(){return!1};a.prototype.getProgramTitle=function(){return"SketchUp"};return a}();b.default=a});
define("ProgramMode","require exports EduMode ModelStorageProviderFactory StandardMode ViewerMode".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});b.currentProgramMode=null;b.currentUri=null;b.urlPath=null;b.initialize=function(){goog.asserts.assert(null===b.currentProgramMode);b.currentUri=new goog.Uri(window.location.href);b.urlPath=b.currentUri.getPath();"/"===b.urlPath.charAt(b.urlPath.length-1)&&(b.urlPath=b.urlPath.substr(0,b.urlPath.length-1));c.EduMode.isMode()?
b.currentProgramMode=new c.EduMode:f.default.isMode()?b.currentProgramMode=new f.default:b.currentProgramMode=new e.default;return b.currentProgramMode.preMainInit()};b.parseProviderKey=function(){switch(goog.string.path.baseName(b.urlPath)){case "connect":return d.ProviderKey.Trimble_Connect;case "3dw":return d.ProviderKey.Sketchup_Warehouse;case "tekla":return d.ProviderKey.Tekla_Warehouse;case "drive":return d.ProviderKey.Google_Drive}}});
define("EduWhitelist",["require","exports","EnvironmentSettings","XhrUtils"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});b.isAllowed=function(a){a=goog.string.path.join(c.Get().baseUrl,"api","edu","whitelist",a);return d.doRequest(a).promise.then(function(a){return JSON.parse(a).allowed}).thenCatch(function(a){console.log("Error Retrieving Domain Whitelist:",a);throw a;})}});
define("EduMode","require exports ApplicationFeatures ProgramMode StandardMode BusyScreen DialogPrompts EduWhitelist Entitlements GoogleAnalytics GoogleClient InstructorBrowser Log Login ModelStorageProviderFactory ModelStorageProviderFactory StartupScreen Uri".split(" "),function(a,b,c,d,e,f,g,h,m,y,K,L,R,W,la,ga,xh,Mg){Object.defineProperty(b,"__esModule",{value:!0});var zh=$t("Sign in with Google");a=function(a){function b(){var d=a.call(this)||this;d.appFeaturesForProgramMode_=[c.default.EduCurriculum];
la.setDefaultProviderKey(ga.ProviderKey.Google_Drive);return d}__extends(b,a);b.isMode=function(){return 0<=d.currentUri.getDomain().toLowerCase().indexOf("edu.sketchup.com")};b.prototype.getStorageProviderIconId=function(){return"mnu_drive_solid"};b.prototype.allows3DWUpload=function(){return!1};b.prototype.eulaUrl=function(){return"/edutos.html"};b.prototype.startupVideoUrl=function(){return"https://player.vimeo.com/video/229050271"};b.prototype.requiresGoogleAuthentication=function(){return!0};
b.prototype.isEdu=function(){return!0};b.prototype.initializeAdvancedUI=function(){};b.prototype.postMainInit=function(){var b=this;xh.endLoadingAnimation();return W.getInfo().then(function(a){var c={email:a.email,success:!1};return a.loggedIn?b.checkUserAuthorization(a).then(function(){}).thenCatch(function(d){c.reason=d.toString();y.fireEduAuthorizationEvent(c);return b.showUnauthorizedDialog(a.email).then(function(){W.signOutUser();return b.signInAndAuthorize(!1)})}):b.signInUser()}).thenCatch(function(){g.ShowInfoDialog($t("Sign-in Error"),
$t("An error occured while trying to sign you into Google. Make sure SketchUp is allowed to show pop-up windows and reload the web page."),void 0,!0)}).then(function(){return a.prototype.postMainInit.call(b)}).then(function(){return b.checkForLessonVideo()})};b.prototype.signInUser=function(){return this.signInAndAuthorize(!0)};b.prototype.signOutUser=function(){var b=this;return a.prototype.signOutUser.call(this).then(function(){return b.signInAndAuthorize(!0)}).then(function(){})};b.prototype.requireContracts=
function(){return!1};b.prototype.getLocalResourcesSubdirectory=function(){return"edu"};b.prototype.proFeaturesAvailable=function(){return!1};b.prototype.getProgramTitle=function(){return"SketchUp for Schools"};b.prototype.initEntitlements=function(){m.initForEduK12();return Promise.resolve()};b.prototype.signInAndAuthorize=function(a){var b=this;if(a){a=$t("Welcome to {PROGRAM_TITLE}!").replace("{PROGRAM_TITLE}","SketchUp for Schools");var c=$t("You must sign into a G Suite for Education Google account to continue. Make sure SketchUp is allowed to show pop-up windows.");
a=g.ShowInfoDialog(a,c,zh,!0,"google-signin")}else a=goog.Promise.resolve();return a.then(function(){return b.signIntoGoogle()}).then(function(a){var c={email:a.email,success:!1};return b.checkUserAuthorization(a).then(function(a){return a}).thenCatch(function(d){c.reason=d.toString();y.fireEduAuthorizationEvent(c);return b.showUnauthorizedDialog(a.email).then(function(){W.signOutUser();return b.signInAndAuthorize(!1)})})})};b.prototype.signIntoGoogle=function(){var a=this,b=new f.default;return W.signInUser().then(function(b){return b.loggedIn?
b:a.signIntoGoogle()}).thenAlways(function(){b.restore()}).thenCatch(function(){var b=SketchUpTemplates.eduSignInErrorDialog();return g.ShowInfoDialog($t("Sign-in Error"),b,zh,!0,"google-signin").then(function(){return a.signIntoGoogle()})})};b.prototype.checkUserAuthorization=function(a){var b=new f.default,c=Mg.getEmailDomain(a.email);return(new goog.Promise(function(b,c){a.email.match(".edu$")?c("The G Suite account appears to be a post-secondary account."):b()})).then(function(){return K.hasClassroomAccess()}).then(function(){return K.hasSketchUpAccess(a.email)}).then(function(){return a}).thenCatch(function(b){return h.isAllowed(c).then(function(d){if(d)return y.fireEduAuthorizationEvent({email:a.email,
reason:"EDU Whitelist",success:!0}),R.info(c+" is whitelisted"),a;throw b;})}).thenAlways(function(){return b.restore()})};b.prototype.showUnauthorizedDialog=function(a){a=goog.soy.renderAsFragment(SketchUpTemplates.eduAuthSpecDialog,{});return g.ShowInfoDialog($t("Are you in the right place?"),a.outerHTML,zh,!0,"google-signin")};b.prototype.checkForLessonVideo=function(){var a=(new goog.Uri(window.location.href)).getQueryData().get("lessonVideoId");if(goog.isDefAndNotNull(a)){var b=L.default.getInstance();
b.show().then(function(){b.playVideo(a,!1)})}};return b}(e.default);b.EduMode=a});
define("ResourceFetcher","require exports EduMode FileUtils GlobalConstants ProgramMode Repromise XhrUtils".split(" "),function(a,b,c,d,e,f,g,h){function m(a,b,c){var e=goog.string.path.join(a,b);return(new g.default(function(){return h.doRequest(e).promise})).promise().then(function(b){var e=JSON.parse(b).files,f=[];b=function(b){var c=goog.string.path.join(a,b);b=(new g.default(function(){return h.doRequest(c,"GET",void 0,void 0,void 0,!0).promise})).promise();f.push(b)};for(var m=0;m<e.length;m++)b(e[m]);
d.ensureDirExists(c);return goog.Promise.allSettled(f).then(function(a){for(var b=0;b<a.length;++b){var f=a[b];if(f.fulfilled){var g=goog.string.path.join(c,e[b]);d.SaveFileFromBuffer(f.value,g)}}})}).thenCatch(function(a){console.log("Failed fetching "+c);console.error(a)})}function y(a,b){var c="/static"+goog.string.path.join(b.replace(e.LOCAL_RESOURCES_PATH,e.URL_RESOURCES_PATH),a);FS.createPreloadedFile(b,a,c,!0,!0)}Object.defineProperty(b,"__esModule",{value:!0});var K=goog.Promise.resolve();
b.getFontsFetchPromise=function(){return K};b.initClientResources=function(){d.ensureDirExists(e.LOCAL_RESOURCES_PATH);var a=e.LOCAL_RESOURCES_PATH+"fonts";d.ensureDirExists(a);y("OpenSans-Regular.woff",a);K=m("/static"+e.URL_RESOURCES_PATH+"fonts","manifest.json",a);var a=SketchUp.getCurrentLanguage(),b=goog.string.path.join(e.LOCAL_RESOURCES_PATH,a);d.ensureDirExists(b);var g=f.currentProgramMode.getLocalResourcesSubdirectory(),g=goog.string.path.join(b,g);d.ensureDirExists(g);var h=goog.string.path.join(b,
"i18n.dat"),h=FS.open(h,"w");FS.close(h);SketchUp.isEnglish(a)||(y("Localizable.strings",b),y("Material.strings",b),y("Styles.strings",b));y("Temp01a - Simple.skp",g);a=c.EduMode.isMode()?"edu_sketchup_watermark.png":"my_sketchup_watermark.png";y(a,e.LOCAL_RESOURCES_PATH)}});
define("Add3DTextDialog","require exports knockout Bindings/index FontSelector GenericDialog ResourceFetcher ToolGroup".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});var m={faceName:void 0,text:"",alignment:d.TextAlignment.Left,isBold:!1,isItalic:!1,isFilled:!0,isExtruded:!0,worldSize:12,extrusion:6};a=function(a){function b(){return a.call(this,0,$t("3D Text"))||this}__extends(b,a);b.prototype.run=function(){var a=this,b=g.getFontsFetchPromise();goog.isDefAndNotNull(b)?
b.then(function(){return a.actuallyRun()}):goog.asserts.assert(!1)};b.prototype.actuallyRun=function(){var a=goog.soy.renderAsFragment(SketchUpTemplates.add3dTextDialog,{}),b=new y(m),c=new f.GenericDialog;c.show(a,$t("Create 3D Text"),b);var g=new e.FontSelector({defaultFont:{faceName:m.faceName||e.getFontFaces()[0],isBold:m.isBold,isItalic:m.isItalic,pointSize:void 0},includeSize:!1});a.querySelector(".font-selector-wrapper").appendChild(g.render());c.dialogClosed.then(function(){var a=g.getSelectedFont();
g.destroy();m={faceName:a.faceName,text:b.text(),alignment:d.TextAlignment.Left,isBold:a.isBold,isItalic:a.isItalic,isFilled:b.isFilled(),isExtruded:b.isExtruded(),worldSize:d.parseLength(b.height()),extrusion:d.parseLength(b.extrusion())};d.launch3DTextTool(m)}).thenCatch(function(){})};return b}(h.Tools.Command);b.Add3DTextCommand=a;var y=function(){function a(b){this.text=c.observable("");this.styleRegular=$t("Regular");this.styleItalic=$t("Italic");this.styleBold=$t("Bold");this.styleBoldItalic=
$t("Bold Italic");this.isFilled=c.observable(b.isFilled);this.isExtruded=c.observable(b.isExtruded);this.height=c.observable(d.lengthToString(b.worldSize));this.extrusion=c.observable(d.lengthToString(b.extrusion))}a.prototype.setHeight=function(){this.validateLength(this.height)};a.prototype.onTextFilled=function(){this.isFilled(!this.isFilled())};a.prototype.onTextExtruded=function(){this.isExtruded(!this.isExtruded())};a.prototype.setExtrusion=function(){this.validateLength(this.extrusion)};a.prototype.validateLength=
function(a){var b=d.parseLength(a());0>b&&(b=0);a(d.lengthToString(b))};return a}()});
define("CanvasMouseHandler",["require","exports","SketchUpEvent"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c.SketchUpEvents.Create(),e=c.SketchUpEvents.Create(),f=c.SketchUpEvents.Create(),g=document.body.querySelector("canvas");g.addEventListener("mousemove",function(a){d.trigger([a.clientX,a.clientY])});g.addEventListener("mouseenter",function(a){f.trigger()});g.addEventListener("mouseleave",function(a){e.trigger()});b.context=function(){return g};b.mouseMove=function(){return d};
b.mouseEnter=function(){return f};b.mouseLeave=function(){return e}});
define("DebuggingPage",["require","exports","DebugEnvironmentSettings","EnvironmentSettings"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.displayUserInfo();this.displayClientInfo()}a.prototype.displayUserInfo=function(){var a=this;this.getUserNameAndEmail().then(function(b){a.setInnerHTML("user-name",b.name);a.setInnerHTML("user-email",b.email)})};a.prototype.displayClientInfo=function(){var a=this;this.setInnerHTML("3dw-version",window.VERSION||
"Not Available.");this.setInnerHTML("user-agent",navigator.userAgent);this.setInnerHTML("webgl-enabled",c.isWebGLAvailable().toString());this.setInnerHTML("webgl-version",c.getWebGLVersion());this.setInnerHTML("webgl-max-varying-vectors",c.getMaxVaryingVectors());this.setInnerHTML("webasm-support",c.isWebAssemblySupported().toString());c.isIndexedDBSupported().then(function(){a.setInnerHTML("indexeddb-support","true")},function(){a.setInnerHTML("indexeddb-support","false")});this.setInnerHTML("file-api-enabled",
(!!window.FileReader).toString());var b=!!navigator.cookieEnabled;this.setInnerHTML("cookies-enabled",b.toString());b?this.setInnerHTML("cookies-values",document.cookie):this.setInnerHTML("cookies-values","n/a");b=c.parseMacOSXVersion();goog.isDefAndNotNull(b.major)?this.setInnerHTML("mac-version",b.major.toString()+"."+b.minor.toString()):this.setInnerHTML("mac-version","Nope.");b=goog.labs.userAgent.browser.getVersion();goog.string.isEmptySafe(b)&&(b="Not available.");this.setInnerHTML("browser-version",
b);b=c.parseDisplayInfo();this.setInnerHTML("display-values",b.vendor+" / "+b.renderer)};a.prototype.setInnerHTML=function(a,b){document.getElementById(a).innerHTML=b};a.prototype.getUserNameAndEmail=function(){var a={name:"",email:""},b={useLocalStorage:!1,baseUrl:d.Get3dWarehouseURL()};return(new warehouse.DataStore(b)).getUser("",!1).then(function(b){a.name=b.getDisplayName();a.email=b.getEmailAddress();return a}).thenCatch(function(b){a.name="Not logged in.";a.email="";return a})};return a}();
b.DebuggingPage=a});
define("RadialMenu","require exports knockout Bindings/index ToolBar ToolGroup".split(" "),function(a,b,c,d,e,f){Object.defineProperty(b,"__esModule",{value:!0});b.showStandardRadialMenu=function(a,b){var c=[f.Tools.makeToolData(d.CommandIds.EDIT_COPY,$t("Copy"),"/static/images/web/tb_copy.svg",!0),f.Tools.makeToolData(d.CommandIds.EDIT_PASTE,$t("Paste"),"/static/images/web/tb_paste.svg",!0),f.Tools.makeToolData(d.CommandIds.EDIT_PASTE_IN_PLACE,$t("Paste in place"),"/static/images/web/tb_paste_in_place.svg",!0),
f.Tools.makeToolData(d.CommandIds.EDIT_DELETE,$t("Delete"),"/static/images/web/wi_delete.svg",!0)],e=[f.Tools.makeToolData(d.CommandIds.EDIT_CUT,$t("Cut"),"/static/images/web/tb_cut.svg",!0)],h=goog.dom.createDom("DIV");h.style.position="absolute";h.style.top=a.y.toString()+"px";h.style.left=a.x.toString()+"px";goog.dom.append(goog.dom.getDocument().body,h);(new g(h,c,e)).render(b)};var g=function(){function a(b,c,d){this.container_=b;this.toolsRight_=c;this.toolsLeft_=d}a.prototype.render=function(a){(new h(this.container_,
this.toolsRight_,this.toolsLeft_)).render(a)};return a}(),h=function(){function a(b,c,d){this.container_=b;this.toolsRight_=c;this.toolsLeft_=d}a.prototype.render=function(a){var b=goog.soy.renderAsFragment(SketchUpTemplates.radialMenu,{});this.container_.appendChild(b);this.radialMenuViewModel_=new e.ToolbarViewModel(this.makeRadialMenuItemViewModels());c.applyBindings(this.radialMenuViewModel_,b);this.radialMenuViewModel_.isExpanded(a)};a.prototype.makeRadialMenuItemViewModels=function(){var a=
[];a.push(e.makeToolViewModel(this.toolsLeft_.shift()));for(var b=0,c=this.toolsRight_;b<c.length;b++){var d=c[b];a.push(e.makeToolViewModel(d))}b=0;for(c=this.toolsLeft_;b<c.length;b++)d=c[b],a.push(e.makeToolViewModel(d));return a};return a}()});
define("ReferenceModelUtils","require exports Bindings/index BusyScreen DialogPrompts FileUtils ModelStorageProviderFactory ModelStorageProviderFactory".split(" "),function(a,b,c,d,e,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});b.UpdateReferenceModels=function(){var a=new d.default,b=g.Providers[h.ProviderKey.Trimble_Connect],L=c.GetReferenceModelData(),R=b.initialize(),R=R.then(function(){for(var a=[],c,d=0;d<L.size();++d){c=L.get(d);var e=c.getProjectId();c.delete();c=b.getRegionForProject(e);
a.push(c)}return goog.Promise.all(a)}),W=[],R=R.then(function(a){a=W=a;for(var c=[],d=0;d<a.length;++d){var e=a[d],f=L.get(d),g=f.getId();f.delete();e=b.getLatestVersionId(e,g);c.push(e)}return goog.Promise.all(c)}),la=[],R=R.then(function(a){a=la=a;for(var c=W,d=[],e=0;e<a.length;++e){var f=a[e],g=L.get(e);if(g.getVersionId()!==f)var h=c[e],m=g.getId(),f=b.downloadFile(h,m,f).promise;else f=goog.Promise.resolve(null);d.push(f);g.delete()}return goog.Promise.all(d)}),R=R.then(function(a){for(var b=
la,d=m.NoneNeeded,g=c.CreateStringVectorInstance(),h=c.CreateConnectUtilsAttributeDataVectorInstance(),y=0;y<a.length;++y){var K=a[y];if(null!=K){var d=L.get(y),R=goog.string.path.join(f.TEMP_DIR,d.getName());f.SaveFileFromBuffer(K,R);g.push_back(R);K=c.CreateConnectUtilsAttributeDataInstance(d.getName(),d.getProjectId(),d.getId(),b[y],d.getParentId());h.push_back(K);K.delete();d.delete();d=m.AllSucceeded}}if(0<g.size())for(c.UpdateReferenceModels(g,h)||(d=m.SomeFailed),y=0;y<g.size();++y)f.DeleteFile(g.get(y));
g.delete();h.delete();a=d;a==m.AllSucceeded?e.ShowInfoDialog($t("Success"),$t("All reference models have been updated.")):a==m.NoneNeeded?e.ShowInfoDialog($t("Success"),$t("All reference models are already up to date.")):a==m.SomeFailed&&e.ShowInfoDialog($t("Error"),$t("Some reference models could not be updated."))}),R=R.thenCatch(function(a){e.ShowInfoDialog($t("Error"),$t("SketchUp has encountered an error while updating the reference models."))}),R=R.thenAlways(function(){L.delete();a.restore()})};
var m;(function(a){a[a.NoneNeeded=0]="NoneNeeded";a[a.AllSucceeded=1]="AllSucceeded";a[a.SomeFailed=2]="SomeFailed"})(m||(m={}))});define("api/Entity",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.core_=b}Object.defineProperty(a.prototype,"entityID",{get:function(){return Module.entityGetId(this.core_)},enumerable:!0,configurable:!0});return a}();b.Entity=a});
define("api/DrawingElement",["require","exports","api/Entity"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);return b}(c.Entity);b.DrawingElement=a});
define("api/Edge",["require","exports","api/DrawingElement"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){return a.call(this,c)||this}__extends(b,a);b.prototype.findFaces=function(){return Module.edgeFindFaces(this.core_)};Object.defineProperty(b.prototype,"curve",{get:function(){return Module.edgeGetCurve()},enumerable:!0,configurable:!0});return b}(c.DrawingElement);b.Edge=a});
define("api/Vertex",["require","exports","api/Entity"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){return a.call(this,c)||this}__extends(b,a);return b}(c.Entity);b.Vertex=a});
define("api/Curve",["require","exports","api/Edge","api/Entity","api/Vertex"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){return a.call(this,c)||this}__extends(b,a);Object.defineProperty(b.prototype,"vertices",{get:function(){for(var a=[],b=Module.curveGetVertices(this.core_),c=0;c<b.size();++c)a.push(new e.Vertex(b.get(c)));b.delete();return a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"edges",{get:function(){for(var a=
[],b=Module.curveGetEdges(this.core_),d=0;d<b.size();++d)a.push(new c.Edge(b.get(d)));b.delete();return a},enumerable:!0,configurable:!0});return b}(d.Entity);b.Curve=a});define("api/Face",["require","exports","api/DrawingElement"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){return a.call(this,c)||this}__extends(b,a);b.prototype.pushPull=function(a,b){void 0===b&&(b=!1);Module.facePushPull(this.core_,a,b)};return b}(c.DrawingElement);b.Face=a});
define("api/Geom",["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(b,c,d){this.x=b;this.y=c;this.z=d}a.prototype.toApiPoint=function(){return new Module.ApiPoint3d(this.x,this.y,this.z)};a.fromApiPoint=function(b){return new a(b.x,b.y,b.z)};return a}();b.Point3d=c;a=function(){function a(){this.minPoint_=new c(0,0,0);this.maxPoint_=new c(0,0,0)}a.prototype.addPoint=function(a){this.minPoint_.x=Math.min(this.minPoint_.x,a.x);this.minPoint_.y=
Math.min(this.minPoint_.y,a.y);this.minPoint_.z=Math.min(this.minPoint_.z,a.z);this.maxPoint_.x=Math.max(this.maxPoint_.x,a.x);this.maxPoint_.y=Math.max(this.maxPoint_.y,a.y);this.maxPoint_.z=Math.max(this.maxPoint_.z,a.z)};a.prototype.addPoints=function(a){for(var b=0;b<a.length;b++)this.addPoint(a[b])};Object.defineProperty(a.prototype,"min",{get:function(){return this.minPoint_},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"max",{get:function(){return this.maxPoint_},enumerable:!0,
configurable:!0});return a}();b.BoundingBox=a;(function(a){a.makePoint3dVec=function(a){for(var b=new Module.ApiPoint3dVector,c=0;c<a.length;c++)b.push_back(a[c].toApiPoint());return b}})(b.Impl||(b.Impl={}))});
define("api/Entities",["require","exports","api/Curve","api/Face","api/Geom"],function(a,b,c,d,e){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.core_=b}Object.defineProperty(a.prototype,"size",{get:function(){return this.core_.count()},enumerable:!0,configurable:!0});a.prototype.addEdges=function(a){a=e.Impl.makePoint3dVec(a);Module.entitiesAddEdges(this.core_,a);a.delete()};a.prototype.addCurve=function(a){a=e.Impl.makePoint3dVec(a);var b=Module.entitiesAddCurve(this.core_,
a);a.delete();return new c.Curve(b)};a.prototype.addFace=function(a){a=e.Impl.makePoint3dVec(a);var b=Module.entitiesAddFace(this.core_,a);a.delete();return new d.Face(b)};return a}();b.Entities=a});
define("api/View",["require","exports","api/Geom"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=null;(function(a){a[a.Points=0]="Points";a[a.Lines=1]="Lines";a[a.LineLoop=2]="LineLoop";a[a.LineStrip=3]="LineStrip";a[a.Triangles=4]="Triangles";a[a.TriangleStrip=5]="TriangleStrip";a[a.TriangleFan=6]="TriangleFan";a[a.Quad=7]="Quad";a[a.QuadStrip=8]="QuadStrip";a[a.Polygon=9]="Polygon"})(b.DrawingMode||(b.DrawingMode={}));a=function(){function a(b){this.core_=b}a.getActive=
function(){null===d&&(d=new a(Module.viewGetActive()));return d};Object.defineProperty(a.prototype,"coreView",{get:function(){return this.core_},enumerable:!0,configurable:!0});a.prototype.invalidate=function(){Module.viewInvalidate(this.core_)};Object.defineProperty(a.prototype,"tooltip",{set:function(a){Module.viewSetTooltip(this.core_,a)},enumerable:!0,configurable:!0});a.prototype.setDrawingColor=function(a,b,c,d){Module.viewSetColor(this.core_,a,b,c,d)};a.prototype.setColorFromLine=function(a,
b){Module.viewSetColorFromLine(this.core_,a.coreInputPoint,b.coreInputPoint)};a.prototype.draw=function(a,b){b=c.Impl.makePoint3dVec(b);Module.viewDraw(this.core_,a,b);b.delete()};return a}();b.View=a});
define("api/InputPoint",["require","exports","api/Geom"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.core_=b;this.core_||(this.core_=new Module.ApiInputPoint)}a.prototype.release=function(){this.core_.delete();this.core_=null};Object.defineProperty(a.prototype,"coreInputPoint",{get:function(){return this.core_},enumerable:!0,configurable:!0});a.prototype.pick=function(a,b,c,d){d=d?d.core_:new Module.ApiInputPoint;return this.core_.pick(a.coreView,
b,c,d)};a.prototype.isValid=function(){return this.core_.isValid()};a.prototype.isEqualTo=function(a){return this.core_.isEqualTo(a.core_)};a.prototype.copyFrom=function(a){this.core_.copyFrom(a.core_)};a.prototype.hasDisplay=function(){return this.core_.hasDisplay()};a.prototype.draw=function(a){this.core_.draw(a.coreView)};Object.defineProperty(a.prototype,"position",{get:function(){return c.Point3d.fromApiPoint(this.core_.getPosition())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"tooltip",{get:function(){return this.core_.getTooltip()},enumerable:!0,configurable:!0});return a}();b.InputPoint=a});
define("api/Tool",["require","exports","api/Geom"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=1,e={};b.getTool=function(a){return e[a]};a=function(){function a(){this.id_=d++;e[this.id_]=this;this.core_=new Module.ApiTool(this.id_)}Object.defineProperty(a.prototype,"coreTool",{get:function(){return this.core_},enumerable:!0,configurable:!0});a.prototype.activate=function(){};a.prototype.deactivate=function(a){delete e[this.id_];this.core_=null};a.prototype.onCancel=function(a,
b){};a.prototype.onUserText=function(a,b){};a.prototype.onLButtonDown=function(a,b,c,d){};a.prototype.onLButtonUp=function(a,b,c,d){};a.prototype.onMouseMove=function(a,b,c,d){};a.prototype.getExtents=function(){return new c.BoundingBox};a.prototype.draw=function(a){};return a}();b.Tool=a});
define("api/JSBindingsAPI",["require","exports","api/Tool","api/View"],function(a,b,c,d){Object.defineProperty(b,"__esModule",{value:!0});b.toolActivate=function(a){c.getTool(a).activate()};b.toolDeactivate=function(a){c.getTool(a).deactivate(d.View.getActive())};b.toolOnCancel=function(a,b){c.getTool(a).onCancel(b,d.View.getActive())};b.toolOnUserText=function(a,b){c.getTool(a).onUserText(b,d.View.getActive())};b.toolOnLButtonDown=function(a,b,g,h){c.getTool(a).onLButtonDown(b,g,h,d.View.getActive())};
b.toolOnLButtonUp=function(a,b,g,h){c.getTool(a).onLButtonUp(b,g,h,d.View.getActive())};b.toolOnMouseMove=function(a,b,g,h){c.getTool(a).onMouseMove(b,g,h,d.View.getActive())};b.toolGetExtents=function(a){a=c.getTool(a);var b=a.getExtents(),d=b.min.toApiPoint(),b=b.max.toApiPoint();a.coreTool.setExtents(d,b);d.delete();b.delete()};b.toolDraw=function(a){c.getTool(a).draw(d.View.getActive())}});
define("api/UI",["require","exports","MenuManager"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=[];b.addCommand=function(a,b){d.push({title:a,handler:b})};b.messageBox=function(a){alert(a)};b.addCommandsToContextMenu=function(){var a=c.MenuManager.getInstance();a.addDefaultMenuItem(new c.MenuSeparator);for(var b=function(b){var d=new c.MenuCommand(b.title,0,0);d.commandFunction=function(){b.handler()};a.addDefaultMenuItem(d)},g=0;g<d.length;g++)b(d[g])}});
define("api/Manager",["require","exports","api/JSBindingsAPI","api/UI"],function(a,b,c,d){function e(){a(["extensions/bezier/Loader"],function(){d.addCommandsToContextMenu()},function(){})}Object.defineProperty(b,"__esModule",{value:!0});JSBindingsAPI=c;b.init=function(){requirejs.config({paths:{extensions:"//localhost:8000/extensions"}});e()};b.loadExtensions=e});
define("api/Model",["require","exports","api/Entities"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(b){this.core_=b}a.getActive=function(){return new a(Module.modelGetActive())};Object.defineProperty(a.prototype,"entities",{get:function(){return new c.Entities(Module.modelGetEntities(this.core_))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"activeEntities",{get:function(){return new c.Entities(Module.modelGetActiveEntities(this.core_))},
enumerable:!0,configurable:!0});a.prototype.startOperation=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=!1);Module.modelStartOperation(this.core_,a,b,c)};a.prototype.commitOperation=function(){Module.modelCommitOperation(this.core_)};a.prototype.selectTool=function(a){Module.modelSelectTool(this.core_,a.coreTool)};return a}();b.Model=a});
define("api/Sketchup",["require","exports","api/Model"],function(a,b,c){return new (function(){function a(){}Object.defineProperty(a.prototype,"activeModel",{get:function(){return c.Model.getActive()},enumerable:!0,configurable:!0});a.prototype.setStatusPrompt=function(a){Module.setStatusPrompt(a)};a.prototype.setVCBLabel=function(a){Module.setVCBLabel(a)};a.prototype.setVCBValue=function(a){Module.setVCBValue(a)};return a}())});
define("debug/MockWebEntityInfo",["require","exports","EntityType"],function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){}a.prototype.init=function(){return this.makeTestDataUrl().then(function(a){this.base64ImageData_=a},void 0,this)};a.prototype.getTitle=function(){return this.getInfoType()===c.EntityType.ComponentInstance?"Foo Title (1 in Model)":"Foo Title"};a.prototype.getInfoType=function(){return c.EntityType.Face};a.prototype.getName=function(){return"Foo Name"};
a.prototype.getIsVisible=function(){return!0};a.prototype.setIsVisible=function(a){};a.prototype.getLength=function(){return"Foo Length"};a.prototype.getAreaAsString=function(){return"14,91 m\u00b2"};a.prototype.getDefinition=function(){return"Foo Definition"};a.prototype.getCommonMaterial=function(){return{name:"Foo Material",thumbnail:this.base64ImageData_,hasNothingSelected:!1,hasNoCommonMaterial:!1,isSingleSelection:!0,hasNoMaterial:!1,canRemoveMaterial:!0,delete:function(){}}};a.prototype.getCommonBackMaterial=
function(){return this.getInfoType()===c.EntityType.Face?{name:"Foo Back Material",thumbnail:this.base64ImageData_,hasNothingSelected:!1,hasNoCommonMaterial:!1,isSingleSelection:!0,hasNoMaterial:!1,delete:function(){}}:null};a.prototype.getCommonLayers=function(){return[{name:"Foo Layer",thumbnail:"/static/images/web/wi_Layers.svg"},{name:"Foo Layer 2",thumbnail:"/static/images/web/wi_Layers.svg"}]};a.prototype.setName=function(){};a.prototype.setDefinition=function(){};a.prototype.makeTestDataUrl=
function(){return this.toDataUrlViaCanvas("/static/images/web/ei_multipleimages.svg")};a.prototype.toDataUrlViaCanvas=function(a){return new goog.Promise(function(b,c){var d=new Image;d.crossOrigin="Anonymous";d.onload=function(){var a=document.createElement("CANVAS"),c=a.getContext("2d");a.height=d.height;a.width=d.width;c.drawImage(d,0,0);a=a.toDataURL();a=a.match(/data:image\/png;base64,(.*)/)[1];b(a)};d.src=a},this)};return a}();b.MockWebEntityInfo=a});
 
var VERSION='2018-06-12--15-13-03--243c3cc'; 
